commit 970bd4ad52ca9c6a9fdf58805ab26755d76ccad8
Author: K.Kosako <kosako@sofnec.co.jp>
Date:   Thu Feb 22 16:33:06 2018 +0900

    fix case of no arguments in callout

diff --git a/src/regparse.c b/src/regparse.c
index f32e102..10d03ea 100644
--- a/src/regparse.c
+++ b/src/regparse.c
@@ -6653,9 +6653,6 @@ parse_callout_of_name(Node** np, int cterm, UChar** src, UChar* end, ScanEnv* en
     arg_num = parse_callout_args(')', &p, end, max_arg_num, types, vals, env);
     if (arg_num < 0) return arg_num;
 
-    if (arg_num > max_arg_num || arg_num < (max_arg_num - opt_arg_num))
-      return ONIGERR_INVALID_CALLOUT_ARG;
-
     if (PEND) return ONIGERR_END_PATTERN_IN_GROUP;
     PFETCH_S(c);
   }
@@ -6663,6 +6660,9 @@ parse_callout_of_name(Node** np, int cterm, UChar** src, UChar* end, ScanEnv* en
     arg_num = 0;
   }
 
+  if (arg_num > max_arg_num || arg_num < (max_arg_num - opt_arg_num))
+    return ONIGERR_INVALID_CALLOUT_ARG;
+
   if (c != cterm)
     return ONIGERR_INVALID_CALLOUT_PATTERN;
 

