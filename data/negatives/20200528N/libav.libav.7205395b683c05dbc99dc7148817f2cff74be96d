commit 7205395b683c05dbc99dc7148817f2cff74be96d
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Mon Mar 5 02:41:49 2007 +0000

    create codec_comment_header which looks more like what M$ creates, sane or not ...
    
    Originally committed as revision 8240 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/asf-enc.c b/libavformat/asf-enc.c
index fa17ebbc7..6c0ec59be 100644
--- a/libavformat/asf-enc.c
+++ b/libavformat/asf-enc.c
@@ -428,8 +428,17 @@ static int asf_write_header1(AVFormatContext *s, int64_t file_size, int64_t data
         enc = s->streams[n]->codec;
         p = avcodec_find_encoder(enc->codec_id);
 
-        put_le16(pb, asf->streams[n].num);
-        put_str16(pb, p ? p->name : enc->codec_name);
+        if(enc->codec_type == CODEC_TYPE_AUDIO)
+            put_le16(pb, 2);
+        else if(enc->codec_type == CODEC_TYPE_VIDEO)
+            put_le16(pb, 1);
+        else
+            put_le16(pb, -1);
+
+        if(enc->codec_id == CODEC_ID_WMAV2)
+            put_str16(pb, "Windows Media Audio V8");
+        else
+            put_str16(pb, p ? p->name : enc->codec_name);
         put_le16(pb, 0); /* no parameters */
 
 

