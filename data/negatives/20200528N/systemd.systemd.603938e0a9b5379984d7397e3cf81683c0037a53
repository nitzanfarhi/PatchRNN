commit 603938e0a9b5379984d7397e3cf81683c0037a53
Author: Lennart Poettering <lennart@poettering.net>
Date:   Tue Dec 17 03:14:20 2013 +0100

    activate: fix error checking on epoll_ctl()

diff --git a/src/activate/activate.c b/src/activate/activate.c
index d73c16e8a..cf545d61f 100644
--- a/src/activate/activate.c
+++ b/src/activate/activate.c
@@ -51,10 +51,12 @@ static int add_epoll(int epoll_fd, int fd) {
 
         ev.data.fd = fd;
         r = epoll_ctl(epoll_fd, EPOLL_CTL_ADD, fd, &ev);
-        if (r < 0)
-                log_error("Failed to add event on epoll fd:%d for fd:%d: %m",
-                          epoll_fd, fd);
-        return -errno;
+        if (r < 0) {
+                log_error("Failed to add event on epoll fd:%d for fd:%d: %m", epoll_fd, fd);
+                return -errno;
+        }
+
+        return 0;
 }
 
 static int make_socket_fd(const char* address, int flags) {

