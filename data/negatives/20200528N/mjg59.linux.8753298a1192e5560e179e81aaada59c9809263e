commit 8753298a1192e5560e179e81aaada59c9809263e
Author: Roger Quadros <ext-roger.quadros@nokia.com>
Date:   Mon Oct 26 16:49:38 2009 -0700

    omap_hsmmc: add missing probe handler hook
    
    The missing probe handler hook will never probe the driver. Add it back.
    Fixes broken MMC on OMAP.
    
    We use platform_driver_probe() API since omap_hsmmc is not a hot-pluggable
    device.
    
    Signed-off-by: Roger Quadros <ext-roger.quadros@nokia.com>
    Tested-by: Felipe Contreras <felipe.contreras@gmail.com>
    Tested-by: Tony Lindgren <tony@atomide.com>
    Cc: Jiri Kosina <jkosina@suse.cz>
    Cc: Felipe Contreras <felipe.contreras@gmail.com>
    Cc: Denis Karpov <ext-denis.2.karpov@nokia.com>
    Cc: Madhusudhan Chikkature <madhu.cr@ti.com>
    Cc: Greg KH <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/mmc/host/omap_hsmmc.c b/drivers/mmc/host/omap_hsmmc.c
index 4487cc097911..0aecaaebef3d 100644
--- a/drivers/mmc/host/omap_hsmmc.c
+++ b/drivers/mmc/host/omap_hsmmc.c
@@ -2013,7 +2013,7 @@ static struct platform_driver omap_hsmmc_driver = {
 static int __init omap_hsmmc_init(void)
 {
 	/* Register the MMC driver */
-	return platform_driver_register(&omap_hsmmc_driver);
+	return platform_driver_probe(&omap_hsmmc_driver, omap_hsmmc_probe);
 }
 
 static void __exit omap_hsmmc_cleanup(void)

