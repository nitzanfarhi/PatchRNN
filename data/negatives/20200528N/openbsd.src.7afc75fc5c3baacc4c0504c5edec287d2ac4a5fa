commit 7afc75fc5c3baacc4c0504c5edec287d2ac4a5fa
Author: cedric <cedric@openbsd.org>
Date:   Mon Dec 15 23:36:14 2003 +0000

    Set devclass to DV_IFNET for all USB network drivers.
    ok deraadt@ nate@

diff --git a/sys/dev/usb/if_aue.c b/sys/dev/usb/if_aue.c
index 2acf5fb505f..967321784fa 100644
--- a/sys/dev/usb/if_aue.c
+++ b/sys/dev/usb/if_aue.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: if_aue.c,v 1.31 2003/05/17 17:48:32 nate Exp $ */
+/*	$OpenBSD: if_aue.c,v 1.32 2003/12/15 23:36:14 cedric Exp $ */
 /*	$NetBSD: if_aue.c,v 1.82 2003/03/05 17:37:36 shiba Exp $	*/
 /*
  * Copyright (c) 1997, 1998, 1999, 2000
@@ -226,7 +226,7 @@ Static const struct aue_type aue_devs[] = {
 };
 #define aue_lookup(v, p) ((struct aue_type *)usb_lookup(aue_devs, v, p))
 
-USB_DECLARE_DRIVER(aue);
+USB_DECLARE_DRIVER_CLASS(aue, DV_IFNET);
 
 Static void aue_reset_pegasus_II(struct aue_softc *sc);
 Static int aue_tx_list_init(struct aue_softc *);
diff --git a/sys/dev/usb/if_cue.c b/sys/dev/usb/if_cue.c
index ed4a9156774..bfefa57dbf7 100644
--- a/sys/dev/usb/if_cue.c
+++ b/sys/dev/usb/if_cue.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: if_cue.c,v 1.18 2003/05/07 04:33:33 deraadt Exp $ */
+/*	$OpenBSD: if_cue.c,v 1.19 2003/12/15 23:36:14 cedric Exp $ */
 /*	$NetBSD: if_cue.c,v 1.40 2002/07/11 21:14:26 augustss Exp $	*/
 /*
  * Copyright (c) 1997, 1998, 1999, 2000
@@ -143,7 +143,7 @@ Static struct usb_devno cue_devs[] = {
 };
 #define cue_lookup(v, p) (usb_lookup(cue_devs, v, p))
 
-USB_DECLARE_DRIVER(cue);
+USB_DECLARE_DRIVER_CLASS(cue, DV_IFNET);
 
 Static int cue_open_pipes(struct cue_softc *);
 Static int cue_tx_list_init(struct cue_softc *);
diff --git a/sys/dev/usb/if_kue.c b/sys/dev/usb/if_kue.c
index d45f30ab5c5..e84f6fc2069 100644
--- a/sys/dev/usb/if_kue.c
+++ b/sys/dev/usb/if_kue.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: if_kue.c,v 1.23 2003/05/07 04:33:33 deraadt Exp $ */
+/*	$OpenBSD: if_kue.c,v 1.24 2003/12/15 23:36:14 cedric Exp $ */
 /*	$NetBSD: if_kue.c,v 1.50 2002/07/16 22:00:31 augustss Exp $	*/
 /*
  * Copyright (c) 1997, 1998, 1999, 2000
@@ -186,7 +186,7 @@ Static const struct usb_devno kue_devs[] = {
 };
 #define kue_lookup(v, p) (usb_lookup(kue_devs, v, p))
 
-USB_DECLARE_DRIVER(kue);
+USB_DECLARE_DRIVER_CLASS(kue, DV_IFNET);
 
 Static int kue_tx_list_init(struct kue_softc *);
 Static int kue_rx_list_init(struct kue_softc *);
diff --git a/sys/dev/usb/if_upl.c b/sys/dev/usb/if_upl.c
index 72c7b99f72c..f5ffcf06939 100644
--- a/sys/dev/usb/if_upl.c
+++ b/sys/dev/usb/if_upl.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: if_upl.c,v 1.14 2003/05/07 04:33:33 deraadt Exp $ */
+/*	$OpenBSD: if_upl.c,v 1.15 2003/12/15 23:36:14 cedric Exp $ */
 /*	$NetBSD: if_upl.c,v 1.19 2002/07/11 21:14:26 augustss Exp $	*/
 /*
  * Copyright (c) 2000 The NetBSD Foundation, Inc.
@@ -205,7 +205,7 @@ Static struct upl_type sc_devs[] = {
 	{ 0, 0 }
 };
 
-USB_DECLARE_DRIVER(upl);
+USB_DECLARE_DRIVER_CLASS(upl, DV_IFNET);
 
 Static int upl_openpipes(struct upl_softc *);
 Static int upl_tx_list_init(struct upl_softc *);
diff --git a/sys/dev/usb/if_url.c b/sys/dev/usb/if_url.c
index 8a4d5d18ce4..505721efc91 100644
--- a/sys/dev/usb/if_url.c
+++ b/sys/dev/usb/if_url.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: if_url.c,v 1.11 2003/05/07 04:33:33 deraadt Exp $ */
+/*	$OpenBSD: if_url.c,v 1.12 2003/12/15 23:36:14 cedric Exp $ */
 /*	$NetBSD: if_url.c,v 1.6 2002/09/29 10:19:21 martin Exp $	*/
 /*
  * Copyright (c) 2001, 2002
@@ -115,7 +115,7 @@
 
 
 /* Function declarations */
-USB_DECLARE_DRIVER(url);
+USB_DECLARE_DRIVER_CLASS(url, DV_IFNET);
 
 Static int url_openpipes(struct url_softc *);
 Static int url_rx_list_init(struct url_softc *);
diff --git a/sys/dev/usb/usb_port.h b/sys/dev/usb/usb_port.h
index dfcdd5598b6..56362ceb94d 100644
--- a/sys/dev/usb/usb_port.h
+++ b/sys/dev/usb/usb_port.h
@@ -1,4 +1,4 @@
-/*	$OpenBSD: usb_port.h,v 1.45 2003/09/23 16:51:12 millert Exp $ */
+/*	$OpenBSD: usb_port.h,v 1.46 2003/12/15 23:36:14 cedric Exp $ */
 /*	$NetBSD: usb_port.h,v 1.62 2003/02/15 18:33:30 augustss Exp $	*/
 /*	$FreeBSD: src/sys/dev/usb/usb_port.h,v 1.21 1999/11/17 22:33:47 n_hibma Exp $	*/
 
@@ -328,14 +328,14 @@ typedef struct timeout usb_callout_t;
 
 #define usb_lockmgr(l, f, sl, p) lockmgr((l), (f), (sl), (p))
 
-#define USB_DECLARE_DRIVER(dname)  \
+#define USB_DECLARE_DRIVER_CLASS(dname, devclass)  \
 int __CONCAT(dname,_match)(struct device *, void *, void *); \
 void __CONCAT(dname,_attach)(struct device *, struct device *, void *); \
 int __CONCAT(dname,_detach)(struct device *, int); \
 int __CONCAT(dname,_activate)(struct device *, enum devact); \
 \
 struct cfdriver __CONCAT(dname,_cd) = { \
-	NULL, #dname, DV_DULL \
+	NULL, #dname, devclass \
 }; \
 \
 const struct cfattach __CONCAT(dname,_ca) = { \
@@ -346,6 +346,8 @@ const struct cfattach __CONCAT(dname,_ca) = { \
 	__CONCAT(dname,_activate), \
 }
 
+#define USB_DECLARE_DRIVER(dname) USB_DECLARE_DRIVER_CLASS(dname, DV_DULL)
+
 #define USB_MATCH(dname) \
 int \
 __CONCAT(dname,_match)(parent, match, aux) \

