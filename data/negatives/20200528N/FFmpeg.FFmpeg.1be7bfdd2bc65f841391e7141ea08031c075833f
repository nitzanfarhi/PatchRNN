commit 1be7bfdd2bc65f841391e7141ea08031c075833f
Author: Mike Scheutzow <mjs973@optonline.net>
Date:   Fri Jun 8 10:24:09 2012 -0400

    ffmpeg.c: fix erroneous "Output file is empty" message.
    
    This message is printed whenever the RAWVIDEO codec is used, whether the
    output file contains any frames or not. Test command:
    ./ffmpeg -i infile.y4m outfile.y4m
    
    Signed-off-by: Mike Scheutzow <mjs973@optonline.net>
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/ffmpeg.c b/ffmpeg.c
index 87c3f7a5d3..9575813bca 100644
--- a/ffmpeg.c
+++ b/ffmpeg.c
@@ -1746,6 +1746,7 @@ duplicate_frame:
         pkt.flags |= AV_PKT_FLAG_KEY;
 
         write_frame(s, &pkt, ost);
+        video_size += pkt.size;
     } else {
         int got_packet;
         AVFrame big_picture;

