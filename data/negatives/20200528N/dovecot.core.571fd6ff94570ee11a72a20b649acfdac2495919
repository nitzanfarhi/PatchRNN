commit 571fd6ff94570ee11a72a20b649acfdac2495919
Author: Timo Sirainen <tss@iki.fi>
Date:   Thu Jun 28 09:28:05 2012 +0300

    Fixed ostream's new error handling not to always assert-crash.

diff --git a/src/lib/ostream.c b/src/lib/ostream.c
index 83b565d7e..082cae379 100644
--- a/src/lib/ostream.c
+++ b/src/lib/ostream.c
@@ -35,7 +35,7 @@ void o_stream_unref(struct ostream **_stream)
 {
 	struct ostream *stream = *_stream;
 
-	if (!stream->real_stream->last_errors_not_checked &&
+	if (stream->real_stream->last_errors_not_checked &&
 	    !stream->real_stream->error_handling_disabled &&
 	    stream->real_stream->iostream.refcount == 1) {
 		i_panic("output stream %s is missing error handling",

