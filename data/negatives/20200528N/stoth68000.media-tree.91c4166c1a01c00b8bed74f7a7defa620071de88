commit 91c4166c1a01c00b8bed74f7a7defa620071de88
Author: Mugunthan V N <mugunthanvnm@ti.com>
Date:   Mon Apr 15 07:31:28 2013 +0000

    drivers: net: ethernet: cpsw: get slave VLAN id from slave node instead of cpsw node
    
    Dual EMAC slave VLAN id must be got from slave node instead of cpsw node as
    VLAN id for each slave will be different.
    
    Reported-by: Mark Jackson <mpfj-list@mimc.co.uk>
    Signed-off-by: Mugunthan V N <mugunthanvnm@ti.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/ethernet/ti/cpsw.c b/drivers/net/ethernet/ti/cpsw.c
index 80cad06e5eb2..4781d3d8e182 100644
--- a/drivers/net/ethernet/ti/cpsw.c
+++ b/drivers/net/ethernet/ti/cpsw.c
@@ -1380,7 +1380,7 @@ static int cpsw_probe_dt(struct cpsw_platform_data *data,
 			memcpy(slave_data->mac_addr, mac_addr, ETH_ALEN);
 
 		if (data->dual_emac) {
-			if (of_property_read_u32(node, "dual_emac_res_vlan",
+			if (of_property_read_u32(slave_node, "dual_emac_res_vlan",
 						 &prop)) {
 				pr_err("Missing dual_emac_res_vlan in DT.\n");
 				slave_data->dual_emac_res_vlan = i+1;

