commit cf131e6ab0332f73ba6a8ff7fd6ac942cba28ccb
Author: K. Y. Srinivasan <kys@microsoft.com>
Date:   Tue May 10 07:56:14 2011 -0700

    Staging: hv: mouse_drv: Move the code to copy dev_type information
    
    In preparation to eliminate mouse_vsc_initialize,
    move the code that copies the dev_type info.
    
    Signed-off-by: K. Y. Srinivasan <kys@microsoft.com>
    Signed-off-by: Haiyang Zhang <haiyangz@microsoft.com>
    Signed-off-by: Abhishek Kane <v-abkane@microsoft.com>
    Signed-off-by: Hank Janssen <hjanssen@microsoft.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/hv/hv_mouse.c b/drivers/staging/hv/hv_mouse.c
index b4c087fb9cd6..85b95d8ee2c1 100644
--- a/drivers/staging/hv/hv_mouse.c
+++ b/drivers/staging/hv/hv_mouse.c
@@ -979,8 +979,6 @@ static void mousevsc_drv_exit(void)
 
 static int mouse_vsc_initialize(struct hv_driver *driver)
 {
-	memcpy(&driver->dev_type, &mouse_guid,
-	       sizeof(struct hv_guid));
 
 	return 0;
 }
@@ -995,6 +993,8 @@ static int __init mousevsc_init(void)
 
 	/* Callback to client driver to complete the initialization */
 	mouse_vsc_initialize(&input_drv_obj->base);
+	memcpy(&drv->dev_type, &mouse_guid,
+	       sizeof(struct hv_guid));
 
 	drv->driver.name = driver_name;
 	drv->name = driver_name;

