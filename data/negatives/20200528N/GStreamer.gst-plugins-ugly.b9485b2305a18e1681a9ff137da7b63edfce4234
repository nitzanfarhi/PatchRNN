commit b9485b2305a18e1681a9ff137da7b63edfce4234
Author: Wim Taymans <wim.taymans@collabora.co.uk>
Date:   Wed Jul 25 12:48:21 2012 +0200

    rdt: set caps after activating the pad

diff --git a/gst/realmedia/rdtmanager.c b/gst/realmedia/rdtmanager.c
index 10cb5843..1f42dbde 100644
--- a/gst/realmedia/rdtmanager.c
+++ b/gst/realmedia/rdtmanager.c
@@ -298,15 +298,16 @@ activate_session (GstRDTManager * rdtmanager, GstRDTManagerSession * session,
   session->recv_rtp_src = gst_pad_new_from_template (templ, name);
   g_free (name);
 
-  gst_pad_set_caps (session->recv_rtp_src, caps);
-  gst_caps_unref (caps);
-
   gst_pad_set_element_private (session->recv_rtp_src, session);
   gst_pad_set_query_function (session->recv_rtp_src, gst_rdt_manager_query_src);
   gst_pad_set_activatemode_function (session->recv_rtp_src,
       gst_rdt_manager_src_activate_mode);
 
   gst_pad_set_active (session->recv_rtp_src, TRUE);
+
+  gst_pad_set_caps (session->recv_rtp_src, caps);
+  gst_caps_unref (caps);
+
   gst_element_add_pad (GST_ELEMENT_CAST (rdtmanager), session->recv_rtp_src);
 
   return TRUE;

