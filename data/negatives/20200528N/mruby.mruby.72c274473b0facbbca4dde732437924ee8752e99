commit 72c274473b0facbbca4dde732437924ee8752e99
Author: Yukihiro "Matz" Matsumoto <matz@ruby-lang.org>
Date:   Wed Mar 19 09:07:59 2014 +0900

    remove size_t cast in mrb_assert() since ((size_t)n <= SIZE_MAX) is always true

diff --git a/src/dump.c b/src/dump.c
index f551b01c..bdfa0787 100644
--- a/src/dump.c
+++ b/src/dump.c
@@ -90,7 +90,7 @@ get_pool_block_size(mrb_state *mrb, mrb_irep *irep)
       {
         mrb_int len = RSTRING_LEN(str);
         mrb_assert(len >= 0);
-        mrb_assert((size_t)len <= SIZE_MAX);
+        mrb_assert(len <= SIZE_MAX);
         size += (size_t)len;
       }
       break;
@@ -100,7 +100,7 @@ get_pool_block_size(mrb_state *mrb, mrb_irep *irep)
         int len;
         len = mrb_float_to_str(buf, mrb_float(irep->pool[pool_no]));
         mrb_assert(len >= 0);
-        mrb_assert((size_t)len <= SIZE_MAX);
+        mrb_assert(len <= SIZE_MAX);
         size += (size_t)len;
       }
       break;
@@ -109,7 +109,7 @@ get_pool_block_size(mrb_state *mrb, mrb_irep *irep)
       {
         mrb_int len = RSTRING_LEN(irep->pool[pool_no]);
         mrb_assert(len >= 0);
-        mrb_assert((size_t)len <= SIZE_MAX);
+        mrb_assert(len <= SIZE_MAX);
         size += (size_t)len;
       }
       break;
@@ -420,7 +420,7 @@ write_lineno_record_1(mrb_state *mrb, mrb_irep *irep, uint8_t* bin)
 
   uint32_to_bin((uint32_t)diff, bin); /* record size */
 
-  mrb_assert((size_t)diff <= SIZE_MAX);
+  mrb_assert(diff <= SIZE_MAX);
   return (size_t)diff;
 }
 
@@ -600,7 +600,7 @@ write_debug_record_1(mrb_state *mrb, mrb_irep *irep, uint8_t *bin, mrb_sym const
   mrb_assert(ret <= UINT32_MAX);
   uint32_to_bin(ret, bin);
 
-  mrb_assert((size_t)ret <= SIZE_MAX);
+  mrb_assert(ret <= SIZE_MAX);
   return (size_t)ret;
 }
 
diff --git a/src/load.c b/src/load.c
index 65c1695b..ca78dbf8 100644
--- a/src/load.c
+++ b/src/load.c
@@ -166,7 +166,7 @@ read_irep_record_1(mrb_state *mrb, const uint8_t *bin, size_t *len, mrb_bool all
 
   diff = src - bin;
   mrb_assert(diff >= 0);
-  mrb_assert((size_t)diff <= SIZE_MAX);
+  mrb_assert(diff <= SIZE_MAX);
   *len = (size_t)diff;
 
   return irep;
@@ -350,7 +350,7 @@ read_debug_record(mrb_state *mrb, const uint8_t *start, mrb_irep* irep, size_t *
 
   diff = bin - start;
   mrb_assert(diff >= 0);
-  mrb_assert((size_t)diff <= SIZE_MAX);
+  mrb_assert(diff <= SIZE_MAX);
 
   if (record_size != (size_t)diff) {
     return MRB_DUMP_GENERAL_FAILURE;
@@ -367,7 +367,7 @@ read_debug_record(mrb_state *mrb, const uint8_t *start, mrb_irep* irep, size_t *
 
   diff = bin - start;
   mrb_assert(diff >= 0);
-  mrb_assert((size_t)diff <= SIZE_MAX);
+  mrb_assert(diff <= SIZE_MAX);
   *record_len = (size_t)diff;
 
   return MRB_DUMP_OK;

