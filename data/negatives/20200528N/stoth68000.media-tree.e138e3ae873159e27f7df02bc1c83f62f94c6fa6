commit e138e3ae873159e27f7df02bc1c83f62f94c6fa6
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Fri Sep 26 12:27:00 2014 +0200

    ARM: at91: fix nommu build regression
    
    The newly introduced support for SAMA5D4 added access to the
    'AT91_ALT_BASE_SYS' register area, but failed to define the
    symbols in the case when CONFIG_MMU is disabled.
    
    We really should not hardwire addresses like this any more,
    but as a small fixup, this patch just adds the missing
    definitions for the nommu case, which gets at91x40_defconfig
    and any configuration of sam9 and sama5 with MMU disabled
    back to work.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Fixes: 726d32bf79ef4 ("ARM: at91: SAMA5D4 SoC detection code and low ...")

diff --git a/arch/arm/mach-at91/include/mach/hardware.h b/arch/arm/mach-at91/include/mach/hardware.h
index d84776f6b8ac..c13797352688 100644
--- a/arch/arm/mach-at91/include/mach/hardware.h
+++ b/arch/arm/mach-at91/include/mach/hardware.h
@@ -51,11 +51,12 @@
  */
 #define AT91_BASE_SYS	0xffffc000
 
+#endif
+
 /*
  * On sama5d4 there is no system controller, we map some needed peripherals
  */
 #define AT91_ALT_BASE_SYS	0xfc069000
-#endif
 
 /*
  * On all at91 have the Advanced Interrupt Controller starts at address
@@ -90,6 +91,9 @@
  */
 #define AT91_IO_PHYS_BASE	AT91_BASE_SYS
 #define AT91_IO_VIRT_BASE	IOMEM(AT91_IO_PHYS_BASE)
+
+#define AT91_ALT_IO_PHYS_BASE	AT91_ALT_BASE_SYS
+#define AT91_ALT_IO_VIRT_BASE	IOMEM(AT91_ALT_BASE_SYS)
 #endif
 
 #define AT91_IO_SIZE		(0xFFFFFFFF - AT91_IO_PHYS_BASE + 1)

