commit d0cfbcf87599ce258a24ee460a1cf33e26dc61e9
Author: Roger Dingledine <arma@torproject.org>
Date:   Wed Aug 4 02:15:22 2004 +0000

    only pick a default nickname if you're a server
    
    
    svn:r2134

diff --git a/src/or/config.c b/src/or/config.c
index 6ce47263b..d9f9856ec 100644
--- a/src/or/config.c
+++ b/src/or/config.c
@@ -680,9 +680,11 @@ int getconfig(int argc, char **argv, or_options_t *options) {
   }
 
   if (options->Nickname == NULL) {
-    if (!(options->Nickname = get_default_nickname()))
-      return -1;
-    log_fn(LOG_INFO, "Choosing default nickname %s", options->Nickname);
+    if(server_mode()) {
+      if (!(options->Nickname = get_default_nickname()))
+        return -1;
+      log_fn(LOG_NOTICE, "Choosing default nickname %s", options->Nickname);
+    }
   } else {
     if (strspn(options->Nickname, LEGAL_NICKNAME_CHARACTERS) !=
         strlen(options->Nickname)) {
@@ -696,7 +698,7 @@ int getconfig(int argc, char **argv, or_options_t *options) {
     }
   }
 
-  if(options->ORPort) { /* get an IP for ourselves */
+  if(server_mode()) { /* get an IP for ourselves */
     if(resolve_my_address(options) < 0)
       result = -1;
   }

