commit d8de72fb9a8b32dce61edf1ebbcc4c16c178eb27
Author: Rainer Gerhards <rgerhards@adiscon.com>
Date:   Sun Dec 17 13:20:44 2017 +0100

    make UBSan not complain about questionable OS lib function

diff --git a/plugins/imuxsock/imuxsock.c b/plugins/imuxsock/imuxsock.c
index c10bb1f86..8251215f0 100644
--- a/plugins/imuxsock/imuxsock.c
+++ b/plugins/imuxsock/imuxsock.c
@@ -487,7 +487,18 @@ static rsRetVal discardLogSockets(void)
 
 /* used to create a log socket if NOT passed in via systemd. 
  */
+/* note: the linux SUN_LEN macro uses a sizeof based on a NULL pointer. This
+ * triggers UBSan warning. As such, we turn that warning off for the fuction.
+ * As it is OS-provided, there is no way to solve it ourselves. The problem
+ * may also exist on other platforms, we have just noticed it on Linux.
+ */
+#if defined(__clang__)
+#pragma GCC diagnostic ignored "-Wunknown-attributes"
+#endif
 static rsRetVal
+#if defined(__clang__)
+__attribute__((no_sanitize("null")))
+#endif
 createLogSocket(lstn_t *pLstn)
 {
 	struct sockaddr_un sunx;

