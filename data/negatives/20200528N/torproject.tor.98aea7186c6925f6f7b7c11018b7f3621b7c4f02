commit 98aea7186c6925f6f7b7c11018b7f3621b7c4f02
Author: Nick Mathewson <nickm@torproject.org>
Date:   Tue Apr 8 18:04:05 2008 +0000

     r19249@catbus:  nickm | 2008-04-08 14:04:02 -0400
     Oops. Fix one last memarea freelist bug.
    
    
    svn:r14322

diff --git a/src/common/memarea.c b/src/common/memarea.c
index 070c3b59a..28144c3bb 100644
--- a/src/common/memarea.c
+++ b/src/common/memarea.c
@@ -177,7 +177,7 @@ memarea_alloc(memarea_t *area, size_t sz)
   char *result;
   tor_assert(chunk);
   if (chunk->next_mem+sz > chunk->u.mem+chunk->mem_size) {
-    if (sz+CHUNK_HEADER_SIZE >= area->chunk_size) {
+    if (sz+CHUNK_HEADER_SIZE >= CHUNK_SIZE) {
       /* This allocation is too big.  Stick it in a special chunk, and put
        * that chunk second in the list. */
       memarea_chunk_t *new_chunk = alloc_chunk(sz+CHUNK_HEADER_SIZE, 0);

