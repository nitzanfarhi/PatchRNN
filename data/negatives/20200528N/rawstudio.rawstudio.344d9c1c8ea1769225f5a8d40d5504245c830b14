commit 344d9c1c8ea1769225f5a8d40d5504245c830b14
Author: akv <anders@kvistmail.dk>
Date:   Mon Mar 9 22:14:25 2009 +0000

    Added rs_conf_unset().

diff --git a/src/conf_interface.c b/src/conf_interface.c
index 65f28a5e..bb82b633 100644
--- a/src/conf_interface.c
+++ b/src/conf_interface.c
@@ -619,3 +619,26 @@ rs_conf_get_nth_string_from_list_string(const gchar *name, gint num)
 	}
 	return value;
 }
+
+gboolean
+rs_conf_unset(const gchar *name)
+{
+	gboolean ret = FALSE;
+#ifdef WITH_GCONF
+	GConfClient *client = gconf_client_get_default();
+	GString *fullname = g_string_new(GCONF_PATH);
+	g_string_append(fullname, name);
+	if (client)
+	{
+		g_static_mutex_lock(&lock);
+		ret = gconf_client_unset(client, fullname->str, NULL);
+		g_static_mutex_unlock(&lock);
+		g_object_unref(client);
+	}
+	g_string_free(fullname, TRUE);
+#endif
+#ifdef WITH_REGISTRY
+	/* FIXME: windows stub */
+#endif
+	return ret;
+}
diff --git a/src/conf_interface.h b/src/conf_interface.h
index 172a04a6..4a8d140b 100644
--- a/src/conf_interface.h
+++ b/src/conf_interface.h
@@ -128,3 +128,4 @@ GSList *rs_conf_get_list_string(const gchar *name);
 gboolean rs_conf_set_list_string(const gchar *name, GSList *list);
 gboolean rs_conf_add_string_to_list_string(const gchar *name, gchar *value);
 gchar *rs_conf_get_nth_string_from_list_string(const gchar *name, gint num);
+gboolean rs_conf_unset(const gchar *name);

