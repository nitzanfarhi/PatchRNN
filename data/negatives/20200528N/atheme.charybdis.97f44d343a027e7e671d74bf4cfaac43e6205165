commit 97f44d343a027e7e671d74bf4cfaac43e6205165
Author: Jilles Tjoelker <jilles@stack.nl>
Date:   Fri Mar 5 00:37:56 2010 +0100

    Skip propagated bans in rehash txlines/tresvs.

diff --git a/modules/m_rehash.c b/modules/m_rehash.c
index 40cc7de1..8557f8c7 100644
--- a/modules/m_rehash.c
+++ b/modules/m_rehash.c
@@ -174,7 +174,7 @@ rehash_txlines(struct Client *source_p)
 	{
 		aconf = ptr->data;
 
-		if(!aconf->hold)
+		if(!aconf->hold || aconf->lifetime)
 			continue;
 
 		free_conf(aconf);
@@ -199,7 +199,7 @@ rehash_tresvs(struct Client *source_p)
 	{
 		aconf = ptr->data;
 
-		if(!aconf->hold)
+		if(!aconf->hold || aconf->lifetime)
 			continue;
 
 		free_conf(aconf);
@@ -211,7 +211,7 @@ rehash_tresvs(struct Client *source_p)
 	{
 		aconf = ptr->data;
 
-		if(!aconf->hold)
+		if(!aconf->hold || aconf->lifetime)
 			continue;
 
 		free_conf(aconf);

