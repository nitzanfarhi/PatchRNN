commit 7ccb2f1e595192db20ebe0b17c712805669dffc4
Author: Thomas Bernard <miniupnp@free.fr>
Date:   Sat Dec 16 17:48:24 2017 +0100

    fix bug in WritePixels() with transparent colors

diff --git a/ngiflib.c b/ngiflib.c
index 34b7b4c..f303161 100644
--- a/ngiflib.c
+++ b/ngiflib.c
@@ -221,16 +221,18 @@ static void WritePixels(struct ngiflib_img * i, struct ngiflib_decode_context *
 			if(p->mode & NGIFLIB_MODE_INDEXED) {
 #endif /* NGIFLIB_INDEXED_ONLY */
 				for(j = (int)tocopy; j > 0; j--) {
-					if(*pixels != p->transparent_color) *(context->frbuff_p.p8++) = *pixels;
+					if(*pixels != p->transparent_color) *context->frbuff_p.p8 = *pixels;
 					pixels++;
+					context->frbuff_p.p8++;
 				}
 #ifndef NGIFLIB_INDEXED_ONLY
 			} else {
 				for(j = (int)tocopy; j > 0; j--) {
 					if(*pixels != p->transparent_color) {
-						*(context->frbuff_p.p32++) = GifIndexToTrueColor(i->palette, *pixels);
+						*context->frbuff_p.p32 = GifIndexToTrueColor(i->palette, *pixels);
 					}
 					pixels++;
+					context->frbuff_p.p32++;
 				}
 			}
 #endif /* NGIFLIB_INDEXED_ONLY */

