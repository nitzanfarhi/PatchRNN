commit 7795ebdc155f585bbc3b048e8b20ae00185ab648
Author: Armin Novak <armin.novak@thincast.com>
Date:   Wed Feb 24 09:43:53 2016 +0100

    Fixed return value for DST.

diff --git a/winpr/libwinpr/timezone/timezone.c b/winpr/libwinpr/timezone/timezone.c
index 534b92ac6..4a1f3e8c5 100644
--- a/winpr/libwinpr/timezone/timezone.c
+++ b/winpr/libwinpr/timezone/timezone.c
@@ -1747,7 +1747,7 @@ DWORD GetTimeZoneInformation(LPTIME_ZONE_INFORMATION lpTimeZoneInformation)
 
 		/* 1 ... TIME_ZONE_ID_STANDARD
 		 * 2 ... TIME_ZONE_ID_DAYLIGHT */
-		return dtz->SupportsDST ? 2 : 1;
+		return local_time->tm_isdst ? 2 : 1;
 	}
 	else
 	{

