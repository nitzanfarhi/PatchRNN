commit 5420401079e152ff68a8024f6a375804b1c21505
Author: Peng Tao <tao.peng@primarydata.com>
Date:   Sat Aug 22 06:40:00 2015 +0800

    NFS41/flexfiles: zero out DS write wcc
    
    We do not want to update inode attributes with DS values.
    
    Cc: stable@vger.kernel.org # v4.0+
    Signed-off-by: Peng Tao <tao.peng@primarydata.com>
    Signed-off-by: Trond Myklebust <trond.myklebust@primarydata.com>

diff --git a/fs/nfs/flexfilelayout/flexfilelayout.c b/fs/nfs/flexfilelayout/flexfilelayout.c
index 7e4cbdfb3713..cc2c5f7f2bc1 100644
--- a/fs/nfs/flexfilelayout/flexfilelayout.c
+++ b/fs/nfs/flexfilelayout/flexfilelayout.c
@@ -1218,6 +1218,8 @@ static int ff_layout_write_done_cb(struct rpc_task *task,
 	    hdr->res.verf->committed == NFS_DATA_SYNC)
 		ff_layout_set_layoutcommit(hdr);
 
+	/* zero out fattr since we don't care DS attr at all */
+	hdr->fattr.valid = 0;
 	if (task->tk_status >= 0)
 		nfs_writeback_update_inode(hdr);
 

