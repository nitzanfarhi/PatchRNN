commit 24dc6ead53f8fcae4b1908c4ea3fea75ee844a6d
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:46:49 2005 -0700

    [SPARC]: dump_stack for sparc
    
    Bob Breuer wrote a patch to add dump_stack for sparc. Supposedly, this
    was applied, but it doesn't exist in 2.6.11.
    
    This is the same patch, rediffed against 2.6.11.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/arch/sparc/kernel/process.c b/arch/sparc/kernel/process.c
index 143fe2f3c1c4..066e253f9c12 100644
--- a/arch/sparc/kernel/process.c
+++ b/arch/sparc/kernel/process.c
@@ -333,6 +333,17 @@ void show_stack(struct task_struct *tsk, unsigned long *_ksp)
 	printk("\n");
 }
 
+void dump_stack(void)
+{
+	unsigned long *ksp;
+
+	__asm__ __volatile__("mov	%%fp, %0"
+			     : "=r" (ksp));
+	show_stack(current, ksp);
+}
+
+EXPORT_SYMBOL(dump_stack);
+
 /*
  * Note: sparc64 has a pretty intricated thread_saved_pc, check it out.
  */

