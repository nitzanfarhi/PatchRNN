commit 91dcc9c979032dc61fbd1c2b97df30e798ef4d64
Author: Maxim Sobolev <sobomax@sippysoft.com>
Date:   Tue May 1 22:02:12 2007 +0000

    Handle HDR_SERVER_T.

diff --git a/modules/tm/sip_msg.c b/modules/tm/sip_msg.c
index 11cefccfc..b04def7b9 100644
--- a/modules/tm/sip_msg.c
+++ b/modules/tm/sip_msg.c
@@ -374,6 +374,7 @@ struct sip_msg*  sip_msg_cloner( struct sip_msg *org_msg, int *sip_msg_len )
 		case HDR_PRIORITY_T:
 		case HDR_SUBJECT_T:
 		case HDR_USERAGENT_T:
+		case HDR_SERVER_T:
 		case HDR_ACCEPTDISPOSITION_T:
 		case HDR_CONTENTDISPOSITION_T:
 		case HDR_DIVERSION_T:
@@ -743,6 +744,11 @@ do { \
 				new_msg->user_agent = new_hdr;
 			}
 			break;
+		case HDR_SERVER_T:
+			if (!HOOK_SET(server)) {
+				new_msg->server = new_hdr;
+			}
+			break;
 		case HDR_ACCEPTDISPOSITION_T:
 			if (!HOOK_SET(accept_disposition)) {
 				new_msg->accept_disposition = new_hdr;

