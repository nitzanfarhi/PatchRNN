commit 1a3b56170d861be10bc9616555c0be2592cc78c3
Author: Max Lv <mlv@nvidia.com>
Date:   Mon Apr 13 14:33:52 2015 +0800

    refine addr_header comparison

diff --git a/src/udprelay.c b/src/udprelay.c
index 3b2fab1..df6c651 100644
--- a/src/udprelay.c
+++ b/src/udprelay.c
@@ -791,7 +791,8 @@ static void server_recv_cb(EV_P_ ev_io *w, int revents)
 
     if (remote_ctx != NULL) {
         if (memcmp(&src_addr, &remote_ctx->src_addr, sizeof(src_addr))
-            || strcmp(addr_header, remote_ctx->addr_header) != 0) {
+            || remote_ctx->addr_header_len != addr_header_len
+            || memcmp(addr_header, remote_ctx->addr_header, addr_header_len) != 0) {
             remote_ctx = NULL;
         }
     }

