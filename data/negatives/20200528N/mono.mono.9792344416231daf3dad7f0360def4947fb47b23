commit 9792344416231daf3dad7f0360def4947fb47b23
Author: Rodrigo Kumpera <kumpera@gmail.com>
Date:   Sat Apr 9 18:50:59 2011 -0300

    Fist pass into fixing the win32 build

diff --git a/mono/utils/mono-threads.c b/mono/utils/mono-threads.c
index 23f3e4254a6..f87e9f85f6d 100644
--- a/mono/utils/mono-threads.c
+++ b/mono/utils/mono-threads.c
@@ -14,7 +14,6 @@
 #include <mono/metadata/gc-internal.h>
 #include <mono/metadata/appdomain.h>
 
-#include <pthread.h>
 #include <errno.h>
 
 
diff --git a/mono/utils/mono-threads.h b/mono/utils/mono-threads.h
index 609d01126b5..67c70024192 100644
--- a/mono/utils/mono-threads.h
+++ b/mono/utils/mono-threads.h
@@ -14,9 +14,21 @@
 #include <mono/utils/mono-stack-unwinding.h>
 #include <mono/utils/mono-linked-list-set.h>
 
-#include <pthread.h>
 #include <glib.h>
 
+#ifdef HOST_WIN32
+
+#include <windows.h>
+
+typedef DWORD MonoNativeThreadId;
+
+#define mono_native_thread_id_get GetCurrentThreadId
+#define mono_native_thread_id_equals(a,b) ((a) == ((b))
+
+#else
+
+#include <pthread.h>
+
 #if defined(__MACH__)
 #include <mono/utils/mach-support.h>
 #endif
@@ -24,7 +36,9 @@
 typedef pthread_t MonoNativeThreadId;
 
 #define mono_native_thread_id_get pthread_self
-#define mono_native_thread_id_equals pthread_equal
+#define mono_native_thread_id_equals(a,b) pthread_equal((a),(b))
+
+#endif /* #ifdef HOST_WIN32 */
 
 #ifndef THREAD_INFO_TYPE
 #define THREAD_INFO_TYPE MonoThreadInfo
@@ -62,9 +76,7 @@ Snapshot iteration.
  */
 void
 mono_threads_init (MonoThreadInfoCallbacks *callbacks, size_t thread_info_size) MONO_INTERNAL;
-	
-int
-mono_threads_pthread_create (pthread_t *new_thread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg) MONO_INTERNAL;
+
 
 THREAD_INFO_TYPE *
 mono_thread_info_attach (void *baseptr) MONO_INTERNAL;
@@ -78,4 +90,10 @@ mono_thread_info_list_head (void) MONO_INTERNAL;
 MonoThreadInfo*
 mono_thread_info_lookup (MonoNativeThreadId id) MONO_INTERNAL;
 
+#if !defined(HOST_WIN32)
+
+int
+mono_threads_pthread_create (pthread_t *new_thread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg) MONO_INTERNAL;
+
+#endif
 #endif /* __MONO_THREADS_H__ */

