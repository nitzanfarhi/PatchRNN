commit 94a504c2e059fb88f05ede6d614504779275b099
Author: Grazvydas Ignotas <notasas@gmail.com>
Date:   Fri Mar 9 01:19:15 2012 +0200

    ASoC: omap-mcbsp: fix snd_pcm_hw_rule_add arguments
    
    We are setting SNDRV_PCM_HW_PARAM_BUFFER_SIZE based on
    SNDRV_PCM_HW_PARAM_CHANNELS, not vice versa. This bug didn't
    have much impact because the rules are evaluated multiple times
    by the core, and intended value got set eventually.
    
    Signed-off-by: Grazvydas Ignotas <notasas@gmail.com>
    Acked-by: Peter Ujfalusi <peter.ujfalusi@ti.com>
    Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
    Signed-off-by: Liam Girdwood <lrg@ti.com>

diff --git a/sound/soc/omap/omap-mcbsp.c b/sound/soc/omap/omap-mcbsp.c
index 626e2d6db20e..6912ac7cb625 100644
--- a/sound/soc/omap/omap-mcbsp.c
+++ b/sound/soc/omap/omap-mcbsp.c
@@ -142,10 +142,10 @@ static int omap_mcbsp_dai_startup(struct snd_pcm_substream *substream,
 		* smaller buffer than the FIFO size to avoid underruns
 		*/
 		snd_pcm_hw_rule_add(substream->runtime, 0,
-				    SNDRV_PCM_HW_PARAM_CHANNELS,
+				    SNDRV_PCM_HW_PARAM_BUFFER_SIZE,
 				    omap_mcbsp_hwrule_min_buffersize,
 				    mcbsp,
-				    SNDRV_PCM_HW_PARAM_BUFFER_SIZE, -1);
+				    SNDRV_PCM_HW_PARAM_CHANNELS, -1);
 
 		/* Make sure, that the period size is always even */
 		snd_pcm_hw_constraint_step(substream->runtime, 0,

