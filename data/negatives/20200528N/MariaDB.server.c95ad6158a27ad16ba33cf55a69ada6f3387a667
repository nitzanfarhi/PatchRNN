commit c95ad6158a27ad16ba33cf55a69ada6f3387a667
Author: petr@mysql.com <>
Date:   Fri Jun 30 08:11:51 2006 +0400

    cleanup

diff --git a/mysys/my_pread.c b/mysys/my_pread.c
index a829caa80d2..ac52895efe9 100644
--- a/mysys/my_pread.c
+++ b/mysys/my_pread.c
@@ -145,7 +145,8 @@ uint my_pwrite(int Filedes, const byte *Buffer, uint Count, my_off_t offset,
 #else
     if ((writenbytes = (uint) pwrite(Filedes, Buffer, Count,offset)) == Count)
       break;
-    my_errno= errno;
+    else
+      my_errno= errno;
 #endif
     if ((int) writenbytes != -1)
     {					/* Safegueard */

