commit 89eaa05ed1a1ddd5d2552c323b5228def627d731
Author: Serge Hallyn <serge.hallyn@ubuntu.com>
Date:   Tue Sep 4 13:57:39 2012 -0500

    replace HOOK define with proper code.
    
    Signed-off-by: Serge Hallyn <serge.hallyn@ubuntu.com>

diff --git a/src/lxc/conf.c b/src/lxc/conf.c
index c6e507e4..dfdff54a 100644
--- a/src/lxc/conf.c
+++ b/src/lxc/conf.c
@@ -2253,7 +2253,10 @@ int lxc_setup(const char *name, struct lxc_conf *lxc_conf)
 		return -1;
 	}
 
-	HOOK(name, "pre-mount", lxc_conf);
+	if (run_lxc_hooks(name, "pre-mount", lxc_conf)) {
+		ERROR("failed to run pre-mount hooks for container '%s'.", name);
+		return -1;
+	}
 
 	if (setup_rootfs(&lxc_conf->rootfs)) {
 		ERROR("failed to setup rootfs for '%s'", name);

