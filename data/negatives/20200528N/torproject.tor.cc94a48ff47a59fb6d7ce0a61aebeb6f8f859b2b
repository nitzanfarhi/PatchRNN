commit cc94a48ff47a59fb6d7ce0a61aebeb6f8f859b2b
Author: Karsten Loesing <karsten.loesing@gmx.net>
Date:   Thu Feb 9 15:22:02 2012 +0100

    Simply geoip_get_country_by_addr based on arma's comment.

diff --git a/src/or/geoip.c b/src/or/geoip.c
index a72319d28..5e3735c73 100644
--- a/src/or/geoip.c
+++ b/src/or/geoip.c
@@ -269,13 +269,11 @@ geoip_get_country_by_ip(uint32_t ipaddr)
 int
 geoip_get_country_by_addr(const tor_addr_t *addr)
 {
-  uint32_t ipaddr;
   if (tor_addr_family(addr) != AF_INET) {
     /*XXXX IP6 support ipv6 geoip.*/
     return -1;
   }
-  ipaddr = tor_addr_to_ipv4h(addr);
-  return geoip_get_country_by_ip(ipaddr);
+  return geoip_get_country_by_ip(tor_addr_to_ipv4h(addr));
 }
 
 /** Return the number of countries recognized by the GeoIP database. */

