commit 244435b8eecba7bb8b791350de3f08e638a331f2
Author: Wei Yongjun <yongjun_wei@trendmicro.com.cn>
Date:   Tue May 21 10:40:41 2013 +0800

    usb: fusbh200-hcd: fix error handling in fusbh200_hcd_fusbh200_probe()
    
    Fix to release all resources when fusbh200_setup() fail instead of only
    return error.
    
    Signed-off-by: Wei Yongjun <yongjun_wei@trendmicro.com.cn>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/usb/host/fusbh200-hcd.c b/drivers/usb/host/fusbh200-hcd.c
index 0855ca4caac6..cb1f2fa0faf7 100644
--- a/drivers/usb/host/fusbh200-hcd.c
+++ b/drivers/usb/host/fusbh200-hcd.c
@@ -5864,7 +5864,7 @@ static int fusbh200_hcd_fusbh200_probe(struct platform_device *pdev)
 
 	retval = fusbh200_setup(hcd);
 	if (retval)
-		return retval;
+		goto fail_add_hcd;
 
 	fusbh200_init(fusbh200);
 

