commit 951b62c11e86acf8c55d9828aa8c921575023c29
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Fri Oct 5 15:57:06 2007 -0400

    [SCSI] advansys: Fix bug in AdvLoadMicrocode
    
    buf[i] can be up to 0xfd, so doubling it and assigning the result to an
    unsigned char truncates the value.  Just use an unsigned int instead;
    it's only a temporary.
    
    Signed-off-by: Matthew Wilcox <willy@linux.intel.com>
    Cc: Stable Tree <stable@kernel.org>
    Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>

diff --git a/drivers/scsi/advansys.c b/drivers/scsi/advansys.c
index 3c2d6888bb8c..8591585e5cc5 100644
--- a/drivers/scsi/advansys.c
+++ b/drivers/scsi/advansys.c
@@ -6439,7 +6439,7 @@ static int AdvLoadMicrocode(AdvPortAddr iop_base, unsigned char *buf, int size,
 			i += 2;
 			len += 2;
 		} else {
-			unsigned char off = buf[i] * 2;
+			unsigned int off = buf[i] * 2;
 			unsigned short word = (buf[off + 1] << 8) | buf[off];
 			AdvWriteWordAutoIncLram(iop_base, word);
 			len += 2;

