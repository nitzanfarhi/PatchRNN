commit 0b8515ac07723edfe3508818d9b077ccaf662ddf
Author: Alexander Larsson <alexl@redhat.com>
Date:   Tue Jan 19 21:58:44 2016 +0100

    update-appstream: Don't fail badly if remote has not appstream branch

diff --git a/common/xdg-app-dir.c b/common/xdg-app-dir.c
index 7c9b8d32..aa967fa8 100644
--- a/common/xdg-app-dir.c
+++ b/common/xdg-app-dir.c
@@ -637,6 +637,12 @@ xdg_app_dir_update_appstream (XdgAppDir *self,
   if (!ostree_repo_resolve_rev (self->repo, remote_and_branch, TRUE, &new_checksum, error))
     return FALSE;
 
+  if (new_checksum == NULL)
+    {
+      g_warning ("No appstream branch in remote %s\n", remote);
+      return TRUE;
+    }
+
   appstream_dir = g_file_get_child (xdg_app_dir_get_path (self), "appstream");
   remote_dir = g_file_get_child (appstream_dir, remote);
   arch_dir = g_file_get_child (remote_dir, arch);

