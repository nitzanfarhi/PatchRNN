commit 7c69ec0a18f32887b4fde8d7815b98799e254dca
Author: Sujatha Sivakumar <sujatha.sivakumar@oracle.com>
Date:   Thu Nov 7 17:30:57 2013 +0530

    Bug#16736412: THE SERVER WAS CRASHED WHILE EXECUTING
    "SHOW BINLOG EVENTS"
    
    Fixing post push test issue.
    Changing the debug simulation.

diff --git a/sql/log_event.cc b/sql/log_event.cc
index 436c552aa17..7d18b447084 100644
--- a/sql/log_event.cc
+++ b/sql/log_event.cc
@@ -4712,12 +4712,12 @@ int Load_log_event::copy_log_event(const char *buf, ulong event_len,
   table_name  = fields + field_block_len;
   db = table_name + table_name_len + 1;
   DBUG_EXECUTE_IF ("simulate_invalid_address",
-                   db_len = (4294967294U););
+                   db_len = data_len;);
   fname = db + db_len + 1;
-  if (fname > buf_end)
+  if ((db_len > data_len) || (fname > buf_end))
     goto err;
   fname_len = (uint) strlen(fname);
-  if (fname + fname_len > buf_end)
+  if ((fname_len > data_len) || (fname + fname_len > buf_end))
     goto err;
   // null termination is accomplished by the caller doing buf[event_len]=0
 

