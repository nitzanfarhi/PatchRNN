commit 97ad3cac32b380e0a451f5c7a06d7a7a7f557045
Author: Timo Sirainen <tss@iki.fi>
Date:   Thu Jan 10 07:53:26 2013 +0200

    replicator: doveadm connections weren't reset properly

diff --git a/src/replication/replicator/doveadm-connection.c b/src/replication/replicator/doveadm-connection.c
index 4a82c4f35..2b88f1e04 100644
--- a/src/replication/replicator/doveadm-connection.c
+++ b/src/replication/replicator/doveadm-connection.c
@@ -69,6 +69,7 @@ static void doveadm_close(struct doveadm_connection *conn)
 	conn->fd = -1;
 	conn->end_of_print = FALSE;
 	conn->cmd_sent = FALSE;
+	conn->handshaked = FALSE;
 }
 
 static void doveadm_disconnect(struct doveadm_connection *conn)

