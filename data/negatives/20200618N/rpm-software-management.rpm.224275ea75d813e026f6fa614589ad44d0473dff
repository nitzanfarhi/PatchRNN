commit 224275ea75d813e026f6fa614589ad44d0473dff
Author: ewt <devnull@localhost>
Date:   Tue Oct 15 15:03:19 1996 +0000

    don't assume write(fd, buf, 0) always returns w/o error
    
    CVS patchset: 1099
    CVS date: 1996/10/15 15:03:19

diff --git a/lib/install.c b/lib/install.c
index a7d8330a3..c8a5e7c84 100644
--- a/lib/install.c
+++ b/lib/install.c
@@ -674,7 +674,7 @@ static int installArchive(char * prefix, int fd, struct fileToInstall * files,
 	     kill(SIGTERM, child);
 	}
 
-	if (write(p[1], buf, bytesRead) != bytesRead) {
+	if (bytesRead && write(p[1], buf, bytesRead) != bytesRead) {
 	     cpioFailed = 1;
 	     childDead = 1;
 	     kill(SIGTERM, child);

