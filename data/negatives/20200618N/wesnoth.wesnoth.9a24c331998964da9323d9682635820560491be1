commit 9a24c331998964da9323d9682635820560491be1
Author: Gunter Labes <soliton@wesnoth.org>
Date:   Tue May 19 19:02:18 2009 +0000

    don't add an empty COPYING.txt

diff --git a/src/campaign_server/campaign_server.cpp b/src/campaign_server/campaign_server.cpp
index 7564168755..31f22f2a23 100644
--- a/src/campaign_server/campaign_server.cpp
+++ b/src/campaign_server/campaign_server.cpp
@@ -281,14 +281,15 @@ namespace {
 
 		// Copy over COPYING.txt
 		std::string contents = read_file("COPYING.txt");
-		config &copying = dir.add_child("file");
-		copying["name"] = "COPYING.txt";
-		copying["contents"] = contents;
-
 		if (contents.empty()) {
 			LOG_CS << "Could not find COPYING.txt, path is \""
 				<< game_config::path << "\"\n";
+			return;
 		}
+		config &copying = dir.add_child("file");
+		copying["name"] = "COPYING.txt";
+		copying["contents"] = contents;
+
 	}
  	void campaign_server::convert_binary_to_gzip()
  	{

