commit 6b53b87e20a4fc399df7e1936769a3969a901cfc
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Mon Jun 27 23:13:10 2005 +0000

    check mb_y
    
    Originally committed as revision 4401 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/h264.c b/libavcodec/h264.c
index 9517f3cc71..f17c592df6 100644
--- a/libavcodec/h264.c
+++ b/libavcodec/h264.c
@@ -4241,6 +4241,9 @@ static int decode_slice_header(H264Context *h){
 
     s->resync_mb_x = s->mb_x = first_mb_in_slice % s->mb_width;
     s->resync_mb_y = s->mb_y = first_mb_in_slice / s->mb_width;
+    if(s->mb_y >= s->mb_height){
+        return -1;
+    }
     
     if(s->picture_structure==PICT_FRAME){
         h->curr_pic_num=   h->frame_num;

