commit 52ce57f0b760c29e46d3517867bf737ec1ed207d
Author: Johan Danielsson <joda@pdc.kth.se>
Date:   Sat Sep 26 20:59:53 1998 +0000

    merge changes from 0.9.9 branch
    
    
    git-svn-id: svn://svn.h5l.se/heimdal/trunk/heimdal@5159 ec53bebd-3082-4978-b11e-865c3cabbd6b

diff --git a/lib/kafs/common.c b/lib/kafs/common.c
index fcd058966..64f2641b7 100644
--- a/lib/kafs/common.c
+++ b/lib/kafs/common.c
@@ -294,8 +294,11 @@ realm_of_cell(kafs_data *data, const char *cell, char **realm)
 	}
 	fclose(F);
     }
-    if (*realm == NULL && dns_find_cell(cell, buf, sizeof(buf)) == 0)
+    if (*realm == NULL && dns_find_cell(cell, buf, sizeof(buf)) == 0) {
 	*realm = strdup(krb_realmofhost(buf));
+	if(*realm != NULL)
+	    ret = 0;
+    }
     return ret;
 }
 

