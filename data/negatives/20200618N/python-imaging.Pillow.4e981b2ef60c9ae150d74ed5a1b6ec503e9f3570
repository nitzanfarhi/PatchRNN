commit 4e981b2ef60c9ae150d74ed5a1b6ec503e9f3570
Author: Christoph Gohlke <cgohlke@uci.edu>
Date:   Wed Feb 13 19:10:28 2013 -0800

    Use SetWindowLongPtr instead of SetWindowLong

diff --git a/display.c b/display.c
index 830dd3fe..b88ef7aa 100644
--- a/display.c
+++ b/display.c
@@ -735,8 +735,8 @@ PyImaging_CreateWindowWin32(PyObject* self, PyObject* args)
 
     /* register window callback */
     Py_INCREF(callback);
-    SetWindowLong(wnd, 0, (LONG) callback);
-    SetWindowLong(wnd, sizeof(callback), (LONG) PyThreadState_Get());
+    SetWindowLongPtr(wnd, 0, (LONG_PTR) callback);
+    SetWindowLongPtr(wnd, sizeof(callback), (LONG_PTR) PyThreadState_Get());
 
     Py_BEGIN_ALLOW_THREADS
     ShowWindow(wnd, SW_SHOWNORMAL);

