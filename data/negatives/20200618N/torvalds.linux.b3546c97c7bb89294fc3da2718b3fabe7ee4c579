commit b3546c97c7bb89294fc3da2718b3fabe7ee4c579
Author: Lukasz Majewski <l.majewski@samsung.com>
Date:   Fri May 4 14:17:06 2012 +0200

    usb:hsotg:samsung: Remove Disconnect Interrupt handler
    
    The USB Disconnect Interrupt handler, according to specification,
    is only working at HOST mode.
    
    Samsung SoCs (e.g. Exynos4) are working at device mode, so
    this interrupt is never caught.
    
    Signed-off-by: Lukasz Majewski <l.majewski@samsung.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>
    Signed-off-by: Felipe Balbi <balbi@ti.com>

diff --git a/drivers/usb/gadget/s3c-hsotg.c b/drivers/usb/gadget/s3c-hsotg.c
index 8d8652876c67..d0e4fb3bc465 100644
--- a/drivers/usb/gadget/s3c-hsotg.c
+++ b/drivers/usb/gadget/s3c-hsotg.c
@@ -2211,12 +2211,11 @@ static void s3c_hsotg_core_init(struct s3c_hsotg *hsotg)
 	/* Clear any pending interrupts */
 	writel(0xffffffff, hsotg->regs + S3C_GINTSTS);
 
-	writel(S3C_GINTSTS_DisconnInt | S3C_GINTSTS_SessReqInt |
+	writel(S3C_GINTSTS_ErlySusp | S3C_GINTSTS_SessReqInt |
 	       S3C_GINTSTS_GOUTNakEff | S3C_GINTSTS_GINNakEff |
 	       S3C_GINTSTS_ConIDStsChng | S3C_GINTSTS_USBRst |
 	       S3C_GINTSTS_EnumDone | S3C_GINTSTS_OTGInt |
-	       S3C_GINTSTS_USBSusp | S3C_GINTSTS_WkUpInt |
-	       S3C_GINTSTS_ErlySusp,
+	       S3C_GINTSTS_USBSusp | S3C_GINTSTS_WkUpInt,
 	       hsotg->regs + S3C_GINTMSK);
 
 	if (using_dma(hsotg))
@@ -2339,13 +2338,6 @@ static irqreturn_t s3c_hsotg_irq(int irq, void *pw)
 		writel(otgint, hsotg->regs + S3C_GOTGINT);
 	}
 
-	if (gintsts & S3C_GINTSTS_DisconnInt) {
-		dev_dbg(hsotg->dev, "%s: DisconnInt\n", __func__);
-		writel(S3C_GINTSTS_DisconnInt, hsotg->regs + S3C_GINTSTS);
-
-		s3c_hsotg_disconnect_irq(hsotg);
-	}
-
 	if (gintsts & S3C_GINTSTS_SessReqInt) {
 		dev_dbg(hsotg->dev, "%s: SessReqInt\n", __func__);
 		writel(S3C_GINTSTS_SessReqInt, hsotg->regs + S3C_GINTSTS);

