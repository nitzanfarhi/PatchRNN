commit 31327a74b86728e201fcedd0acaecf69d077bf1d
Author: Timo Sirainen <tss@iki.fi>
Date:   Wed Apr 4 04:33:41 2012 +0300

    lib-storage: Previous change incorrectly reverted setting parent shared namespace usable.

diff --git a/src/lib-storage/index/shared/shared-storage.c b/src/lib-storage/index/shared/shared-storage.c
index 651a058eb..f681d0ba8 100644
--- a/src/lib-storage/index/shared/shared-storage.c
+++ b/src/lib-storage/index/shared/shared-storage.c
@@ -328,6 +328,9 @@ int shared_storage_get_namespace(struct mail_namespace **_ns,
 		/* this user doesn't have a usable storage */
 		new_ns->flags |= NAMESPACE_FLAG_UNUSABLE;
 	}
+	/* mark the shared namespace root as usable, since it now has
+	   child namespaces */
+	ns->flags |= NAMESPACE_FLAG_USABLE;
 	*_name = mailbox_list_get_storage_name(new_ns->list,
 				t_strconcat(new_ns->prefix, name, NULL));
 	*_ns = new_ns;

