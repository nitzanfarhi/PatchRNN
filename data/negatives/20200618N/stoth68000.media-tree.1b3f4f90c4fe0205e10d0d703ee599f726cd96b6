commit 1b3f4f90c4fe0205e10d0d703ee599f726cd96b6
Author: Dmitry Eremin <dmitry.eremin@intel.com>
Date:   Wed Apr 27 21:37:21 2016 -0400

    staging: lustre: llite: fixup return value ll_direct_IO_26
    
    Return the correct values from ll_direct_IO_26.
    
    Signed-off-by: Dmitry Eremin <dmitry.eremin@intel.com>
    Intel-bug-id: https://jira.hpdd.intel.com/browse/LU-4069
    Reviewed-on: http://review.whamcloud.com/8080
    Reviewed-by: John L. Hammond <john.hammond@intel.com>
    Reviewed-by: James Simmons <uja.ornl@gmail.com>
    Reviewed-by: Oleg Drokin <oleg.drokin@intel.com>
    Signed-Off-by: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/lustre/lustre/llite/rw26.c b/drivers/staging/lustre/lustre/llite/rw26.c
index a740c7a03db6..93411896aef0 100644
--- a/drivers/staging/lustre/lustre/llite/rw26.c
+++ b/drivers/staging/lustre/lustre/llite/rw26.c
@@ -446,7 +446,7 @@ static ssize_t ll_direct_IO_26(struct kiocb *iocb, struct iov_iter *iter,
 	}
 
 	cl_env_put(env, &refcheck);
-	return tot_bytes ? : result;
+	return tot_bytes ? tot_bytes : result;
 }
 
 /**

