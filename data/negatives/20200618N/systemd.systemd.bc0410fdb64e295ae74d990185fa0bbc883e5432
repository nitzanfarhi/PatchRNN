commit bc0410fdb64e295ae74d990185fa0bbc883e5432
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Tue Dec 14 11:06:49 2004 +0100

    [PATCH] export DEVNAME regardless of the state of udev_dev_d

diff --git a/udev.c b/udev.c
index 0ee70529c..a9da014ea 100644
--- a/udev.c
+++ b/udev.c
@@ -209,9 +209,10 @@ int main(int argc, char *argv[], char *envp[])
 		}
 
 		/* run dev.d/ scripts if we created/deleted a node or changed a netif name */
-		if (udev_dev_d && udev.devname[0] != '\0') {
+		if (udev.devname[0] != '\0') {
 			setenv("DEVNAME", udev.devname, 1);
-			udev_multiplex_directory(&udev, DEVD_DIR, DEVD_SUFFIX);
+			if (udev_dev_d)
+				udev_multiplex_directory(&udev, DEVD_DIR, DEVD_SUFFIX);
 		}
 	} else if ((strncmp(devpath, "/devices/", 9) == 0)) {
 		if (strcmp(action, "add") == 0) {

