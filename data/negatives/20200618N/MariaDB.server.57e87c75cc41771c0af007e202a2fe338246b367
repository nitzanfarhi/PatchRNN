commit 57e87c75cc41771c0af007e202a2fe338246b367
Author: reggie@linux.site <>
Date:   Fri Mar 31 22:03:13 2006 -0600

    use show_table instead of share

diff --git a/sql/sql_show.cc b/sql/sql_show.cc
index d9148f7e368..c8f4d399037 100644
--- a/sql/sql_show.cc
+++ b/sql/sql_show.cc
@@ -2722,9 +2722,9 @@ static int get_schema_tables_record(THD *thd, struct st_table_list *tables,
                   ha_row_type[(uint) share->row_type],
                   NullS);
 #ifdef WITH_PARTITION_STORAGE_ENGINE
-    if (share->db_type == &partition_hton &&
-        share->partition_info != NULL && 
-        ((partition_info*)share->partition_info)->no_parts > 0)
+    if (show_table->s->db_type == &partition_hton && 
+        show_table->part_info != NULL && 
+        show_table->part_info->no_parts > 0)
       ptr= strmov(ptr, " partitioned");
 #endif
     table->field[19]->store(option_buff+1,

