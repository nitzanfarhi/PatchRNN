commit c2b2c94b55bdcff203640921e4879b4b968d8183
Author: Peter Gill <Peter.Gill@Sun.COM>
Date:   Fri Jun 11 14:34:29 2010 -0400

    6948307 target redirection doesn't work for iscsi initiator

diff --git a/usr/src/uts/common/io/idm/idm_impl.c b/usr/src/uts/common/io/idm/idm_impl.c
index 0a9d28aa7c..9e675aadad 100644
--- a/usr/src/uts/common/io/idm/idm_impl.c
+++ b/usr/src/uts/common/io/idm/idm_impl.c
@@ -20,8 +20,7 @@
  */
 
 /*
- * Copyright 2010 Sun Microsystems, Inc.  All rights reserved.
- * Use is subject to license terms.
+ * Copyright (c) 2008, 2010, Oracle and/or its affiliates. All rights reserved.
  */
 
 #include <sys/conf.h>
@@ -283,6 +282,9 @@ idm_parse_login_rsp(idm_conn_t *ic, idm_pdu_t *login_rsp_pdu, boolean_t rx)
 		} else {
 			new_event = (rx ? CE_MISC_RX : CE_MISC_TX);
 		}
+	} else if (rx && login_rsp->status_class ==
+	    ISCSI_STATUS_CLASS_REDIRECT) {
+		new_event = CE_MISC_RX;
 	} else {
 		new_event = (rx ? CE_LOGIN_FAIL_RCV : CE_LOGIN_FAIL_SND);
 	}

