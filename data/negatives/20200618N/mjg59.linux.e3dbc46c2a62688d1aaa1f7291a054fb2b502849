commit e3dbc46c2a62688d1aaa1f7291a054fb2b502849
Author: Choi, Jong-Hwan <jhbird.choi@samsung.com>
Date:   Wed Jul 20 20:33:03 2011 +0000

    net: Kobj and queues_kset should be used when CONFIG_XPS is enabled
    
    Kobj and queues_kset are used with CONFIG_XPS=y.
    
    Signed-off-by: Choi, Jong-Hwan <jhbird.choi@samsung.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/linux/netdevice.h b/include/linux/netdevice.h
index 44f96b24e869..34f3abc6457a 100644
--- a/include/linux/netdevice.h
+++ b/include/linux/netdevice.h
@@ -530,7 +530,7 @@ struct netdev_queue {
 	struct Qdisc		*qdisc;
 	unsigned long		state;
 	struct Qdisc		*qdisc_sleeping;
-#ifdef CONFIG_RPS
+#if defined(CONFIG_RPS) || defined(CONFIG_XPS)
 	struct kobject		kobj;
 #endif
 #if defined(CONFIG_XPS) && defined(CONFIG_NUMA)
@@ -1179,7 +1179,7 @@ struct net_device {
 
 	unsigned char		broadcast[MAX_ADDR_LEN];	/* hw bcast add	*/
 
-#ifdef CONFIG_RPS
+#if defined(CONFIG_RPS) || defined(CONFIG_XPS)
 	struct kset		*queues_kset;
 
 	struct netdev_rx_queue	*_rx;

