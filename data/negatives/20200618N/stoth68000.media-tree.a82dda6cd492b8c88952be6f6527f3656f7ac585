commit a82dda6cd492b8c88952be6f6527f3656f7ac585
Author: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Date:   Tue Mar 18 16:32:45 2014 +0200

    iwlwifi: mvm: disable uAPSD due to bugs in the firmware
    
    The current firmware advertises support for uAPSD, but
    critical bugs force us to disable the feature.
    When a fixed firmware will be available, we will be able to
    re-enable uAPSD.
    
    Cc: <stable@vger.kernel.org> [3.13+]
    Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>

diff --git a/drivers/net/wireless/iwlwifi/mvm/mac80211.c b/drivers/net/wireless/iwlwifi/mvm/mac80211.c
index dbe6ff8e67b3..110bb3f61397 100644
--- a/drivers/net/wireless/iwlwifi/mvm/mac80211.c
+++ b/drivers/net/wireless/iwlwifi/mvm/mac80211.c
@@ -295,7 +295,7 @@ int iwl_mvm_mac_setup_register(struct iwl_mvm *mvm)
 	    !iwlwifi_mod_params.sw_crypto)
 		hw->flags |= IEEE80211_HW_MFP_CAPABLE;
 
-	if (mvm->fw->ucode_capa.flags & IWL_UCODE_TLV_FLAGS_UAPSD_SUPPORT) {
+	if (0 && mvm->fw->ucode_capa.flags & IWL_UCODE_TLV_FLAGS_UAPSD_SUPPORT) {
 		hw->flags |= IEEE80211_HW_SUPPORTS_UAPSD;
 		hw->uapsd_queues = IWL_UAPSD_AC_INFO;
 		hw->uapsd_max_sp_len = IWL_UAPSD_MAX_SP;

