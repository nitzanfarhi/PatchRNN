commit f6ca057f1bfe251d944505fc5ba4df3762802539
Author: Jochen Friedrich <jochen@scram.de>
Date:   Fri Feb 12 10:11:54 2010 +0000

    b44: Ratelimit timeout error message.
    
    Signed-off-by: Jochen Friedrich <jochen@scram.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/b44.c b/drivers/net/b44.c
index 9091c6574b1c..f21cbe63c7b1 100644
--- a/drivers/net/b44.c
+++ b/drivers/net/b44.c
@@ -189,11 +189,13 @@ static int b44_wait_bit(struct b44 *bp, unsigned long reg,
 		udelay(10);
 	}
 	if (i == timeout) {
-		printk(KERN_ERR PFX "%s: BUG!  Timeout waiting for bit %08x of register "
-		       "%lx to %s.\n",
-		       bp->dev->name,
-		       bit, reg,
-		       (clear ? "clear" : "set"));
+		if (net_ratelimit())
+			printk(KERN_ERR PFX "%s: BUG!  Timeout waiting for bit "
+			       "%08x of register "
+			       "%lx to %s.\n",
+			       bp->dev->name,
+			       bit, reg,
+			       (clear ? "clear" : "set"));
 		return -ENODEV;
 	}
 	return 0;

