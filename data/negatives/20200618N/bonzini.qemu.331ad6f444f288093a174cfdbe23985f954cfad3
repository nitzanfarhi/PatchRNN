commit 331ad6f444f288093a174cfdbe23985f954cfad3
Author: ths <ths@c046a42c-6fe2-441c-8c8c-71466251a162>
Date:   Wed Feb 21 22:32:19 2007 +0000

    Allow arbitrary MIPS BIOS sizes between 0 and 4 MB, by Stefan Weil.
    
    
    git-svn-id: svn://svn.savannah.nongnu.org/qemu/trunk@2446 c046a42c-6fe2-441c-8c8c-71466251a162

diff --git a/hw/mips_malta.c b/hw/mips_malta.c
index 97431b1e62..03db2f8a6c 100644
--- a/hw/mips_malta.c
+++ b/hw/mips_malta.c
@@ -533,7 +533,7 @@ void mips_malta_init (int ram_size, int vga_ram_size, int boot_device,
     } else {
         snprintf(buf, sizeof(buf), "%s/%s", bios_dir, BIOS_FILENAME);
         ret = load_image(buf, phys_ram_base + bios_offset);
-        if (ret != BIOS_SIZE) {
+        if (ret < 0 || ret > BIOS_SIZE) {
             fprintf(stderr, "qemu: Warning, could not load MIPS bios '%s'\n",
                     buf);
             exit(1);

