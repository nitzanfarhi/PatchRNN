commit e10c5444e79f8f6ce24112175dd42afb8d0b067a
Author: Matt Stancliff <matt@genges.com>
Date:   Fri Oct 17 08:21:16 2014 -0500

    redis-cli: ignore SIGPIPE network errors
    
    Closes #2066

diff --git a/src/redis-cli.c b/src/redis-cli.c
index 07bcf0a0..34070ab8 100644
--- a/src/redis-cli.c
+++ b/src/redis-cli.c
@@ -524,7 +524,8 @@ static int cliReadReply(int output_raw_strings) {
         }
         if (config.interactive) {
             /* Filter cases where we should reconnect */
-            if (context->err == REDIS_ERR_IO && errno == ECONNRESET)
+            if (context->err == REDIS_ERR_IO &&
+                (errno == ECONNRESET || errno == EPIPE))
                 return REDIS_ERR;
             if (context->err == REDIS_ERR_EOF)
                 return REDIS_ERR;
@@ -1914,6 +1915,8 @@ int main(int argc, char **argv) {
     argc -= firstarg;
     argv += firstarg;
 
+    signal(SIGPIPE, SIG_IGN);
+
     /* Latency mode */
     if (config.latency_mode) {
         if (cliConnect(0) == REDIS_ERR) exit(1);

