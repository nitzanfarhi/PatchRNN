commit c9b7cee2f6b0cf7029237444da819d0783ea78ba
Author: cremno <cremno@mail.ru>
Date:   Wed Jul 9 14:18:37 2014 +0200

    check `mrb_open` return value

diff --git a/mrbgems/mruby-bin-strip/tools/mruby-strip/mruby-strip.c b/mrbgems/mruby-bin-strip/tools/mruby-strip/mruby-strip.c
index f209fa06..b89b3d32 100644
--- a/mrbgems/mruby-bin-strip/tools/mruby-strip/mruby-strip.c
+++ b/mrbgems/mruby-bin-strip/tools/mruby-strip/mruby-strip.c
@@ -96,6 +96,10 @@ main(int argc, char **argv)
   }
 
   mrb = mrb_open();
+  if (mrb == NULL) {
+    fputs("Invalid mrb_state, exiting mruby-strip\n", stderr);
+    return EXIT_FAILURE;
+  }
 
   ireps = (mrb_irep**)malloc(sizeof(mrb_irep*) * argc);
   for (i = args_result; i < argc; ++i) {

