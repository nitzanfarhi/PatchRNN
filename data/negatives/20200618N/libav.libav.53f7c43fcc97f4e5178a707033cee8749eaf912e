commit 53f7c43fcc97f4e5178a707033cee8749eaf912e
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Thu Feb 2 19:23:33 2006 +0000

    sanity checks for seeking
    
    Originally committed as revision 4927 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/utils.c b/libavformat/utils.c
index 1b6b339fe..41abceacb 100644
--- a/libavformat/utils.c
+++ b/libavformat/utils.c
@@ -1348,6 +1348,12 @@ int av_seek_frame_binary(AVFormatContext *s, int stream_index, int64_t target_ts
         pos_limit= pos_max;
     }
 
+    if(ts_min > ts_max){
+        return -1;
+    }else if(ts_min == ts_max){
+        pos_limit= pos_min;
+    }
+
     no_change=0;
     while (pos_min < pos_limit) {
 #ifdef DEBUG_SEEK

