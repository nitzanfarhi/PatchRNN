commit 2981e225f7048b36470383bf5622c42139bd96f7
Author: Alexander Block <ablock84@googlemail.com>
Date:   Wed Aug 1 14:47:03 2012 +0200

    Btrfs: ignore non-FS inodes for send/receive
    
    We have to ignore inode/space cache objects in send/receive.
    
    Reported-by: Alex Lyakas <alex.bolshoy.btrfs@gmail.com>
    Signed-off-by: Alexander Block <ablock84@googlemail.com>

diff --git a/fs/btrfs/send.c b/fs/btrfs/send.c
index db051d17b0be..a4011a9148fd 100644
--- a/fs/btrfs/send.c
+++ b/fs/btrfs/send.c
@@ -4287,6 +4287,11 @@ static int changed_cb(struct btrfs_root *left_root,
 	if (ret < 0)
 		goto out;
 
+	/* Ignore non-FS objects */
+	if (key->objectid == BTRFS_FREE_INO_OBJECTID ||
+	    key->objectid == BTRFS_FREE_SPACE_OBJECTID)
+		goto out;
+
 	if (key->type == BTRFS_INODE_ITEM_KEY)
 		ret = changed_inode(sctx, result);
 	else if (key->type == BTRFS_INODE_REF_KEY)

