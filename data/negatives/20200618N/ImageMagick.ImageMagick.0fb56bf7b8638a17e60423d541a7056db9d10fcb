commit 0fb56bf7b8638a17e60423d541a7056db9d10fcb
Author: Cristy <urban-warrior@imagemagick.org>
Date:   Sat Apr 28 13:27:07 2018 -0400

    ...

diff --git a/coders/wpg.c b/coders/wpg.c
index 1ce559401..a058285ab 100644
--- a/coders/wpg.c
+++ b/coders/wpg.c
@@ -1408,9 +1408,10 @@ static Image *ReadWPGImage(const ImageInfo *image_info,
               if (image_info->ping != MagickFalse)
                 return(image);
               status=SetImageExtent(image,image->columns,image->rows,exception);
+              if (status != MagickFalse)
+                status=ResetImagePixels(image,exception);
               if (status == MagickFalse)
                 break;
-              (void) ResetImagePixels(image,exception);
               if ((image->colors == 0) && (bpp != 24))
                 {
                   image->colors=one << bpp;

