commit 7913c21a25a9d54b093bed3522d35b188aadf6a4
Author: Alan Cox <alan@linux.intel.com>
Date:   Fri Aug 7 19:24:00 2009 +0100

    Staging: sep: fix time handler
    
    Cleaning up the code reveals an obvious thinko
    
    Signed-off-by: Alan Cox <alan@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/sep/sep_driver.c b/drivers/staging/sep/sep_driver.c
index fe46c1b46472..c2d9cab85d42 100644
--- a/drivers/staging/sep/sep_driver.c
+++ b/drivers/staging/sep/sep_driver.c
@@ -2143,7 +2143,9 @@ static int sep_get_time_handler(unsigned long arg)
 	struct sep_driver_get_time_t command_args;
 
 	error = sep_set_time(&command_args.time_physical_address, &command_args.time_value);
-	error = copy_to_user((void *) arg, (void *) &command_args, sizeof(struct sep_driver_get_time_t));
+	if (error == 0)
+		error = copy_to_user((void __user *)arg,
+			&command_args, sizeof(struct sep_driver_get_time_t));
 	return error;
 
 }

