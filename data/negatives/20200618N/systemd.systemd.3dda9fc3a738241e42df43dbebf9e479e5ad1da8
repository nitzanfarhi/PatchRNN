commit 3dda9fc3a738241e42df43dbebf9e479e5ad1da8
Author: Lennart Poettering <lennart@poettering.net>
Date:   Tue Jul 13 20:07:00 2010 +0200

    manager: always allow stopping of units that failed to load

diff --git a/src/manager.c b/src/manager.c
index cdcd6935c..58848356e 100644
--- a/src/manager.c
+++ b/src/manager.c
@@ -1328,7 +1328,8 @@ static int transaction_add_job_and_dependencies(
         assert(type < _JOB_TYPE_MAX);
         assert(unit);
 
-        if (unit->meta.load_state != UNIT_LOADED) {
+        if (type != JOB_STOP &&
+            unit->meta.load_state != UNIT_LOADED) {
                 dbus_set_error(e, BUS_ERROR_LOAD_FAILED, "Unit %s failed to load. See logs for details.", unit->meta.id);
                 return -EINVAL;
         }

