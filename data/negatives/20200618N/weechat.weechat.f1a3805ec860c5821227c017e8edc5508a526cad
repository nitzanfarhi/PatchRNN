commit f1a3805ec860c5821227c017e8edc5508a526cad
Author: Sebastien Helleu <flashcode@flashtux.org>
Date:   Mon Feb 7 11:56:53 2011 +0100

    Reset bold attribute when setting extended color for foreground

diff --git a/src/gui/curses/gui-curses-window.c b/src/gui/curses/gui-curses-window.c
index 5cccb921d..ac1458367 100644
--- a/src/gui/curses/gui-curses-window.c
+++ b/src/gui/curses/gui-curses-window.c
@@ -351,6 +351,8 @@ gui_window_set_custom_color_fg (WINDOW *window, int fg)
     {
         current_bg = window_current_style_bg;
         
+        gui_window_remove_color_style (window, A_BOLD);
+        
         if ((fg > 0) && (fg & GUI_COLOR_EXTENDED_FLAG))
         {
             gui_window_set_color (window,
@@ -359,7 +361,6 @@ gui_window_set_custom_color_fg (WINDOW *window, int fg)
         }
         else if (fg < GUI_CURSES_NUM_WEECHAT_COLORS)
         {
-            gui_window_remove_color_style (window, A_BOLD);
             attributes = gui_weechat_colors[fg].attributes;
             gui_window_set_color_style (window, attributes);
             fg = gui_weechat_colors[fg].foreground;

