commit eb0fc73dcc85268f43fe6978342acf8eb90f72fe
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Wed Jun 18 00:07:30 2014 +0200

    avfilter/vf_spp: Use av_malloc_array()
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavfilter/vf_spp.c b/libavfilter/vf_spp.c
index 683e333db4..ba0104bd33 100644
--- a/libavfilter/vf_spp.c
+++ b/libavfilter/vf_spp.c
@@ -270,8 +270,8 @@ static int config_input(AVFilterLink *inlink)
     spp->hsub = desc->log2_chroma_w;
     spp->vsub = desc->log2_chroma_h;
     spp->temp_linesize = FFALIGN(inlink->w + 16, 16);
-    spp->temp = av_malloc(spp->temp_linesize * h * sizeof(*spp->temp));
-    spp->src  = av_malloc(spp->temp_linesize * h * sizeof(*spp->src));
+    spp->temp = av_malloc_array(spp->temp_linesize, h * sizeof(*spp->temp));
+    spp->src  = av_malloc_array(spp->temp_linesize, h * sizeof(*spp->src));
     if (!spp->use_bframe_qp) {
         /* we are assuming here the qp blocks will not be smaller that 16x16 */
         spp->non_b_qp_alloc_size = FF_CEIL_RSHIFT(inlink->w, 4) * FF_CEIL_RSHIFT(inlink->h, 4);

