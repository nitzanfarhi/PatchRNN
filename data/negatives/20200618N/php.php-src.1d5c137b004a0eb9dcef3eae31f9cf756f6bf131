commit 1d5c137b004a0eb9dcef3eae31f9cf756f6bf131
Author: Dmitry Stogov <dmitry@php.net>
Date:   Thu Nov 5 10:38:56 2009 +0000

    Avoid invoking setitimer when timeouts have been disabled (Arvind Srinivasan)

diff --git a/main/main.c b/main/main.c
index e4a5c3bc64..4261b520cb 100644
--- a/main/main.c
+++ b/main/main.c
@@ -204,12 +204,13 @@ static void php_disable_classes(TSRMLS_D)
  */
 static PHP_INI_MH(OnUpdateTimeout)
 {
-	EG(timeout_seconds) = atoi(new_value);
 	if (stage==PHP_INI_STAGE_STARTUP) {
 		/* Don't set a timeout on startup, only per-request */
+		EG(timeout_seconds) = atoi(new_value);
 		return SUCCESS;
 	}
 	zend_unset_timeout(TSRMLS_C);
+	EG(timeout_seconds) = atoi(new_value);
 	zend_set_timeout(EG(timeout_seconds));
 	return SUCCESS;
 }

