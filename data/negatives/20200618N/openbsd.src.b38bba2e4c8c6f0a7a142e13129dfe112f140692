commit b38bba2e4c8c6f0a7a142e13129dfe112f140692
Author: sthen <sthen@openbsd.org>
Date:   Sat Aug 29 12:30:30 2015 +0000

    use correct size for free(9), problem reported by Theo Buehler, ok kettenis

diff --git a/sys/arch/amd64/amd64/mem.c b/sys/arch/amd64/amd64/mem.c
index 0f5ba528ae3..66dd603c77f 100644
--- a/sys/arch/amd64/amd64/mem.c
+++ b/sys/arch/amd64/amd64/mem.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: mem.c,v 1.26 2015/08/28 00:03:53 deraadt Exp $ */
+/*	$OpenBSD: mem.c,v 1.27 2015/08/29 12:30:30 sthen Exp $ */
 /*
  * Copyright (c) 1988 University of Utah.
  * Copyright (c) 1982, 1986, 1990, 1993
@@ -299,7 +299,7 @@ mem_ioctl(dev_t dev, u_long cmd, caddr_t data, int flags, struct proc *p)
 		md->mr_owner[sizeof(md->mr_owner) - 1] = 0;
 		if (error == 0)
 			error = mem_range_attr_set(md, &mo->mo_arg[0]);
-		free(md, M_MEMDESC, nd * sizeof(struct mem_range_desc));
+		free(md, M_MEMDESC, sizeof(struct mem_range_desc));
 		break;
 	}
 	return (error);

