commit f29bba1123687c3eb601dd0df18d88a3b8a9fb82
Author: wm4 <wm4@nowhere>
Date:   Fri Jul 15 13:03:57 2016 +0200

    af: avoid rebuilding filter chain in another minor case
    
    No need to create additional noise of we can trivially see that
    rebuiding the chain won't change anything.

diff --git a/audio/filter/af.c b/audio/filter/af.c
index 8d1ce889c4..d74e912500 100644
--- a/audio/filter/af.c
+++ b/audio/filter/af.c
@@ -366,6 +366,9 @@ static int af_find_output_conversion(struct af_stream *s, struct mp_audio *cfg)
             !mp_chmap_equals_reordered(&af->fmt_in.channels, &af->fmt_out.channels))
             return AF_ERROR;
     }
+    // And not if it's the only filter.
+    if (conv->prev == s->first && conv->next == s->last)
+        return AF_ERROR;
 
     *cfg = s->output;
     return AF_OK;

