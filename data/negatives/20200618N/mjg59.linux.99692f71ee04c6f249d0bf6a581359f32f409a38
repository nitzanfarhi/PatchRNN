commit 99692f71ee04c6f249d0bf6a581359f32f409a38
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Fri Sep 12 18:20:16 2008 +0200

    firewire: fix ioctl() return code
    
    Reported by Jay Fenlason:  ioctl() did not return as intended
      - the size of data read into ioctl_send_request,
      - the number of datagrams enqueued by ioctl_queue_iso.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

diff --git a/drivers/firewire/fw-cdev.c b/drivers/firewire/fw-cdev.c
index cfceb2cba4e4..ed03234cbea8 100644
--- a/drivers/firewire/fw-cdev.c
+++ b/drivers/firewire/fw-cdev.c
@@ -913,7 +913,7 @@ dispatch_ioctl(struct client *client, unsigned int cmd, void __user *arg)
 			return -EFAULT;
 	}
 
-	return 0;
+	return retval;
 }
 
 static long

