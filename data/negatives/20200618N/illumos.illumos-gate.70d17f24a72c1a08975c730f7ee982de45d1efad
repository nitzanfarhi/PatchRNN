commit 70d17f24a72c1a08975c730f7ee982de45d1efad
Author: as158974 <none@none>
Date:   Sun Feb 18 05:05:14 2007 -0800

    6500236 several times a day uucp stops working and creates a CPU workload up to 100%.

diff --git a/usr/src/cmd/bnu/eio.c b/usr/src/cmd/bnu/eio.c
index f514239690..f151af851e 100644
--- a/usr/src/cmd/bnu/eio.c
+++ b/usr/src/cmd/bnu/eio.c
@@ -2,9 +2,8 @@
  * CDDL HEADER START
  *
  * The contents of this file are subject to the terms of the
- * Common Development and Distribution License, Version 1.0 only
- * (the "License").  You may not use this file except in compliance
- * with the License.
+ * Common Development and Distribution License (the "License").
+ * You may not use this file except in compliance with the License.
  *
  * You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
  * or http://www.opensolaris.org/os/licensing.
@@ -20,7 +19,7 @@
  * CDDL HEADER END
  */
 /*
- * Copyright 2005 Sun Microsystems, Inc.  All rights reserved.
+ * Copyright 2007 Sun Microsystems, Inc.  All rights reserved.
  * Use is subject to license terms.
  */
 
@@ -254,6 +253,16 @@ FILE *fp2;
 			DEBUG(7, "erdblk failed\n%s", "");
 			return(FAIL);
 		}
+
+		/*
+		 * handle the case for remote socket close.
+		 */
+		if (len == 0) {
+			ret = errno;
+			DEBUG(7, "erddata: remote socket closed, errno %d\n",
+				    ret);
+			break;
+		}
 		bytes += len;
 		putfilesize(bytes);
 		if ((msglen -= len) < 0) {

