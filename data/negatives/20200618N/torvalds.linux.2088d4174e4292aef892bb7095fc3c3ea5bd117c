commit 2088d4174e4292aef892bb7095fc3c3ea5bd117c
Author: Ivo van Doorn <ivdoorn@gmail.com>
Date:   Fri May 23 18:13:49 2008 +0200

    rt2x00: Don't count retries as failure
    
    Link quality estimation became quite low for all rt2x00 drivers
    because the number of retries it took to send the frame were
    counted as failure.
    This does not correspond to the legacy driver link quality calculation,
    by not counting it we will send somewhat more optimistic values to
    mac80211.
    
    Signed-off-by: Ivo van Doorn <IvDoorn@gmail.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/rt2x00/rt2x00dev.c b/drivers/net/wireless/rt2x00/rt2x00dev.c
index b22c02737185..e0767f0cb3d4 100644
--- a/drivers/net/wireless/rt2x00/rt2x00dev.c
+++ b/drivers/net/wireless/rt2x00/rt2x00dev.c
@@ -507,7 +507,7 @@ void rt2x00lib_txdone(struct queue_entry *entry,
 	 * Update TX statistics.
 	 */
 	rt2x00dev->link.qual.tx_success += success;
-	rt2x00dev->link.qual.tx_failed += txdesc->retry + fail;
+	rt2x00dev->link.qual.tx_failed += fail;
 
 	/*
 	 * Initialize TX status

