commit 1552b44bcdcb370b745c9ea4dbe7dfd2c1223bcd
Author: Kazuho Oku <kazuhooku@gmail.com>
Date:   Thu May 7 06:20:07 2015 +0900

    send 503 in case of ENFILE or EMFILE

diff --git a/lib/handler/file.c b/lib/handler/file.c
index ef236b3d..0a3cb8d4 100644
--- a/lib/handler/file.c
+++ b/lib/handler/file.c
@@ -349,6 +349,8 @@ static int on_req(h2o_handler_t *_self, h2o_req_t *req)
     /* failed to open */
     if (errno == ENOENT) {
         h2o_send_error(req, 404, "File Not Found", "file not found", 0);
+    } else if (errno == ENFILE || errno == EMFILE) {
+        h2o_send_error(req, 503, "Service Unavailable", "please try again later", 0);
     } else {
         h2o_send_error(req, 403, "Access Forbidden", "access forbidden", 0);
     }

