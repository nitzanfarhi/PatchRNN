commit f7756efca6f8b9d885842f4b0954afa04d19271e
Author: Armin Novak <armin.novak@thincast.com>
Date:   Tue Jan 20 12:13:08 2015 +0100

    Moved channel loading, now only loading before connect.

diff --git a/client/X11/xf_client.c b/client/X11/xf_client.c
index c9d561d1b..92deaa1f4 100644
--- a/client/X11/xf_client.c
+++ b/client/X11/xf_client.c
@@ -925,7 +925,6 @@ BOOL xf_pre_connect(freerdp* instance)
 	PubSub_SubscribeChannelDisconnected(instance->context->pubSub,
 			(pChannelDisconnectedEventHandler) xf_OnChannelDisconnectedEventHandler);
 
-	freerdp_client_load_addins(channels, instance->settings);
 	freerdp_channels_pre_connect(channels, instance);
 
 	if (!settings->Username)
@@ -1813,6 +1812,7 @@ static int xfreerdp_client_new(freerdp* instance, rdpContext* context)
 	settings = instance->settings;
 	xfc->settings = instance->context->settings;
 
+	freerdp_client_load_addins(context->channels, instance->settings);
 	PubSub_SubscribeTerminate(context->pubSub, (pTerminateEventHandler) xf_TerminateEventHandler);
 
 #ifdef WITH_XRENDER

