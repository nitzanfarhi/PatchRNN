commit ef5428a1386d472939c763abc68a9d0f1fb18dce
Author: Alexander Aring <alex.aring@gmail.com>
Date:   Sun Mar 1 21:55:29 2015 +0100

    at86rf230: cleanup and squash stack variable
    
    I had this variable because I thought it would be protected by
    disable/enable irq but this is not true. It's protected by stop/wake
    netdev queue which is called by ieee802154_xmit_complete.
    
    Signed-off-by: Alexander Aring <alex.aring@gmail.com>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

diff --git a/drivers/net/ieee802154/at86rf230.c b/drivers/net/ieee802154/at86rf230.c
index 503fabddd431..85012201eaf5 100644
--- a/drivers/net/ieee802154/at86rf230.c
+++ b/drivers/net/ieee802154/at86rf230.c
@@ -725,11 +725,10 @@ at86rf230_tx_complete(void *context)
 {
 	struct at86rf230_state_change *ctx = context;
 	struct at86rf230_local *lp = ctx->lp;
-	struct sk_buff *skb = lp->tx_skb;
 
 	enable_irq(lp->spi->irq);
 
-	ieee802154_xmit_complete(lp->hw, skb, !lp->tx_aret);
+	ieee802154_xmit_complete(lp->hw, lp->tx_skb, !lp->tx_aret);
 }
 
 static void

