commit 24dba5f39194c57f98090d1ee504be5740dc521c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Dec 17 12:35:28 2007 -0500

    libertas: don't clear priv->dnld_sent after sending sleep confirm
    
    DNLD_RES_RECEIVED is a bit of a misnomer -- we never wait for the result
    to be received; it's purely representing the state of the TX path, and
    in this case the TX path is definitely busy.
    
    Of course, that means that we don't actually care about DATA_SENT vs.
    CMD_SENT either, but that's a can of worms for another day...
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/libertas/cmd.c b/drivers/net/wireless/libertas/cmd.c
index 2765b9c20851..10c60bab41f6 100644
--- a/drivers/net/wireless/libertas/cmd.c
+++ b/drivers/net/wireless/libertas/cmd.c
@@ -2000,7 +2000,6 @@ static int sendconfirmsleep(struct lbs_private *priv, u8 *cmdptr, u16 size)
 	lbs_deb_hex(LBS_DEB_HOST, "sleep confirm command", cmdptr, size);
 
 	ret = priv->hw_host_to_card(priv, MVMS_CMD, cmdptr, size);
-	priv->dnld_sent = DNLD_RES_RECEIVED;
 
 	spin_lock_irqsave(&priv->driver_lock, flags);
 	if (priv->intcounter || priv->currenttxskb)

