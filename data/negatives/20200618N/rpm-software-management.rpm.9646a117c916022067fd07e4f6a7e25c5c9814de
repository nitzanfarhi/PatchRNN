commit 9646a117c916022067fd07e4f6a7e25c5c9814de
Author: Panu Matilainen <pmatilai@redhat.com>
Date:   Thu Nov 13 13:22:03 2008 +0200

    Filter out mtime difference of shared files on verify (rhbz#426672, #444661)
    - Since we permit shared files to differ by mtime on installation, it makes
      no sense to consider them as verification failure either. This has been
      especially bad on multilib where timestamp differences make verify warning
      lights look like Las Vegas at night. If file mtime on disk and header
      differs, check if it's owned by more than one package and if so, ignore
      the timestamp difference.

diff --git a/lib/verify.c b/lib/verify.c
index d620f7db5..e485f0305 100644
--- a/lib/verify.c
+++ b/lib/verify.c
@@ -206,9 +206,12 @@ int rpmVerifyFile(const rpmts ts, const rpmfi fi,
     }
 #endif
 
-    if (flags & RPMVERIFY_MTIME) {
-	if (sb.st_mtime != rpmfiFMtime(fi))
+    if ((flags & RPMVERIFY_MTIME) && (sb.st_mtime != rpmfiFMtime(fi))) {
+	/* Filter out timestamp differences of shared files */
+	rpmdbMatchIterator mi = rpmtsInitIterator(ts, RPMTAG_BASENAMES, fn, 0);
+	if (rpmdbGetIteratorCount(mi) < 2) 
 	    *res |= RPMVERIFY_MTIME;
+	rpmdbFreeIterator(mi);
     }
 
     if (flags & RPMVERIFY_USER) {

