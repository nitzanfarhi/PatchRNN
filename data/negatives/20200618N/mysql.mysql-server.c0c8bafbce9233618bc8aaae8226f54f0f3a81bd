commit c0c8bafbce9233618bc8aaae8226f54f0f3a81bd
Author: stewart@mysql.com <>
Date:   Fri Apr 7 00:58:08 2006 +1000

    BUG#15530: Cluster start up "show" shows all data nodes as master during start
    
    along with the fix for 18843, this should fix the bug.

diff --git a/ndb/src/mgmclient/CommandInterpreter.cpp b/ndb/src/mgmclient/CommandInterpreter.cpp
index 72debcc26a9..cdfcc985cd9 100644
--- a/ndb/src/mgmclient/CommandInterpreter.cpp
+++ b/ndb/src/mgmclient/CommandInterpreter.cpp
@@ -1085,7 +1085,7 @@ print_nodes(ndb_mgm_cluster_state *state, ndb_mgm_configuration_iterator *it,
 	  }
 	  if (node_state->node_group >= 0) {
 	    ndbout << ", Nodegroup: " << node_state->node_group;
-	    if (node_state->dynamic_id == master_id)
+	    if (master_id && node_state->dynamic_id == master_id)
 	      ndbout << ", Master";
 	  }
 	}

