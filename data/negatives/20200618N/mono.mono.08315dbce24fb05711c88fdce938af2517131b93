commit 08315dbce24fb05711c88fdce938af2517131b93
Author: Zoltan Varga <vargaz@gmail.com>
Date:   Fri Mar 30 07:52:50 2012 +0200

    Disable wrapper generation code when DISABLE_JIT is defined.

diff --git a/mono/metadata/marshal.c b/mono/metadata/marshal.c
index e4405061ba5..ae38a0a63dd 100644
--- a/mono/metadata/marshal.c
+++ b/mono/metadata/marshal.c
@@ -8035,6 +8035,10 @@ emit_marshal (EmitMarshalContext *m, int argnum, MonoType *t,
 	/* Ensure that we have marshalling info for this param */
 	mono_marshal_load_type_info (mono_class_from_mono_type (t));
 
+#ifdef DISABLE_JIT
+	/* Not JIT support, no need to generate correct IL */
+	return conv_arg;
+#else
 	if (spec && spec->native == MONO_NATIVE_CUSTOM)
 		return emit_marshal_custom (m, argnum, t, spec, conv_arg, conv_arg_type, action);
 
@@ -8099,6 +8103,7 @@ emit_marshal (EmitMarshalContext *m, int argnum, MonoType *t,
 		else
 			return emit_marshal_object (m, argnum, t, spec, conv_arg, conv_arg_type, action);
 	}
+#endif
 
 	return conv_arg;
 }

