commit a359292046953e828b668cc1acd2aad9a26a21b5
Author: Panu Matilainen <pmatilai@redhat.com>
Date:   Thu Apr 12 16:27:08 2012 +0300

    Make config file modification detection a bit more readable

diff --git a/lib/transaction.c b/lib/transaction.c
index 68461d486..4ff264665 100644
--- a/lib/transaction.c
+++ b/lib/transaction.c
@@ -539,8 +539,9 @@ assert(otherFi != NULL);
 		const unsigned char *digest;
 		if ((digest = rpmfiFDigest(fi, &algo, &diglen))) {
 		    unsigned char fdigest[diglen];
-		    if (!rpmDoDigest(algo, fn, 0, fdigest, NULL) &&
-			memcmp(digest, fdigest, diglen)) {
+		    int modified = (!rpmDoDigest(algo, fn, 0, fdigest, NULL) &&
+				    memcmp(digest, fdigest, diglen));
+		    if (modified) {
 			rpmfsSetAction(fs, i, FA_BACKUP);
 			break;
 		    }

