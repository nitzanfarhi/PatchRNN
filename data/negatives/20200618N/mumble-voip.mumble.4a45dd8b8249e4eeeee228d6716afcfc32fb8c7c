commit 4a45dd8b8249e4eeeee228d6716afcfc32fb8c7c
Author: Benjamin Jemlich <pcgod@users.sourceforge.net>
Date:   Thu Dec 24 13:58:59 2009 +0100

    Fix TTS output for user links

diff --git a/src/mumble/Log.cpp b/src/mumble/Log.cpp
index c0c81d3a..4a456671 100644
--- a/src/mumble/Log.cpp
+++ b/src/mumble/Log.cpp
@@ -266,9 +266,9 @@ QString Log::formatClientUser(ClientUser *cu, LogColorType t) {
 
 	if (cu) {
 		if (cu->qsHash.isEmpty()) {
-			return QString::fromLatin1("<a href='clientid://%2/%4' class='log-user%1'>*%3*</a>").arg(className).arg(cu->uiSession).arg(cu->qsName).arg(QString::fromLatin1(g.sh->qbaDigest.toBase64()));
+			return QString::fromLatin1("<a href='clientid://%2/%4' class='log-user log-%1'>\"%3\"</a>").arg(className).arg(cu->uiSession).arg(cu->qsName).arg(QString::fromLatin1(g.sh->qbaDigest.toBase64()));
 		} else {
-			return QString::fromLatin1("<a href='clientid://%2' class='log-user%1'>*%3*</a>").arg(className).arg(cu->qsHash).arg(cu->qsName);
+			return QString::fromLatin1("<a href='clientid://%2' class='log-user log-%1'>\"%3\"</a>").arg(className).arg(cu->qsHash).arg(cu->qsName);
 		}
 	} else {
 		return QString::fromLatin1("<span class='log-server%1'>%2</span>").arg(className).arg(tr("the server"));
diff --git a/src/mumble/Messages.cpp b/src/mumble/Messages.cpp
index 2858dd50..ec65f11b 100644
--- a/src/mumble/Messages.cpp
+++ b/src/mumble/Messages.cpp
@@ -226,7 +226,7 @@ void MainWindow::msgUserState(const MumbleProto::UserState &msg) {
 	}
 
 	if (bNewUser)
-		g.l->log(Log::UserJoin, tr("Joined server: %1.").arg(Log::formatClientUser(pDst, Log::Source)));
+		g.l->log(Log::UserJoin, tr("%1 connected.").arg(Log::formatClientUser(pDst, Log::Source)));
 
 	if (msg.has_self_deaf() || msg.has_self_mute()) {
 		if (msg.has_self_mute())
@@ -397,7 +397,7 @@ void MainWindow::msgUserRemove(const MumbleProto::UserRemove &msg) {
 		else
 			g.l->log((pSrc == pSelf) ? Log::YouKicked : Log::UserKicked, tr("%3 was kicked from the server by %1: %2.").arg(Log::formatClientUser(pSrc, Log::Source)).arg(reason).arg(Log::formatClientUser(pDst, Log::Target)));
 	} else {
-		g.l->log(Log::UserLeave, tr("Left server: %1.").arg(Log::formatClientUser(pDst, Log::Source)));
+		g.l->log(Log::UserLeave, tr("%1 disconnected.").arg(Log::formatClientUser(pDst, Log::Source)));
 	}
 	if (pDst != pSelf)
 		pmModel->removeUser(pDst);

