commit c75e8aa6e1ff904c75ace8e9ddb213b412c7216c
Author: Inaam Rana <inaam.rana@oracle.com>
Date:   Mon Jun 20 00:37:36 2011 -0400

    Fix a merge error introduced in:
    revision-id: inaam.rana@oracle.com-20110617202919-b7p0u0ekj5a9u9nu

diff --git a/storage/innobase/buf/buf0buf.c b/storage/innobase/buf/buf0buf.c
index b493529bb7f..a282954e8e8 100644
--- a/storage/innobase/buf/buf0buf.c
+++ b/storage/innobase/buf/buf0buf.c
@@ -3232,9 +3232,6 @@ buf_page_init_for_read(
 		uninitialized data. */
 		data = buf_buddy_alloc(buf_pool, zip_size, &lru);
 
-		/* Initialize the buf_pool pointer. */
-		bpage->buf_pool_index = buf_pool_index(buf_pool);
-
 		/* If buf_buddy_alloc() allocated storage from the LRU list,
 		it released and reacquired buf_pool->mutex.  Thus, we must
 		check the page_hash again, as it may have been modified. */
@@ -3258,6 +3255,9 @@ buf_page_init_for_read(
 
 		bpage = buf_page_alloc_descriptor();
 
+		/* Initialize the buf_pool pointer. */
+		bpage->buf_pool_index = buf_pool_index(buf_pool);
+
 		page_zip_des_init(&bpage->zip);
 		page_zip_set_size(&bpage->zip, zip_size);
 		bpage->zip.data = data;

