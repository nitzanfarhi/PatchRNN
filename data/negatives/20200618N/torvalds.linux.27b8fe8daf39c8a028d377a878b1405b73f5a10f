commit 27b8fe8daf39c8a028d377a878b1405b73f5a10f
Author: Jia Hongtao <hongtao.jia@nxp.com>
Date:   Mon Apr 18 15:59:32 2016 +0800

    cpufreq: qoriq: Don't show cooling device messages if THERMAL_OF undefined
    
    When THERMAL_OF is undefined the cooling device messages should not be
    shown. -ENOSYS is returned from of_cpufreq_cooling_register() when
    THERMAL_OF is undefined.
    
    Signed-off-by: Jia Hongtao <hongtao.jia@nxp.com>
    Acked-by: Viresh Kumar <viresh.kumar@linaro.org>
    Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>

diff --git a/drivers/cpufreq/qoriq-cpufreq.c b/drivers/cpufreq/qoriq-cpufreq.c
index b23e525a7af3..8b7758936fcf 100644
--- a/drivers/cpufreq/qoriq-cpufreq.c
+++ b/drivers/cpufreq/qoriq-cpufreq.c
@@ -333,8 +333,8 @@ static void qoriq_cpufreq_ready(struct cpufreq_policy *policy)
 		cpud->cdev = of_cpufreq_cooling_register(np,
 							 policy->related_cpus);
 
-		if (IS_ERR(cpud->cdev)) {
-			pr_err("Failed to register cooling device cpu%d: %ld\n",
+		if (IS_ERR(cpud->cdev) && PTR_ERR(cpud->cdev) != -ENOSYS) {
+			pr_err("cpu%d is not running as cooling device: %ld\n",
 					policy->cpu, PTR_ERR(cpud->cdev));
 
 			cpud->cdev = NULL;

