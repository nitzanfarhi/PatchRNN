commit fcaba4f336ce6b9f6a0342aff0bab8d805bd254e
Author: Jon Olav Hauglid <jon.hauglid@oracle.com>
Date:   Mon Nov 22 11:50:20 2010 +0100

    This patch fixes the bug which caused the funcs_1.storedproc
    test case to give valgrind warnings.
    
    The problem was that when comparing two MDL key buffers using
    memcmp(), 1 was added to the buffer length. However, this was
    no longer needed since the buffer length already included the
    '\0' terminator.

diff --git a/sql/mdl.h b/sql/mdl.h
index ff30746e739..4a9397fe215 100644
--- a/sql/mdl.h
+++ b/sql/mdl.h
@@ -252,7 +252,7 @@ public:
       character set is utf-8, we can safely assume that no
       character starts with a zero byte.
     */
-    return memcmp(m_ptr, rhs->m_ptr, min(m_length, rhs->m_length)+1);
+    return memcmp(m_ptr, rhs->m_ptr, min(m_length, rhs->m_length));
   }
 
   MDL_key(const MDL_key *rhs)

