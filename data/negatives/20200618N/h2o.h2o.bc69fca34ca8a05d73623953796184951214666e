commit bc69fca34ca8a05d73623953796184951214666e
Author: Frederik Deweerdt <frederik.deweerdt@gmail.com>
Date:   Fri Jan 27 11:31:56 2017 -0800

    Handle fcntl failing to set CLOEXEC CID 1396802

diff --git a/lib/common/serverutil.c b/lib/common/serverutil.c
index 3550c413..45c91250 100644
--- a/lib/common/serverutil.c
+++ b/lib/common/serverutil.c
@@ -248,7 +248,8 @@ int h2o_read_command(const char *cmd, char **argv, h2o_buffer_t **resp, int *chi
     /* create pipe for reading the result */
     if (pipe(respfds) != 0)
         goto Exit;
-    fcntl(respfds[0], F_SETFD, O_CLOEXEC);
+    if (fcntl(respfds[0], F_SETFD, O_CLOEXEC) < 0)
+        goto Exit;
 
     /* spawn */
     int mapped_fds[] = {respfds[1], 1, /* stdout of the child process is read from the pipe */

