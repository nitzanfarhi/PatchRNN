commit b6cddabcfeb65a338eff78d57e92fb04ce223280
Author: Martin Hosken <martin_hosken@sil.org>
Date:   Fri Aug 14 14:44:18 2015 +0700

    Only reverse if bidi pass not last pass

diff --git a/src/Justifier.cpp b/src/Justifier.cpp
index 694aa12..e75d750 100644
--- a/src/Justifier.cpp
+++ b/src/Justifier.cpp
@@ -70,7 +70,7 @@ float Segment::justify(Slot *pSlot, const Font *font, float width, GR_MAYBE_UNUS
     if (width < 0 && !(silf()->flags()))
         return width;
 
-    if ((m_dir & 1) != m_silf->dir())
+    if ((m_dir & 1) != m_silf->dir() && m_silf->bidiPass() != m_silf->numPasses())
     {
         reverseSlots();
         s = pFirst;
@@ -229,7 +229,7 @@ float Segment::justify(Slot *pSlot, const Font *font, float width, GR_MAYBE_UNUS
     m_first = oldFirst;
     m_last = oldLast;
 
-    if ((m_dir & 1) != m_silf->dir())
+    if ((m_dir & 1) != m_silf->dir() && m_silf->bidiPass() != m_silf->numPasses())
         reverseSlots();
     return res.x;
 }
diff --git a/src/inc/Segment.h b/src/inc/Segment.h
index 6d2d44a..0ae7528 100644
--- a/src/inc/Segment.h
+++ b/src/inc/Segment.h
@@ -197,7 +197,7 @@ inline
 void Segment::finalise(const Font *font, bool reverse)
 {
     if (!m_first) return;
-    if (reverse && (m_dir & 1) != m_silf->dir())
+    if (reverse && (m_dir & 1) != m_silf->dir() && m_silf->bidiPass() != m_silf->numPasses())
         reverseSlots();
 
     m_advance = positionSlots(font, m_first, m_last, m_dir);

