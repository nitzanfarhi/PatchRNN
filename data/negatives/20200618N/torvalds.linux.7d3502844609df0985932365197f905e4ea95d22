commit 7d3502844609df0985932365197f905e4ea95d22
Author: Mauro Carvalho Chehab <mchehab@redhat.com>
Date:   Fri Feb 19 20:08:06 2010 -0200

    V4L/DVB: tuner-xc2028: Fix demod breakage for XC3028L
    
    A small mistake on the last patch broke demod s-code setup for
    XC3028L (firmware 3.2 and upper). Fix it.
    
    Thanks-to: Stefan Ringel <stefan.ringel@arcor.de>
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/common/tuners/tuner-xc2028.c b/drivers/media/common/tuners/tuner-xc2028.c
index 96f45a80fe56..be51c294b375 100644
--- a/drivers/media/common/tuners/tuner-xc2028.c
+++ b/drivers/media/common/tuners/tuner-xc2028.c
@@ -1135,11 +1135,13 @@ static int xc2028_set_params(struct dvb_frontend *fe,
 
 	/* All S-code tables need a 200kHz shift */
 	if (priv->ctrl.demod) {
+		demod = priv->ctrl.demod;
+
 		/*
 		 * Newer firmwares require a 200 kHz offset only for ATSC
 		 */
 		if (type == ATSC || priv->firm_version < 0x0302)
-			demod = priv->ctrl.demod + 200;
+			demod += 200;
 		/*
 		 * The DTV7 S-code table needs a 700 kHz shift.
 		 *

