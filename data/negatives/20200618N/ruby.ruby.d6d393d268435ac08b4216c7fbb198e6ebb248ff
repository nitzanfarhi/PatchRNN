commit d6d393d268435ac08b4216c7fbb198e6ebb248ff
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   Fri Apr 24 04:16:13 2015 +0000

    win32.c: fix for mingw
    
    * win32/win32.c (_pioinfo): necessary on mingw too.
    
    * win32/win32.c (init_stdhandle): remove stale function for
      Borland C.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@50382 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

diff --git a/win32/win32.c b/win32/win32.c
index ba5caae7df..901bff186d 100644
--- a/win32/win32.c
+++ b/win32/win32.c
@@ -2315,6 +2315,9 @@ set_pioinfo_extra(void)
 	pioinfo_extra = 0;
     }
 }
+#else
+#define pioinfo_extra 0
+#endif
 
 static inline ioinfo*
 _pioinfo(int fd)
@@ -2414,17 +2417,6 @@ init_stdhandle(void)
     if (nullfd >= 0 && !keep) close(nullfd);
     setvbuf(stderr, NULL, _IONBF, 0);
 }
-#else
-
-#define _set_osfhnd(fh, osfh) (void)((fh), (osfh))
-#define _set_osflags(fh, flags) (void)((fh), (flags))
-
-/* License: Ruby's */
-static void
-init_stdhandle(void)
-{
-}
-#endif
 
 #undef getsockopt
 

