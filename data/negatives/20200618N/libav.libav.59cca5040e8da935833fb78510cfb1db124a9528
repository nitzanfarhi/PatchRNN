commit 59cca5040e8da935833fb78510cfb1db124a9528
Author: Sebastian Vater <cdgs.basty@googlemail.com>
Date:   Mon May 10 17:00:56 2010 +0000

    Ensure that width and height are > 0. avcodec_open() itself only checks that
    they are >= 0.
    
    Patch by Sebastian Vater <cdgs basty googlemail com>.
    
    Originally committed as revision 23080 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/iff.c b/libavcodec/iff.c
index c911811da..901c8f4e6 100644
--- a/libavcodec/iff.c
+++ b/libavcodec/iff.c
@@ -115,6 +115,8 @@ static av_cold int decode_init(AVCodecContext *avctx)
         return AVERROR_INVALIDDATA;
     }
 
+    if ((err = avcodec_check_dimensions(avctx, avctx->width, avctx->height)))
+        return err;
     s->planesize = FFALIGN(avctx->width, 16) >> 3; // Align plane size in bits to word-boundary
     s->planebuf = av_malloc(s->planesize + FF_INPUT_BUFFER_PADDING_SIZE);
     if (!s->planebuf)

