commit 39bb009752097439f2695e74cdfbc2c700732b5d
Author: schwarze <schwarze@openbsd.org>
Date:   Fri Jan 1 22:20:24 2010 +0000

    .Bl may have .Sm as a child.
    The comment in the source code and OK by kristaps@;
    merged upstream in rev. 1.55.

diff --git a/usr.bin/mandoc/mdoc_validate.c b/usr.bin/mandoc/mdoc_validate.c
index d6919edc2d1..2f87c6424a6 100644
--- a/usr.bin/mandoc/mdoc_validate.c
+++ b/usr.bin/mandoc/mdoc_validate.c
@@ -1,4 +1,4 @@
-/*	$Id: mdoc_validate.c,v 1.40 2009/12/23 22:30:17 schwarze Exp $ */
+/*	$Id: mdoc_validate.c,v 1.41 2010/01/01 22:20:24 schwarze Exp $ */
 /*
  * Copyright (c) 2008, 2009 Kristaps Dzonsons <kristaps@kth.se>
  *
@@ -1082,11 +1082,18 @@ post_bl(POST_ARGS)
 	if (NULL == mdoc->last->child)
 		return(1);
 
+	/*
+	 * We only allow certain children of `Bl'.  This is usually on
+	 * `It', but apparently `Sm' occurs here and there, so we let
+	 * that one through, too.
+	 */
+
 	/* LINTED */
 	for (n = mdoc->last->child; n; n = n->next) {
-		if (MDOC_BLOCK == n->type) 
-			if (MDOC_It == n->tok)
-				continue;
+		if (MDOC_BLOCK == n->type && MDOC_It == n->tok)
+			continue;
+		if (MDOC_Sm == n->tok)
+			continue;
 		return(mdoc_nerr(mdoc, n, EBADCHILD));
 	}
 

