commit c3267591afaba2b37d2d62fa84ea7f8cea1818a6
Author: Bert Hubert <bert.hubert@netherlabs.nl>
Date:   Fri Mar 25 11:09:33 2011 +0000

    there was a slight chance for the ueberbackend to cache wrong data
    
    
    git-svn-id: svn://svn.powerdns.com/pdns/trunk/pdns@2099 d19b8d6e-7fed-0310-83ef-9ca221ded41b

diff --git a/pdns/ueberbackend.cc b/pdns/ueberbackend.cc
index 8c2cca30d..c96342288 100644
--- a/pdns/ueberbackend.cc
+++ b/pdns/ueberbackend.cc
@@ -411,6 +411,7 @@ void UeberBackend::lookup(const QType &qtype,const string &qname, DNSPacket *pkt
     int cstat=cacheHas(d_question, d_answers);
     if(cstat<0) { // nothing
       d_negcached=d_cached=false;
+      d_answers.clear(); 
       (d_handle.d_hinterBackend=backends[d_handle.i++])->lookup(qtype, qname,pkt_p,zoneId);
     } 
     else if(cstat==0) {
@@ -475,10 +476,6 @@ UeberBackend::handle::~handle()
   instances--;
 }
 
-
-
-
-
 bool UeberBackend::handle::get(DNSResourceRecord &r)
 {
   DLOG(L << "Ueber get() was called for a "<<qtype.getName()<<" record" << endl);

