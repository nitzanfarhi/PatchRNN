commit d53352422b5f2ac3cfb86f5f363d6f167824ac52
Author: Junio C Hamano <junkio@cox.net>
Date:   Thu Apr 13 00:26:21 2006 -0700

    git-log: do not output excess blank line between commits
    
    Signed-off-by: Junio C Hamano <junkio@cox.net>

diff --git a/git.c b/git.c
index 5cb0d3207..d6f17db91 100644
--- a/git.c
+++ b/git.c
@@ -354,7 +354,7 @@ static int cmd_log(int argc, const char **argv, char **envp)
 	prepare_revision_walk(&rev);
 	setup_pager();
 	while ((commit = get_revision(&rev)) != NULL) {
-		if (commit_format != CMIT_FMT_ONELINE && shown)
+		if (shown && do_diff && commit_format != CMIT_FMT_ONELINE)
 			putchar('\n');
 		fputs(commit_prefix, stdout);
 		if (abbrev_commit && abbrev)

