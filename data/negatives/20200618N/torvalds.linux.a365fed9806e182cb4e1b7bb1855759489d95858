commit a365fed9806e182cb4e1b7bb1855759489d95858
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jan 10 16:10:06 2013 +0100

    ALSA: hda - Update automute / automic upon jack retasking
    
    When a multi-io jack is switched to another direction, call the
    automute and autoswitch update functions, as this jack won't be used
    as the headphone or the mic jack that may turn off others.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

diff --git a/sound/pci/hda/hda_generic.c b/sound/pci/hda/hda_generic.c
index 2020faf9e412..fb4d84394b7b 100644
--- a/sound/pci/hda/hda_generic.c
+++ b/sound/pci/hda/hda_generic.c
@@ -1767,6 +1767,12 @@ static int set_multi_io(struct hda_codec *codec, int idx, bool output)
 		snd_hda_activate_path(codec, path, false, true);
 		set_pin_target(codec, nid, spec->multi_io[idx].ctl_in, true);
 	}
+
+	/* update jack retasking in case it modifies any of them */
+	snd_hda_gen_hp_automute(codec, NULL);
+	snd_hda_gen_line_automute(codec, NULL);
+	snd_hda_gen_mic_autoswitch(codec, NULL);
+
 	return 0;
 }
 

