commit 5a2c920c99bcd3a05edff184958c334c6b13c262
Author: Julia Lawall <Julia.Lawall@lip6.fr>
Date:   Thu Nov 10 22:10:56 2016 +0100

    drm/rockchip: return ERR_PTR instead of NULL
    
    rockchip_drm_framebuffer_init is only used in one case, in
    rockchip_drm_fbdev.c, where its return value is tested using IS_ERR.  To
    enable propagating the reason for the error, change the definition so that
    it returns an ERR_PTR value.
    
    Problem found with the help of Coccinelle.
    
    Signed-off-by: Julia Lawall <Julia.Lawall@lip6.fr>

diff --git a/drivers/gpu/drm/rockchip/rockchip_drm_fb.c b/drivers/gpu/drm/rockchip/rockchip_drm_fb.c
index d5e1f8627d38..c9ccdf8f44bb 100644
--- a/drivers/gpu/drm/rockchip/rockchip_drm_fb.c
+++ b/drivers/gpu/drm/rockchip/rockchip_drm_fb.c
@@ -213,7 +213,7 @@ rockchip_drm_framebuffer_init(struct drm_device *dev,
 
 	rockchip_fb = rockchip_fb_alloc(dev, mode_cmd, &obj, 1);
 	if (IS_ERR(rockchip_fb))
-		return NULL;
+		return ERR_CAST(rockchip_fb);
 
 	return &rockchip_fb->fb;
 }

