commit a3d7193e3c5d0b2365b9247ef0d4cb549187f32f
Author: Russell King <rmk+kernel@arm.linux.org.uk>
Date:   Fri Sep 28 13:48:48 2012 +0100

    ARM: ensure vm_struct has its phys_addr member filled in
    
    This allows /proc/vmallocinfo to show the physical address for
    ioremap mappings.
    
    Acked-by: Nicolas Pitre <nico@linaro.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mm/ioremap.c b/arch/arm/mm/ioremap.c
index 566750fa57d4..491f6b3336f5 100644
--- a/arch/arm/mm/ioremap.c
+++ b/arch/arm/mm/ioremap.c
@@ -247,6 +247,7 @@ void __iomem * __arm_ioremap_pfn_caller(unsigned long pfn,
  	if (!area)
  		return NULL;
  	addr = (unsigned long)area->addr;
+	area->phys_addr = __pfn_to_phys(pfn);
 
 #if !defined(CONFIG_SMP) && !defined(CONFIG_ARM_LPAE)
 	if (DOMAIN_IO == 0 &&

