commit eaacaa09e42ab9ae0ebc25fc2b72aef02e3f284a
Author: Laxman Dewangan <ldewangan@nvidia.com>
Date:   Wed May 6 18:20:09 2015 +0530

    regulator: max8973: make default/unset dvs gpio as invalid gpio
    
    If platform data has dvs-gpio value 0 as default/unset then
    make this as invalid gpio so that function gpio_is_valid()
    can return false on this case.
    
    Signed-off-by: Laxman Dewangan <ldewangan@nvidia.com>
    Signed-off-by: Mark Brown <broonie@kernel.org>

diff --git a/drivers/regulator/max8973-regulator.c b/drivers/regulator/max8973-regulator.c
index be9a463d7354..3df5a84f819c 100644
--- a/drivers/regulator/max8973-regulator.c
+++ b/drivers/regulator/max8973-regulator.c
@@ -413,7 +413,7 @@ static int max8973_probe(struct i2c_client *client,
 	}
 
 	if (pdata) {
-		max->dvs_gpio = pdata->dvs_gpio;
+		max->dvs_gpio = (pdata->dvs_gpio) ? pdata->dvs_gpio : -EINVAL;
 		max->enable_external_control = pdata->enable_ext_control;
 		max->curr_gpio_val = pdata->dvs_def_state;
 		max->curr_vout_reg = MAX8973_VOUT + pdata->dvs_def_state;

