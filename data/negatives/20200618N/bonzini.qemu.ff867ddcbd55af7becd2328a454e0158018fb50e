commit ff867ddcbd55af7becd2328a454e0158018fb50e
Author: Paul Brook <paul@codesourcery.com>
Date:   Thu Jul 9 15:07:57 2009 +0100

    MIPS usermode TLS register
    
    Implement cpu_set_tls for MIPS.
    
    Signed-off-by: Paul Brook <paul@codesourcery.com>

diff --git a/target-mips/cpu.h b/target-mips/cpu.h
index b415dc43be..6ebb82bccb 100644
--- a/target-mips/cpu.h
+++ b/target-mips/cpu.h
@@ -597,4 +597,9 @@ static inline void cpu_get_tb_cpu_state(CPUState *env, target_ulong *pc,
     *flags = env->hflags & (MIPS_HFLAG_TMASK | MIPS_HFLAG_BMASK);
 }
 
+static inline void cpu_set_tls(CPUState *env, target_ulong newtls)
+{
+    env->tls_value = newtls;
+}
+
 #endif /* !defined (__MIPS_CPU_H__) */

