commit c2894fbf1c15e3f8d33279948758ee830b5c9267
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Tue Jan 19 03:14:45 2010 +0000

    Dont waste time initializing stuff for deblocking intra mbs, none of
    it is used.
    
    Originally committed as revision 21315 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/h264.h b/libavcodec/h264.h
index b6134a49de..f342729fa5 100644
--- a/libavcodec/h264.h
+++ b/libavcodec/h264.h
@@ -806,6 +806,8 @@ static av_always_inline int fill_caches(H264Context *h, int mb_type, int for_deb
            && (top_xy   < 0 || ((qp + s->current_picture.qscale_table[top_xy ] + 1)>>1) <= qp_thresh)){
             return 1;
         }
+        if(IS_INTRA(mb_type))
+            return 0;
 
         *((uint64_t*)&h->non_zero_count_cache[0+8*1])= *((uint64_t*)&h->non_zero_count[mb_xy][ 0]);
         *((uint64_t*)&h->non_zero_count_cache[0+8*2])= *((uint64_t*)&h->non_zero_count[mb_xy][ 8]);

