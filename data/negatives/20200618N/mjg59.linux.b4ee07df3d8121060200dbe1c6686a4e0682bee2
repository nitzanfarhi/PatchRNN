commit b4ee07df3d8121060200dbe1c6686a4e0682bee2
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu Dec 25 16:42:23 2008 -0800

    netns: igmp: allow IPPROTO_IGMP sockets in netns
    
    Looks like everything is already ready.
    
    Required for ebtables(8) for one thing.
    
    Also, required for ipmr per-netns (coming soon). (Benjamin)
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Acked-by: Benjamin Thery <benjamin.thery@bull.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/ipv4/af_inet.c b/net/ipv4/af_inet.c
index 664ff0ee1c83..743f5542d65a 100644
--- a/net/ipv4/af_inet.c
+++ b/net/ipv4/af_inet.c
@@ -1402,6 +1402,7 @@ EXPORT_SYMBOL_GPL(snmp_mib_free);
 #ifdef CONFIG_IP_MULTICAST
 static struct net_protocol igmp_protocol = {
 	.handler =	igmp_rcv,
+	.netns_ok =	1,
 };
 #endif
 

