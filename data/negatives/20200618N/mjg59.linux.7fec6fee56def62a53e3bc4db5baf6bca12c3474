commit 7fec6fee56def62a53e3bc4db5baf6bca12c3474
Author: Michael Krufky <mkrufky@kernellabs.com>
Date:   Wed Nov 11 15:46:09 2009 -0300

    V4L/DVB (13349): cx23885: Enable IR input keypress handling for the Hauppauge WinTV HVR-1290
    
    The IR on the HVR-1290 is identical to that of the HVR-1850
    
    Signed-off-by: Michael Krufky <mkrufky@kernellabs.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/cx23885/cx23885-cards.c b/drivers/media/video/cx23885/cx23885-cards.c
index 632d76a432af..d9d71c8c7941 100644
--- a/drivers/media/video/cx23885/cx23885-cards.c
+++ b/drivers/media/video/cx23885/cx23885-cards.c
@@ -881,6 +881,7 @@ int cx23885_ir_init(struct cx23885_dev *dev)
 		/* FIXME: Implement me */
 		break;
 	case CX23885_BOARD_HAUPPAUGE_HVR1850:
+	case CX23885_BOARD_HAUPPAUGE_HVR1290:
 		ret = cx23888_ir_probe(dev);
 		if (ret)
 			break;
@@ -899,6 +900,7 @@ void cx23885_ir_fini(struct cx23885_dev *dev)
 {
 	switch (dev->board) {
 	case CX23885_BOARD_HAUPPAUGE_HVR1850:
+	case CX23885_BOARD_HAUPPAUGE_HVR1290:
 		dev->pci_irqmask &= ~PCI_MSK_IR;
 		cx_clear(PCI_INT_MSK, PCI_MSK_IR);
 		cx23888_ir_remove(dev);
@@ -911,6 +913,7 @@ void cx23885_ir_pci_int_enable(struct cx23885_dev *dev)
 {
 	switch (dev->board) {
 	case CX23885_BOARD_HAUPPAUGE_HVR1850:
+	case CX23885_BOARD_HAUPPAUGE_HVR1290:
 		if (dev->sd_ir && (dev->pci_irqmask & PCI_MSK_IR))
 			cx_set(PCI_INT_MSK, PCI_MSK_IR);
 		break;
diff --git a/drivers/media/video/cx23885/cx23885-input.c b/drivers/media/video/cx23885/cx23885-input.c
index c208079f4e9d..f000ed787d4e 100644
--- a/drivers/media/video/cx23885/cx23885-input.c
+++ b/drivers/media/video/cx23885/cx23885-input.c
@@ -202,6 +202,7 @@ void cx23885_input_rx_work_handler(struct cx23885_dev *dev, u32 events)
 
 	switch (dev->board) {
 	case CX23885_BOARD_HAUPPAUGE_HVR1850:
+	case CX23885_BOARD_HAUPPAUGE_HVR1290:
 		/*
 		 * The only board we handle right now.  However other boards
 		 * using the CX2388x integrated IR controller should be similar
@@ -252,6 +253,7 @@ static void cx23885_input_ir_start(struct cx23885_dev *dev)
 	/* keyup timer set up, if needed */
 	switch (dev->board) {
 	case CX23885_BOARD_HAUPPAUGE_HVR1850:
+	case CX23885_BOARD_HAUPPAUGE_HVR1290:
 		setup_timer(&ir_input->timer_keyup,
 			    ir_rc5_timer_keyup,	/* Not actually RC-5 specific */
 			    (unsigned long) ir_input);
@@ -268,6 +270,7 @@ static void cx23885_input_ir_start(struct cx23885_dev *dev)
 	v4l2_subdev_call(dev->sd_ir, ir, rx_g_parameters, &params);
 	switch (dev->board) {
 	case CX23885_BOARD_HAUPPAUGE_HVR1850:
+	case CX23885_BOARD_HAUPPAUGE_HVR1290:
 		/*
 		 * The IR controller on this board only returns pulse widths.
 		 * Any other mode setting will fail to set up the device.
@@ -325,6 +328,7 @@ static void cx23885_input_ir_stop(struct cx23885_dev *dev)
 
 	switch (dev->board) {
 	case CX23885_BOARD_HAUPPAUGE_HVR1850:
+	case CX23885_BOARD_HAUPPAUGE_HVR1290:
 		del_timer_sync(&ir_input->timer_keyup);
 		break;
 	}
@@ -347,6 +351,7 @@ int cx23885_input_init(struct cx23885_dev *dev)
 
 	switch (dev->board) {
 	case CX23885_BOARD_HAUPPAUGE_HVR1850:
+	case CX23885_BOARD_HAUPPAUGE_HVR1290:
 		/* Parameters for the grey Hauppauge remote for the HVR-1850 */
 		ir_codes = &ir_codes_hauppauge_new_table;
 		ir_type = IR_TYPE_RC5;

