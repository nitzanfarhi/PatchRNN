commit 87121e14e3606e97206dcf32795771f119c4a42b
Author: brain <brain@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Tue Dec 20 18:29:37 2005 +0000

    Added extra sanity check in squit to make sure REMOTE Servers dont try and squit a server from itself!
    
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@2590 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/modules/m_spanningtree.cpp b/src/modules/m_spanningtree.cpp
index db529e08e..dc318b2c5 100644
--- a/src/modules/m_spanningtree.cpp
+++ b/src/modules/m_spanningtree.cpp
@@ -715,7 +715,7 @@ class TreeSocket : public InspSocket
 	 */
 	void Squit(TreeServer* Current,std::string reason)
 	{
-		if (Current)
+		if ((Current) && (Current != TreeRoot))
 		{
 			std::deque<std::string> params;
 			params.push_back(Current->GetName());

