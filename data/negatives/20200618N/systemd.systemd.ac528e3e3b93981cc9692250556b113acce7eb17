commit ac528e3e3b93981cc9692250556b113acce7eb17
Author: Lennart Poettering <lennart@poettering.net>
Date:   Thu Aug 28 20:24:12 2014 +0200

    hibernate-resume: refuse to run outside of an initrd

diff --git a/src/hibernate-resume/hibernate-resume.c b/src/hibernate-resume/hibernate-resume.c
index 8f68f81f9..b234a0b49 100644
--- a/src/hibernate-resume/hibernate-resume.c
+++ b/src/hibernate-resume/hibernate-resume.c
@@ -46,6 +46,10 @@ int main(int argc, char *argv[]) {
 
         umask(0022);
 
+        /* Refuse to run unless we are in an initrd() */
+        if (!in_initrd())
+                return EXIT_SUCCESS;
+
         device = argv[1];
 
         if (stat(device, &st) < 0) {

