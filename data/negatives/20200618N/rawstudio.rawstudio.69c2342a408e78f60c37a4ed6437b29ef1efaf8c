commit 69c2342a408e78f60c37a4ed6437b29ef1efaf8c
Author: Anders Brander <anders@brander.dk>
Date:   Thu May 17 23:17:37 2007 +0000

    Now using rs_image16_get_pixel() in rs_render_pixel_to_srgb().

diff --git a/src/rawstudio.c b/src/rawstudio.c
index 0541cf84..455bbdd9 100644
--- a/src/rawstudio.c
+++ b/src/rawstudio.c
@@ -1475,12 +1475,7 @@ void
 rs_render_pixel_to_srgb(RS_BLOB *rs, gint x, gint y, guchar *dest)
 {
 	gushort *pixel;
-	if (x>(rs->photo->scaled->w-1))
-		x = rs->photo->scaled->w-1;
-	if (y>(rs->photo->scaled->h-1))
-		y = rs->photo->scaled->h-1;
-	pixel = &rs->photo->scaled->pixels[y*rs->photo->scaled->rowstride
-		+ x*rs->photo->scaled->pixelsize];
+	pixel = rs_image16_get_pixel(rs->photo->scaled, x, y, TRUE);
 	rs_render_pixel(&rs->photo->mat, rs->photo->pre_mul, rs->previewtable8, rs->previewtable16, pixel, dest, rs_cms_get_transform(rs->cms, TRANSFORM_SRGB));
 	return;
 }

