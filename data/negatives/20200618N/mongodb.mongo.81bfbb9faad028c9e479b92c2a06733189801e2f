commit 81bfbb9faad028c9e479b92c2a06733189801e2f
Author: Eliot Horowitz <eliot@10gen.com>
Date:   Tue Sep 1 13:50:08 2009 -0400

    fix comments and multiple lines in the shell

diff --git a/shell/dbshell.cpp b/shell/dbshell.cpp
index cec7bfdac5..b56c7bffdb 100644
--- a/shell/dbshell.cpp
+++ b/shell/dbshell.cpp
@@ -151,6 +151,12 @@ bool isBalanced( string code ){
     
     for ( size_t i=0; i<code.size(); i++ ){
         switch( code[i] ){
+        case '/':
+            if ( i+1 < code.size() && code[i+1] == '/' ){
+                while ( i<code.size() && code[i] != '\n' )
+                    i++;
+            }
+            continue;
         case '{': brackets++; break;
         case '}': brackets--; break;
         case '(': parens++; break;
@@ -179,6 +185,8 @@ public:
         assert( isBalanced( "function(){\n}" ) );
         assert( ! isBalanced( "function(){" ) );
         assert( isBalanced( "x = \"{\";" ) );
+        assert( isBalanced( "// {" ) );
+        assert( ! isBalanced( "// \n {" ) );
     }
 } balnaced_test;
 

