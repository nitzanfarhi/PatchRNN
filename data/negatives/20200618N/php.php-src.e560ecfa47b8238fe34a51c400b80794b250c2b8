commit e560ecfa47b8238fe34a51c400b80794b250c2b8
Author: Zeev Suraski <zeev@php.net>
Date:   Fri Nov 3 00:51:53 2000 +0000

    Fix pg_close()

diff --git a/ext/pgsql/pgsql.c b/ext/pgsql/pgsql.c
index 68e53fedb1..69d91bfa07 100644
--- a/ext/pgsql/pgsql.c
+++ b/ext/pgsql/pgsql.c
@@ -486,7 +486,11 @@ PHP_FUNCTION(pg_close)
 	}
 	
 	ZEND_FETCH_RESOURCE2(pgsql, PGconn *, pgsql_link, id, "PostgreSQL link", le_link, le_plink);
-	zend_list_delete(id);
+	zend_list_delete(Z_RESVAL_PP(pgsql_link));
+	if (Z_RESVAL_PP(pgsql_link)==PGG(default_link)) {
+		zend_list_delete(PGG(default_link));
+	}
+
 	RETURN_TRUE;
 }
 /* }}} */

