commit 3cdc0ed0cea50ea08dd146c1bbc82b1bcc2e1b80
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 8 13:46:46 2007 -0700

    slab: fix alien cache handling
    
    cache_free_alien must be called regardless if we use alien caches or not.
    cache_free_alien() will do the right thing if there are no alien caches
    available.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Acked-by: Pekka J Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/mm/slab.c b/mm/slab.c
index 2e71a328aa09..6d65cf4e4b2e 100644
--- a/mm/slab.c
+++ b/mm/slab.c
@@ -3539,7 +3539,7 @@ static inline void __cache_free(struct kmem_cache *cachep, void *objp)
 	check_irq_off();
 	objp = cache_free_debugcheck(cachep, objp, __builtin_return_address(0));
 
-	if (use_alien_caches && cache_free_alien(cachep, objp))
+	if (cache_free_alien(cachep, objp))
 		return;
 
 	if (likely(ac->avail < ac->limit)) {

