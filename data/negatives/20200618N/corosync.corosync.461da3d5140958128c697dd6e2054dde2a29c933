commit 461da3d5140958128c697dd6e2054dde2a29c933
Author: Steven Dake <sdake@redhat.com>
Date:   Fri Jul 15 16:52:15 2005 +0000

    defect 741
    saCkptCheckpointOpenAsync doesn't return error when
    checkpointSize > maxSections * maxSectionsSize
    
    
    git-svn-id: http://svn.fedorahosted.org/svn/corosync/trunk@759 fd59a12c-fef9-0310-b244-a6a79926bd2f

diff --git a/lib/ckpt.c b/lib/ckpt.c
index 383e8267..c24b219e 100644
--- a/lib/ckpt.c
+++ b/lib/ckpt.c
@@ -626,6 +626,12 @@ saCkptCheckpointOpenAsync (
 	if (((checkpointOpenFlags & SA_CKPT_CHECKPOINT_CREATE) == 0) && 
 		checkpointCreationAttributes != NULL) {
 
+		failWithError = SA_AIS_ERR_INVALID_PARAM;
+	} else
+	if (checkpointCreationAttributes &&
+		(checkpointCreationAttributes->checkpointSize >
+		(checkpointCreationAttributes->maxSections * checkpointCreationAttributes->maxSectionSize))) {
+
 		failWithError = SA_AIS_ERR_INVALID_PARAM;
 	}
 

