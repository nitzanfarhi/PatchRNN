commit fbfb3106543cb32e03b5486c52b8e7988514bc16
Author: Bram Matthys <syzop@vulnscan.org>
Date:   Sun Jul 12 22:10:19 2015 +0200

    3.4.x code was missing a "Lost connection to ...." server message on disconnect (should be broadcasted to ircops)

diff --git a/src/s_bsd.c b/src/s_bsd.c
index 8ed53edd..bfa88af0 100644
--- a/src/s_bsd.c
+++ b/src/s_bsd.c
@@ -1418,6 +1418,10 @@ void read_packet(int fd, int revents, void *data)
 			if (length < 0 && (ERRNO == P_EWOULDBLOCK || ERRNO == P_EAGAIN || ERRNO == P_EINTR))
 				return;
 
+			if (IsServer(cptr) || cptr->serv) /* server or outgoing connection */
+				sendto_umode_global(UMODE_OPER, "Lost connection to %s: Read error",
+				    get_client_name(cptr, FALSE));
+
 			exit_client(cptr, cptr, cptr, "Read error");
 			return;
 		}

