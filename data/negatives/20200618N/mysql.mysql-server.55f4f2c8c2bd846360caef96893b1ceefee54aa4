commit 55f4f2c8c2bd846360caef96893b1ceefee54aa4
Author: Magnus Bl√•udd <magnus.blaudd@oracle.com>
Date:   Mon May 23 11:58:08 2016 +0200

    WL#7569 Split ha_ndbcluster_glue.h into the appropriate ndb_*.h files
    
     - Move thd_unmasked_server_id() to ndb_thd.h and ndb_thd.cc
     - It's no longer a static inline function but that's ok
       since it's in the "slow path"

diff --git a/sql/ha_ndbcluster_glue.h b/sql/ha_ndbcluster_glue.h
index 3e25febd722..e64de362a25 100644
--- a/sql/ha_ndbcluster_glue.h
+++ b/sql/ha_ndbcluster_glue.h
@@ -41,14 +41,6 @@
                             // schema_table_store_record
 #include "my_global.h"
 
-static inline
-uint32 thd_unmasked_server_id(const THD* thd)
-{
-  const uint32 unmasked_server_id = thd->unmasked_server_id;
-  assert(thd->server_id == (thd->unmasked_server_id & opt_server_id_mask));
-  return unmasked_server_id;
-}
-
 
 /* get pointer to Diagnostics Area for statement from THD */
 static inline
diff --git a/sql/ndb_thd.cc b/sql/ndb_thd.cc
index d36b6902445..42e362cfa6c 100644
--- a/sql/ndb_thd.cc
+++ b/sql/ndb_thd.cc
@@ -89,3 +89,12 @@ applying_binlog(const THD* thd)
 
   return false;
 }
+
+
+uint32
+thd_unmasked_server_id(const THD* thd)
+{
+  const uint32 unmasked_server_id = thd->unmasked_server_id;
+  assert(thd->server_id == (thd->unmasked_server_id & opt_server_id_mask));
+  return unmasked_server_id;
+}
diff --git a/sql/ndb_thd.h b/sql/ndb_thd.h
index 8bb4202e7c2..16a16eaef9f 100644
--- a/sql/ndb_thd.h
+++ b/sql/ndb_thd.h
@@ -56,4 +56,10 @@ thd_print_warning_list(THD* thd, const char* prefix);
 bool
 applying_binlog(const THD* thd);
 
+
+/*
+  Return the THD's unmasked server id
+*/
+uint32 thd_unmasked_server_id(const THD* thd);
+
 #endif

