commit 5404ba422e35d75054d3941b6e52f237fbb46e91
Author: unknown <kostja@bodhi.(none)>
Date:   Tue Jul 31 20:52:43 2007 +0400

    Post-merge fixes.
    
    
    sql/sql_base.cc:
      Fix an incorrect manual merge.

diff --git a/sql/sql_base.cc b/sql/sql_base.cc
index f85f3a2884a..05c65d63d19 100644
--- a/sql/sql_base.cc
+++ b/sql/sql_base.cc
@@ -1701,18 +1701,18 @@ TABLE *find_temporary_table(THD *thd, TABLE_LIST *table_list)
   @retval FALSE  the table was found and dropped successfully.
 */
 
-bool close_temporary_table(THD *thd, const char *db, const char *table_name)
+bool close_temporary_table(THD *thd, TABLE_LIST *table_list)
 {
   TABLE *table;
 
   if (!(table= find_temporary_table(thd, table_list)))
     return 1;
-  close_temporary_table(thd, table, 1, 1);
   /*
     If LOCK TABLES list is not empty and contains this table,
     unlock the table and remove the table from this list.
   */
   mysql_lock_remove(thd, thd->locked_tables, table, FALSE);
+  close_temporary_table(thd, table, 1, 1);
   return 0;
 }
 

