commit 0c102a1e6fbe12f9a4d88bd817b995d4febe2330
Author: mrieker@nii.net <mrieker@nii.net>
Date:   Sat Feb 23 14:55:35 2013 -0500

    tasklets.c: update used stack size
    
    was allowing case of stack_used_size < num_bytes to
    slip by so restore function wasn't restoring all bytes

diff --git a/mono/mini/tasklets.c b/mono/mini/tasklets.c
index 417a55bbacf..a287c730428 100644
--- a/mono/mini/tasklets.c
+++ b/mono/mini/tasklets.c
@@ -106,8 +106,8 @@ continuation_store (MonoContinuation *cont, int state, MonoException **e)
 		/* clear to avoid GC retention */
 		if (num_bytes < cont->stack_used_size) {
 			memset ((char*)cont->saved_stack + num_bytes, 0, cont->stack_used_size - num_bytes);
-			cont->stack_used_size = num_bytes;
 		}
+		cont->stack_used_size = num_bytes;
 	} else {
 		tasklets_lock ();
 		internal_init ();

