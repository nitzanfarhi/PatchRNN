commit 1bcaae666fdcda03f768c2894091ec2e441abb57
Author: Richard Henderson <rth@twiddle.net>
Date:   Fri Jun 4 12:14:13 2010 -0700

    tcg-s390: Icache flush is a no-op.
    
    Before gcc 4.2, __builtin___clear_cache doesn't exist, and
    afterward the gcc s390 backend implements it as nothing.
    
    Signed-off-by: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

diff --git a/tcg/s390/tcg-target.h b/tcg/s390/tcg-target.h
index d8a29558bb..d7fe0c71ca 100644
--- a/tcg/s390/tcg-target.h
+++ b/tcg/s390/tcg-target.h
@@ -94,9 +94,4 @@ enum {
 
 static inline void flush_icache_range(unsigned long start, unsigned long stop)
 {
-#if QEMU_GNUC_PREREQ(4, 1)
-    __builtin___clear_cache((char *) start, (char *) stop);
-#else
-#error not implemented
-#endif
 }

