commit d094dc355de2a7e5f5a2592b68421a15c1a7f5d8
Author: heikki@donna.mysql.fi <>
Date:   Wed Nov 7 00:52:31 2001 +0200

    ha_innobase.cc:
      Make database and table names always lower case on Windows

diff --git a/sql/ha_innobase.cc b/sql/ha_innobase.cc
index de796dfa01e..5d364d91bb8 100644
--- a/sql/ha_innobase.cc
+++ b/sql/ha_innobase.cc
@@ -551,7 +551,7 @@ innobase_init(void)
 
 	if (!innobase_data_file_path)
 	{
-	  fprintf(stderr,
+	  fprinf(stderr,
        "Cannot initialize InnoDB as 'innodb_data_file_path' is not set.\n"
        "If you do not want to use transactional InnoDB tables, add a line\n"
        "skip-innodb\n"
@@ -821,7 +821,8 @@ ha_innobase::bas_ext() const
 /*********************************************************************
 Normalizes a table name string. A normalized name consists of the
 database name catenated to '/' and table name. An example:
-test/mytable. */
+test/mytable. On Windows normalization puts both the database name and the
+table name always to lower case. */
 static
 void
 normalize_table_name(
@@ -857,6 +858,17 @@ normalize_table_name(
 	memcpy(norm_name, db_ptr, strlen(name) + 1 - (db_ptr - name));
 
 	norm_name[name_ptr - db_ptr - 1] = '/';
+
+#ifdef __WIN__
+	/* Put to lower case */
+
+	ptr = norm_name;
+
+	while (*ptr != '\0') {
+	        *ptr = tolower(*ptr);
+	        ptr++;
+	}
+#endif
 }
 
 /*********************************************************************

