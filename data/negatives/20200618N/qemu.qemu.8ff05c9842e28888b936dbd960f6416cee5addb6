commit 8ff05c9842e28888b936dbd960f6416cee5addb6
Author: Peter Maydell <peter.maydell@linaro.org>
Date:   Fri Mar 15 16:41:56 2013 +0000

    hw/arm_sysctl: Implement SYS_CFG_MUXFPGA writes as a no-op
    
    SYS_CFG_MUXFPGA allows the guest to select whether the
    video output should come from the motherboard's LCD
    controller or the daughterboard's one. Since QEMU doesn't
    currently support selecting the video output like this,
    implement as a no-op, so Linux doesn't complain about
    the register not being implemented.
    
    Signed-off-by: Peter Maydell <peter.maydell@linaro.org>

diff --git a/hw/arm_sysctl.c b/hw/arm_sysctl.c
index 05a3200c63..a6e5ed4cc1 100644
--- a/hw/arm_sysctl.c
+++ b/hw/arm_sysctl.c
@@ -272,6 +272,17 @@ static bool vexpress_cfgctrl_write(arm_sysctl_state *s, unsigned int dcc,
     }
 
     switch (function) {
+    case SYS_CFG_MUXFPGA:
+        if (site == SYS_CFG_SITE_MB && device == 0) {
+            /* Select whether video output comes from motherboard
+             * or daughterboard: log and ignore as QEMU doesn't
+             * support this.
+             */
+            qemu_log_mask(LOG_UNIMP, "arm_sysctl: selection of video output "
+                          "not supported, ignoring\n");
+            return true;
+        }
+        break;
     case SYS_CFG_SHUTDOWN:
         if (site == SYS_CFG_SITE_MB && device == 0) {
             qemu_system_shutdown_request();

