commit 7cf0b7af8ffc61acb8cee630c5045c63681b3063
Author: reimar <reimar@b3059339-0415-0410-9bf9-f77b7e298cf2>
Date:   Mon Aug 14 16:15:21 2006 +0000

    10l in last commit, move configured-check inside sh_video and sh_video->vfilter check.
    
    
    git-svn-id: svn://svn.mplayerhq.hu/mplayer/trunk@19395 b3059339-0415-0410-9bf9-f77b7e298cf2

diff --git a/mencoder.c b/mencoder.c
index 7f3657d987..90ca998e13 100644
--- a/mencoder.c
+++ b/mencoder.c
@@ -1543,11 +1543,11 @@ if (!interrupted && filelist[++curfile].name != 0) {
 
 /* Emit the remaining frames in the video system */
 /*TODO emit frmaes delayed by decoder lag*/
-if (!((vf_instance_t *)sh_video->vfilter)->fmt.have_configured) {
-	mp_msg(MSGT_MENCODER, MSGL_WARN, "\nFilters have not been configured! Empty file?\n");
-} else
 if(sh_video && sh_video->vfilter){
 	mp_msg(MSGT_MENCODER, MSGL_INFO, "\nFlushing video frames\n");
+	if (!((vf_instance_t *)sh_video->vfilter)->fmt.have_configured)
+	mp_msg(MSGT_MENCODER, MSGL_WARN, "Filters have not been configured! Empty file?\n");
+	else
 	((vf_instance_t *)sh_video->vfilter)->control(sh_video->vfilter,
     	                                              VFCTRL_FLUSH_FRAMES, 0);
 }

