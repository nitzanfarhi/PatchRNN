commit 75dbbc7bb184cf9d18122300dffca3343fd24441
Author: Steve Lime <sdlime@gmail.com>
Date:   Tue Oct 24 05:10:50 2006 +0000

    Fixed one more issue with loadExpressionString...
    
    
    git-svn-id: http://svn.osgeo.org/mapserver/trunk@5810 7532c77e-422f-0410-93f4-f0b67bdd69e2

diff --git a/mapfile.c b/mapfile.c
index 3a982612..d24db16c 100644
--- a/mapfile.c
+++ b/mapfile.c
@@ -27,6 +27,9 @@
  ******************************************************************************
  *
  * $Log$
+ * Revision 1.333  2006/10/24 05:08:43  sdlime
+ * Fixed one more issue with loadExpressionString...
+ *
  * Revision 1.332  2006/10/24 04:40:31  sdlime
  * Fixed a problem in loadExpressionString so that if an expression string is not a logical, regex or case insensitive expression then it is automatically a string expression. This allows more straight forward filter and expression setting from MapScript.
  *
@@ -1710,7 +1713,10 @@ int loadExpressionString(expressionObj *exp, char *value)
   } else {
     msResetErrorList(); /* failure above is not really an error since we'll consider anything not matching (like an unquoted number) as a STRING) */
     exp->type = MS_STRING;
-    exp->string = strdup(value); /* use the whole value */
+    if((strlen(value) - strlen(msyytext)) == 2)
+      exp->string = strdup(msyytext); /* value was quoted */
+    else
+      exp->string = strdup(value); /* use the whole value */
   }
 
   /* if(exp->type == MS_REGEX) { */

