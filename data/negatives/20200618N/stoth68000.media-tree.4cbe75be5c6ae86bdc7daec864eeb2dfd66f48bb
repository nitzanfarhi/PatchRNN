commit 4cbe75be5c6ae86bdc7daec864eeb2dfd66f48bb
Author: Robert Richter <robert.richter@amd.com>
Date:   Mon Aug 30 18:21:55 2010 +0200

    oprofile, arm: initialize perf_event pointers with NULL
    
    The pointers must be NULL'ed to avoid double-freeing the pointers in
    rare cases during reinitialization.
    
    Signed-off-by: Robert Richter <robert.richter@amd.com>

diff --git a/arch/arm/oprofile/common.c b/arch/arm/oprofile/common.c
index c3652f73fed4..d660cb8dab36 100644
--- a/arch/arm/oprofile/common.c
+++ b/arch/arm/oprofile/common.c
@@ -351,6 +351,8 @@ int __init oprofile_arch_init(struct oprofile_operations *ops)
 {
 	int cpu, ret = 0;
 
+	memset(&perf_events, 0, sizeof(perf_events));
+
 	perf_num_counters = armpmu_get_max_events();
 
 	counter_config = kcalloc(perf_num_counters,

