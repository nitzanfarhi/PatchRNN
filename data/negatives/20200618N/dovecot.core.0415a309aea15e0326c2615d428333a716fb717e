commit 0415a309aea15e0326c2615d428333a716fb717e
Author: Timo Sirainen <tss@iki.fi>
Date:   Thu Mar 6 09:44:24 2008 +0200

    Catch dotlock creation timeout error.
    
    --HG--
    branch : HEAD

diff --git a/src/lib-index/mail-cache.c b/src/lib-index/mail-cache.c
index 970255fe6..e6231002f 100644
--- a/src/lib-index/mail-cache.c
+++ b/src/lib-index/mail-cache.c
@@ -474,7 +474,7 @@ static int mail_cache_lock_file(struct mail_cache *cache)
 		i_assert(cache->dotlock == NULL);
 		ret = file_dotlock_create(&cache->dotlock_settings,
 					  cache->filepath, 0, &cache->dotlock);
-		if (ret < 0) {
+		if (ret <= 0) {
 			mail_cache_set_syscall_error(cache,
 						     "file_dotlock_create()");
 		}

