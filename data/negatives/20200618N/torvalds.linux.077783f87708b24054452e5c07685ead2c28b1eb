commit 077783f87708b24054452e5c07685ead2c28b1eb
Author: James Ketrenos <jketreno@linux.intel.com>
Date:   Mon Oct 24 10:27:46 2005 -0500

    [PATCH] ieee80211 build fix
    
    James Ketrenos wrote:
    > [3/4] Use the tx_headroom and reserve requested space.
    
    This patch introduced a compile problem; patch below corrects this.
    
    Fixed compilation error due to not passing tx_headroom in
    ieee80211_tx_frame.
    
    Signed-off-by: James Ketrenos <jketreno@linux.intel.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

diff --git a/net/ieee80211/ieee80211_tx.c b/net/ieee80211/ieee80211_tx.c
index fb4509032402..95ccbadbf55b 100644
--- a/net/ieee80211/ieee80211_tx.c
+++ b/net/ieee80211/ieee80211_tx.c
@@ -541,7 +541,7 @@ int ieee80211_tx_frame(struct ieee80211_device *ieee,
 	/* When we allocate the TXB we allocate enough space for the reserve
 	 * and full fragment bytes (bytes_per_frag doesn't include prefix,
 	 * postfix, header, FCS, etc.) */
-	txb = ieee80211_alloc_txb(1, len, GFP_ATOMIC);
+	txb = ieee80211_alloc_txb(1, len, ieee->tx_headroom, GFP_ATOMIC);
 	if (unlikely(!txb)) {
 		printk(KERN_WARNING "%s: Could not allocate TXB\n",
 		       ieee->dev->name);

