commit 37b70622118477227f223ab8fe0794117cd2a3b0
Author: Frank Warmerdam <warmerdam@pobox.com>
Date:   Tue Feb 8 21:49:55 2011 +0000

    force multipart output if we have multiple output files but we dont have to include the gml summary (#3666)
    
    git-svn-id: http://svn.osgeo.org/mapserver/trunk@10973 7532c77e-422f-0410-93f4-f0b67bdd69e2

diff --git a/mapwcs20.c b/mapwcs20.c
index 6be6a6b1..412f2025 100644
--- a/mapwcs20.c
+++ b/mapwcs20.c
@@ -1975,7 +1975,14 @@ static int msWCSWriteFile20(mapObj* map, imageObj* image, wcs20ParamsObjPtr para
     /* -------------------------------------------------------------------- */
         count = CSLCount(all_files);
 
-        msDebug("%s\n", all_files[0]);
+        if(count > 1 && multipart == MS_FALSE)
+        {
+            msDebug( "msWCSWriteFile20(): force multipart output without gml summary because we have multiple files in the result.\n" );
+
+            multipart = MS_TRUE;
+            msIO_printf(
+                    "Content-Type: multipart/mixed; boundary=wcs%c%c", 10, 10);
+        }
 
         for( i = 0; i < count; i++ )
         {

