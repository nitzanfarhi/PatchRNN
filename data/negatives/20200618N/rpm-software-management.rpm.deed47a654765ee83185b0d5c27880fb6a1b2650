commit deed47a654765ee83185b0d5c27880fb6a1b2650
Author: Panu Matilainen <pmatilai@redhat.com>
Date:   Wed Jan 29 13:49:06 2014 +0200

    Detect and fail build on more than one %files section per package
    
    - Kinda related to ticket #27, although this particular case is not
      even mentioned there...

diff --git a/build/parseFiles.c b/build/parseFiles.c
index ea0d6385f..de0bc5010 100644
--- a/build/parseFiles.c
+++ b/build/parseFiles.c
@@ -67,6 +67,11 @@ int parseFiles(rpmSpec spec)
 	goto exit;
     }
 
+    if (pkg->fileList != NULL) {
+	rpmlog(RPMLOG_ERR, _("line %d: second %%files\n"), spec->lineNum);
+	goto exit;
+    }
+
     for (arg=1; arg<argc; arg++) {
 	if (rstreq(argv[arg], "-f") && argv[arg+1]) {
 	    char *file = rpmGetPath(argv[arg+1], NULL);

