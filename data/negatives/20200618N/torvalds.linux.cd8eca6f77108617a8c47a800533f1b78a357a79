commit cd8eca6f77108617a8c47a800533f1b78a357a79
Author: Lars-Peter Clausen <lars@metafoo.de>
Date:   Wed Oct 19 17:51:28 2011 +0200

    staging:iio:dac:ad5686: Check for negative values
    
    Currently it is possible to write negative values to the ad5686's raw attribute.
    This will cause undefined behaviour, so reject negative values.
    
    Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>
    Acked-by: Jonathan Cameron <jic23@cam.ac.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/iio/dac/ad5686.c b/drivers/staging/iio/dac/ad5686.c
index 1d50dd176215..48389e1c19f1 100644
--- a/drivers/staging/iio/dac/ad5686.c
+++ b/drivers/staging/iio/dac/ad5686.c
@@ -327,7 +327,7 @@ static int ad5686_write_raw(struct iio_dev *indio_dev,
 
 	switch (mask) {
 	case 0:
-		if (val > (1 << chan->scan_type.realbits))
+		if (val > (1 << chan->scan_type.realbits) || val < 0)
 			return -EINVAL;
 
 		mutex_lock(&indio_dev->mlock);

