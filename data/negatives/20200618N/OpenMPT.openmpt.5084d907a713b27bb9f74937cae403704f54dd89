commit 5084d907a713b27bb9f74937cae403704f54dd89
Author: Johannes Schultz <sagamusix@openmpt.org>
Date:   Mon Dec 7 15:21:22 2015 +0000

    [Fix] MO3: Crash when trying to duplicate sample with source slot = int32_min.
    
    git-svn-id: https://source.openmpt.org/svn/openmpt/trunk/OpenMPT@5825 56274372-70c3-4bfc-bfc3-4c3a0b034d27

diff --git a/soundlib/Load_mo3.cpp b/soundlib/Load_mo3.cpp
index dd1694400..767580173 100644
--- a/soundlib/Load_mo3.cpp
+++ b/soundlib/Load_mo3.cpp
@@ -1352,7 +1352,7 @@ bool CSoundFile::ReadMO3(FileReader &file, ModLoadingFlags loadFlags)
 				SampleIO::littleEndian,
 				SampleIO::signedPCM)
 				.ReadSample(Samples[smp], file);
-		} else if(smpHeader.compressedSize < 0 && -smpHeader.compressedSize < smp)
+		} else if(smpHeader.compressedSize < 0 && (smp + smpHeader.compressedSize) > 0)
 		{
 			// Duplicate sample
 			const ModSample &smpFrom = Samples[smp + smpHeader.compressedSize];

