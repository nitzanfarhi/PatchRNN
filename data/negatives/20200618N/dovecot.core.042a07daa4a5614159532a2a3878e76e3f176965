commit 042a07daa4a5614159532a2a3878e76e3f176965
Author: Timo Sirainen <tss@iki.fi>
Date:   Sun Sep 16 13:30:31 2007 +0300

    Renamed strocpy() to i_strocpy().
    
    --HG--
    branch : HEAD

diff --git a/src/auth/password-scheme-otp.c b/src/auth/password-scheme-otp.c
index 46f4671a2..0661e488b 100644
--- a/src/auth/password-scheme-otp.c
+++ b/src/auth/password-scheme-otp.c
@@ -27,7 +27,7 @@ const char *password_generate_otp(const char *pw, const char *data,
 		unsigned char random_data[OTP_MAX_SEED_LEN / 2];
 
 		random_fill(random_data, sizeof(random_data));
-		strocpy(state.seed, binary_to_hex(random_data,
+		i_strocpy(state.seed, binary_to_hex(random_data,
 			OTP_MAX_SEED_LEN / 2), sizeof(state.seed));
 
 		state.seq = 1024;
diff --git a/src/imap/main.c b/src/imap/main.c
index c26147966..385801214 100644
--- a/src/imap/main.c
+++ b/src/imap/main.c
@@ -98,7 +98,7 @@ static void open_logfile(void)
 	}
 
 	if (getenv("LOG_PREFIX") != NULL)
-		strocpy(log_prefix, getenv("LOG_PREFIX"), sizeof(log_prefix));
+		i_strocpy(log_prefix, getenv("LOG_PREFIX"), sizeof(log_prefix));
 	else {
 		user = getenv("USER");
 		if (user == NULL) {
diff --git a/src/lib-storage/index/mbox/mbox-save.c b/src/lib-storage/index/mbox/mbox-save.c
index 1f1451d72..b23ed9fbb 100644
--- a/src/lib-storage/index/mbox/mbox-save.c
+++ b/src/lib-storage/index/mbox/mbox-save.c
@@ -128,7 +128,7 @@ static int write_from_line(struct mbox_save_context *ctx, time_t received_date,
 			name = my_hostname;
 		}
 
-		strocpy(my_hostdomain, name, sizeof(my_hostdomain));
+		i_strocpy(my_hostdomain, name, sizeof(my_hostdomain));
 	}
 
 	t_push();
diff --git a/src/lib-storage/list/mailbox-list-fs-iter.c b/src/lib-storage/list/mailbox-list-fs-iter.c
index a16386f13..5ff82231e 100644
--- a/src/lib-storage/list/mailbox-list-fs-iter.c
+++ b/src/lib-storage/list/mailbox-list-fs-iter.c
@@ -521,7 +521,7 @@ static struct dirent *fs_list_dir_next(struct fs_list_iterate_context *ctx)
 		else
 			dir->dirent.d_type = DT_UNKNOWN;
 #endif
-		if (strocpy(dir->dirent.d_name, fname,
+		if (i_strocpy(dir->dirent.d_name, fname,
 			    sizeof(dir->dirent.d_name)) < 0) {
 			/* name too large.. shouldn't happen. */
 			continue;
diff --git a/src/lib/hostpid.c b/src/lib/hostpid.c
index 06b54c6aa..d905a2f22 100644
--- a/src/lib/hostpid.c
+++ b/src/lib/hostpid.c
@@ -14,14 +14,14 @@ void hostpid_init(void)
 
 	if (my_hostname == NULL) {
 		if (gethostname(hostname, sizeof(hostname)-1) == -1)
-			strocpy(hostname, "unknown", sizeof(hostname));
+			i_strocpy(hostname, "unknown", sizeof(hostname));
 		hostname[sizeof(hostname)-1] = '\0';
 
 		my_hostname = hostname;
 	}
 
 	if (my_pid == NULL) {
-		strocpy(pid, dec2str(getpid()), sizeof(pid));
+		i_strocpy(pid, dec2str(getpid()), sizeof(pid));
 		my_pid = pid;
 	}
 }
diff --git a/src/lib/network.c b/src/lib/network.c
index 93dde0c98..8ac6b6569 100644
--- a/src/lib/network.c
+++ b/src/lib/network.c
@@ -194,7 +194,7 @@ int net_connect_unix(const char *path)
 
 	memset(&sa, 0, sizeof(sa));
 	sa.un.sun_family = AF_UNIX;
-	if (strocpy(sa.un.sun_path, path, sizeof(sa.un.sun_path)) < 0) {
+	if (i_strocpy(sa.un.sun_path, path, sizeof(sa.un.sun_path)) < 0) {
 		/* too long path */
 		errno = EINVAL;
 		return -1;
@@ -334,7 +334,7 @@ int net_listen_unix(const char *path, int backlog)
 
 	memset(&sa, 0, sizeof(sa));
 	sa.un.sun_family = AF_UNIX;
-	if (strocpy(sa.un.sun_path, path, sizeof(sa.un.sun_path)) < 0) {
+	if (i_strocpy(sa.un.sun_path, path, sizeof(sa.un.sun_path)) < 0) {
 		/* too long path */
 		errno = EINVAL;
 		return -1;
diff --git a/src/lib/process-title.c b/src/lib/process-title.c
index 435758681..fa432a6cc 100644
--- a/src/lib/process-title.c
+++ b/src/lib/process-title.c
@@ -50,7 +50,7 @@ static void linux_proctitle_init(char *argv[], char *envp[])
 
 static void linux_proctitle_set(const char *title)
 {
-	strocpy(process_title, title, process_title_len);
+	i_strocpy(process_title, title, process_title_len);
 }
 
 #endif
diff --git a/src/lib/strfuncs.c b/src/lib/strfuncs.c
index 1be30d50b..2804e32a8 100644
--- a/src/lib/strfuncs.c
+++ b/src/lib/strfuncs.c
@@ -298,7 +298,7 @@ bool is_numeric(const char *str, char end_char)
 	return TRUE;
 }
 
-int strocpy(char *dest, const char *src, size_t dstsize)
+int i_strocpy(char *dest, const char *src, size_t dstsize)
 {
 	if (dstsize == 0)
 		return -1;
diff --git a/src/lib/strfuncs.h b/src/lib/strfuncs.h
index c19985949..05ba98bcb 100644
--- a/src/lib/strfuncs.h
+++ b/src/lib/strfuncs.h
@@ -44,7 +44,7 @@ const char *t_strcut(const char *str, char cutchar);
 bool is_numeric(const char *str, char end_char);
 
 /* Like strlcpy(), but return -1 if buffer was overflown, 0 if not. */
-int strocpy(char *dest, const char *src, size_t dstsize);
+int i_strocpy(char *dest, const char *src, size_t dstsize);
 
 /* Print given directory and file to dest buffer, separated with '/'.
    If destination buffer is too small, it's set to empty string and errno is
diff --git a/src/login-common/ssl-proxy-openssl.c b/src/login-common/ssl-proxy-openssl.c
index c1d89ba0d..730670460 100644
--- a/src/login-common/ssl-proxy-openssl.c
+++ b/src/login-common/ssl-proxy-openssl.c
@@ -654,7 +654,7 @@ pem_password_callback(char *buf, int size, int rwflag ATTR_UNUSED,
 		return 0;
 	}
 
-	if (strocpy(buf, userdata, size) < 0)
+	if (i_strocpy(buf, userdata, size) < 0)
 		return 0;
 	return strlen(buf);
 }
diff --git a/src/plugins/lazy-expunge/lazy-expunge-plugin.c b/src/plugins/lazy-expunge/lazy-expunge-plugin.c
index c49efea03..ad3685b7d 100644
--- a/src/plugins/lazy-expunge/lazy-expunge-plugin.c
+++ b/src/plugins/lazy-expunge/lazy-expunge-plugin.c
@@ -449,7 +449,7 @@ lazy_expunge_mailbox_list_delete(struct mailbox_list *list, const char *name)
 	/* destination mailbox name needs to contain a timestamp */
 	tm = localtime(&ioloop_time);
 	if (strftime(timestamp, sizeof(timestamp), "%Y%m%d-%H%M%S", tm) == 0)
-		strocpy(timestamp, dec2str(ioloop_time), sizeof(timestamp));
+		i_strocpy(timestamp, dec2str(ioloop_time), sizeof(timestamp));
 	destname = t_strconcat(name, "-", timestamp, NULL);
 
 	/* first move the actual mailbox */
diff --git a/src/pop3/main.c b/src/pop3/main.c
index 9b9ce8404..8dbcd7c11 100644
--- a/src/pop3/main.c
+++ b/src/pop3/main.c
@@ -122,7 +122,7 @@ static void open_logfile(void)
 	}
 
 	if (getenv("LOG_PREFIX") != NULL)
-		strocpy(log_prefix, getenv("LOG_PREFIX"), sizeof(log_prefix));
+		i_strocpy(log_prefix, getenv("LOG_PREFIX"), sizeof(log_prefix));
 	else {
 		user = getenv("USER");
 		if (user == NULL) user = "??";

