commit c88e1c3619849bc496276555a08e6671a7ee073f
Author: roberto@netbsd64 <roberto@netbsd64>
Date:   Thu Jan 5 21:25:21 2012 +0100

    realpath on BSD is different from Linux/Solaris/OSX

diff --git a/plugins/cgi/cgi_plugin.c b/plugins/cgi/cgi_plugin.c
index 8b98581e..4916c7bb 100644
--- a/plugins/cgi/cgi_plugin.c
+++ b/plugins/cgi/cgi_plugin.c
@@ -365,8 +365,8 @@ char *uwsgi_cgi_get_docroot(char *path_info, uint16_t path_info_len, int *need_f
 	}
 
 	if (choosen_udd->status == 0) {
-		char *tmp_udd = realpath(path, NULL);
-		if (!tmp_udd) {
+		char *tmp_udd = uwsgi_malloc(PATH_MAX+1);
+		if (!realpath(path, tmp_udd)) {
 			return NULL;
 		}
 

