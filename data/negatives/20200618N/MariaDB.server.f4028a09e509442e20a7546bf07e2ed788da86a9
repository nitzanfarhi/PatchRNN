commit f4028a09e509442e20a7546bf07e2ed788da86a9
Author: Rich Prohaska <prohaska@tokutek.com>
Date:   Thu Oct 18 17:41:38 2012 +0000

    refs #5628 reverse expression order in ha_tokudb::store_lock (faster expression which is false most of the time first)
    
    git-svn-id: file:///svn/mysql/tokudb-engine/tokudb-engine@49081 c7de825b-a66e-492c-adef-691d508d4ae1

diff --git a/storage/tokudb/ha_tokudb.cc b/storage/tokudb/ha_tokudb.cc
index 46c7e1720fa..777fd18d341 100644
--- a/storage/tokudb/ha_tokudb.cc
+++ b/storage/tokudb/ha_tokudb.cc
@@ -6089,7 +6089,7 @@ THR_LOCK_DATA **ha_tokudb::store_lock(THD * thd, THR_LOCK_DATA ** to, enum thr_l
 
     if (lock_type != TL_IGNORE && lock.type == TL_UNLOCK) {
         // if creating a hot index
-        if (get_create_index_online(thd) && thd_sql_command(thd)== SQLCOM_CREATE_INDEX) {
+        if (thd_sql_command(thd)== SQLCOM_CREATE_INDEX && get_create_index_online(thd)) {
             rw_rdlock(&share->num_DBs_lock);
             if (share->num_DBs == (table->s->keys + test(hidden_primary_key))) {
                 lock_type = TL_WRITE_ALLOW_WRITE;

