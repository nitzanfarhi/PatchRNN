commit 9de1bb9737f34fa30813ef8d1d198434632c2108
Author: condret <condret@runas-racer.com>
Date:   Wed Oct 22 20:23:34 2014 +0200

    set RIOMap->flags on r_io_reopen

diff --git a/libr/io/io.c b/libr/io/io.c
index 37cfa5096..ec55b7dde 100644
--- a/libr/io/io.c
+++ b/libr/io/io.c
@@ -249,8 +249,10 @@ R_API int r_io_reopen (RIO *io, RIODesc *desc, int flags, int mode) {
 		r_io_section_rm_all (io, desc->fd);
 		if (io->maps) {
 			r_list_foreach (io->maps, iter, map) {
-				if (map->fd == desc->fd)
+				if (map->fd == desc->fd) {
 					map->fd = n->fd;
+					map->flags &= n->flags;
+				}
 			}
 		}
 		if (desc->plugin && desc->plugin->close)

