commit d855e13e01c7f9f616610746dea9bdc55ac4ba2a
Author: Valentin Lorentz <progval@progval.net>
Date:   Mon Dec 28 10:57:17 2015 +0100

    Remove trailing space in CAP ACK.
    
    Fixes https://github.com/atheme/charybdis/issues/110

diff --git a/modules/m_cap.c b/modules/m_cap.c
index 072be443..2472d4cb 100644
--- a/modules/m_cap.c
+++ b/modules/m_cap.c
@@ -426,8 +426,10 @@ cap_req(struct Client *source_p, const char *arg)
 		}
 
 		strcat(pbuf[i], cap->name);
-		strcat(pbuf[i], " ");
-		plen += (cap->namelen + 1);
+		if (!finished) {
+			strcat(pbuf[i], " ");
+			plen += (cap->namelen + 1);
+		}
 	}
 
 	if(!finished)

