commit 3ce62a84d53cd3d3cc5377bbf339e9b08ddf9c36
Author: WANG Cong <xiyou.wangcong@gmail.com>
Date:   Thu Sep 11 15:07:16 2014 -0700

    ipv6: exit early in addrconf_notify() if IPv6 is disabled
    
    If IPv6 is explicitly disabled before the interface comes up,
    it makes no sense to continue when it comes up, even just
    print a message.
    
    (I am not sure about other cases though, so I prefer not to touch)
    
    Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>
    Acked-by: Hannes Frederic Sowa <hannes@stressinduktion.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/ipv6/addrconf.c b/net/ipv6/addrconf.c
index 6b6a373a30b2..39d33355d7e8 100644
--- a/net/ipv6/addrconf.c
+++ b/net/ipv6/addrconf.c
@@ -2844,6 +2844,9 @@ static int addrconf_notify(struct notifier_block *this, unsigned long event,
 		if (dev->flags & IFF_SLAVE)
 			break;
 
+		if (idev && idev->cnf.disable_ipv6)
+			break;
+
 		if (event == NETDEV_UP) {
 			if (!addrconf_qdisc_ok(dev)) {
 				/* device is not ready yet. */

