commit 4f817298314a85c6218ba10689deab163b2c0ec5
Author: aland <aland>
Date:   Fri Jul 19 14:34:06 2002 +0000

            Call ip_hostname, to get host names, if the user wants them.
    
            Bug noted by Martin Shears

diff --git a/src/modules/rlm_preprocess/rlm_preprocess.c b/src/modules/rlm_preprocess/rlm_preprocess.c
index 2beb49c2e..620f03c24 100644
--- a/src/modules/rlm_preprocess/rlm_preprocess.c
+++ b/src/modules/rlm_preprocess/rlm_preprocess.c
@@ -562,7 +562,7 @@ static void add_nas_attr(REQUEST *request)
 	  exit(1);
 	}
 	nas->lvalue = request->packet->src_ipaddr;
-	ip_ntoa(nas->strvalue, nas->lvalue);
+	ip_hostname(nas->strvalue, sizeof(nas->strvalue), nas->lvalue);
 	pairadd(&request->packet->vps, nas);
 }
 

