commit b652d177ad8bc419e0001de65991d6e14710f540
Author: Danny Auble <da@llnl.gov>
Date:   Mon Nov 20 22:07:06 2006 +0000

    svn merge -r10214:10223 https://eris.llnl.gov/svn/slurm/branches/slurm-1.1

diff --git a/src/plugins/select/bluegene/plugin/bg_switch_connections.c b/src/plugins/select/bluegene/plugin/bg_switch_connections.c
index e71dd9add5..6355b262f5 100644
--- a/src/plugins/select/bluegene/plugin/bg_switch_connections.c
+++ b/src/plugins/select/bluegene/plugin/bg_switch_connections.c
@@ -353,14 +353,20 @@ extern int configure_small_block(bg_record_t *bg_record)
 	}
 
 	
+	if(!bp_id) {
+		error("No BP ID was returned from database");
+		continue;
+	}
+
 	if ((rc = bridge_get_nodecards(bp_id, &ncard_list))
 	    != STATUS_OK) {
 		error("bridge_get_nodecards(%s): %d",
 		      bp_id, rc);
-		
+		free(bp_id);
 		return SLURM_ERROR;
 	}
-	
+	free(bp_id);
+		
 			
 	if((rc = bridge_get_data(ncard_list, RM_NodeCardListSize, &num))
 	   != STATUS_OK) {

