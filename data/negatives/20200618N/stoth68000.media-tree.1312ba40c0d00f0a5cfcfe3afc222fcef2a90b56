commit 1312ba40c0d00f0a5cfcfe3afc222fcef2a90b56
Author: J Freyensee <james_p_freyensee@linux.intel.com>
Date:   Wed May 25 14:56:43 2011 -0700

    pti: PTI semantics fix in pti_tty_cleanup.
    
    This patch fixes a semantics issue in the pti_tty_cleanup()
    routine.
    
    Signed-off-by: J Freyensee <james_p_freyensee@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/misc/pti.c b/drivers/misc/pti.c
index e74e7d266569..374dfcfccd07 100644
--- a/drivers/misc/pti.c
+++ b/drivers/misc/pti.c
@@ -498,7 +498,7 @@ static void pti_tty_cleanup(struct tty_struct *tty)
 	if (pti_tty_data == NULL)
 		return;
 	pti_release_masterchannel(pti_tty_data->mc);
-	kfree(tty->driver_data);
+	kfree(pti_tty_data);
 	tty->driver_data = NULL;
 }
 

