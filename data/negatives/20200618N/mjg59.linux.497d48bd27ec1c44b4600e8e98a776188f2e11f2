commit 497d48bd27ec1c44b4600e8e98a776188f2e11f2
Author: Namjae Jeon <linkinjeon@gmail.com>
Date:   Mon Jul 30 14:42:11 2012 -0700

    hfsplus: use -ENOMEM when kzalloc() fails
    
    Use -ENOMEM return value instead of -EINVAL when kzalloc() fails.
    
    Signed-off-by: Namjae Jeon <linkinjeon@gmail.com>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/fs/hfsplus/super.c b/fs/hfsplus/super.c
index 473332098013..fdafb2d71654 100644
--- a/fs/hfsplus/super.c
+++ b/fs/hfsplus/super.c
@@ -365,7 +365,7 @@ static int hfsplus_fill_super(struct super_block *sb, void *data, int silent)
 	u64 last_fs_block, last_fs_page;
 	int err;
 
-	err = -EINVAL;
+	err = -ENOMEM;
 	sbi = kzalloc(sizeof(*sbi), GFP_KERNEL);
 	if (!sbi)
 		goto out;

