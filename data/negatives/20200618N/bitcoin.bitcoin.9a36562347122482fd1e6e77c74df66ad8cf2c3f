commit 9a36562347122482fd1e6e77c74df66ad8cf2c3f
Author: s_nakamoto <s_nakamoto@1a98c847-1fd6-4fd8-948a-caf3550aa51b>
Date:   Thu Dec 17 23:16:27 2009 +0000

    command line switch -noui
    
    git-svn-id: https://bitcoin.svn.sourceforge.net/svnroot/bitcoin/trunk@52 1a98c847-1fd6-4fd8-948a-caf3550aa51b

diff --git a/ui.cpp b/ui.cpp
index 6d65720d7..67895c127 100644
--- a/ui.cpp
+++ b/ui.cpp
@@ -190,6 +190,9 @@ void CalledMessageBox(const string& message, const string& caption, int style, w
 
 int ThreadSafeMessageBox(const string& message, const string& caption, int style, wxWindow* parent, int x, int y)
 {
+    if (mapArgs.count("-noui"))
+        return wxOK;
+
 #ifdef __WXMSW__
     return wxMessageBox(message, caption, style, parent, x, y);
 #else
@@ -3716,16 +3719,19 @@ bool CMyApp::OnInit2()
     //
     // Create the main frame window
     //
-    pframeMain = new CMainFrame(NULL);
-    if (mapArgs.count("-min"))
-        pframeMain->Iconize(true);
-    pframeMain->Show(true);  // have to show first to get taskbar button to hide
-    if (fMinimizeToTray && pframeMain->IsIconized())
-        fClosedToTray = true;
-    pframeMain->Show(!fClosedToTray);
-    ptaskbaricon->Show(fMinimizeToTray || fClosedToTray);
+    if (!mapArgs.count("-noui"))
+    {
+        pframeMain = new CMainFrame(NULL);
+        if (mapArgs.count("-min"))
+            pframeMain->Iconize(true);
+        pframeMain->Show(true);  // have to show first to get taskbar button to hide
+        if (fMinimizeToTray && pframeMain->IsIconized())
+            fClosedToTray = true;
+        pframeMain->Show(!fClosedToTray);
+        ptaskbaricon->Show(fMinimizeToTray || fClosedToTray);
 
-    CreateThread(ThreadDelayedRepaint, NULL);
+        CreateThread(ThreadDelayedRepaint, NULL);
+    }
 
     if (!CheckDiskSpace())
         return false;
@@ -3928,13 +3934,3 @@ void SetStartOnSystemStartup(bool fAutoStart)
 bool GetStartOnSystemStartup() { return false; }
 void SetStartOnSystemStartup(bool fAutoStart) { }
 #endif
-
-
-
-
-
-
-
-
-
-

