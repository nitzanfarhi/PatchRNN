commit a24b163b7c16f9e30e726319115e45ed6e683582
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Thu May 25 16:22:40 2006 -0700

    [PATCH] pcnet32: remove incorrect pcnet32_free_ring
    
    During a code scan for another change I discovered that this call to
    pcnet32_free_ring must be removed.  If the open fails due to a lack of
    memory all the ring structures are removed via the call to free_ring
    and a subsequent call to open will dereference a null pointer in
    pcnet32_init_ring.
    
    Please apply to 2.6.17.
    
    Signed-off-by:  Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

diff --git a/drivers/net/pcnet32.c b/drivers/net/pcnet32.c
index 07c31f19c6ba..fc08c4af506c 100644
--- a/drivers/net/pcnet32.c
+++ b/drivers/net/pcnet32.c
@@ -1774,8 +1774,6 @@ static int pcnet32_open(struct net_device *dev)
 		lp->rx_dma_addr[i] = 0;
 	}
 
-	pcnet32_free_ring(dev);
-
 	/*
 	 * Switch back to 16bit mode to avoid problems with dumb
 	 * DOS packet driver after a warm reboot

