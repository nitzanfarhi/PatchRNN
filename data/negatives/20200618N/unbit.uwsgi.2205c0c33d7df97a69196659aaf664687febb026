commit 2205c0c33d7df97a69196659aaf664687febb026
Author: roberto@quantal64 <roberto@quantal64>
Date:   Fri Aug 24 10:55:30 2012 +0200

    fixed goodbye_cruel_world in gevent mode

diff --git a/plugins/gevent/gevent.c b/plugins/gevent/gevent.c
index 12072ca4..052e5d10 100644
--- a/plugins/gevent/gevent.c
+++ b/plugins/gevent/gevent.c
@@ -67,9 +67,10 @@ PyObject *py_uwsgi_gevent_graceful(PyObject *self, PyObject *args) {
 
 void uwsgi_gevent_gbcw() {
 	
-	uwsgi_log("...The work of process %d is done. Seeya!\n", getpid());
-
 	py_uwsgi_gevent_graceful(NULL, NULL);
+
+	uwsgi_log("...The work of process %d is done. Seeya!\n", getpid());
+	exit(0);
 }
 
 struct wsgi_request *uwsgi_gevent_current_wsgi_req(void) {

