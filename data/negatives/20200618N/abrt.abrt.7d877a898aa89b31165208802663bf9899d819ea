commit 7d877a898aa89b31165208802663bf9899d819ea
Author: Denys Vlasenko <vda.linux@googlemail.com>
Date:   Tue May 25 13:48:03 2010 +0200

    trivial: close inotify_fd on exec
    
    Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com>

diff --git a/src/Daemon/Daemon.cpp b/src/Daemon/Daemon.cpp
index 70a6e980..68cc16fa 100644
--- a/src/Daemon/Daemon.cpp
+++ b/src/Daemon/Daemon.cpp
@@ -810,6 +810,7 @@ int main(int argc, char** argv)
         int inotify_fd = inotify_init();
         if (inotify_fd == -1)
             perror_msg_and_die("inotify_init failed");
+        close_on_exec_on(inotify_fd);
         if (inotify_add_watch(inotify_fd, DEBUG_DUMPS_DIR, IN_CREATE | IN_MOVED_TO) == -1)
             perror_msg_and_die("inotify_add_watch failed on '%s'", DEBUG_DUMPS_DIR);
 

