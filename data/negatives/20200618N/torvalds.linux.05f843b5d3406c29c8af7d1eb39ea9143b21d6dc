commit 05f843b5d3406c29c8af7d1eb39ea9143b21d6dc
Author: Alan Cox <alan@linux.intel.com>
Date:   Mon May 14 14:41:31 2012 +0100

    tty: Fix LED error return
    
    3.4-rc introduced a regression when setting the LEDS. We do the right thing
    but then return an error code.
    
    Resolves-bug: https://bugzilla.kernel.org/show_bug.cgi?id=43144
    Reported-by: Christian Casteyde
    Signed-off-by: Alan Cox <alan@linux/intel.com>
    Cc: stable <stable@vger.kernel.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/tty/vt/keyboard.c b/drivers/tty/vt/keyboard.c
index 86dd1e302bb3..9f5c462a8692 100644
--- a/drivers/tty/vt/keyboard.c
+++ b/drivers/tty/vt/keyboard.c
@@ -2032,7 +2032,7 @@ int vt_do_kdskled(int console, int cmd, unsigned long arg, int perm)
 		kbd->default_ledflagstate = ((arg >> 4) & 7);
 		set_leds();
                 spin_unlock_irqrestore(&kbd_event_lock, flags);
-		break;
+		return 0;
 
 	/* the ioctls below only set the lights, not the functions */
 	/* for those, see KDGKBLED and KDSKBLED above */

