commit 7afbeb6df2aa5f9e3a0fc228817a85c16dea0faa
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Fri Feb 24 12:56:12 2017 +0100

    s390/ipl: always use load normal for CCW-type re-IPL
    
    commit 14890678687c ("s390/ipl: use load normal for LPAR re-ipl")
    missed to convert one code path to use load normal semantics for
    re-IPL. Convert the missing code path as well.
    
    Fixes: 14890678687c ("s390/ipl: use load normal for LPAR re-ipl")
    Reported-by: Michael Holzheu <holzheu@linux.vnet.ibm.com>
    Acked-by: Michael Holzheu <holzheu@linux.vnet.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

diff --git a/arch/s390/kernel/ipl.c b/arch/s390/kernel/ipl.c
index b67dafb7b7cf..e545ffe5155a 100644
--- a/arch/s390/kernel/ipl.c
+++ b/arch/s390/kernel/ipl.c
@@ -564,6 +564,8 @@ static struct kset *ipl_kset;
 
 static void __ipl_run(void *unused)
 {
+	if (MACHINE_IS_LPAR && ipl_info.type == IPL_TYPE_CCW)
+		diag308(DIAG308_LOAD_NORMAL_DUMP, NULL);
 	diag308(DIAG308_LOAD_CLEAR, NULL);
 	if (MACHINE_IS_VM)
 		__cpcmd("IPL", NULL, 0, NULL);

