commit 8aa681c60d02ef89e4a78b176b6fa380ab2dd9ba
Author: Benjamin Jemlich <pcgod@users.sourceforge.net>
Date:   Fri May 18 08:42:12 2012 +0200

    AudioInput: Fix float to short conversion
    
    The resampler could (and does...) give us values which are
    greater than 1.0f.

diff --git a/src/mumble/AudioInput.cpp b/src/mumble/AudioInput.cpp
index 058867e9..74a2e1af 100644
--- a/src/mumble/AudioInput.cpp
+++ b/src/mumble/AudioInput.cpp
@@ -419,9 +419,9 @@ void AudioInput::addMic(const void *data, unsigned int nsamp) {
 			}
 
 			// Convert float to 16bit PCM
-			const float mul = 32768.f;
+			const float mul = 32767.f;
 			for (int j = 0; j < iFrameSize; ++j)
-				psMic[j] = static_cast<short>(ptr[j] * mul);
+				psMic[j] = static_cast<short>(qBound(-1.0f, ptr[j], 1.0f) * mul);
 
 			// If we have echo chancellation enabled...
 			if (iEchoChannels > 0) {

