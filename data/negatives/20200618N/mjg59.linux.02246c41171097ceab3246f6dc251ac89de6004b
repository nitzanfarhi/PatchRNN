commit 02246c41171097ceab3246f6dc251ac89de6004b
Author: Nikanth Karthikesan <knikanth@suse.de>
Date:   Thu Apr 8 21:39:31 2010 +0200

    loop: Update mtime when writing using aops
    
    Update mtime when writing to backing filesystem using the address space
    operations write_begin and write_end.
    
    Signed-off-by: Nikanth Karthikesan <knikanth@suse.de>
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

diff --git a/drivers/block/loop.c b/drivers/block/loop.c
index bd112c8c7bcd..1c21a3f23868 100644
--- a/drivers/block/loop.c
+++ b/drivers/block/loop.c
@@ -238,6 +238,8 @@ static int do_lo_send_aops(struct loop_device *lo, struct bio_vec *bvec,
 		if (ret)
 			goto fail;
 
+		file_update_time(file);
+
 		transfer_result = lo_do_transfer(lo, WRITE, page, offset,
 				bvec->bv_page, bv_offs, size, IV);
 		copied = size;

