commit c3ea07f3d9710889ab26933ea722c1b62dc7bf0c
Author: Bernhard Miklautz <bernhard.miklautz@thincast.com>
Date:   Fri Jul 24 14:57:47 2015 +0200

    winpr/thread: don't close invalid file descriptors
    
    In case the file descriptor is -1 don't call close.

diff --git a/winpr/libwinpr/thread/thread.c b/winpr/libwinpr/thread/thread.c
index 06917a26d..91aaf5f75 100644
--- a/winpr/libwinpr/thread/thread.c
+++ b/winpr/libwinpr/thread/thread.c
@@ -504,10 +504,10 @@ void cleanup_handle(void *obj)
 		WLog_ERR(TAG, "failed to destroy mutex [%d] %s (%d)",
 				rc, strerror(errno), errno);
 
-	if (thread->pipe_fd[0])
+	if (thread->pipe_fd[0] >= 0)
 		close(thread->pipe_fd[0]);
 
-	if (thread->pipe_fd[1])
+	if (thread->pipe_fd[1] >= 0)
 		close(thread->pipe_fd[1]);
 
 	if (thread_list && ListDictionary_Contains(thread_list, &thread->thread))

