commit 7eeea1679783e7c1c38074e8c562900b7e3d3dd7
Author: Trond Myklebust <trond.myklebust@primarydata.com>
Date:   Thu Dec 17 09:22:15 2015 -0500

    pNFS/flexfiles: Fix a statistics gathering imbalance
    
    When we replay a failed read, write or commit to the dataserver, we
    need to ensure that we call ff_layout_read_prepare_v3(),
    ff_layout_write_prepare_v3 or ff_layout_commit_prepare_v3() so that we
    reset the statistics.
    
    Signed-off-by: Trond Myklebust <trond.myklebust@primarydata.com>

diff --git a/fs/nfs/flexfilelayout/flexfilelayout.c b/fs/nfs/flexfilelayout/flexfilelayout.c
index 1da19d709458..14109a82ce84 100644
--- a/fs/nfs/flexfilelayout/flexfilelayout.c
+++ b/fs/nfs/flexfilelayout/flexfilelayout.c
@@ -1130,7 +1130,7 @@ static int ff_layout_async_handle_error_v3(struct rpc_task *task,
 	return -NFS4ERR_RESET_TO_PNFS;
 out_retry:
 	task->tk_status = 0;
-	rpc_restart_call(task);
+	rpc_restart_call_prepare(task);
 	rpc_delay(task, NFS_JUKEBOX_RETRY_TIME);
 	return -EAGAIN;
 }

