commit c3e25a24b55d206dfa261fb2c7bb29b09f7bcf9b
Author: Vinod Koul <vinod.koul@intel.com>
Date:   Tue May 3 17:32:25 2011 +0100

    intel_sst: ignore IRQ when suspended
    
    The irq for audio is shared, so when device is supended driver should
    not the read register and ignore the interrupt.
    
    This patch ignores interrupts when device is suspended.
    
    Signed-off-by: Vinod Koul <vinod.koul@intel.com>
    Signed-off-by: Ramesh Babu K V <ramesh.babu@intel.com>
    Signed-off-by: Alan Cox <alan@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/intel_sst/intel_sst.c b/drivers/staging/intel_sst/intel_sst.c
index c40e00a12d7c..e7c2617c0b2d 100644
--- a/drivers/staging/intel_sst/intel_sst.c
+++ b/drivers/staging/intel_sst/intel_sst.c
@@ -107,6 +107,9 @@ static irqreturn_t intel_sst_interrupt(int irq, void *context)
 	unsigned int size = 0, str_id;
 	struct stream_info *stream ;
 
+	/* Do not handle interrupt in suspended state */
+	if (drv->sst_state == SST_SUSPENDED)
+		return IRQ_NONE;
 	/* Interrupt arrived, check src */
 	isr.full = sst_shim_read(drv->shim, SST_ISRX);
 

