commit 1bb638a357d62a0b8e5fa2822cf1ca50d16204c6
Author: Michael Wallner <mike@php.net>
Date:   Fri Sep 25 09:09:09 2015 +0200

    fail on parse error

diff --git a/php_http_info.c b/php_http_info.c
index 9050919..4fb067f 100644
--- a/php_http_info.c
+++ b/php_http_info.c
@@ -139,6 +139,10 @@ php_http_info_t *php_http_info_parse(php_http_info_t *info, const char *pre_head
 				} else {
 					PHP_HTTP_INFO(info).request.url = php_http_url_parse_authority(url, http - url, ~0 TSRMLS_CC);
 				}
+				if (!PHP_HTTP_INFO(info).request.url) {
+					PTR_SET(PHP_HTTP_INFO(info).request.method, NULL);
+					return NULL;
+				}
 			} else {
 				PTR_SET(PHP_HTTP_INFO(info).request.method, NULL);
 				return NULL;

