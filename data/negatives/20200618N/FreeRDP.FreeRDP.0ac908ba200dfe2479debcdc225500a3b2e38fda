commit 0ac908ba200dfe2479debcdc225500a3b2e38fda
Author: Armin Novak <anovak@thinstuff.at>
Date:   Tue Nov 12 15:04:26 2013 +0100

    Added assertions to detect invalid call sequences of <transport_free>
    and <transport_disconnect>.

diff --git a/libfreerdp/core/transport.c b/libfreerdp/core/transport.c
index 70ff6c069..f47cf4b59 100644
--- a/libfreerdp/core/transport.c
+++ b/libfreerdp/core/transport.c
@@ -1051,6 +1051,12 @@ void transport_free(rdpTransport* transport)
 {
 	if (transport)
 	{
+		if (transport->async)
+		{
+			assert(!transport->thread);
+			assert(!transport->stopEvent);
+		}
+
 		if (transport->ReceiveBuffer)
 			Stream_Release(transport->ReceiveBuffer);
 

