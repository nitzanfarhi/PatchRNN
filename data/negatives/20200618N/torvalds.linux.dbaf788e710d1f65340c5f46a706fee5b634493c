commit dbaf788e710d1f65340c5f46a706fee5b634493c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 17 11:33:33 2016 +0100

    drm/i915: Remember to set vma->pages for the preallocated stolen object
    
    In commit 247177ddd517 ("drm/i915: Always set the vma->pages"), as it
    title implies, we always set vma->pages for bound objects. Even before
    that, we would set vma->ggtt_view.pages, for globally bound objects.
    This was forgotten for the fixup inside the preallocated stolen objects,
    which has to recreate a global GTT binding outside of the usual VMA
    insertion path
    
    Fixes: 247177ddd517 ("drm/i915: Always set the vma->pages")
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Link: http://patchwork.freedesktop.org/patch/msgid/1471430013-3449-1-git-send-email-chris@chris-wilson.co.uk
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>

diff --git a/drivers/gpu/drm/i915/i915_gem_stolen.c b/drivers/gpu/drm/i915/i915_gem_stolen.c
index 9a9b3cfbac7f..aa050fa1e558 100644
--- a/drivers/gpu/drm/i915/i915_gem_stolen.c
+++ b/drivers/gpu/drm/i915/i915_gem_stolen.c
@@ -716,6 +716,7 @@ i915_gem_object_create_stolen_for_preallocated(struct drm_device *dev,
 		goto err;
 	}
 
+	vma->pages = obj->pages;
 	vma->flags |= I915_VMA_GLOBAL_BIND;
 	__i915_vma_set_map_and_fenceable(vma);
 	list_move_tail(&vma->vm_link, &ggtt->base.inactive_list);

