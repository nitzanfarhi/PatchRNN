commit aab0d83ee771b19082c3ee24576cf5508d319294
Author: Bryan Wu <bryan.wu@analog.com>
Date:   Wed Feb 6 01:38:17 2008 -0800

    spi_bfin: use more useful GPIO labels
    
    Use the SPI driver's name when requesting gpio lines.  When there are gpio
    conflicts, this helps to narrow down the problems; "bfin-spi" is not
    informative.
    
    Signed-off-by: Bryan Wu <bryan.wu@analog.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/spi/spi_bfin5xx.c b/drivers/spi/spi_bfin5xx.c
index 84c158a3af2d..52beb5c924b7 100644
--- a/drivers/spi/spi_bfin5xx.c
+++ b/drivers/spi/spi_bfin5xx.c
@@ -1176,7 +1176,7 @@ static int setup(struct spi_device *spi)
 	if ((chip->chip_select_num > 0)
 		&& (chip->chip_select_num <= spi->master->num_chipselect))
 		peripheral_request(ssel[spi->master->bus_num]
-			[chip->chip_select_num-1], DRV_NAME);
+			[chip->chip_select_num-1], spi->modalias);
 
 	cs_deactive(drv_data, chip);
 

