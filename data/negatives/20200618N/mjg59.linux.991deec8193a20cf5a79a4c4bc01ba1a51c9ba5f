commit 991deec8193a20cf5a79a4c4bc01ba1a51c9ba5f
Author: Abhi Das <adas@redhat.com>
Date:   Thu Apr 17 00:55:04 2014 -0500

    GFS2: quotas not being refreshed in gfs2_adjust_quota
    
    Old values of user quota limits were being used and
    could allow users to exceed their allotted quotas.
    This patch refreshes the limits to the latest values
    so that quotas are enforced correctly.
    
    Resolves: rhbz#1077463
    Signed-off-by: Abhi Das <adas@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

diff --git a/fs/gfs2/quota.c b/fs/gfs2/quota.c
index c4effff7cf55..619389649d03 100644
--- a/fs/gfs2/quota.c
+++ b/fs/gfs2/quota.c
@@ -778,6 +778,7 @@ get_a_page:
 		i_size_write(inode, size);
 	inode->i_mtime = inode->i_atime = CURRENT_TIME;
 	mark_inode_dirty(inode);
+	set_bit(QDF_REFRESH, &qd->qd_flags);
 	return 0;
 
 unlock_out:

