commit 80b80b05c3fee028f37349a3f8f079556ca6a7b8
Author: Sage Weil <sage.weil@dreamhost.com>
Date:   Mon Jan 16 11:22:58 2012 -0800

    filejournal: use ::encode() wrapper func for Transaction
    
    So we can capture the output.
    
    Signed-off-by: Sage Weil <sage.weil@dreamhost.com>

diff --git a/src/os/JournalingObjectStore.cc b/src/os/JournalingObjectStore.cc
index 8414af7c72..66356d9a6e 100644
--- a/src/os/JournalingObjectStore.cc
+++ b/src/os/JournalingObjectStore.cc
@@ -294,7 +294,7 @@ void JournalingObjectStore::_op_journal_transactions(list<ObjectStore::Transacti
 	data_len = t->get_data_length();
 	data_align = (t->get_data_alignment() - tbl.length()) & ~CEPH_PAGE_MASK;
       }
-      t->encode(tbl);
+      ::encode(*t, tbl);
     }
     journal->submit_entry(op, tbl, data_align, onjournal);
   } else if (onjournal)

