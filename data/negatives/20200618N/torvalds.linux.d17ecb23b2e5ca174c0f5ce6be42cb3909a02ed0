commit d17ecb23b2e5ca174c0f5ce6be42cb3909a02ed0
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Mon May 7 11:01:55 2007 -0700

    skge: allow WOL except for known broken chips
    
    Wake On Lan works correctly on Yukon-FE and other variants.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>a
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

diff --git a/drivers/net/skge.c b/drivers/net/skge.c
index 21afe108d3cb..b07da1054add 100644
--- a/drivers/net/skge.c
+++ b/drivers/net/skge.c
@@ -135,10 +135,13 @@ static void skge_get_regs(struct net_device *dev, struct ethtool_regs *regs,
 /* Wake on Lan only supported on Yukon chips with rev 1 or above */
 static u32 wol_supported(const struct skge_hw *hw)
 {
-	if (hw->chip_id == CHIP_ID_YUKON && hw->chip_rev != 0)
-		return WAKE_MAGIC | WAKE_PHY;
-	else
+	if (hw->chip_id == CHIP_ID_GENESIS)
 		return 0;
+
+	if (hw->chip_id == CHIP_ID_YUKON && hw->chip_rev == 0)
+		return 0;
+
+	return WAKE_MAGIC | WAKE_PHY;
 }
 
 static u32 pci_wake_enabled(struct pci_dev *dev)

