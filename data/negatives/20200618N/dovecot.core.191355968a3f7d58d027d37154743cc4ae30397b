commit 191355968a3f7d58d027d37154743cc4ae30397b
Author: Timo Sirainen <tss@iki.fi>
Date:   Sat Dec 13 13:19:03 2008 +0200

    POP3: A bit more code for handling nicely unsupported auth mechanisms.
    
    --HG--
    branch : HEAD

diff --git a/src/pop3-login/client-authenticate.c b/src/pop3-login/client-authenticate.c
index da665ed50..6862721f1 100644
--- a/src/pop3-login/client-authenticate.c
+++ b/src/pop3-login/client-authenticate.c
@@ -189,7 +189,7 @@ static void sasl_callback(struct client *_client, enum sasl_server_reply reply,
 				  data : AUTH_FAILED_MSG, NULL);
 		client_send_line(client, msg);
 
-		if (!client->destroyed) {
+		if (!client->destroyed && !client->auth_initializing) {
 			/* get back to normal client input. */
 			if (client->io != NULL)
 				io_remove(&client->io);

