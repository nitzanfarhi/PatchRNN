commit eb399d3c99d8b411bfc46e67ea329ddc1ca64e87
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 27 14:53:35 2015 +0100

    ALSA: hda - Skip ELD notification during PM process
    
    The ELD notification can be received asynchronously from the graphics
    side, and this may happen just at the moment the sound driver is
    processing the suspend or the resume, and it would confuse the whole
    procedure.  Since the ELD and connection states are updated in anyway
    at the end of the resume, we can skip it when received during PM
    process.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

diff --git a/sound/pci/hda/patch_hdmi.c b/sound/pci/hda/patch_hdmi.c
index 4b6fb668c91c..da264e8acce2 100644
--- a/sound/pci/hda/patch_hdmi.c
+++ b/sound/pci/hda/patch_hdmi.c
@@ -2357,6 +2357,9 @@ static void intel_pin_eld_notify(void *audio_ptr, int port)
 	 */
 	if (snd_power_get_state(codec->card) != SNDRV_CTL_POWER_D0)
 		return;
+	/* ditto during suspend/resume process itself */
+	if (atomic_read(&(codec)->core.in_pm))
+		return;
 
 	check_presence_and_report(codec, pin_nid);
 }

