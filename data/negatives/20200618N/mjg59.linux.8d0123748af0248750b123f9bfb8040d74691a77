commit 8d0123748af0248750b123f9bfb8040d74691a77
Author: Jakub Kicinski <kubakici@wp.pl>
Date:   Wed Jun 10 20:10:09 2015 +0200

    mt7601u: don't warn about devices without per-rate power table
    
    We expect EEPROM per-rate power table to be filled with
    s6 values and warn user if values are invalid.  However,
    there appear to be devices which don't have this section
    of EEPROM initialized.  In such case we should ignore
    the values and leave the driver power tables set to zero.
    
    Note that vendor driver doesn't care about this case but
    mt76x2 skips 0xff per value.  We take mt76x2's approach.
    
    Signed-off-by: Jakub Kicinski <kubakici@wp.pl>
    Signed-off-by: Kalle Valo <kvalo@codeaurora.org>

diff --git a/drivers/net/wireless/mediatek/mt7601u/eeprom.c b/drivers/net/wireless/mediatek/mt7601u/eeprom.c
index ce3837f270f0..8d8ee0344f7b 100644
--- a/drivers/net/wireless/mediatek/mt7601u/eeprom.c
+++ b/drivers/net/wireless/mediatek/mt7601u/eeprom.c
@@ -277,6 +277,10 @@ mt7601u_extra_power_over_mac(struct mt7601u_dev *dev)
 static void
 mt7601u_set_power_rate(struct power_per_rate *rate, s8 delta, u8 value)
 {
+	/* Invalid? Note: vendor driver does not handle this */
+	if (value == 0xff)
+		return;
+
 	rate->raw = s6_validate(value);
 	rate->bw20 = s6_to_int(value);
 	/* Note: vendor driver does cap the value to s6 right away */

