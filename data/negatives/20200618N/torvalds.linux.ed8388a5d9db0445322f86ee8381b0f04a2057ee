commit ed8388a5d9db0445322f86ee8381b0f04a2057ee
Author: Andi Kleen <ak@suse.de>
Date:   Wed Jan 11 22:42:57 2006 +0100

    [PATCH] x86_64: Don't confuse apic=... command line option with apic
    
    Previously apic was foced with apic=logopt was specified.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/arch/x86_64/kernel/setup.c b/arch/x86_64/kernel/setup.c
index ee3a5cd7d8d9..33e77ec8da22 100644
--- a/arch/x86_64/kernel/setup.c
+++ b/arch/x86_64/kernel/setup.c
@@ -351,7 +351,9 @@ static __init void parse_cmdline_early (char ** cmdline_p)
 		if (!memcmp(from, "noapic", 6)) 
 			skip_ioapic_setup = 1;
 
-		if (!memcmp(from, "apic", 4)) { 
+		/* Make sure to not confuse with apic= */
+		if (!memcmp(from, "apic", 4) &&
+			(from[4] == ' ' || from[4] == 0)) {
 			skip_ioapic_setup = 0;
 			ioapic_force = 1;
 		}

