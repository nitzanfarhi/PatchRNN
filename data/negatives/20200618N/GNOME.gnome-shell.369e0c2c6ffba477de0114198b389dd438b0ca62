commit 369e0c2c6ffba477de0114198b389dd438b0ca62
Author: Colin Walters <walters@verbum.org>
Date:   Fri Oct 23 10:56:48 2009 -0400

    [ShellApp] Signal windows-changed when removing a window
    
    https://bugzilla.gnome.org/show_bug.cgi?id=599412

diff --git a/src/shell-app.c b/src/shell-app.c
index e89fcbee5..3ae3f5c09 100644
--- a/src/shell-app.c
+++ b/src/shell-app.c
@@ -329,6 +329,8 @@ _shell_app_remove_window (ShellApp   *app,
   g_object_unref (window);
   app->windows = g_slist_remove (app->windows, window);
 
+  g_signal_emit (app, shell_app_signals[WINDOWS_CHANGED], 0);
+
   if (app->windows == NULL)
     disconnect_workspace_switch (app);
 }

