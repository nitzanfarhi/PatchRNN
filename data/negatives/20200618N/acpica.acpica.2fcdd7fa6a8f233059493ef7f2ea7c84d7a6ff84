commit 2fcdd7fa6a8f233059493ef7f2ea7c84d7a6ff84
Author: rmoore1 <rmoore1>
Date:   Wed May 31 16:58:19 2006 +0000

    Error message for CreateField/NumBits operand=0

diff --git a/source/compiler/aslanalyze.c b/source/compiler/aslanalyze.c
index f8e2843e6..bbded259e 100644
--- a/source/compiler/aslanalyze.c
+++ b/source/compiler/aslanalyze.c
@@ -2,7 +2,7 @@
 /******************************************************************************
  *
  * Module Name: aslanalyze.c - check for semantic errors
- *              $Revision: 1.111 $
+ *              $Revision: 1.112 $
  *
  *****************************************************************************/
 
@@ -2050,6 +2050,22 @@ AnOtherSemanticAnalysisWalkBegin (
         }
         break;
 
+    case PARSEOP_CREATEFIELD:
+        /*
+         * Check for a zero Length (NumBits) operand. NumBits is the 3rd operand
+         */
+        ArgNode = Op->Asl.Child;
+        ArgNode = ArgNode->Asl.Next;
+        ArgNode = ArgNode->Asl.Next;
+
+        if ((ArgNode->Asl.ParseOpcode == PARSEOP_ZERO) ||
+           ((ArgNode->Asl.ParseOpcode == PARSEOP_INTEGER) &&
+            (ArgNode->Asl.Value.Integer == 0)))
+        {
+            AslError (ASL_ERROR, ASL_MSG_NON_ZERO, ArgNode, NULL);
+        }
+        break;
+
     default:
         break;
     }
diff --git a/source/compiler/asltypes.h b/source/compiler/asltypes.h
index e90649496..9ad44b35b 100644
--- a/source/compiler/asltypes.h
+++ b/source/compiler/asltypes.h
@@ -2,7 +2,7 @@
 /******************************************************************************
  *
  * Module Name: asltypes.h - compiler data types and struct definitions
- *              $Revision: 1.86 $
+ *              $Revision: 1.87 $
  *
  *****************************************************************************/
 
@@ -420,7 +420,8 @@ typedef enum
     ASL_MSG_MULTIPLE_DEFAULT,
     ASL_MSG_TIMEOUT,
     ASL_MSG_RESULT_NOT_USED,
-    ASL_MSG_NOT_REFERENCED
+    ASL_MSG_NOT_REFERENCED,
+    ASL_MSG_NON_ZERO
 
 } ASL_MESSAGE_IDS;
 
@@ -532,7 +533,8 @@ char                        *AslMessages [] = {
 /*    ASL_MSG_MULTIPLE_DEFAULT */           "More than one Default statement within Switch construct",
 /*    ASL_MSG_TIMEOUT */                    "Possible operator timeout is ignored",
 /*    ASL_MSG_RESULT_NOT_USED */            "Result is not used, operator has no effect",
-/*    ASL_MSG_NOT_REFERENCED */             "Namespace object is not referenced"
+/*    ASL_MSG_NOT_REFERENCED */             "Namespace object is not referenced",
+/*    ASL_MSG_NON_ZERO */                   "Operand evaluates to zero"
 
 };
 

