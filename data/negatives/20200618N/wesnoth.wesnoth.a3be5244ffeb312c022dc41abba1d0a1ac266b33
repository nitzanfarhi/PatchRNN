commit a3be5244ffeb312c022dc41abba1d0a1ac266b33
Author: Celtic Minstrel <celtic.minstrel.ca@some.place>
Date:   Tue Sep 13 15:24:44 2016 -0400

    Clear allow_plugin_skip earlier in titlescreen and MP lobby / create

diff --git a/src/gui/dialogs/lobby/lobby.cpp b/src/gui/dialogs/lobby/lobby.cpp
index fee609bf34..5201ae26e0 100644
--- a/src/gui/dialogs/lobby/lobby.cpp
+++ b/src/gui/dialogs/lobby/lobby.cpp
@@ -167,6 +167,7 @@ tlobby_main::tlobby_main(const config& game_config,
 {
 	// Need to set this in the constructor, pre_show() is too late
 	set_show_even_without_video(true);
+	set_allow_plugin_skip(false);
 }
 
 struct lobby_delay_gamelist_update_guard
@@ -818,7 +819,6 @@ void tlobby_main::pre_show(twindow& window)
 		game_config::lobby_network_timer, std::bind(&tlobby_main::network_handler, this), true);
 
 	// Set up Lua plugin context
-	set_allow_plugin_skip(false);
 	plugins_context_.reset(new plugins_context("Multiplayer Lobby"));
 
 	plugins_context_->set_callback("join",    [&, this](const config&) {
diff --git a/src/gui/dialogs/multiplayer/mp_create_game.cpp b/src/gui/dialogs/multiplayer/mp_create_game.cpp
index 7a9330ffac..bdc94129f1 100644
--- a/src/gui/dialogs/multiplayer/mp_create_game.cpp
+++ b/src/gui/dialogs/multiplayer/mp_create_game.cpp
@@ -115,6 +115,9 @@ tmp_create_game::tmp_create_game(const config& cfg, ng::create_engine& create_en
 
 	create_engine_.get_state() = saved_game();
 	create_engine_.get_state().classification().campaign_type = game_classification::CAMPAIGN_TYPE::MULTIPLAYER;
+
+	// Need to set this in the constructor, pre_show() is too late
+	set_allow_plugin_skip(false);
 }
 
 void tmp_create_game::pre_show(twindow& window)
@@ -315,7 +318,6 @@ void tmp_create_game::pre_show(twindow& window)
 	//
 	// Set up the Lua plugin context
 	//
-	set_allow_plugin_skip(false);
 	plugins_context_.reset(new plugins_context("Multiplayer Create"));
 
 	plugins_context_->set_callback("create", [&window](const config&) { window.set_retval(twindow::OK); }, false);
diff --git a/src/gui/dialogs/title_screen.cpp b/src/gui/dialogs/title_screen.cpp
index 846747e5f6..f7e53aa42e 100644
--- a/src/gui/dialogs/title_screen.cpp
+++ b/src/gui/dialogs/title_screen.cpp
@@ -141,6 +141,8 @@ void ttitle_screen::basic_callback(twindow& window, tresult res)
 
 ttitle_screen::ttitle_screen(game_launcher& game) : result_(REDRAW_BACKGROUND), game_(game), debug_clock_(nullptr)
 {
+	// Need to set this in the constructor, pre_show() / post_build() is too late
+	set_allow_plugin_skip(false);
 }
 
 ttitle_screen::~ttitle_screen()
@@ -222,7 +224,6 @@ debug_tooltip(twindow& window, bool& handled, const tpoint& coordinate)
 void ttitle_screen::pre_show(twindow& window)
 {
 	set_restore(false);
-	set_allow_plugin_skip(false);
 	window.set_click_dismiss(false);
 	window.set_enter_disabled(true);
 	window.set_escape_disabled(true);

