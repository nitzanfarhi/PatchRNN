commit 3daa20b3d7e2c27aa11cc8af77f45e4ffcfef6dc
Author: joris <joris@openbsd.org>
Date:   Mon May 29 06:29:49 2006 +0000

    i forgot to handle directories inside the 'log' code,
    which resulted in a very painfull segfault later on.
    
    found by reyk@

diff --git a/usr.bin/cvs/getlog.c b/usr.bin/cvs/getlog.c
index 7d9a4563b14..0217a30bcc8 100644
--- a/usr.bin/cvs/getlog.c
+++ b/usr.bin/cvs/getlog.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: getlog.c,v 1.58 2006/05/28 21:35:58 joris Exp $	*/
+/*	$OpenBSD: getlog.c,v 1.59 2006/05/29 06:29:49 joris Exp $	*/
 /*
  * Copyright (c) 2006 Joris Vink <joris@openbsd.org>
  *
@@ -108,6 +108,12 @@ cvs_log_local(struct cvs_file *cf)
 		return;
 	}
 
+	if (cf->file_type == CVS_DIR) {
+		if (verbosity > 1)
+			cvs_log(LP_NOTICE, "Logging %s", cf->file_path);
+		return;
+	}
+
 	printf("\nRCS file: %s", cf->file_rpath);
 	printf("\nWorking file: %s", cf->file_path);
 	printf("\nhead:");

