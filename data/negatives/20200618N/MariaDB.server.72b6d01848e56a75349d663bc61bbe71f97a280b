commit 72b6d01848e56a75349d663bc61bbe71f97a280b
Author: Vladislav Vaintroub <wlad@mariadb.com>
Date:   Tue Jun 5 22:13:19 2018 +0100

    MDEV-10246 ssl-* config file options have no effect without mysql_ssl_set()
    
    Partially revert 4ef74979969ac9339d0d42c11a6f26632e6776f1
    that caused regression.
    
    Any ssl- option must imply use_ssl=1, even if mysql_set_ssl() was not
    used.

diff --git a/sql-common/client.c b/sql-common/client.c
index 6321e64bc75..ec992f80e8d 100644
--- a/sql-common/client.c
+++ b/sql-common/client.c
@@ -2541,6 +2541,10 @@ static int send_client_reply_packet(MCPVIO_EXT *mpvio,
     mysql->client_flag|= CLIENT_MULTI_RESULTS;
 
 #ifdef HAVE_OPENSSL
+  if (mysql->options.ssl_key || mysql->options.ssl_cert ||
+      mysql->options.ssl_ca || mysql->options.ssl_capath ||
+      mysql->options.ssl_cipher)
+    mysql->options.use_ssl = 1;
   if (mysql->options.use_ssl)
     mysql->client_flag|= CLIENT_SSL;
 #endif /* HAVE_OPENSSL */

