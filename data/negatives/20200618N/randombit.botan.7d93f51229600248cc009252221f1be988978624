commit 7d93f51229600248cc009252221f1be988978624
Author: lloyd <lloyd@randombit.net>
Date:   Sun Jun 25 06:11:27 2006 +0000

    Make set_global_state a little more elegant, by having it delete
    the return value of swap_global_state rather than manipulate the
    state object directly.

diff --git a/src/libstate.cpp b/src/libstate.cpp
index 546e11c90..114b88682 100644
--- a/src/libstate.cpp
+++ b/src/libstate.cpp
@@ -31,8 +31,7 @@ Library_State& global_state()
 
 void set_global_state(Library_State* new_state)
    {
-   delete global_lib_state;
-   global_lib_state = new_state;
+   delete swap_global_state(new_state);
    }
 
 Library_State* swap_global_state(Library_State* new_state)

