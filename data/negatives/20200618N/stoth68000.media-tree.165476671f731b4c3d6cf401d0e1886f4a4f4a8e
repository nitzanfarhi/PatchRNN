commit 165476671f731b4c3d6cf401d0e1886f4a4f4a8e
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Thu Jul 22 11:56:38 2010 +0200

    firewire: nosy: fix IRQ handler for card ejection
    
    Untested, I don't have a PCILynx CardBus card.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

diff --git a/drivers/firewire/nosy.c b/drivers/firewire/nosy.c
index 57a1100f8f4e..a241b62630b2 100644
--- a/drivers/firewire/nosy.c
+++ b/drivers/firewire/nosy.c
@@ -444,6 +444,10 @@ irq_handler(int irq, void *device)
 
 	pci_int_status = reg_read(lynx, PCI_INT_STATUS);
 
+	if (pci_int_status == ~0)
+		/* Card was ejected. */
+		return IRQ_NONE;
+
 	if ((pci_int_status & PCI_INT_INT_PEND) == 0)
 		/* Not our interrupt, bail out quickly. */
 		return IRQ_NONE;

