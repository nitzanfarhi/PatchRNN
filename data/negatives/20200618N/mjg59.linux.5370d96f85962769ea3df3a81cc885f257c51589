commit 5370d96f85962769ea3df3a81cc885f257c51589
Author: Steve Chen <schen@mvista.com>
Date:   Sat Feb 21 08:05:04 2009 -0600

    ALSA: fix excessive background noise introduced by OSS emulation rate shrink
    
    Incorrect variable was used to get the next sample which caused S2
    to be stuck with the same value resulting in loud background noise.
    
    Signed-off-by: Steve Chen <schen at mvista.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

diff --git a/sound/core/oss/rate.c b/sound/core/oss/rate.c
index a466443c4a26..2fa9299a440d 100644
--- a/sound/core/oss/rate.c
+++ b/sound/core/oss/rate.c
@@ -157,7 +157,7 @@ static void resample_shrink(struct snd_pcm_plugin *plugin,
 		while (dst_frames1 > 0) {
 			S1 = S2;
 			if (src_frames1-- > 0) {
-				S1 = *src;
+				S2 = *src;
 				src += src_step;
 			}
 			if (pos & ~R_MASK) {

