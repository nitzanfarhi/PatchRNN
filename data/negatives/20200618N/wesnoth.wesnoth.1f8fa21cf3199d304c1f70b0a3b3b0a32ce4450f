commit 1f8fa21cf3199d304c1f70b0a3b3b0a32ce4450f
Author: Tomasz Åšniatowski <kailoran@gmail.com>
Date:   Sat Aug 8 12:13:46 2009 +0100

    fix default room creation policy on server

diff --git a/src/server/room_manager.cpp b/src/server/room_manager.cpp
index b1fbd17c30..46033204bb 100644
--- a/src/server/room_manager.cpp
+++ b/src/server/room_manager.cpp
@@ -82,7 +82,8 @@ void room_manager::load_config(const config& cfg)
 {
 	filename_ = cfg["room_save_file"];
 	compress_stored_rooms_ = utils::string_bool(cfg["compress_stored_rooms"], true);
-	new_room_policy_ = pp_from_string(cfg["new_room_policy"]);
+	PRIVILEGE_POLICY pp = pp_from_string(cfg["new_room_policy"]);
+	if (pp != PP_COUNT) new_room_policy_ = pp;
 }
 
 const std::string& room_manager::storage_filename() const

