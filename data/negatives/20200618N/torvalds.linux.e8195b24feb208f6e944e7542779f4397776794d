commit e8195b24feb208f6e944e7542779f4397776794d
Author: Matt Renzelmann <mjr@cs.wisc.edu>
Date:   Thu Apr 19 07:17:17 2012 +0000

    ks8851: Fix request_irq/free_irq mismatch
    
    The dev_id parameter passed to free_irq needs to match the one passed
    to the corresponding request_irq.
    
    Signed-off-by: Matt Renzelmann <mjr@cs.wisc.edu>
    Acked-by: Stephen Boyd <sboyd@codeaurora.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/ethernet/micrel/ks8851.c b/drivers/net/ethernet/micrel/ks8851.c
index ad10759e3459..f8dda009d3c0 100644
--- a/drivers/net/ethernet/micrel/ks8851.c
+++ b/drivers/net/ethernet/micrel/ks8851.c
@@ -1525,7 +1525,7 @@ static int __devinit ks8851_probe(struct spi_device *spi)
 
 
 err_netdev:
-	free_irq(ndev->irq, ndev);
+	free_irq(ndev->irq, ks);
 
 err_id:
 err_irq:

