commit 4ddb9deaf30bf3be664f3427f0b5393dc5a6c09c
Author: Jan Lindstr√∂m <jan.lindstrom@mariadb.com>
Date:   Wed Mar 30 14:59:25 2016 +0300

    MDEV-9678: Data Directory bug
    MDEV-9833: Log files are opened using O_DIRECT causing problems if block size != 512
    
    Fix typo.

diff --git a/storage/xtradb/os/os0file.cc b/storage/xtradb/os/os0file.cc
index b2b3e256211..2bb094e115d 100644
--- a/storage/xtradb/os/os0file.cc
+++ b/storage/xtradb/os/os0file.cc
@@ -1561,7 +1561,7 @@ os_file_set_nocache_if_needed(os_file_t file, const char* name,
 	}
 
 	if (srv_unix_file_flush_method == SRV_UNIX_ALL_O_DIRECT
-	    || (type == OS_LOG_FILE
+	    || (type == OS_DATA_FILE
 		&& (srv_unix_file_flush_method == SRV_UNIX_O_DIRECT
 		    || (srv_unix_file_flush_method == SRV_UNIX_O_DIRECT_NO_FSYNC)))) {
 		os_file_set_nocache(file, name, mode_str);

