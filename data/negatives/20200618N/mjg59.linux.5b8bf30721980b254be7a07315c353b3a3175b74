commit 5b8bf30721980b254be7a07315c353b3a3175b74
Author: gchen gchen <xili_gchen_5257@hotmail.com>
Date:   Thu Mar 12 16:26:05 2015 -0700

    mm/nommu.c: export symbol max_mapnr
    
    Several modules may need max_mapnr, so export, the related error with
    allmodconfig under c6x:
    
      MODPOST 3327 modules
      ERROR: "max_mapnr" [fs/pstore/ramoops.ko] undefined!
      ERROR: "max_mapnr" [drivers/media/v4l2-core/videobuf2-dma-contig.ko] undefined!
    
    Signed-off-by: Chen Gang <gang.chen.5i5j@gmail.com>
    Cc: Mark Salter <msalter@redhat.com>
    Cc: Aurelien Jacquiot <a-jacquiot@ti.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/mm/nommu.c b/mm/nommu.c
index 3e67e7538ecf..3fba2dc97c44 100644
--- a/mm/nommu.c
+++ b/mm/nommu.c
@@ -62,6 +62,7 @@ void *high_memory;
 EXPORT_SYMBOL(high_memory);
 struct page *mem_map;
 unsigned long max_mapnr;
+EXPORT_SYMBOL(max_mapnr);
 unsigned long highest_memmap_pfn;
 struct percpu_counter vm_committed_as;
 int sysctl_overcommit_memory = OVERCOMMIT_GUESS; /* heuristic overcommit */

