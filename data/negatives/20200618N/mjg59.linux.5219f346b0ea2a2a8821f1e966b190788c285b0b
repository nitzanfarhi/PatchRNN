commit 5219f346b0ea2a2a8821f1e966b190788c285b0b
Author: Miklos Szeredi <mszeredi@suse.cz>
Date:   Wed Nov 4 10:24:52 2009 +0100

    fuse: invalidate target of rename
    
    Invalidate the target's attributes, which may have changed (such as
    nlink, change time) so that they are refreshed on the next getattr().
    
    Signed-off-by: Miklos Szeredi <mszeredi@suse.cz>

diff --git a/fs/fuse/dir.c b/fs/fuse/dir.c
index 992f6c9410bb..8ada78aade58 100644
--- a/fs/fuse/dir.c
+++ b/fs/fuse/dir.c
@@ -712,8 +712,10 @@ static int fuse_rename(struct inode *olddir, struct dentry *oldent,
 			fuse_invalidate_attr(newdir);
 
 		/* newent will end up negative */
-		if (newent->d_inode)
+		if (newent->d_inode) {
+			fuse_invalidate_attr(newent->d_inode);
 			fuse_invalidate_entry_cache(newent);
+		}
 	} else if (err == -EINTR) {
 		/* If request was interrupted, DEITY only knows if the
 		   rename actually took place.  If the invalidation

