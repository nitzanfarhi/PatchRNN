commit 6d025ac2fcf9d736ee399efddae74a3362dfa7da
Author: Thomas Abraham <thomas.ab@samsung.com>
Date:   Tue Sep 8 14:30:48 2009 +0900

    ARM: S3C6410: update clk->parent when setting clock source
    
    This ensures the clock hierarchy data structures are updated when we
    change the clock source in the actual hardware registers.
    
    Signed-off-by: Thomas Abraham <thomas.ab@samsung.com>
    [ben-linux@fluff.org: Minor re-indentation of subject]
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>

diff --git a/arch/arm/plat-s3c64xx/s3c6400-clock.c b/arch/arm/plat-s3c64xx/s3c6400-clock.c
index c972d2f8c271..54eef9326c21 100644
--- a/arch/arm/plat-s3c64xx/s3c6400-clock.c
+++ b/arch/arm/plat-s3c64xx/s3c6400-clock.c
@@ -328,6 +328,8 @@ static int s3c64xx_setparent_clksrc(struct clk *clk, struct clk *parent)
 		clksrc |= src_nr << sclk->shift;
 
 		__raw_writel(clksrc, S3C_CLK_SRC);
+
+		clk->parent = parent;
 		return 0;
 	}
 

