commit 4720bb19c15752e5e5c2fc0dbba5b3b748afaf12
Author: Karel Zak <kzak@redhat.com>
Date:   Tue Apr 6 17:57:49 2010 +0200

    libblkid: fix blkid_partlist_devno_to_partition() for extended partitions
    
    Signed-off-by: Karel Zak <kzak@redhat.com>

diff --git a/shlibs/blkid/src/partitions/partitions.c b/shlibs/blkid/src/partitions/partitions.c
index 0f342fc87..a5c56c889 100644
--- a/shlibs/blkid/src/partitions/partitions.c
+++ b/shlibs/blkid/src/partitions/partitions.c
@@ -839,6 +839,12 @@ blkid_partition blkid_partlist_devno_to_partition(blkid_partlist ls, dev_t devno
 		if (blkid_partition_get_start(par) == start &&
 		    blkid_partition_get_size(par) == size)
 			return par;
+
+		/* exception for extended dos partitions */
+		if (blkid_partition_get_start(par) == start &&
+		    blkid_partition_is_extended(par) && size <= 1024)
+			return par;
+
 	}
 	return NULL;
 }

