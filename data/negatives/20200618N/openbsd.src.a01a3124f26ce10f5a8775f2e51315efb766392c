commit a01a3124f26ce10f5a8775f2e51315efb766392c
Author: vincent <vincent@openbsd.org>
Date:   Thu Feb 21 17:36:12 2002 +0000

     "rephrase" the loop's condition, gets rid of an ugly operation.

diff --git a/usr.bin/mg/undo.c b/usr.bin/mg/undo.c
index 2dbe5a5dbc3..8617b698d3d 100644
--- a/usr.bin/mg/undo.c
+++ b/usr.bin/mg/undo.c
@@ -1,4 +1,4 @@
-/* $OpenBSD: undo.c,v 1.5 2002/02/21 04:21:05 vincent Exp $ */
+/* $OpenBSD: undo.c,v 1.6 2002/02/21 17:36:12 vincent Exp $ */
 /*
  * Copyright (c) 2002 Vincent Labrecque <vincent@openbsd.org>
  *							 All rights reserved.
@@ -254,6 +254,7 @@ undo_add_insert(LINE *lp, int offset, int size)
 			return TRUE;
 		}
 	}
+	
 	/*
 	 * We couldn't reuse the last undo record, so prepare a new one
 	 */
@@ -407,7 +408,7 @@ undo(int f, int n)
 	 */
 	undoaction++;
 
-	while (n-- > 0) {
+	while (n > 0) {
 		rec = LIST_FIRST(&undo_list);
 		if (rec == NULL) {
 			ewprintf("Nothing to undo!");
@@ -418,7 +419,6 @@ undo(int f, int n)
 		
 		LIST_REMOVE(rec, next);
 		if (rec->type == BOUNDARY) {
-			n++;	/* XXX */
 			continue;
 		}
 
@@ -448,6 +448,8 @@ undo(int f, int n)
 		}
 		
 		free_undo_record(rec);
+
+		n--;
 	}
 	undoaction--;
 	

