commit 2f95ab40dd9e3bf9b403afaae74dd98db2254203
Author: Robin Geuze <robing@transip.nl>
Date:   Tue Jun 6 20:27:19 2017 +0200

    Change dnsdist stats functions to always return lowercase names

diff --git a/pdns/dnsdist-lua.cc b/pdns/dnsdist-lua.cc
index a56181b87..d154322fa 100644
--- a/pdns/dnsdist-lua.cc
+++ b/pdns/dnsdist-lua.cc
@@ -158,7 +158,7 @@ std::unordered_map<int, vector<boost::variant<string,double>>> getGenResponses(u
   vector<pair<int, DNSName>> rcounts;
   rcounts.reserve(counts.size());
   for(const auto& c : counts) 
-    rcounts.push_back(make_pair(c.second, c.first));
+    rcounts.push_back(make_pair(c.second, c.first.makeLowerCase()));
   
   sort(rcounts.begin(), rcounts.end(), [](const decltype(rcounts)::value_type& a, 
                                           const decltype(rcounts)::value_type& b) {
@@ -1351,7 +1351,7 @@ vector<std::function<void(void)>> setupLua(bool client, const std::string& confi
       vector<pair<int, DNSName>> rcounts;
       rcounts.reserve(counts.size());
       for(const auto& c : counts) 
-	rcounts.push_back(make_pair(c.second, c.first));
+	rcounts.push_back(make_pair(c.second, c.first.makeLowerCase()));
 
       sort(rcounts.begin(), rcounts.end(), [](const decltype(rcounts)::value_type& a, 
 					      const decltype(rcounts)::value_type& b) {

