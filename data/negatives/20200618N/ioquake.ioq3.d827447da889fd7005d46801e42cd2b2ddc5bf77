commit d827447da889fd7005d46801e42cd2b2ddc5bf77
Author: Thilo Schulz <arny@ats.s.bawue.de>
Date:   Wed Jul 13 18:37:26 2011 +0000

    - Forgot to mention: last rev (2077) bumped default protocol version to 70
    - Fix queued packet rate control

diff --git a/code/server/sv_client.c b/code/server/sv_client.c
index 90baabaa..5debe43a 100644
--- a/code/server/sv_client.c
+++ b/code/server/sv_client.c
@@ -1104,7 +1104,10 @@ int SV_SendQueuedMessages(void)
 		
 		if(cl->state)
 		{
-			nextFragT = SV_Netchan_TransmitNextFragment(cl);
+			nextFragT = SV_RateMsec(cl);
+
+			if(!nextFragT)
+				nextFragT = SV_Netchan_TransmitNextFragment(cl);
 
 			if(nextFragT >= 0 && (retval == -1 || retval > nextFragT))
 				retval = nextFragT;

