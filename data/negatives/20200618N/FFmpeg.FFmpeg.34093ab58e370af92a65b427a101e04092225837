commit 34093ab58e370af92a65b427a101e04092225837
Author: Kostya Shishkov <kostya.shishkov@gmail.com>
Date:   Fri Jan 18 07:04:58 2008 +0000

    Save quantizer values as well
    
    Originally committed as revision 11555 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/rv34.c b/libavcodec/rv34.c
index dbbe445c96..5b58498968 100644
--- a/libavcodec/rv34.c
+++ b/libavcodec/rv34.c
@@ -1014,6 +1014,7 @@ static int rv34_decode_macroblock(RV34DecContext *r, int8_t *intra_types)
     cbp = cbp2 = rv34_decode_mb_header(r, intra_types);
     r->cbp_luma  [s->mb_x + s->mb_y * s->mb_stride] = cbp;
     r->cbp_chroma[s->mb_x + s->mb_y * s->mb_stride] = cbp >> 16;
+    s->current_picture.qscale_table[s->mb_x + s->mb_y * s->mb_stride] = s->qscale;
 
     if(cbp == -1)
         return -1;

