commit 8151d5e60232d31f35e04f4e49a5b0d98b00a737
Author: Benoit Cousson <bcousson@baylibre.com>
Date:   Tue Jul 8 23:19:37 2014 +0200

    ASoC: compress: Prevent multicodec for compressed stream
    
    Multiple codecs does not make sense in the case of compressed
    stream.
    
    Exit with error if it happens.
    
    Signed-off-by: Benoit Cousson <bcousson@baylibre.com>
    Tested-by: Lars-Peter Clausen <lars@metafoo.de>
    Reviewed-by: Lars-Peter Clausen <lars@metafoo.de>
    Acked-by: Vinod Koul <vinod.koul@intel.com>
    Signed-off-by: Mark Brown <broonie@linaro.org>

diff --git a/sound/soc/soc-compress.c b/sound/soc/soc-compress.c
index f96fb96b2678..27c06acce205 100644
--- a/sound/soc/soc-compress.c
+++ b/sound/soc/soc-compress.c
@@ -629,6 +629,11 @@ int soc_new_compress(struct snd_soc_pcm_runtime *rtd, int num)
 	char new_name[64];
 	int ret = 0, direction = 0;
 
+	if (rtd->num_codecs > 1) {
+		dev_err(rtd->card->dev, "Multicodec not supported for compressed stream\n");
+		return -EINVAL;
+	}
+
 	/* check client and interface hw capabilities */
 	snprintf(new_name, sizeof(new_name), "%s %s-%d",
 			rtd->dai_link->stream_name, codec_dai->name, num);

