commit a3ec1cadd68fad2affdf39a676eda3834a6216e1
Author: Paul Wouters <paul@xelerance.com>
Date:   Sat Jun 27 00:39:01 2009 -0400

    Changed the default time out for ikeping from 10 to 3 seconds.
    Changed the return status of ikeping to be (send - received) when
    ikeping is sending, so that its exit code can be used by livetest.

diff --git a/programs/ikeping/ikeping.c b/programs/ikeping/ikeping.c
index cd5a83105..1b83e5b1b 100644
--- a/programs/ikeping/ikeping.c
+++ b/programs/ikeping/ikeping.c
@@ -58,7 +58,7 @@ help(void)
 	    " [--version]    just dump version number and exit\n"
 	    " [--nat-t]      enabled NONESP encapsulation on port\n"
 	    " [--exchangenum num]    use num instead of 244 for the exchange type.\n"
-	    " [--wait seconds]    time to wait for replies, defaults to 10 seconds.\n"
+	    " [--wait seconds]    time to wait for replies, defaults to 3 seconds.\n"
 	    " host/port ...\n\n"
 	"Openswan %s\n",
 	ipsec_version_code());
@@ -314,7 +314,7 @@ main(int argc, char **argv)
   pfamily=PF_INET;
   lport=500;
   dport=500;
-  waitTime=10*1000;
+  waitTime=3*1000;
   verbose=0;
   natt=0;
   listen_only=0;
@@ -328,7 +328,7 @@ main(int argc, char **argv)
 	  return 0;	/* GNU coding standards say to stop here */
 	  
       case 'V':               /* --version */
-	  fprintf(stderr, "FreeS/WAN %s\n", ipsec_version_code());
+	  fprintf(stderr, "Openswan %s\n", ipsec_version_code());
 	  return 0;	/* GNU coding standards say to stop here */
 	  
       case 'v':	/* --label <string> */
@@ -515,8 +515,7 @@ main(int argc, char **argv)
 	  numSenders, 
 	  numReceived,
 	  numSenders > 0 ? 100-numReceived*100/numSenders : 0);
-
-   exit(0);
+   exit(numSenders - numReceived);
 }
 
 /*

