commit 62fba1d6b2f7338806dab289d57b09c5cbcf0a38
Author: tobias <tobias@openbsd.org>
Date:   Thu Jan 31 18:09:40 2008 +0000

    During checkout -p don't print files which are in Attic if they are not
    requested with -r.
    
    OK joris@

diff --git a/usr.bin/cvs/update.c b/usr.bin/cvs/update.c
index 4a937f16901..4b105b3022d 100644
--- a/usr.bin/cvs/update.c
+++ b/usr.bin/cvs/update.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: update.c,v 1.116 2008/01/31 10:15:05 tobias Exp $	*/
+/*	$OpenBSD: update.c,v 1.117 2008/01/31 18:09:40 tobias Exp $	*/
 /*
  * Copyright (c) 2006 Joris Vink <joris@openbsd.org>
  *
@@ -323,7 +323,8 @@ cvs_update_local(struct cvs_file *cf)
 			cvs_server_clear_sticky(cf->file_wd);
 	}
 
-	if (print_stdout && cf->file_status != FILE_UNKNOWN) {
+	if (print_stdout && cf->file_status != FILE_UNKNOWN &&
+	    !cf->file_rcs->rf_dead) {
 		rcsnum_tostr(cf->file_rcsrev, rbuf, sizeof(rbuf));
 		if (verbosity > 1) {
 			cvs_log(LP_RCS, RCS_DIFF_DIV);

