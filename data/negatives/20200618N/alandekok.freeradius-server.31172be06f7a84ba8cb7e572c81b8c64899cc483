commit 31172be06f7a84ba8cb7e572c81b8c64899cc483
Author: aland <aland>
Date:   Wed May 28 14:10:21 2003 +0000

            Don't die if accthost/authost aren't defined.
    
            Patch from Liyan Tan

diff --git a/src/main/mainconfig.c b/src/main/mainconfig.c
index 51ebfb02d..5f994a230 100644
--- a/src/main/mainconfig.c
+++ b/src/main/mainconfig.c
@@ -404,7 +404,7 @@ static int generate_realms(const char *filename)
 					strlen(authhost), sizeof(c->server) - 1);
 			return -1;
 		}
-                if (strlen(accthost) >= sizeof(c->acct_server)) {
+                if (accthost && strlen(accthost) >= sizeof(c->acct_server)) {
                         radlog(L_ERR, "%s[%d]: Server name of length %d is greater than allowed: %d",
                                         filename, cf_section_lineno(cs),
                                         strlen(accthost), sizeof(c->acct_server) - 1);
@@ -418,8 +418,8 @@ static int generate_realms(const char *filename)
 		}
 		
 		strcpy(c->realm, name2);
-                strcpy(c->server, authhost);
-		strcpy(c->acct_server, accthost);	
+                if (authhost) strcpy(c->server, authhost);
+		if (accthost) strcpy(c->acct_server, accthost);	
 
 		/*
 		 *	If one or the other of authentication/accounting

