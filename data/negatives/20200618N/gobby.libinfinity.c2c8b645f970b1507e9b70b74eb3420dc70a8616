commit c2c8b645f970b1507e9b70b74eb3420dc70a8616
Author: Armin Burgmeier <armin@arbur.net>
Date:   Tue Jan 21 21:04:32 2014 +0100

    inf_gtk_io_io_watch_free(): Do not use the watch after it is destroyed

diff --git a/libinfgtk/inf-gtk-io.c b/libinfgtk/inf-gtk-io.c
index c274fb8..ba545c3 100644
--- a/libinfgtk/inf-gtk-io.c
+++ b/libinfgtk/inf-gtk-io.c
@@ -529,12 +529,15 @@ inf_gtk_io_io_remove_watch(InfIo* io,
                            InfIoWatch* watch)
 {
   InfGtkIoPrivate* priv;
+  guint watch_id;
 
   priv = INF_GTK_IO_PRIVATE(io);
   g_mutex_lock(priv->mutex);
 
   g_assert(g_slist_find(priv->watches, watch) != NULL);
+
   priv->watches = g_slist_remove(priv->watches, watch);
+  watch_id = watch->id;
 
   if(watch->executing)
   {
@@ -555,7 +558,7 @@ inf_gtk_io_io_remove_watch(InfIo* io,
   /* Note that we can do this safely without having locked the mutex because
    * if the callback function is currently being invoked then its user_data
    * will not be destroyed immediately. */
-  g_source_remove(watch->id);
+  g_source_remove(watch_id);
 }
 
 static InfIoTimeout*

