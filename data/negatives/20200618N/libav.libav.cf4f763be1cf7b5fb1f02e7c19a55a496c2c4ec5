commit cf4f763be1cf7b5fb1f02e7c19a55a496c2c4ec5
Author: David Conrad <lessen42@gmail.com>
Date:   Wed Sep 5 00:22:39 2007 +0000

    Simplify
    
    Originally committed as revision 10295 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/matroskaenc.c b/libavformat/matroskaenc.c
index 705d1f936..d28b7a820 100644
--- a/libavformat/matroskaenc.c
+++ b/libavformat/matroskaenc.c
@@ -43,7 +43,7 @@ static void put_ebml_id(ByteIOContext *pb, unsigned int id)
 static void put_ebml_size(ByteIOContext *pb, uint64_t size, int minbytes)
 {
     int bytes = minbytes;
-    while (size >> (bytes*8 + 7-bytes) > 0) bytes++;
+    while (size >> (bytes*7 + 7)) bytes++;
 
     // sizes larger than this are currently undefined in EBML
     // XXX: error condition?

