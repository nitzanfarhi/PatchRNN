commit 6b408160028e610cf4d9fd7d46ec5f2ec2f779de
Author: Fangrui Song <i@maskray.me>
Date:   Fri Sep 1 03:49:01 2017 -0700

    Fix immbase, ahi 2 => ahi b => binary, ahi 1 => ahi s => string (#8396)

diff --git a/libr/core/cmd_anal.c b/libr/core/cmd_anal.c
index 20063bcf6..7582cd521 100644
--- a/libr/core/cmd_anal.c
+++ b/libr/core/cmd_anal.c
@@ -456,13 +456,13 @@ static const char *help_msg_ah[] = {
 static const char *help_msg_ahi[] = {
 	"Usage", "ahi [sbodh] [@ offset]", " Define numeric base",
 	"ahi", " [base]", "set numeric base (1, 2, 8, 10, 16)",
-	"ahi", " b", "set base to binary (1)",
+	"ahi", " b", "set base to binary (2)",
 	"ahi", " d", "set base to decimal (10)",
 	"ahi", " h", "set base to hexadecimal (16)",
 	"ahi", " o", "set base to octal (8)",
 	"ahi", " i", "set base to IP address (32)",
 	"ahi", " S", "set base to syscall (80)",
-	"ahi", " s", "set base to string (2)",
+	"ahi", " s", "set base to string (1)",
 	NULL
 };
 
@@ -4898,8 +4898,8 @@ static void cmd_anal_hint(RCore *core, const char *input) {
 		} else if (input[1] == ' ') {
 		// You can either specify immbase with letters, or numbers
 			const int base =
-				(input[2] == 'b') ? 1 :
-				(input[2] == 's') ? 2 :
+				(input[2] == 's') ? 1 :
+				(input[2] == 'b') ? 2 :
 				(input[2] == 'o') ? 8 :
 				(input[2] == 'd') ? 10 :
 				(input[2] == 'h') ? 16 :
diff --git a/libr/parse/parse.c b/libr/parse/parse.c
index ccd712215..4de40c08a 100644
--- a/libr/parse/parse.c
+++ b/libr/parse/parse.c
@@ -346,11 +346,7 @@ static int filter(RParse *p, RFlag *f, char *data, char *str, int len, bool big_
 			case 0:
 				// do nothing
 				break;
-			case 1:
-				r_num_to_bits (num, off);
-				strcat (num, "b");
-				break;
-			case 2: // hack for ascii
+			case 1: // hack for ascii
 				tmp_count = 0;
 				for (tmp = data; tmp < ptr; tmp++) {
 					if (*tmp == 0x1b) {
@@ -404,6 +400,10 @@ static int filter(RParse *p, RFlag *f, char *data, char *str, int len, bool big_
 				*pnum++ = '\'';
 				*pnum = '\0';
 				break;
+			case 2:
+				r_num_to_bits (num, off);
+				strcat (num, "b");
+				break;
 			case 8:
 				snprintf (num, sizeof (num), "0%o", (int)off);
 				break;

