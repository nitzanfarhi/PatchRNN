commit 02af2269c03ed4a17b81247eff11b0d5bb1e9085
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Thu May 5 20:05:41 2005 +0000

    check for error
    
    Originally committed as revision 4183 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/mpegaudiodec.c b/libavcodec/mpegaudiodec.c
index 196d77d2a6..106c9fe689 100644
--- a/libavcodec/mpegaudiodec.c
+++ b/libavcodec/mpegaudiodec.c
@@ -2628,7 +2628,10 @@ static int decode_frame(AVCodecContext * avctx,
             }
 	    s->inbuf_ptr = s->inbuf;
 	    s->frame_size = 0;
-	    *data_size = out_size;
+            if(out_size>=0)
+	        *data_size = out_size;
+            else
+                av_log(avctx, AV_LOG_DEBUG, "Error while decoding mpeg audio frame\n"); //FIXME return -1 / but also return the number of bytes consumed
 	    break;
 	}
     }

