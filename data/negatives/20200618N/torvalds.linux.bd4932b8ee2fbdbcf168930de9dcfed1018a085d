commit bd4932b8ee2fbdbcf168930de9dcfed1018a085d
Author: Luciano Coelho <coelho@ti.com>
Date:   Tue Aug 23 18:34:45 2011 +0300

    wl12xx: use SCAN_SSID_TYPE_PUBLIC when using the wildcard in sched_scan
    
    When we are scanning for the wildcard SSID in a scheduled scan, we
    should use SCAN_SSID_TYPE_PUBLIC so that we don't filter out the scan
    results.
    
    Signed-off-by: Luciano Coelho <coelho@ti.com>

diff --git a/drivers/net/wireless/wl12xx/scan.c b/drivers/net/wireless/wl12xx/scan.c
index af9d53c8e19c..af4ad2353f59 100644
--- a/drivers/net/wireless/wl12xx/scan.c
+++ b/drivers/net/wireless/wl12xx/scan.c
@@ -490,9 +490,12 @@ wl12xx_scan_sched_scan_ssid_list(struct wl1271 *wl,
 		return -ENOMEM;
 
 	while ((cmd->n_ssids < req->n_ssids) && ssid) {
-		if (ssid->ssid_len == 0)
+		if (ssid->ssid_len == 0) {
 			wildcard = 1;
-		cmd->ssids[cmd->n_ssids].type = SCAN_SSID_TYPE_HIDDEN;
+			cmd->ssids[cmd->n_ssids].type = SCAN_SSID_TYPE_PUBLIC;
+		} else {
+			cmd->ssids[cmd->n_ssids].type = SCAN_SSID_TYPE_HIDDEN;
+		}
 		cmd->ssids[cmd->n_ssids].len = ssid->ssid_len;
 		memcpy(cmd->ssids[cmd->n_ssids].ssid, ssid->ssid,
 		       ssid->ssid_len);

