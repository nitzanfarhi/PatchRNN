commit e5260b9123f7f8cebab6bbe23a55997d4d7f72f0
Author: Trond Norbye <Trond.Norbye@sun.com>
Date:   Wed Nov 26 02:01:57 2008 +0100

    Add the size of the cas (if present) to the ITEM_ntotal

diff --git a/memcached.h b/memcached.h
index 20433ef..02a0e2a 100644
--- a/memcached.h
+++ b/memcached.h
@@ -150,7 +150,9 @@ typedef struct _stritem {
          + (item)->nsuffix \
          + (((item)->it_flags & ITEM_CAS) ? sizeof(uint64_t) : 0))
 
-#define ITEM_ntotal(item) (sizeof(struct _stritem) + (item)->nkey + 1 + (item)->nsuffix + (item)->nbytes)
+#define ITEM_ntotal(item) (sizeof(struct _stritem) + (item)->nkey + 1 \
+         + (item)->nsuffix + (item)->nbytes \
+         + (((item)->it_flags & ITEM_CAS) ? sizeof(uint64_t) : 0))
 
 /**
  * NOTE: If you modify this table you _MUST_ update the function state_text

