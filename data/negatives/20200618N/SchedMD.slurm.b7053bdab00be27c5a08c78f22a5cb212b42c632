commit b7053bdab00be27c5a08c78f22a5cb212b42c632
Author: Tim Wickberg <tim@schedmd.com>
Date:   Fri Dec 9 17:05:03 2016 -0500

    Update srun --help to print --cpu_bind/--hint if task/cgroup is enabled.
    
    Would only print for affinity before. Change parse method
    to strstr() to no longer rely on specific position of plugin
    name in the config option.
    
    Bug 3294.

diff --git a/src/srun/libsrun/opt.c b/src/srun/libsrun/opt.c
index 8d3b715411..0b99e9f896 100644
--- a/src/srun/libsrun/opt.c
+++ b/src/srun/libsrun/opt.c
@@ -2935,12 +2935,17 @@ static void _help(void)
 "      --ntasks-per-socket=n   number of tasks to invoke on each socket\n");
 	conf = slurm_conf_lock();
 	if (conf->task_plugin != NULL
-	    && xstrcasecmp(conf->task_plugin, "task/affinity") == 0) {
+	    && ((strstr(conf->task_plugin, "affinity"))
+		|| (strstr(conf->task_plugin, "cgroup")))) {
 		printf(
 "      --cpu_bind=             Bind tasks to CPUs\n"
 "                              (see \"--cpu_bind=help\" for options)\n"
 "      --hint=                 Bind tasks according to application hints\n"
-"                              (see \"--hint=help\" for options)\n"
+"                              (see \"--hint=help\" for options)\n");
+	}
+	if (conf->task_plugin != NULL
+	    && (strstr(conf->task_plugin, "affinity"))) {
+		printf(
 "      --mem_bind=             Bind memory to locality domains (ldom)\n"
 "                              (see \"--mem_bind=help\" for options)\n");
 	}

