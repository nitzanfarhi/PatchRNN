commit ad77401d60d12b791edf4ea9dd15e1c810ce549c
Author: Beno√Æt LeBlanc <benoit.leblanc@awakecoding.com>
Date:   Thu Jul 25 10:22:57 2013 -0400

    FreeRDP: fixed access violation crash that occurred on Windows, because the malloc and the free were performed in different libraries.

diff --git a/include/freerdp/locale/keyboard.h b/include/freerdp/locale/keyboard.h
index 32a7ed5f..147067d8 100644
--- a/include/freerdp/locale/keyboard.h
+++ b/include/freerdp/locale/keyboard.h
@@ -205,6 +205,7 @@ extern "C" {
 
 FREERDP_API DWORD freerdp_keyboard_init(DWORD keyboardLayoutId);
 FREERDP_API RDP_KEYBOARD_LAYOUT* freerdp_keyboard_get_layouts(DWORD types);
+FREERDP_API void freerdp_keyboard_layouts_free(RDP_KEYBOARD_LAYOUT* layouts);
 FREERDP_API const char* freerdp_keyboard_get_layout_name_from_id(DWORD keyboardLayoutId);
 FREERDP_API DWORD freerdp_keyboard_get_layout_id_from_name(const char* name);
 FREERDP_API DWORD freerdp_keyboard_get_rdp_scancode_from_x11_keycode(DWORD keycode);
diff --git a/libfreerdp/locale/keyboard_layout.c b/libfreerdp/locale/keyboard_layout.c
index 78e98cf5..3869358c 100644
--- a/libfreerdp/locale/keyboard_layout.c
+++ b/libfreerdp/locale/keyboard_layout.c
@@ -214,6 +214,11 @@ static const RDP_KEYBOARD_IME RDP_KEYBOARD_IME_TABLE[] =
 	{ KBD_CHINESE_TRADITIONAL_ALPHANUMERIC,			"romanime.ime", "Chinese (Traditional) - Alphanumeric" }
 };
 
+void freerdp_keyboard_layouts_free(RDP_KEYBOARD_LAYOUT* layouts)
+{
+    free(layouts);
+}
+
 RDP_KEYBOARD_LAYOUT* freerdp_keyboard_get_layouts(DWORD types)
 {
 	int num, length, i;

