commit c8f3f5bf63f4708914576fd7b2758c15d086ee8e
Author: Greg Banks <gnb@fastmail.fm>
Date:   Mon Nov 12 14:46:26 2012 +1100

    Rename getsearchcriteria()
    
    for correct Greek grammar.

diff --git a/imap/imapd.c b/imap/imapd.c
index be7c11e61..f1189178d 100644
--- a/imap/imapd.c
+++ b/imap/imapd.c
@@ -455,7 +455,7 @@ static int getlistretopts(char *tag, struct listargs *args);
 static int getsearchreturnopts(struct searchargs *searchargs);
 static struct searchargs *new_searchargs(const char *tag, int state);
 static int getsearchprogram(struct searchargs *searchargs, struct searchargs *base);
-static int getsearchcriteria(struct searchargs *searchargs, struct searchargs *base);
+static int get_search_criterion(struct searchargs *searchargs, struct searchargs *base);
 static int get_snippetargs(struct snippetargs **sap);
 static void free_snippetargs(struct snippetargs **sap);
 static int getsearchdate(time_t *start, time_t *end);
@@ -10152,7 +10152,7 @@ static int getsearchprogram(struct searchargs *searchargs, struct searchargs *ba
     if (base == NULL) base = searchargs;
 
     do {
-	c = getsearchcriteria(searchargs, base);
+	c = get_search_criterion(searchargs, base);
     } while (c == ' ');
 
     base->namespace = &imapd_namespace;
@@ -10163,9 +10163,9 @@ static int getsearchprogram(struct searchargs *searchargs, struct searchargs *ba
 }
 
 /*
- * Parse a search criteria
+ * Parse a single search criterion
  */
-static int getsearchcriteria(struct searchargs *searchargs, struct searchargs *base)
+static int get_search_criterion(struct searchargs *searchargs, struct searchargs *base)
 {
     static struct buf criteria, arg;
     struct searchargs *sub1, *sub2;
@@ -10429,7 +10429,7 @@ static int getsearchcriteria(struct searchargs *searchargs, struct searchargs *b
 	if (!strcmp(criteria.s, "not")) {
 	    if (c != ' ') goto missingarg;		
 	    sub1 = new_searchargs(NULL, 0);
-	    c = getsearchcriteria(sub1, base);
+	    c = get_search_criterion(sub1, base);
 	    if (c == EOF) {
 		freesearchargs(sub1);
 		return EOF;
@@ -10447,14 +10447,14 @@ static int getsearchcriteria(struct searchargs *searchargs, struct searchargs *b
 	if (!strcmp(criteria.s, "or")) {
 	    if (c != ' ') goto missingarg;		
 	    sub1 = new_searchargs(NULL, 0);
-	    c = getsearchcriteria(sub1, base);
+	    c = get_search_criterion(sub1, base);
 	    if (c == EOF) {
 		freesearchargs(sub1);
 		return EOF;
 	    }
 	    if (c != ' ') goto missingarg;		
 	    sub2 = new_searchargs(NULL, 0);
-	    c = getsearchcriteria(sub2, base);
+	    c = get_search_criterion(sub2, base);
 	    if (c == EOF) {
 		freesearchargs(sub1);
 		freesearchargs(sub2);

