commit c70a1529b29cb1362ade5dd113313fb945e32c3e
Author: Andrew Bresticker <abrestic@chromium.org>
Date:   Fri Apr 7 17:56:49 2017 +0300

    usb: xhci: plat: Enable async suspend/resume
    
    USB host controllers can take a significant amount of time to suspend
    and resume, adding several hundred miliseconds to the kernel resume
    time. Since the XHCI controller has no outside dependencies (other than
    clocks, which are suspended late/resumed early), allow it to suspend and
    resume asynchronously.
    
    Signed-off-by: Andrew Bresticker <abrestic@chromium.org>
    Tested-by: Andrew Bresticker <abrestic@chromium.org>
    Tested-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Baolin Wang <baolin.wang@linaro.org>
    Signed-off-by: Mathias Nyman <mathias.nyman@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/usb/host/xhci-plat.c b/drivers/usb/host/xhci-plat.c
index f31b9dcdaf5b..62e71b8a8b55 100644
--- a/drivers/usb/host/xhci-plat.c
+++ b/drivers/usb/host/xhci-plat.c
@@ -277,6 +277,8 @@ static int xhci_plat_probe(struct platform_device *pdev)
 	if (ret)
 		goto dealloc_usb2_hcd;
 
+	device_enable_async_suspend(&pdev->dev);
+
 	return 0;
 
 

