commit 0864dd309a6a049c46a2199724fcb046c9e686eb
Author: Cerez <cerezk.oz@gmail.com>
Date:   Sat Mar 7 22:20:36 2015 +1100

    Add extra Icarus scriptable character facial expressions

diff --git a/code/game/Q3_Interface.cpp b/code/game/Q3_Interface.cpp
index fba9499e..4eb6ca4f 100644
--- a/code/game/Q3_Interface.cpp
+++ b/code/game/Q3_Interface.cpp
@@ -326,6 +326,10 @@ stringID_table_t setTable[] =
 	ENUM2STRING(SET_FACEBLINK),
 	ENUM2STRING(SET_FACEBLINKFROWN),
 	ENUM2STRING(SET_FACEFROWN),
+	ENUM2STRING(SET_FACESMILE),
+	ENUM2STRING(SET_FACEGLAD),
+	ENUM2STRING(SET_FACEHAPPY),
+	ENUM2STRING(SET_FACESHOCKED),
 	ENUM2STRING(SET_FACENORMAL),
 	ENUM2STRING(SET_FACEEYESCLOSED),
 	ENUM2STRING(SET_FACEEYESOPENED),
@@ -6031,6 +6035,28 @@ static void Q3_Face( int entID,int expression, float holdtime)
 		ent->client->facial_anim = FACE_FROWN;
 		break;
 
+	//Extra facial expressions:
+	case SET_FACESMILE:
+		ent->client->facial_blink = -(level.time + holdtime);
+		ent->client->facial_timer = -(level.time + holdtime);
+		ent->client->facial_anim = FACE_SMILE;
+		break;
+	case SET_FACEGLAD:
+		ent->client->facial_blink = 1;
+		ent->client->facial_timer = -(level.time + holdtime);
+		ent->client->facial_anim = FACE_TALK1;
+		break;
+	case SET_FACEHAPPY:
+		ent->client->facial_blink = -(level.time + holdtime);
+		ent->client->facial_timer = -(level.time + holdtime);
+		ent->client->facial_anim = FACE_TALK1;
+		break;
+	case SET_FACESHOCKED:
+		ent->client->facial_blink = -1;
+		ent->client->facial_timer = -(level.time + holdtime);
+		ent->client->facial_anim = FACE_TALK3;
+		break;
+
 	case SET_FACENORMAL:
 		ent->client->facial_timer = level.time + Q_flrand(6000.0, 10000.0);
 		ent->client->facial_blink = level.time + Q_flrand(3000.0, 5000.0);
@@ -8913,6 +8939,10 @@ void	CQuake3GameInterface::Set( int taskID, int entID, const char *type_name, co
 	case SET_FACEBLINK:
 	case SET_FACEBLINKFROWN:
 	case SET_FACEFROWN:
+	case SET_FACESMILE:
+	case SET_FACEGLAD:
+	case SET_FACEHAPPY:
+	case SET_FACESHOCKED:
 	case SET_FACENORMAL:
 		float_data = atof((char *) data);
 		Q3_Face(entID, toSet, float_data);
@@ -9921,6 +9951,10 @@ int		CQuake3GameInterface::GetFloat( int entID, const char *name, float *value )
 	case SET_FACEBLINK:		//## %f="0.0" # Set face to Blink expression for number of seconds
 	case SET_FACEBLINKFROWN:	//## %f="0.0" # Set face to Blinkfrown expression for number of seconds
 	case SET_FACEFROWN:		//## %f="0.0" # Set face to Frown expression for number of seconds
+	case SET_FACESMILE:		//## %f="0.0" # Set face to Smile expression for number of seconds
+	case SET_FACEGLAD:		//## %f="0.0" # Set face to Glad expression for number of seconds
+	case SET_FACEHAPPY:		//## %f="0.0" # Set face to Happy expression for number of seconds
+	case SET_FACESHOCKED:		//## %f="0.0" # Set face to Shocked expression for number of seconds
 	case SET_FACENORMAL:		//## %f="0.0" # Set face to Normal expression for number of seconds
 		DebugPrint( WL_WARNING, "GetFloat: SET_FACE___ not implemented\n" );
 		return false;
diff --git a/code/game/Q3_Interface.h b/code/game/Q3_Interface.h
index 00cb2651..80dec20c 100644
--- a/code/game/Q3_Interface.h
+++ b/code/game/Q3_Interface.h
@@ -132,6 +132,10 @@ typedef enum //# setType_e
 	SET_FACEBLINK,		//## %f="0.0" # Set face to Blink expression for number of seconds
 	SET_FACEBLINKFROWN,	//## %f="0.0" # Set face to Blinkfrown expression for number of seconds
 	SET_FACEFROWN,		//## %f="0.0" # Set face to Frown expression for number of seconds
+	SET_FACESMILE,		//## %f="0.0" # Set face to Smile expression for number of seconds
+	SET_FACEGLAD,		//## %f="0.0" # Set face to Glad expression for number of seconds
+	SET_FACEHAPPY,		//## %f="0.0" # Set face to Happy expression for number of seconds
+	SET_FACESHOCKED,		//## %f="0.0" # Set face to Shocked expression for number of seconds
 	SET_FACENORMAL,		//## %f="0.0" # Set face to Normal expression for number of seconds
 	SET_FACEEYESCLOSED,	//## %f="0.0" # Set face to Eyes closed
 	SET_FACEEYESOPENED,	//## %f="0.0" # Set face to Eyes open
diff --git a/codemp/game/g_ICARUScb.c b/codemp/game/g_ICARUScb.c
index e0825853..ead2715c 100644
--- a/codemp/game/g_ICARUScb.c
+++ b/codemp/game/g_ICARUScb.c
@@ -156,6 +156,10 @@ stringID_table_t setTable[] =
 	ENUM2STRING(SET_FACEBLINK),
 	ENUM2STRING(SET_FACEBLINKFROWN),
 	ENUM2STRING(SET_FACEFROWN),
+	ENUM2STRING(SET_FACESMILE),
+	ENUM2STRING(SET_FACEGLAD),
+	ENUM2STRING(SET_FACEHAPPY),
+	ENUM2STRING(SET_FACESHOCKED),
 	ENUM2STRING(SET_FACENORMAL),
 	ENUM2STRING(SET_FACEEYESCLOSED),
 	ENUM2STRING(SET_FACEEYESOPENED),
@@ -1305,6 +1309,10 @@ int Q3_GetFloat( int entID, int type, const char *name, float *value )
 	case SET_FACEBLINK:		//## %f="0.0" # Set face to Blink expression for number of seconds
 	case SET_FACEBLINKFROWN:	//## %f="0.0" # Set face to Blinkfrown expression for number of seconds
 	case SET_FACEFROWN:		//## %f="0.0" # Set face to Frown expression for number of seconds
+	case SET_FACESMILE:		//## %f="0.0" # Set face to Smile expression for number of seconds
+	case SET_FACEGLAD:		//## %f="0.0" # Set face to Glad expression for number of seconds
+	case SET_FACEHAPPY:		//## %f="0.0" # Set face to Happy expression for number of seconds
+	case SET_FACESHOCKED:		//## %f="0.0" # Set face to Shocked expression for number of seconds
 	case SET_FACENORMAL:		//## %f="0.0" # Set face to Normal expression for number of seconds
 		G_DebugPrint( WL_WARNING, "Q3_GetFloat: SET_FACE___ not implemented\n" );
 		return 0;
@@ -6617,6 +6625,10 @@ qboolean Q3_Set( int taskID, int entID, const char *type_name, const char *data
 	case SET_FACEBLINK:
 	case SET_FACEBLINKFROWN:
 	case SET_FACEFROWN:
+	case SET_FACESMILE:
+	case SET_FACEGLAD:
+	case SET_FACEHAPPY:
+	case SET_FACESHOCKED:
 	case SET_FACENORMAL:
 		float_data = atof((char *) data);
 		Q3_Face(entID, toSet, float_data);
diff --git a/codemp/icarus/Q3_Interface.h b/codemp/icarus/Q3_Interface.h
index e4941eb4..915ef3ad 100644
--- a/codemp/icarus/Q3_Interface.h
+++ b/codemp/icarus/Q3_Interface.h
@@ -102,6 +102,10 @@ typedef enum //# setType_e
 	SET_FACEBLINK,		//## %f="0.0" # Set face to Blink expression for number of seconds
 	SET_FACEBLINKFROWN,	//## %f="0.0" # Set face to Blinkfrown expression for number of seconds
 	SET_FACEFROWN,		//## %f="0.0" # Set face to Frown expression for number of seconds
+	SET_FACESMILE,		//## %f="0.0" # Set face to Smile expression for number of seconds
+	SET_FACEGLAD,		//## %f="0.0" # Set face to Glad expression for number of seconds
+	SET_FACEHAPPY,		//## %f="0.0" # Set face to Happy expression for number of seconds
+	SET_FACESHOCKED,		//## %f="0.0" # Set face to Shocked expression for number of seconds
 	SET_FACENORMAL,		//## %f="0.0" # Set face to Normal expression for number of seconds
 	SET_FACEEYESCLOSED,	//## %f="0.0" # Set face to Eyes closed
 	SET_FACEEYESOPENED,	//## %f="0.0" # Set face to Eyes open

