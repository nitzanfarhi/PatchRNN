commit 2f3a3a7e3270d9c4486fc4d1ed708c2f54338f9c
Author: Carl Eugen Hoyos <ceffmpeg@gmail.com>
Date:   Sun Sep 17 23:34:58 2017 +0200

    lavf/utils: Do not force chapter end time before chapter start.
    
    Fixes ticket #6671.

diff --git a/libavformat/utils.c b/libavformat/utils.c
index 23865c88c4..7abca632b5 100644
--- a/libavformat/utils.c
+++ b/libavformat/utils.c
@@ -3167,7 +3167,7 @@ static void compute_chapters_end(AVFormatContext *s)
                 if (j != i && next_start > ch->start && next_start < end)
                     end = next_start;
             }
-            ch->end = (end == INT64_MAX) ? ch->start : end;
+            ch->end = (end == INT64_MAX || end < ch->start) ? ch->start : end;
         }
 }
 

