commit de1c90cf8b73992b4197561850d2da1075fb82eb
Author: malc <av1474@comtv.ru>
Date:   Sun Sep 27 14:38:18 2009 +0400

    vl: Add failure check for SetEvent
    
    Signed-off-by: malc <av1474@comtv.ru>

diff --git a/vl.c b/vl.c
index fe23311d15..27c6458e07 100644
--- a/vl.c
+++ b/vl.c
@@ -3390,7 +3390,11 @@ static int qemu_event_init(void)
 
 static void qemu_event_increment(void)
 {
-    SetEvent(qemu_event_handle);
+    if (!SetEvent(qemu_event_handle)) {
+        fprintf(stderr, "qemu_event_increment: SetEvent failed: %d\n",
+                GetLastError());
+        exit (1);
+    }
 }
 #endif
 

