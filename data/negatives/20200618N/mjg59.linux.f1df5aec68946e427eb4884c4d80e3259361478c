commit f1df5aec68946e427eb4884c4d80e3259361478c
Author: Mark Brown <broonie@opensource.wolfsonmicro.com>
Date:   Tue Jun 15 15:14:31 2010 +0100

    ASoC: Pay attention to write errors in volsw_2r_sx
    
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
    Acked-by: Liam Girdwood <lrg@slimlogic.co.uk>

diff --git a/sound/soc/soc-core.c b/sound/soc/soc-core.c
index 254dd1c6914d..26f17323ef19 100644
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@ -2433,14 +2433,12 @@ int snd_soc_put_volsw_2r_sx(struct snd_kcontrol *kcontrol,
 	if (oval != val) {
 		ret = snd_soc_write(codec, mc->reg, val);
 		if (ret < 0)
-			return 0;
-		ret = 1;
+			return ret;
 	}
 	if (ovalr != valr) {
 		ret = snd_soc_write(codec, mc->rreg, valr);
 		if (ret < 0)
-			return 0;
-		ret = 1;
+			return ret;
 	}
 
 	return 0;

