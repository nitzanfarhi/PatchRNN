commit d600a6d754254079d4af8ac6003747f662a36218
Author: Michal Kazior <michal.kazior@tieto.com>
Date:   Tue Mar 24 12:40:17 2015 +0000

    ath10k: don't call quiet mode if it's not implemented
    
    qca6174 and wmi-tlv doesn't have quiet mode
    implemented. Don't even attempt to call it. This
    fixes a warning when bringing first interface up:
    
      failed to set quiet mode period 100 duarion 0 enabled 0 ret -95
    
    Fixes: 8515b5c79a54 ("ath10k: configure thermal throttle while powering up")
    Signed-off-by: Michal Kazior <michal.kazior@tieto.com>
    Signed-off-by: Kalle Valo <kvalo@qca.qualcomm.com>

diff --git a/drivers/net/wireless/ath/ath10k/thermal.c b/drivers/net/wireless/ath/ath10k/thermal.c
index 01bae867cae9..1a899d70dc5d 100644
--- a/drivers/net/wireless/ath/ath10k/thermal.c
+++ b/drivers/net/wireless/ath/ath10k/thermal.c
@@ -140,6 +140,9 @@ void ath10k_thermal_set_throttling(struct ath10k *ar)
 
 	lockdep_assert_held(&ar->conf_mutex);
 
+	if (!ar->wmi.ops->gen_pdev_set_quiet_mode)
+		return;
+
 	if (ar->state != ATH10K_STATE_ON)
 		return;
 

