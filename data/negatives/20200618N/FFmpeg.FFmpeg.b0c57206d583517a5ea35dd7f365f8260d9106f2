commit b0c57206d583517a5ea35dd7f365f8260d9106f2
Author: Michael Niedermayer <michael@niedermayer.cc>
Date:   Sat Jan 16 17:28:34 2016 +0100

    avformat/hls: Require the file extension to be m3u / m3u8 for probing to succeed
    
    If the filename isnt set by the user application then the code behaves like before
    
    Signed-off-by: Michael Niedermayer <michael@niedermayer.cc>

diff --git a/libavformat/hls.c b/libavformat/hls.c
index 7a8610cafb..846d884cb1 100644
--- a/libavformat/hls.c
+++ b/libavformat/hls.c
@@ -1983,6 +1983,10 @@ static int hls_probe(AVProbeData *p)
      * somewhere for a proper match. */
     if (strncmp(p->buf, "#EXTM3U", 7))
         return 0;
+
+    if (p->filename && !av_match_ext(p->filename, "m3u8,m3u"))
+        return 0;
+
     if (strstr(p->buf, "#EXT-X-STREAM-INF:")     ||
         strstr(p->buf, "#EXT-X-TARGETDURATION:") ||
         strstr(p->buf, "#EXT-X-MEDIA-SEQUENCE:"))

