commit 488faa2ae32c2f8b1ffda5c7fae5eb7c979acc15
Author: Satoru SATOH <satoru.satoh@gmail.com>
Date:   Sun Dec 16 14:00:19 2007 -0800

    [IPV4]: Make tcp_input_metrics() get minimum RTO via tcp_rto_min()
    
    tcp_input_metrics() refers to the built-time constant TCP_RTO_MIN
    regardless of configured minimum RTO with iproute2.
    
    Signed-off-by: Satoru SATOH <satoru.satoh@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/ipv4/tcp_input.c b/net/ipv4/tcp_input.c
index b9e429d2d1de..889c89362bfc 100644
--- a/net/ipv4/tcp_input.c
+++ b/net/ipv4/tcp_input.c
@@ -923,7 +923,7 @@ static void tcp_init_metrics(struct sock *sk)
 	}
 	if (dst_metric(dst, RTAX_RTTVAR) > tp->mdev) {
 		tp->mdev = dst_metric(dst, RTAX_RTTVAR);
-		tp->mdev_max = tp->rttvar = max(tp->mdev, TCP_RTO_MIN);
+		tp->mdev_max = tp->rttvar = max(tp->mdev, tcp_rto_min(sk));
 	}
 	tcp_set_rto(sk);
 	tcp_bound_rto(sk);

