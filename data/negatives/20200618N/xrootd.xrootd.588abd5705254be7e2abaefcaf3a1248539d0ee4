commit 588abd5705254be7e2abaefcaf3a1248539d0ee4
Author: Lukasz Janyst <ljanyst@cern.ch>
Date:   Wed Aug 7 18:38:45 2013 +0200

    [XrdCl] [::aaa.bbb.ccc.ddd] is not a valid IPv6 address but [::ffff:aaa.bbb.ccc.ddd] is

diff --git a/src/XrdCl/XrdClURL.cc b/src/XrdCl/XrdClURL.cc
index b05af11c..694d34ee 100644
--- a/src/XrdCl/XrdClURL.cc
+++ b/src/XrdCl/XrdClURL.cc
@@ -202,7 +202,8 @@ namespace XrdCl
         // Check if we're IPv6 encoded IPv4
         //----------------------------------------------------------------------
         pos = pHostName.find( "." );
-        if( pos != std::string::npos )
+        size_t pos2 = pHostName.find( "[::ffff" );
+        if( pos != std::string::npos && pos2 == std::string::npos )
         {
           pHostName.erase( 0, 3 );
           pHostName.erase( pHostName.length()-1, 1 );

