commit 41f2a26efc9f7853a8f00db3a6cd1f6ee855318c
Author: Julian Taylor <jtaylor.debian@googlemail.com>
Date:   Tue Nov 5 18:23:26 2013 +0100

    ENH: early return from PyArray_EquivTypenums if the numbers are equal

diff --git a/numpy/core/src/multiarray/multiarraymodule.c b/numpy/core/src/multiarray/multiarraymodule.c
index a89e27595..240ee4233 100644
--- a/numpy/core/src/multiarray/multiarraymodule.c
+++ b/numpy/core/src/multiarray/multiarraymodule.c
@@ -1500,6 +1500,10 @@ PyArray_EquivTypenums(int typenum1, int typenum2)
     PyArray_Descr *d1, *d2;
     npy_bool ret;
 
+    if (typenum1 == typenum2) {
+        return NPY_SUCCEED;
+    }
+
     d1 = PyArray_DescrFromType(typenum1);
     d2 = PyArray_DescrFromType(typenum2);
     ret = PyArray_EquivTypes(d1, d2);

