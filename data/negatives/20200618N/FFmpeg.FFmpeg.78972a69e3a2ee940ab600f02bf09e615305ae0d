commit 78972a69e3a2ee940ab600f02bf09e615305ae0d
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Fri Sep 30 17:01:51 2011 +0200

    lavf/utils: ignore subtitle timestamps in timings calculation
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavformat/utils.c b/libavformat/utils.c
index 7c8095973f..bb926d5d20 100644
--- a/libavformat/utils.c
+++ b/libavformat/utils.c
@@ -1898,7 +1898,7 @@ static void update_stream_timings(AVFormatContext *ic)
         st = ic->streams[i];
         if (st->start_time != AV_NOPTS_VALUE && st->time_base.den) {
             start_time1= av_rescale_q(st->start_time, st->time_base, AV_TIME_BASE_Q);
-            if (st->codec->codec_id == CODEC_ID_DVB_TELETEXT) {
+            if (st->codec->codec_id == CODEC_ID_DVB_TELETEXT || st->codec->codec_type == AVMEDIA_TYPE_SUBTITLE) {
                 if (start_time1 < start_time_text)
                     start_time_text = start_time1;
             } else

