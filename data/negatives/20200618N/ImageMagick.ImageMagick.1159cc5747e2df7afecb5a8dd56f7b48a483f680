commit 1159cc5747e2df7afecb5a8dd56f7b48a483f680
Author: cristy <urban-warrior@git.imagemagick.org>
Date:   Fri Apr 4 13:44:17 2014 +0000

diff --git a/MagickCore/effect.c b/MagickCore/effect.c
index 2f77e33d7..4c4b5ed52 100644
--- a/MagickCore/effect.c
+++ b/MagickCore/effect.c
@@ -933,18 +933,17 @@ static MagickBooleanType TraceEdge(Image *edge_image,CacheView *edge_view,
 
             for (u=(-1); u <= 1; u++)
             {
-              if (((y != 0) || (u != 0)) &&
-                  (IsAuthenticPixel(edge_image,x+u,y+v) != MagickFalse))
-                {
-                  (void) GetMatrixElement(pixel_cache,x+u,y+v,&pixel);
-                  if (pixel.intensity >= threshold)
-                    {
-                      status=TraceEdge(edge_image,edge_view,pixel_cache,x+u,y+v,
-                        threshold,exception);
-                      if (status != MagickFalse)
-                        return(MagickTrue);
-                    }
-                }
+              if ((u == 0) && (v == 0))
+                continue;
+              if (IsAuthenticPixel(edge_image,x+u,y+v) == MagickFalse)
+                continue;
+              (void) GetMatrixElement(pixel_cache,x+u,y+v,&pixel);
+              if (pixel.intensity < threshold)
+                continue;
+              status=TraceEdge(edge_image,edge_view,pixel_cache,x+u,y+v,
+                threshold,exception);
+              if (status != MagickFalse)
+                return(MagickTrue);
             }
           }
           return(MagickTrue);

