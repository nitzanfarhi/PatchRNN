commit 947c74eba85bff743bc15adbdd9193ffff60c29f
Author: Huang Shijie <b32955@freescale.com>
Date:   Fri Oct 11 18:31:00 2013 +0800

    serial: imx: fix the wrong number of scatterlist entries when xmit->head is 0
    
    When the (xmit->tail > xmit->head) is true and the xmit->head is 0,
    we only need one DMA scatterlist in actually. Current code uses two DMA
    scatterlists in this case, this is obviously wrong.
    
    This patch fixes it.
    
    Signed-off-by: Huang Shijie <b32955@freescale.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/tty/serial/imx.c b/drivers/tty/serial/imx.c
index c6c3b160dac7..cadf7e5848b2 100644
--- a/drivers/tty/serial/imx.c
+++ b/drivers/tty/serial/imx.c
@@ -532,7 +532,7 @@ static void dma_tx_work(struct work_struct *w)
 		return;
 	}
 
-	if (xmit->tail > xmit->head) {
+	if (xmit->tail > xmit->head && xmit->head > 0) {
 		sport->dma_tx_nents = 2;
 		sg_init_table(sgl, 2);
 		sg_set_buf(sgl, xmit->buf + xmit->tail,

