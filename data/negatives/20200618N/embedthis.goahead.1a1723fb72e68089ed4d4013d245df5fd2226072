commit 1a1723fb72e68089ed4d4013d245df5fd2226072
Author: Embedthis Software <dev@embedthis.com>
Date:   Tue Jul 1 10:09:36 2014 -0700

    FIX: test for failure of websFlush when writing.

diff --git a/src/http.c b/src/http.c
index 0a16963c..4eb2b38a 100644
--- a/src/http.c
+++ b/src/http.c
@@ -2184,7 +2184,9 @@ PUBLIC ssize websWriteBlock(Webs *wp, char *buf, ssize size)
 
     while (size > 0 && wp->state < WEBS_COMPLETE) {  
         if (bufRoom(op) < size) {
-            websFlush(wp);
+            if (!websFlush(wp)) {
+                return -1;
+            }
         }
         if ((room = bufRoom(op)) == 0) {
             break;

