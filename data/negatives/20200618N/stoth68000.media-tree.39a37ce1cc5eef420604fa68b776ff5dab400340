commit 39a37ce1cc5eef420604fa68b776ff5dab400340
Author: Dan Carpenter <error27@gmail.com>
Date:   Tue Apr 6 19:45:12 2010 +0300

    dma-debug: Cleanup for copy-loop in filter_write()
    
    Earlier in this function we set the last byte of "buf" to NULL so we
    always hit the break statement and "i" is never equal to NAME_MAX_LEN.
    This patch doesn't change how the driver works but it silences a Smatch
    warning and it makes it clearer that we don't write past the end of the
    array.
    
    Signed-off-by: Dan Carpenter <error27@gmail.com>
    Signed-off-by: Joerg Roedel <joerg.roedel@amd.com>

diff --git a/lib/dma-debug.c b/lib/dma-debug.c
index ba8b67039d13..01e64270e246 100644
--- a/lib/dma-debug.c
+++ b/lib/dma-debug.c
@@ -570,7 +570,7 @@ static ssize_t filter_write(struct file *file, const char __user *userbuf,
 	 * Now parse out the first token and use it as the name for the
 	 * driver to filter for.
 	 */
-	for (i = 0; i < NAME_MAX_LEN; ++i) {
+	for (i = 0; i < NAME_MAX_LEN - 1; ++i) {
 		current_driver_name[i] = buf[i];
 		if (isspace(buf[i]) || buf[i] == ' ' || buf[i] == 0)
 			break;

