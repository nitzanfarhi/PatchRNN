commit f0202bea5f6551326ceaf416ab0f748fe862f245
Author: cristy <urban-warrior@git.imagemagick.org>
Date:   Mon May 11 23:30:53 2015 +0000

diff --git a/MagickCore/composite.c b/MagickCore/composite.c
index 445c2efc9..d4dd47e5a 100644
--- a/MagickCore/composite.c
+++ b/MagickCore/composite.c
@@ -1688,13 +1688,15 @@ MagickExport MagickBooleanType CompositeImage(Image *image,
           case LightenCompositeOp:
           case ModulusSubtractCompositeOp:
           {
-            gamma=1.0-alpha;
+            gamma=PerceptibleReciprocal(1.0-alpha);
             break;
           }
           default:
+          {          
+            gamma=PerceptibleReciprocal(alpha);
             break;
+          }
         }
-        gamma=PerceptibleReciprocal(alpha);
         pixel=Dc;
         switch (compose)
         {

