commit f3af89d1aaaf2d2ef3bc6afe5eadb7127c51fe12
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Thu Feb 21 11:22:12 2008 +0100

    mac80211: fix debugfs_sta print_mac() warning
    
    When print_mac() was marked as __pure to avoid emitting a function
    call in pr_debug() scenarios, a warning in this code surfaced since
    it relies on the fact that the buffer is modified and doesn't use
    the return value. This patch makes it use the return value instead.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Reported-by: Harvey Harrison <harvey.harrison@gmail.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/net/mac80211/debugfs_sta.c b/net/mac80211/debugfs_sta.c
index 47db0d4aa433..1a4d2c3775af 100644
--- a/net/mac80211/debugfs_sta.c
+++ b/net/mac80211/debugfs_sta.c
@@ -297,12 +297,13 @@ STA_OPS_WR(agg_status);
 void ieee80211_sta_debugfs_add(struct sta_info *sta)
 {
 	struct dentry *stations_dir = sta->local->debugfs.stations;
-	DECLARE_MAC_BUF(mac);
+	DECLARE_MAC_BUF(mbuf);
+	u8 *mac;
 
 	if (!stations_dir)
 		return;
 
-	print_mac(mac, sta->addr);
+	mac = print_mac(mbuf, sta->addr);
 
 	sta->debugfs.dir = debugfs_create_dir(mac, stations_dir);
 	if (!sta->debugfs.dir)

