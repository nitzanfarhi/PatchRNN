commit 1b8dd2150be5ed5aa3695684a88cf3ab5cac6b76
Author: Pino Toscano <ptoscano@redhat.com>
Date:   Thu Sep 10 11:12:53 2015 +0200

    builder: fix prototype virt_builder_yajl_tree_parse
    
    Declare the prototype depending whether libyajl is available, and if it
    isn't add also the noreturn attribute.
    
    Fixes commit 87a42174f93c0f2621f3598c43327e5d071ade9a.

diff --git a/builder/yajl-c.c b/builder/yajl-c.c
index 33a7023f9..77ae3e749 100644
--- a/builder/yajl-c.c
+++ b/builder/yajl-c.c
@@ -32,10 +32,11 @@
 
 #define Val_none (Val_int (0))
 
-extern value virt_builder_yajl_is_available (value unit);
-extern value virt_builder_yajl_tree_parse (value stringv);
+value virt_builder_yajl_is_available (value unit);
 
 #if HAVE_YAJL
+value virt_builder_yajl_tree_parse (value stringv);
+
 static value
 convert_yajl_value (yajl_val val, int level)
 {
@@ -126,6 +127,7 @@ virt_builder_yajl_tree_parse (value stringv)
 }
 
 #else
+value virt_builder_yajl_tree_parse (value stringv)  __attribute__((noreturn));
 
 value
 virt_builder_yajl_is_available (value unit)
@@ -135,7 +137,7 @@ virt_builder_yajl_is_available (value unit)
 }
 
 value
-virt_builder_yajl_tree_parse (value stringv) __attribute__((noreturn))
+virt_builder_yajl_tree_parse (value stringv)
 {
   caml_invalid_argument ("virt-builder was compiled without yajl support");
 }

