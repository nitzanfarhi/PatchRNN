commit 63dff6b50eeb090fac208ac09cd7e2e977a531ae
Author: Christopher L. Farrow <cfarrow@enthought.com>
Date:   Fri Aug 26 22:39:55 2011 -0500

    BUG: fixed reference counting bug in PyArray_FromScalar that occurs when using an extended dtype

diff --git a/numpy/core/src/multiarray/scalarapi.c b/numpy/core/src/multiarray/scalarapi.c
index 41ba4c6ae..0ee4a3b09 100644
--- a/numpy/core/src/multiarray/scalarapi.c
+++ b/numpy/core/src/multiarray/scalarapi.c
@@ -339,6 +339,7 @@ finish:
     if (outcode->type_num == typecode->type_num) {
         if (!PyTypeNum_ISEXTENDED(typecode->type_num)
                 || (outcode->elsize == typecode->elsize)) {
+            Py_DECREF(outcode);
             return (PyObject *)r;
         }
     }

