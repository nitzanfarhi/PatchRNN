commit 36498b42f4f858da469e0d3811d775b76fabc11d
Author: miod <miod@openbsd.org>
Date:   Mon Jan 31 06:41:25 2005 +0000

    Be sure to always return an error for unrecognized ioctls. Found by matthieu@

diff --git a/sys/arch/arm/xscale/pxa2x0_lcd.c b/sys/arch/arm/xscale/pxa2x0_lcd.c
index d01502ec642..67e6ccfa1dd 100644
--- a/sys/arch/arm/xscale/pxa2x0_lcd.c
+++ b/sys/arch/arm/xscale/pxa2x0_lcd.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: pxa2x0_lcd.c,v 1.11 2005/01/21 16:22:34 miod Exp $ */
+/*	$OpenBSD: pxa2x0_lcd.c,v 1.12 2005/01/31 06:41:25 miod Exp $ */
 /* $NetBSD: pxa2x0_lcd.c,v 1.8 2003/10/03 07:24:05 bsh Exp $ */
 
 /*
@@ -788,6 +788,7 @@ pxa2x0_lcd_ioctl(void *v, u_long cmd, caddr_t data, int flag, struct proc *p)
 	case WSDISPLAYIO_GCURMAX:
 	case WSDISPLAYIO_GCURSOR:
 	case WSDISPLAYIO_SCURSOR:
+	default:
 		return -1;	/* not implemented */
 
         case WSDISPLAYIO_LINEBYTES:
diff --git a/sys/arch/luna88k/dev/lunafb.c b/sys/arch/luna88k/dev/lunafb.c
index 036977ad527..d5f2a8afa1d 100644
--- a/sys/arch/luna88k/dev/lunafb.c
+++ b/sys/arch/luna88k/dev/lunafb.c
@@ -1,4 +1,4 @@
-/* $OpenBSD: lunafb.c,v 1.4 2005/01/05 23:04:24 miod Exp $ */
+/* $OpenBSD: lunafb.c,v 1.5 2005/01/31 06:41:27 miod Exp $ */
 /* $NetBSD: lunafb.c,v 1.7.6.1 2002/08/07 01:48:34 lukem Exp $ */
 
 /*-
@@ -272,6 +272,7 @@ omfbioctl(v, cmd, data, flag, p)
 	case WSDISPLAYIO_GCURMAX:
 	case WSDISPLAYIO_GCURSOR:
 	case WSDISPLAYIO_SCURSOR:
+	default:
 		return (-1);
 	}
 
diff --git a/sys/dev/ic/vga.c b/sys/dev/ic/vga.c
index f2eb6c2da76..2fc58732372 100644
--- a/sys/dev/ic/vga.c
+++ b/sys/dev/ic/vga.c
@@ -1,4 +1,4 @@
-/* $OpenBSD: vga.c,v 1.37 2005/01/05 23:04:25 miod Exp $ */
+/* $OpenBSD: vga.c,v 1.38 2005/01/31 06:41:27 miod Exp $ */
 /* $NetBSD: vga.c,v 1.28.2.1 2000/06/30 16:27:47 simonb Exp $ */
 
 /*
@@ -613,6 +613,7 @@ vga_ioctl(v, cmd, data, flag, p)
 	case WSDISPLAYIO_GCURMAX:
 	case WSDISPLAYIO_GCURSOR:
 	case WSDISPLAYIO_SCURSOR:
+	default:
 		/* NONE of these operations are by the generic VGA driver. */
 		return ENOTTY;
 	}

