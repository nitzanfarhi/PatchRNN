commit 64471ebe534dc6cedd72849b2324b52cb5249eb9
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Mon May 15 09:44:24 2006 -0700

    [PATCH] Add Core Solo and Core Duo support to oprofile
    
    Add support to oprofile for the Intel Core Solo and Core Duo processors.
    See also the patch to add support to oprofile-0.9.1-8.1.1 at
    http://www.kvack.org/~bcrl/patches/oprofile/oprofile-core-0.9.1.diff .
    
    Signed-off-by: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
    Cc: Philippe Elie <phil.el@wanadoo.fr>
    Cc: John Levon <levon@movementarian.org>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/arch/i386/oprofile/nmi_int.c b/arch/i386/oprofile/nmi_int.c
index 1a2076ce6f6a..ec0fd3cfa774 100644
--- a/arch/i386/oprofile/nmi_int.c
+++ b/arch/i386/oprofile/nmi_int.c
@@ -332,10 +332,11 @@ static int __init ppro_init(char ** cpu_type)
 {
 	__u8 cpu_model = boot_cpu_data.x86_model;
 
-	if (cpu_model > 0xd)
+	if (cpu_model == 14)
+		*cpu_type = "i386/core";
+	else if (cpu_model > 0xd)
 		return 0;
-
-	if (cpu_model == 9) {
+	else if (cpu_model == 9) {
 		*cpu_type = "i386/p6_mobile";
 	} else if (cpu_model > 5) {
 		*cpu_type = "i386/piii";

