commit 28e22d4baed2d10d8ed0640d05e054fecfc71286
Author: Jing Zhang <bjzhjing@linux.vnet.ibm.com>
Date:   Tue Jul 18 03:49:25 2017 +0200

    vfio/ccw: allocate irq info with the right size
    
    When allocating memory for the vfio_irq_info parameter of the
    VFIO_DEVICE_GET_IRQ_INFO ioctl, we used the wrong size. Let's
    fix it by using the right size.
    
    Reviewed-by: Dong Jia Shi <bjsdjshi@linux.vnet.ibm.com>
    Signed-off-by: Jing Zhang <bjzhjing@linux.vnet.ibm.com>
    Signed-off-by: Dong Jia Shi <bjsdjshi@linux.vnet.ibm.com>
    Message-Id: <20170718014926.44781-2-bjsdjshi@linux.vnet.ibm.com>
    Signed-off-by: Cornelia Huck <cohuck@redhat.com>

diff --git a/hw/vfio/ccw.c b/hw/vfio/ccw.c
index 12d0262336..8d97b53e77 100644
--- a/hw/vfio/ccw.c
+++ b/hw/vfio/ccw.c
@@ -168,7 +168,7 @@ static void vfio_ccw_register_io_notifier(VFIOCCWDevice *vcdev, Error **errp)
         return;
     }
 
-    argsz = sizeof(*irq_set);
+    argsz = sizeof(*irq_info);
     irq_info = g_malloc0(argsz);
     irq_info->index = VFIO_CCW_IO_IRQ_INDEX;
     irq_info->argsz = argsz;

