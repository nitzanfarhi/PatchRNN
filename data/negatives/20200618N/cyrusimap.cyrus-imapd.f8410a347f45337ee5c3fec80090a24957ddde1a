commit f8410a347f45337ee5c3fec80090a24957ddde1a
Author: Bron Gondwana <brong@opera.com>
Date:   Wed Oct 30 15:20:58 2013 +1100

    partition move - don't lose uidvalidity

diff --git a/imap/mboxlist.c b/imap/mboxlist.c
index 8b0112bb9..88c929035 100644
--- a/imap/mboxlist.c
+++ b/imap/mboxlist.c
@@ -1359,6 +1359,7 @@ EXPORTED int mboxlist_renamemailbox(const char *oldname, const char *newname,
 	newmbentry->mbtype = oldmailbox->mbtype;
 	newmbentry->partition = xstrdupnull(newpartition);
 	newmbentry->acl = xstrdupnull(oldmailbox->acl);
+	newmbentry->uidvalidity = oldmailbox->i.uidvalidity;
 	mboxent = mboxlist_entry_cstring(newmbentry);
 	r = cyrusdb_store(mbdb, newname, strlen(newname), 
 		          mboxent, strlen(mboxent), &tid);

