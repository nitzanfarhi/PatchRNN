commit d212ca1724b1a3708a3b4cb72c58b20ef442b24f
Author: Felipe Contreras <felipe.contreras@gmail.com>
Date:   Thu Apr 30 01:49:47 2009 +0300

    git config: error when editing a repo config and not being in one
    
    Let's throw an error on this specific case. If the user specifies the
    config file, he must know what he is doing.
    
    Teemu Likonen pointed this out.
    
    Signed-off-by: Felipe Contreras <felipe.contreras@gmail.com>
    Signed-off-by: Junio C Hamano <gitster@pobox.com>

diff --git a/builtin-config.c b/builtin-config.c
index d8da72cf2..a81bc8bbf 100644
--- a/builtin-config.c
+++ b/builtin-config.c
@@ -390,6 +390,8 @@ int cmd_config(int argc, const char **argv, const char *unused_prefix)
 	}
 	else if (actions == ACTION_EDIT) {
 		check_argc(argc, 0, 0);
+		if (!config_exclusive_filename && nongit)
+			die("not in a git directory");
 		git_config(git_default_config, NULL);
 		launch_editor(config_exclusive_filename ?
 			      config_exclusive_filename : git_path("config"),

