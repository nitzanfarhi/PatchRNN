commit 54d030cc400ef5565a90e71288c23c0a18299dba
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Sep 17 09:36:16 2007 +0200

    [ALSA] cmipci: show more registers in proc file
    
    Show a dump of all registers in the 0x00-0x27 and 0x90-0x93 ranges in
    the 'cmipci' proc file.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

diff --git a/sound/pci/cmipci.c b/sound/pci/cmipci.c
index 2d8d3331bb96..12f33718e6d1 100644
--- a/sound/pci/cmipci.c
+++ b/sound/pci/cmipci.c
@@ -2652,19 +2652,18 @@ static void snd_cmipci_proc_read(struct snd_info_entry *entry,
 				 struct snd_info_buffer *buffer)
 {
 	struct cmipci *cm = entry->private_data;
-	int i;
+	int i, v;
 	
-	snd_iprintf(buffer, "%s\n\n", cm->card->longname);
-	for (i = 0; i < 0x40; i++) {
-		int v = inb(cm->iobase + i);
+	snd_iprintf(buffer, "%s\n", cm->card->longname);
+	for (i = 0; i < 0x94; i++) {
+		if (i == 0x28)
+			i = 0x90;
+		v = inb(cm->iobase + i);
 		if (i % 4 == 0)
-			snd_iprintf(buffer, "%02x: ", i);
-		snd_iprintf(buffer, "%02x", v);
-		if (i % 4 == 3)
-			snd_iprintf(buffer, "\n");
-		else
-			snd_iprintf(buffer, " ");
+			snd_iprintf(buffer, "\n%02x:", i);
+		snd_iprintf(buffer, " %02x", v);
 	}
+	snd_iprintf(buffer, "\n");
 }
 
 static void __devinit snd_cmipci_proc_init(struct cmipci *cm)

