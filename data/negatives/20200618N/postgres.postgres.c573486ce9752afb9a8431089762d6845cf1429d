commit c573486ce9752afb9a8431089762d6845cf1429d
Author: Robert Haas <rhaas@postgresql.org>
Date:   Fri Jun 17 09:12:19 2011 -0400

    Fix minor thinko in ProcGlobalShmemSize().
    
    There's no need to add space for startupBufferPinWaitBufId, because
    it's part of the PROC_HDR object for which this function already
    allocates space.
    
    This has been wrong for a while, but the only consequence is that our
    shared memory allocation is increased by 4 bytes, so no back-patch.

diff --git a/src/backend/storage/lmgr/proc.c b/src/backend/storage/lmgr/proc.c
index c7b1e45bb8..f898b795d5 100644
--- a/src/backend/storage/lmgr/proc.c
+++ b/src/backend/storage/lmgr/proc.c
@@ -111,8 +111,6 @@ ProcGlobalShmemSize(void)
 	size = add_size(size, mul_size(MaxBackends, sizeof(PGPROC)));
 	/* ProcStructLock */
 	size = add_size(size, sizeof(slock_t));
-	/* startupBufferPinWaitBufId */
-	size = add_size(size, sizeof(NBuffers));
 
 	return size;
 }

