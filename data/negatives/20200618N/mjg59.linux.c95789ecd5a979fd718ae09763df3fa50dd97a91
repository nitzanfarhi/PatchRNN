commit c95789ecd5a979fd718ae09763df3fa50dd97a91
Author: Hans Verkuil <hans.verkuil@cisco.com>
Date:   Sun Apr 14 10:53:07 2013 -0300

    [media] cx25821: do not expose broken video output streams
    
    The cx25821 driver has support for one audio output channel and two video
    output channels.
    This is implemented in a very ugly and very evil way through a custom ioctl
    that passes the filename of a file containing the video data, which is then
    read by the driver itself using vfs.
    There are a number of problems with this:
    1) it's very ugly and very evil (I can't say that often enough).
    2) V4L2 supports video output, so why not use that?
    3) it's very buggy, closing the filehandle through which you passed the ioctl
       will oops the kernel.
    4) it's a nasty security leak since this allows you to load any file in the
       system as a video or audio source, so in theory you can output /etc/passwd
       to audio or video out and record & decode it on another device.
    Because of all these issues we no longer register those output video nodes.
    
    Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/pci/cx25821/cx25821-video.c b/drivers/media/pci/cx25821/cx25821-video.c
index d4de021dc844..31ce7698acb9 100644
--- a/drivers/media/pci/cx25821/cx25821-video.c
+++ b/drivers/media/pci/cx25821/cx25821-video.c
@@ -461,7 +461,7 @@ int cx25821_video_register(struct cx25821_dev *dev)
 
 	spin_lock_init(&dev->slock);
 
-	for (i = 0; i < MAX_VID_CHANNEL_NUM - 1; ++i) {
+	for (i = 0; i < VID_CHANNEL_NUM; ++i) {
 		cx25821_init_controls(dev, i);
 
 		cx25821_risc_stopper(dev->pci, &dev->channels[i].vidq.stopper,

