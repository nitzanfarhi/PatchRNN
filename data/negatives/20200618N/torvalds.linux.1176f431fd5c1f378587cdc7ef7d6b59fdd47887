commit 1176f431fd5c1f378587cdc7ef7d6b59fdd47887
Author: David Spinadel <david.spinadel@intel.com>
Date:   Tue Mar 13 14:32:48 2012 +0200

    iwlwifi: set size of ucode section
    
    Set size of firmware section in mvm bundle format.
    
    Signed-off-by: David Spinadel <david.spinadel@intel.com>
    Signed-off-by: Wey-Yi Guy <wey-yi.w.guy@intel.com>

diff --git a/drivers/net/wireless/iwlwifi/iwl-drv.c b/drivers/net/wireless/iwlwifi/iwl-drv.c
index fa12f73cd509..da4d85a32d31 100644
--- a/drivers/net/wireless/iwlwifi/iwl-drv.c
+++ b/drivers/net/wireless/iwlwifi/iwl-drv.c
@@ -284,6 +284,7 @@ static int iwl_store_ucode_sec(struct iwl_firmware_pieces *pieces,
 
 	sec->offset = le32_to_cpu(sec_parse->offset);
 	sec->data = sec_parse->data;
+	sec->size = size - sizeof(sec_parse->offset);
 
 	++img->sec_counter;
 

