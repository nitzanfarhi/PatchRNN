commit 5ac5a33197d7f49b97a282e07d04a918322088ee
Author: Johan Danielsson <joda@pdc.kth.se>
Date:   Fri Aug 27 08:26:49 1999 +0000

    (krb5_append_addresses): remove duplicates
    
    
    git-svn-id: svn://svn.h5l.se/heimdal/trunk/heimdal@6876 ec53bebd-3082-4978-b11e-865c3cabbd6b

diff --git a/lib/krb5/address.c b/lib/krb5/address.c
index 7a1601cce..9de066abe 100644
--- a/lib/krb5/address.c
+++ b/lib/krb5/address.c
@@ -137,6 +137,9 @@ krb5_append_addresses(krb5_context context,
 	    return ENOMEM;
 	dest->val = tmp;
 	for(i = 0; i < source->len; i++) {
+	    /* skip duplicates */
+	    if(krb5_address_search(context, &source->val[i], dest))
+		continue;
 	    ret = krb5_copy_address(context, 
 				    &source->val[i], 
 				    &dest->val[dest->len]);

