commit 28184d2e7e2e57df4aca25301386fdca0b806667
Author: bcook <bcook@openbsd.org>
Date:   Fri Jan 9 23:44:07 2015 +0000

    return -1 on host() address parsing failure, not 1.
    
    Match what parse.y expects it to return.
    
    ok millert@

diff --git a/usr.sbin/ntpd/client.c b/usr.sbin/ntpd/client.c
index 0e7d454dbf0..0d984a3def0 100644
--- a/usr.sbin/ntpd/client.c
+++ b/usr.sbin/ntpd/client.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: client.c,v 1.96 2015/01/09 07:35:37 deraadt Exp $ */
+/*	$OpenBSD: client.c,v 1.97 2015/01/09 23:44:07 bcook Exp $ */
 
 /*
  * Copyright (c) 2003, 2004 Henning Brauer <henning@openbsd.org>
@@ -112,7 +112,7 @@ client_nextaddr(struct ntp_peer *p)
 		return (-1);
 	}
 
-	if ((p->addr = p->addr->next) == NULL)
+	if (p->addr == NULL || (p->addr = p->addr->next) == NULL)
 		p->addr = p->addr_head.a;
 
 	p->shift = 0;

