commit 8e27364128b091e76059229d4f009bc7f869fa9f
Author: Junio C Hamano <junkio@cox.net>
Date:   Mon Jul 17 15:10:10 2006 -0700

    unpack-objects: read configuration data upon startup.
    
    With this, unpack-objects will write out the loose objects with
    new-style headers when core.legacyheaders configuration is set
    to false.
    
    One unfortunate thing is that we still need inflate/deflate cycle
    when unpacking, even for objects in the pack stream that are not
    deltified, because it is not possible to determine the boundary of
    objects in the encoded stream cheaply without inflating it first.
    
    Signed-off-by: Junio C Hamano <junkio@cox.net>

diff --git a/unpack-objects.c b/unpack-objects.c
index 48c1ee796..b23fe58ce 100644
--- a/unpack-objects.c
+++ b/unpack-objects.c
@@ -266,6 +266,7 @@ int main(int argc, char **argv)
 	unsigned char sha1[20];
 
 	setup_git_directory();
+	git_config(git_default_config);
 
 	quiet = !isatty(2);
 

