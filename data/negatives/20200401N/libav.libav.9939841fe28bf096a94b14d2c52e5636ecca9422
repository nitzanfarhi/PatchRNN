commit 9939841fe28bf096a94b14d2c52e5636ecca9422
Author: Ivan Kalvachev <ikalvachev@gmail.com>
Date:   Sat Feb 14 21:33:13 2009 +0000

    Give nice message for failed assert.
    
    Originally committed as revision 17283 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/mpegvideo_xvmc.c b/libavcodec/mpegvideo_xvmc.c
index b05a49505..ce5759383 100644
--- a/libavcodec/mpegvideo_xvmc.c
+++ b/libavcodec/mpegvideo_xvmc.c
@@ -76,7 +76,12 @@ int ff_xvmc_field_start(MpegEncContext*s, AVCodecContext *avctx)
     render->picture_structure = s->picture_structure;
     render->flags             = s->first_field ? 0 : XVMC_SECOND_FIELD;
 
-    assert(render->filled_mv_blocks_num == 0);
+    if(render->filled_mv_blocks_num){
+        av_log(avctx, AV_LOG_ERROR,
+                "Rendering surface contains %i unprocessed blocks\n",
+                render->filled_mv_blocks_num);
+        assert(0);
+    }
 
     render->p_future_surface = NULL;
     render->p_past_surface   = NULL;

