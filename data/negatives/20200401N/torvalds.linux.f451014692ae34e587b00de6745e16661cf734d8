commit f451014692ae34e587b00de6745e16661cf734d8
Author: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Date:   Mon Feb 13 13:44:57 2017 +0100

    cpufreq: Do not clear real_cpus mask on policy init
    
    If new_policy is set in cpufreq_online(), the policy object has just
    been created and its real_cpus mask has been zeroed on allocation,
    and the driver's ->init() callback should not touch it.
    
    It doesn't need to be cleared again, so don't do that.
    
    Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
    Acked-by: Viresh Kumar <viresh.kumar@linaro.org>

diff --git a/drivers/cpufreq/cpufreq.c b/drivers/cpufreq/cpufreq.c
index 408479540566..80a785ad17e8 100644
--- a/drivers/cpufreq/cpufreq.c
+++ b/drivers/cpufreq/cpufreq.c
@@ -1166,8 +1166,6 @@ static int cpufreq_online(unsigned int cpu)
 	if (new_policy) {
 		/* related_cpus should at least include policy->cpus. */
 		cpumask_copy(policy->related_cpus, policy->cpus);
-		/* Clear mask of registered CPUs */
-		cpumask_clear(policy->real_cpus);
 	}
 
 	/*

