commit a2482377c9df89daa0cb94252bd1e8829c0e9c2f
Author: Frederic CAND <frederic.cand@anevia.com>
Date:   Thu Oct 30 04:46:42 2008 -0300

    V4L/DVB (9495): cx88-blackbird: bugfix: cx88-blackbird-poll-fix
    
    Starts encoder not only on a read call but also on a poll command.
    
    Signed-off-by: Frederic CAND <frederic.cand@anevia.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/cx88/cx88-blackbird.c b/drivers/media/video/cx88/cx88-blackbird.c
index 078be6319556..ae77450f126b 100644
--- a/drivers/media/video/cx88/cx88-blackbird.c
+++ b/drivers/media/video/cx88/cx88-blackbird.c
@@ -1158,6 +1158,10 @@ static unsigned int
 mpeg_poll(struct file *file, struct poll_table_struct *wait)
 {
 	struct cx8802_fh *fh = file->private_data;
+	struct cx8802_dev *dev = fh->dev;
+
+	if (!dev->mpeg_active)
+		blackbird_start_codec(file, fh);
 
 	return videobuf_poll_stream(file, &fh->mpegq, wait);
 }

