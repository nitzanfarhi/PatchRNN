commit 014e4ac4f7d9c981750491fa40ea35efadc9ed49
Author: Roel Kluin <roel.kluin@gmail.com>
Date:   Fri Jan 29 10:42:11 2010 +0000

    Btrfs: make error return negative in btrfs_sync_file()
    
    It appears the error return should be negative
    
    Signed-off-by: Roel Kluin <roel.kluin@gmail.com>
    Signed-off-by: Chris Mason <chris.mason@oracle.com>

diff --git a/fs/btrfs/file.c b/fs/btrfs/file.c
index ae96fdae1f7d..413a30dafcda 100644
--- a/fs/btrfs/file.c
+++ b/fs/btrfs/file.c
@@ -1133,7 +1133,7 @@ int btrfs_sync_file(struct file *file, struct dentry *dentry, int datasync)
 	}
 	mutex_lock(&dentry->d_inode->i_mutex);
 out:
-	return ret > 0 ? EIO : ret;
+	return ret > 0 ? -EIO : ret;
 }
 
 static const struct vm_operations_struct btrfs_file_vm_ops = {

