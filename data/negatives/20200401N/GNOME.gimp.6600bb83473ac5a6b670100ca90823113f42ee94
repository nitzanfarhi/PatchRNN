commit 6600bb83473ac5a6b670100ca90823113f42ee94
Author: Massimo Valentini <mvalentini@src.gnome.org>
Date:   Sun Mar 18 17:03:45 2012 +0100

    app: silence a harmless critical warning
    
    Executing Desaturate... or Posterize... used to print:
    
    Gimp-Widgets-CRITICAL **: gimp_settings_box_add_current: assertion
    `GIMP_IS_SETTINGS_BOX (box)' failed

diff --git a/app/tools/gimpimagemaptool.c b/app/tools/gimpimagemaptool.c
index 89caff09ef..a4438239ed 100644
--- a/app/tools/gimpimagemaptool.c
+++ b/app/tools/gimpimagemaptool.c
@@ -666,7 +666,7 @@ gimp_image_map_tool_response (GtkWidget        *widget,
 
           gimp_image_flush (gimp_display_get_image (tool->display));
 
-          if (image_map_tool->config)
+          if (image_map_tool->config && image_map_tool->settings_box)
             gimp_settings_box_add_current (GIMP_SETTINGS_BOX (image_map_tool->settings_box),
                                            GIMP_GUI_CONFIG (tool->tool_info->gimp->config)->image_map_tool_max_recent);
         }

