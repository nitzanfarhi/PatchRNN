commit 0216e517d07f6409534a222b69d550844aeeb4d8
Author: Yang Tse <yangsita@gmail.com>
Date:   Wed Sep 14 10:36:29 2011 +0200

    ftp.c: add a couple of failure messages

diff --git a/lib/ftp.c b/lib/ftp.c
index 07c506dda..87dcbf245 100644
--- a/lib/ftp.c
+++ b/lib/ftp.c
@@ -1001,6 +1001,8 @@ static CURLcode ftp_state_use_port(struct connectdata *conn,
                              sa->sa_family == AF_INET?1:2,
                              myhost, port);
       if(result) {
+        failf(data, "Failure sending EPRT command: %s",
+              curl_easy_strerror(result));
         Curl_closesocket(conn, portsock);
         /* don't retry using PORT */
         ftpc->count1 = PORT;
@@ -1028,6 +1030,8 @@ static CURLcode ftp_state_use_port(struct connectdata *conn,
 
       result = Curl_pp_sendf(&ftpc->pp, "%s %s", mode[fcmd], tmp);
       if(result) {
+        failf(data, "Failure sending PORT command: %s",
+              curl_easy_strerror(result));
         Curl_closesocket(conn, portsock);
         /* bail out */
         state(conn, FTP_STOP);

