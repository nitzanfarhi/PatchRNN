commit 0fabb0e31d58d85e09f0f51ec61447c5c0772026
Author: Mathias Stearn <mathias@10gen.com>
Date:   Tue Aug 24 13:26:59 2010 -0400

    ignore shell prompts at start of line to make it easier to copy-paste user output

diff --git a/shell/dbshell.cpp b/shell/dbshell.cpp
index 3ff0e280cf..ce1afd4b8f 100644
--- a/shell/dbshell.cpp
+++ b/shell/dbshell.cpp
@@ -377,6 +377,10 @@ string finishCode( string code ){
             return "";
         if ( ! line )
             return "";
+
+        while (startsWith(line, "... "))
+            line += 4;
+
         code += line;
     }
     return code;
@@ -616,9 +620,13 @@ int _main(int argc, char* argv[]) {
             gotInterrupted = 0;
             char * line = shellReadline( "> " );
 
-            if ( line )
+            if ( line ){
+                while (startsWith(line, "> "))
+                    line += 2;
+
                 while ( line[0] == ' ' )
                     line++;
+            }
 
             if ( ! line || ( strlen(line) == 4 && strstr( line , "exit" ) ) ){
                 cout << "bye" << endl;

