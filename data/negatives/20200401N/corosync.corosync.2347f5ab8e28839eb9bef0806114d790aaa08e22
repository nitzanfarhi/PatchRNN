commit 2347f5ab8e28839eb9bef0806114d790aaa08e22
Author: Steven Dake <sdake@redhat.com>
Date:   Fri Jul 15 16:54:37 2005 +0000

    defect 744
    return SA_AIS_ERR_EXIST in saCkptSectionCreate if maxSections == 1
    
    
    git-svn-id: http://svn.fedorahosted.org/svn/corosync/trunk@762 fd59a12c-fef9-0310-b244-a6a79926bd2f

diff --git a/exec/ckpt.c b/exec/ckpt.c
index 8711e9c7..9bcefefe 100644
--- a/exec/ckpt.c
+++ b/exec/ckpt.c
@@ -2100,6 +2100,11 @@ static int message_handler_req_exec_ckpt_sectioncreate (void *message, struct in
 		goto error_exit;
 	}
 
+	if (ckptCheckpoint->checkpointCreationAttributes.maxSections == 1) {
+		error = SA_AIS_ERR_EXIST;
+		goto error_exit;
+	}
+
 	/*
 	 * Determine if user-specified checkpoint ID already exists
 	 */

