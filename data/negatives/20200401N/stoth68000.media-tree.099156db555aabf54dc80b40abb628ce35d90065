commit 099156db555aabf54dc80b40abb628ce35d90065
Author: Alan <alan@lxorguk.ukuu.org.uk>
Date:   Mon Nov 27 16:37:52 2006 +0000

    [PATCH] pata_marvell: merge Mandriva patches
    
    Correct and complete the Marvell PATA cable detection logic.
    
    From: Arnaud Patard <apatard@mandriva.com>
    Signed-off-by: Arnaud Patard <apatard@mandriva.com>
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

diff --git a/drivers/ata/pata_marvell.c b/drivers/ata/pata_marvell.c
index a5953c389264..25f7a79a8e25 100644
--- a/drivers/ata/pata_marvell.c
+++ b/drivers/ata/pata_marvell.c
@@ -57,11 +57,11 @@ static int marvell_pre_reset(struct ata_port *ap)
 	switch(ap->port_no)
 	{
 	case 0:
-		/* Might be backward, docs unclear */
 		if (inb(ap->ioaddr.bmdma_addr + 1) & 1)
-			ap->cbl = ATA_CBL_PATA80;
-		else
 			ap->cbl = ATA_CBL_PATA40;
+		else
+			ap->cbl = ATA_CBL_PATA80;
+		break;
 
 	case 1: /* Legacy SATA port */
 		ap->cbl = ATA_CBL_SATA;

