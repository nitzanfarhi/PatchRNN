commit f1752010048845518d45eb35cb2ebc827b139280
Author: Vitor Sessak <vitor1001@gmail.com>
Date:   Wed Jul 18 06:45:47 2007 +0000

    Test for supported number of channels
    
    Originally committed as revision 9730 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/alac.c b/libavcodec/alac.c
index fac8a8302..3883f418f 100644
--- a/libavcodec/alac.c
+++ b/libavcodec/alac.c
@@ -491,6 +491,11 @@ static int alac_decode_frame(AVCodecContext *avctx,
     init_get_bits(&alac->gb, inbuffer, input_buffer_size * 8);
 
     channels = get_bits(&alac->gb, 3) + 1;
+    if (channels > MAX_CHANNELS) {
+        av_log(avctx, AV_LOG_ERROR, "channels > %d not supported\n",
+               MAX_CHANNELS);
+        return input_buffer_size;
+    }
 
     /* 2^result = something to do with output waiting.
      * perhaps matters if we read > 1 frame in a pass?

