commit f17c811d1433aa1966f9c5a744841427e9a97ecf
Author: Yong Wang <yong.y.wang@linux.intel.com>
Date:   Fri Sep 17 17:24:12 2010 +0200

    hwmon: (emc1403) Remove unnecessary hwmon_device_unregister
    
    It is unnecessary and wrong to call hwmon_device_unregister in error
    handling before hwmon_device_register is called.
    
    Signed-off-by: Yong Wang <yong.y.wang@intel.com>
    Reviewed-by: Guenter Roeck <guenter.roeck@ericsson.com>
    Cc: stable@kernel.org
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

diff --git a/drivers/hwmon/emc1403.c b/drivers/hwmon/emc1403.c
index 5b58b20dead1..8dee3f38fdfb 100644
--- a/drivers/hwmon/emc1403.c
+++ b/drivers/hwmon/emc1403.c
@@ -308,7 +308,6 @@ static int emc1403_probe(struct i2c_client *client,
 	res = sysfs_create_group(&client->dev.kobj, &m_thermal_gr);
 	if (res) {
 		dev_warn(&client->dev, "create group failed\n");
-		hwmon_device_unregister(data->hwmon_dev);
 		goto thermal_error1;
 	}
 	data->hwmon_dev = hwmon_device_register(&client->dev);

