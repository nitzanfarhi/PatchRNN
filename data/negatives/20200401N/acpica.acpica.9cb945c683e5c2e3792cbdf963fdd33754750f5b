commit 9cb945c683e5c2e3792cbdf963fdd33754750f5b
Author: aystarik <aystarik>
Date:   Wed Jun 29 17:42:27 2005 +0000

    change AnyAcc to use natural access size instead of always byte
    
    
    date    2000.12.12.16.49.00;    author agrover; state Exp;

diff --git a/source/components/executer/exprep.c b/source/components/executer/exprep.c
index 50873d60f..7be405ca8 100644
--- a/source/components/executer/exprep.c
+++ b/source/components/executer/exprep.c
@@ -2,7 +2,7 @@
 /******************************************************************************
  *
  * Module Name: amprep - ACPI AML (p-code) execution - field prep utilities
- *              $Revision: 1.68 $
+ *              $Revision: 1.71 $
  *
  *****************************************************************************/
 
@@ -10,8 +10,8 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999, Intel Corp.  All rights
- * reserved.
+ * Some or all of this work - Copyright (c) 1999, 2000, Intel Corp.
+ * All rights reserved.
  *
  * 2. License
  *
@@ -142,13 +142,29 @@
 
 static UINT32
 AcpiAmlDecodeFieldAccessType (
-    UINT32                  Access)
+    UINT32                  Access,
+    UINT16                  Length)
 {
 
     switch (Access)
     {
     case ACCESS_ANY_ACC:
-        return (8);
+        if (Length <= 8)
+        {
+            return (8);
+        }
+        else if (Length <= 16)
+        {
+            return (16);
+        }
+        else if (Length <=32)
+        {
+            return (32);
+        }
+        else
+        {
+            return (8);
+        }
         break;
 
     case ACCESS_BYTE_ACC:
@@ -229,7 +245,7 @@ AcpiAmlPrepCommonFieldObject (
 
     /* Decode the access type so we can compute offsets */
 
-    Granularity = AcpiAmlDecodeFieldAccessType (ObjDesc->Field.Access);
+    Granularity = AcpiAmlDecodeFieldAccessType (ObjDesc->Field.Access, ObjDesc->Field.Length);
     if (!Granularity)
     {
         return_ACPI_STATUS (AE_AML_OPERAND_VALUE);
@@ -294,7 +310,7 @@ AcpiAmlPrepDefFieldValue (
     if (Type != ACPI_TYPE_REGION)
     {
         DEBUG_PRINT (ACPI_ERROR,
-            ("AmlPrepDefFieldValue: Needed Region, found %d %s\n",
+            ("AmlPrepDefFieldValue: Needed Region, found type %X %s\n",
             Type, AcpiCmGetTypeName (Type)));
         return_ACPI_STATUS (AE_AML_OPERAND_TYPE);
     }
@@ -415,7 +431,7 @@ AcpiAmlPrepBankFieldValue (
     if (Type != ACPI_TYPE_REGION)
     {
         DEBUG_PRINT (ACPI_ERROR,
-            ("AmlPrepBankFieldValue: Needed Region, found %d %s\n",
+            ("AmlPrepBankFieldValue: Needed Region, found type %X %s\n",
             Type, AcpiCmGetTypeName (Type)));
         return_ACPI_STATUS (AE_AML_OPERAND_TYPE);
     }

