commit eb276c05bf6b0a383c772d61e31cf09a8dbd36c7
Author: Timo Sirainen <tss@iki.fi>
Date:   Tue Dec 28 16:47:19 2004 +0200

    Added assert.
    
    --HG--
    branch : HEAD

diff --git a/src/lib-storage/index/mbox/mbox-sync.c b/src/lib-storage/index/mbox/mbox-sync.c
index 309271994..07d1a1dad 100644
--- a/src/lib-storage/index/mbox/mbox-sync.c
+++ b/src/lib-storage/index/mbox/mbox-sync.c
@@ -994,6 +994,7 @@ static int mbox_sync_handle_eof_updates(struct mbox_sync_context *sync_ctx,
 
 		i_assert(file_size >= sync_ctx->expunged_space + trailer_size);
 		offset = file_size - sync_ctx->expunged_space - trailer_size;
+		i_assert(offset == 0 || offset > 31);
 
 		if (mbox_move(sync_ctx, offset,
 			      offset + sync_ctx->expunged_space,

