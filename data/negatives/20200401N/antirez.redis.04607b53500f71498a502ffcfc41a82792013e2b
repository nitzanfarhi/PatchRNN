commit 04607b53500f71498a502ffcfc41a82792013e2b
Author: Jan-Erik Rediger <janerik@fnordig.de>
Date:   Wed Jan 7 22:31:45 2015 +0100

    Check that the whole first argument is a number
    
    Fixes #2258

diff --git a/src/redis-cli.c b/src/redis-cli.c
index 2a703ad7..e18cc7c9 100644
--- a/src/redis-cli.c
+++ b/src/redis-cli.c
@@ -977,9 +977,10 @@ static void repl(void) {
                 } else {
                     long long start_time = mstime(), elapsed;
                     int repeat, skipargs = 0;
+                    char *endptr;
 
-                    repeat = atoi(argv[0]);
-                    if (argc > 1 && repeat) {
+                    repeat = strtol(argv[0], &endptr, 10);
+                    if (argc > 1 && *endptr == '\0' && repeat) {
                         skipargs = 1;
                     } else {
                         repeat = 1;

