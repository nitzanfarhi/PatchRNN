commit 71849e0d91c752e05e8d08dd149fb0bb9868c2f1
Author: Con Kolivas <kernel@kolivas.org>
Date:   Sat Feb 15 09:04:47 2014 +1100

    Check for hfa invalid hash clockrate after other error messages.

diff --git a/driver-hashfast.c b/driver-hashfast.c
index 93138735..7d3298e2 100644
--- a/driver-hashfast.c
+++ b/driver-hashfast.c
@@ -423,12 +423,6 @@ tryagain:
 	       db->sequence_modulus);
 	info->num_sequence = db->sequence_modulus;
 
-	if (!db->hash_clockrate) {
-		applog(LOG_INFO, "%s %d: OP_USB_INIT failed! Clockrate reported as zero",
-		       hashfast->drv->name, hashfast->device_id);
-		return false;
-	}
-
 	// Now a copy of the config data used
 	if (!hfa_get_data(hashfast, (char *)&info->config_data, U32SIZE(info->config_data))) {
 		applog(LOG_WARNING, "%s %d: OP_USB_INIT failed! Failure to get config_data",
@@ -454,6 +448,12 @@ tryagain:
 		return false;
 	}
 
+	if (!db->hash_clockrate) {
+		applog(LOG_INFO, "%s %d: OP_USB_INIT failed! Clockrate reported as zero",
+		       hashfast->drv->name, hashfast->device_id);
+		return false;
+	}
+
 	return true;
 }
 

