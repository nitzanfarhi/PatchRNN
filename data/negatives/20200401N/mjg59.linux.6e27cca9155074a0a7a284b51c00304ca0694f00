commit 6e27cca9155074a0a7a284b51c00304ca0694f00
Author: Grant Likely <grant.likely@secretlab.ca>
Date:   Wed Mar 18 22:21:23 2009 -0600

    powerpc/cpm2: fix building fs_enet driver as a module.
    
    Building the fs_enet driver as a modules fails because it cannot
    access the global cpm2_immr symbol.
    
    Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

diff --git a/arch/powerpc/sysdev/cpm2.c b/arch/powerpc/sysdev/cpm2.c
index 474d176a6ec3..fd969f0e3121 100644
--- a/arch/powerpc/sysdev/cpm2.c
+++ b/arch/powerpc/sysdev/cpm2.c
@@ -52,6 +52,7 @@ cpm_cpm2_t __iomem *cpmp; /* Pointer to comm processor space */
  * the communication processor devices.
  */
 cpm2_map_t __iomem *cpm2_immr;
+EXPORT_SYMBOL(cpm2_immr);
 
 #define CPM_MAP_SIZE	(0x40000)	/* 256k - the PQ3 reserve this amount
 					   of space for CPM as it is larger

