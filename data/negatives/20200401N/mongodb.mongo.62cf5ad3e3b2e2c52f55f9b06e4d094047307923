commit 62cf5ad3e3b2e2c52f55f9b06e4d094047307923
Author: Ben Becker <ben.becker@10gen.com>
Date:   Tue Dec 4 11:59:39 2012 -0800

    SERVER-7780: fix backwards compatability for max docs in capped collection

diff --git a/src/mongo/db/namespace_details.cpp b/src/mongo/db/namespace_details.cpp
index f6bd835fff..15a9bf6453 100644
--- a/src/mongo/db/namespace_details.cpp
+++ b/src/mongo/db/namespace_details.cpp
@@ -54,7 +54,7 @@ namespace mongo {
         lastExtentSize = 0;
         nIndexes = 0;
         _isCapped = capped;
-        _maxDocsInCapped = -1; // no limit
+        _maxDocsInCapped = 0x7fffffff; // no limit (value is for pre-v2.3.2 compatability)
         _paddingFactor = 1.0;
         _systemFlags = 0;
         _userFlags = 0;
@@ -620,7 +620,7 @@ namespace mongo {
     bool NamespaceDetails::validMaxCappedDocs( long long* max ) {
         if ( *max <= 0 ||
              *max == numeric_limits<long long>::max() ) {
-            *max = -1;
+            *max = 0x7fffffff;
             return true;
         }
 
@@ -633,7 +633,7 @@ namespace mongo {
 
     long long NamespaceDetails::maxCappedDocs() const {
         verify( isCapped() );
-        if ( _maxDocsInCapped == -1 )
+        if ( _maxDocsInCapped == 0x7fffffff )
             return numeric_limits<long long>::max();
         return _maxDocsInCapped;
     }

