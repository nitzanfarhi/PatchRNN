commit 8beb5c5f12c8484c59edf9b691f2c4bb4d31f3a0
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Fri Dec 21 05:58:29 2007 -0800

    [TCP]: Avoid a divide in tcp_mtu_probing()
    
    tcp_mtu_to_mss() being signed, compiler might emit an integer divide
    to compute tcp_mtu_to_mss()/2 .
    
    Using a right shift is OK here and less expensive.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/ipv4/tcp_timer.c b/net/ipv4/tcp_timer.c
index ea111e91f0e5..ea85bc00c61f 100644
--- a/net/ipv4/tcp_timer.c
+++ b/net/ipv4/tcp_timer.c
@@ -125,7 +125,7 @@ static void tcp_mtu_probing(struct inet_connection_sock *icsk, struct sock *sk)
 			struct tcp_sock *tp = tcp_sk(sk);
 			int mss;
 
-			mss = tcp_mtu_to_mss(sk, icsk->icsk_mtup.search_low)/2;
+			mss = tcp_mtu_to_mss(sk, icsk->icsk_mtup.search_low) >> 1;
 			mss = min(sysctl_tcp_base_mss, mss);
 			mss = max(mss, 68 - tp->tcp_header_len);
 			icsk->icsk_mtup.search_low = tcp_mss_to_mtu(sk, mss);

