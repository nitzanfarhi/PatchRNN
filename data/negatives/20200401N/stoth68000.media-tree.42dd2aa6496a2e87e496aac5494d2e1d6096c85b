commit 42dd2aa6496a2e87e496aac5494d2e1d6096c85b
Author: Thadeu Lima de Souza Cascardo <cascardo@holoscopio.com>
Date:   Thu Jun 25 14:41:24 2009 +0100

    acm: Return ENODEV instead of EINVAL when trying to open ACM device.
    
    This is required, otherwise a user will get a EINVAL while opening a
    non-existing device, instead of ENODEV.
    
    This is what I get with this patch applied now instead of an "Invalid
    argument".
    
      cascardo@vespa:~$ cat /dev/ttyACM0
      cat: /dev/ttyACM0: No such device
      cascardo@vespa:~$
    
    Signed-off-by: Thadeu Lima de Souza Cascardo <cascardo@holoscopio.com>
    Signed-off-by: Alan Cox <alan@linux.intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/usb/class/cdc-acm.c b/drivers/usb/class/cdc-acm.c
index 38bfdb0f6660..02eb60bb6795 100644
--- a/drivers/usb/class/cdc-acm.c
+++ b/drivers/usb/class/cdc-acm.c
@@ -550,7 +550,7 @@ static void acm_waker(struct work_struct *waker)
 static int acm_tty_open(struct tty_struct *tty, struct file *filp)
 {
 	struct acm *acm;
-	int rv = -EINVAL;
+	int rv = -ENODEV;
 	int i;
 	dbg("Entering acm_tty_open.");
 

