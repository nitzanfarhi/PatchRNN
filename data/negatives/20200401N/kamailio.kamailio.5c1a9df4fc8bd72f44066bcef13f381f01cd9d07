commit 5c1a9df4fc8bd72f44066bcef13f381f01cd9d07
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 20 20:40:39 2015 +0100

    xhttp: use proper function to set the ip addres of the fake via
    
    - for ipv6 it has to be enclosed in between [ ]
    - reported by Sergey Okhapkin

diff --git a/modules/xhttp/xhttp_mod.c b/modules/xhttp/xhttp_mod.c
index eff079a2d..9085af3fd 100644
--- a/modules/xhttp/xhttp_mod.c
+++ b/modules/xhttp/xhttp_mod.c
@@ -199,7 +199,7 @@ static char* xhttp_to_sip(sip_msg_t* msg, int* new_msg_len)
 	struct hostport hp;
 	struct dest_info dst;
 	
-	ip.s = ip_addr2a(&msg->rcv.src_ip);
+	ip.s = ip_addr2strz(&msg->rcv.src_ip);
 	ip.len = strlen(ip.s);
 	port.s = int2str(msg->rcv.src_port, &port.len);
 	hp.host = &ip;

