commit f2105dd3df19983aa11faa4d3505d87337dbb7c2
Author: Tomasz Sterna <tomek@xiaoka.com>
Date:   Fri Apr 29 09:33:08 2016 +0200

    mod_verify: close pipe if failed writing to

diff --git a/sm/mod_verify.c b/sm/mod_verify.c
index 08475e7..b4a8a57 100644
--- a/sm/mod_verify.c
+++ b/sm/mod_verify.c
@@ -107,6 +107,7 @@ static void send_email(verify_t *v, user_t user, pkt_t res, char *message)
                 "code: %s\n"
                 ".\n", v->email, v->code) < 0) {
         log_write(user->sm->log, LOG_ERR, "Error writing sendmail to %s. %d:%s", v->email, errno, strerror(errno));
+        pclose(pipe);
         goto error;
     }
     if (pclose(pipe) == -1) {

