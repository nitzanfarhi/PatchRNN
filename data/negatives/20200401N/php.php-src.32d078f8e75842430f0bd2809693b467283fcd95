commit 32d078f8e75842430f0bd2809693b467283fcd95
Author: Antony Dovgal <tony2001@php.net>
Date:   Mon Dec 25 22:40:23 2006 +0000

    MFH

diff --git a/ext/zip/php_zip.c b/ext/zip/php_zip.c
index 7da6c8f171..50f360fe48 100644
--- a/ext/zip/php_zip.c
+++ b/ext/zip/php_zip.c
@@ -1086,8 +1086,8 @@ static ZIPARCHIVE_METHOD(addFromString)
 		ze_obj->buffers_cnt++;
 		pos = 0;
 	}
-	ze_obj->buffers[pos] = (char *)emalloc(buffer_len);
-	memcpy(ze_obj->buffers[pos], buffer, buffer_len);
+	ze_obj->buffers[pos] = (char *)emalloc(buffer_len + 1);
+	memcpy(ze_obj->buffers[pos], buffer, buffer_len + 1);
 
 	zs = zip_source_buffer(intern, ze_obj->buffers[pos], buffer_len, 0);
 

