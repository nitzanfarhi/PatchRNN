commit d96fbd738d9108332d376ee80ba38688229687be
Author: elliot@mysql.com <>
Date:   Wed Apr 26 11:55:26 2006 -0400

    The fix for bug#17248 accidentally removed the sync_binlog variable.
    This patch restores sync_binlog.

diff --git a/sql/set_var.cc b/sql/set_var.cc
index a0b60251354..71ecf97a6fa 100644
--- a/sql/set_var.cc
+++ b/sql/set_var.cc
@@ -376,6 +376,9 @@ sys_var_thd_table_type  sys_table_type("table_type",
 				       &SV::table_type);
 sys_var_thd_storage_engine sys_storage_engine("storage_engine",
 				       &SV::table_type);
+#ifdef HAVE_REPLICATION
+sys_var_sync_binlog_period sys_sync_binlog_period("sync_binlog", &sync_binlog_period);
+#endif
 sys_var_bool_ptr	sys_sync_frm("sync_frm", &opt_sync_frm);
 sys_var_long_ptr	sys_table_cache_size("table_cache",
 					     &table_cache_size);
@@ -697,6 +700,9 @@ sys_var *sys_variables[]=
   &sys_sql_warnings,
   &sys_sql_notes,
   &sys_storage_engine,
+#ifdef HAVE_REPLICATION
+  &sys_sync_binlog_period,
+#endif
   &sys_sync_frm,
   &sys_table_cache_size,
   &sys_table_lock_wait_timeout,
@@ -992,6 +998,9 @@ struct show_var_st init_vars[]= {
   {"sql_notes",               (char*) &sys_sql_notes,               SHOW_BOOL},
   {"sql_warnings",            (char*) &sys_sql_warnings,            SHOW_BOOL},
   {sys_storage_engine.name,   (char*) &sys_storage_engine,          SHOW_SYS},
+#ifdef HAVE_REPLICATION
+  {sys_sync_binlog_period.name,(char*) &sys_sync_binlog_period,     SHOW_SYS},
+#endif
   {sys_sync_frm.name,         (char*) &sys_sync_frm,               SHOW_SYS},
 #ifdef HAVE_TZNAME
   {"system_time_zone",        system_time_zone,                     SHOW_CHAR},

