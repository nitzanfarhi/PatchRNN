commit 8fdd8ebfe60b743938a02c6845c842203e456658
Author: Miguel de Icaza <miguel@gnome.org>
Date:   Mon Sep 19 22:53:17 2011 -0400

    Fix my profiler loader.
    
    This is what happens when you test on a pre-configured environment that
    already worked fine.    This depended on a function that was never called
    so we ended up probing for paths on NULL (repeating the same process twice)
    instead of loading the profiler from the installation directory.

diff --git a/mono/metadata/profiler.c b/mono/metadata/profiler.c
index b67945aa2ba..0db41605c71 100644
--- a/mono/metadata/profiler.c
+++ b/mono/metadata/profiler.c
@@ -1119,7 +1119,7 @@ mono_profiler_load (const char *desc)
 		}
 		libname = g_strdup_printf ("mono-profiler-%s", mname);
 		if (!load_profiler_from_directory (NULL, libname, desc))
-			if (!load_profiler_from_directory (mono_assembly_getrootdir (), libname, desc))
+			if (!load_profiler_from_directory (MONO_ASSEMBLIES, libname, desc))
 				g_warning ("Error loading profiler module '%s'", libname);
 			
 		g_free (libname);

