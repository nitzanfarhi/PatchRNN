commit 57cf9d4512c86a4a1b58857ca22b18bffbfd6812
Author: Axel Lin <axel.lin@gmail.com>
Date:   Sat Aug 20 11:03:44 2011 +0800

    ASoC: soc-core: use GFP_KERNEL flag for kmalloc in snd_soc_cnew
    
    GFP_ATOMIC is not needed here, use GFP_KERNEL instead.
    
    Signed-off-by: Axel Lin <axel.lin@gmail.com>
    Acked-by: Liam Girdwood <lrg@ti.com>
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/sound/soc/soc-core.c b/sound/soc/soc-core.c
index 83ad8ca27490..b085d8e87574 100644
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@ -1913,7 +1913,7 @@ struct snd_kcontrol *snd_soc_cnew(const struct snd_kcontrol_new *_template,
 
 	if (prefix) {
 		name_len = strlen(long_name) + strlen(prefix) + 2;
-		name = kmalloc(name_len, GFP_ATOMIC);
+		name = kmalloc(name_len, GFP_KERNEL);
 		if (!name)
 			return NULL;
 

