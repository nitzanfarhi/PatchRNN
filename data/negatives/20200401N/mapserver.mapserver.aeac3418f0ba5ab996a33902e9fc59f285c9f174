commit aeac3418f0ba5ab996a33902e9fc59f285c9f174
Author: Even Rouault <even.rouault@mines-paris.org>
Date:   Wed Dec 22 19:07:34 2010 +0000

    Hopefully unbreak Windows compilation due to variable declares in the middle of a block in a C file
    
    git-svn-id: http://svn.osgeo.org/mapserver/trunk@10813 7532c77e-422f-0410-93f4-f0b67bdd69e2

diff --git a/mapdraw.c b/mapdraw.c
index 0042903d..d8148eb9 100644
--- a/mapdraw.c
+++ b/mapdraw.c
@@ -1407,12 +1407,13 @@ int msDrawShape(mapObj *map, layerObj *layer, shapeObj *shape, imageObj *image,
    * do not enter the image */
   if(layer->class[c]->numstyles > 0 && layer->class[c]->styles[0] != NULL) {
       double maxsize,maxunscaledsize;
+      symbolObj *symbol;
       styleObj *style = layer->class[c]->styles[0];
       if (style->symbol >= map->symbolset.numsymbols) {
           msSetError(MS_SYMERR, "Invalid symbol index: %d", "msDrawShape()", style->symbol);
           return MS_FAILURE;
       }
-      symbolObj *symbol = map->symbolset.symbol[style->symbol];
+      symbol = map->symbolset.symbol[style->symbol];
       if(symbol->type == MS_SYMBOL_PIXMAP) {
     	  if(MS_SUCCESS != msPreloadImageSymbol(MS_MAP_RENDERER(map),symbol))
     		  return MS_FAILURE;
diff --git a/mapwcs20.c b/mapwcs20.c
index 9a0de7db..1e64e5d2 100644
--- a/mapwcs20.c
+++ b/mapwcs20.c
@@ -2432,8 +2432,8 @@ static int msWCSGetCoverageMetadata20(layerObj *layer, wcs20coverageMetadataObj
 
 static int msWCSClearCoverageMetadata20(wcs20coverageMetadataObj *cm)
 {
-    msFree(cm->native_format);
     int i = 0, j = 0;
+    msFree(cm->native_format);
     for(i = 0; i < cm->numnilvalues; ++i)
     {
         msFree(cm->nilvalues[i]);

