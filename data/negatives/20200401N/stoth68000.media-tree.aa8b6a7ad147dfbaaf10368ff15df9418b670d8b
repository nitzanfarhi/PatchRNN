commit aa8b6a7ad147dfbaaf10368ff15df9418b670d8b
Author: Ilpo Järvinen <ilpo.jarvinen@helsinki.fi>
Date:   Wed Feb 21 23:06:03 2007 -0800

    [TCP] FRTO: Response should reset also snd_cwnd_cnt
    
    Since purpose is to reduce CWND, we prevent immediate growth. This
    is not a major issue nor is "the correct way" specified anywhere.
    
    Signed-off-by: Ilpo Järvinen <ilpo.jarvinen@helsinki.fi>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/ipv4/tcp_input.c b/net/ipv4/tcp_input.c
index cc935c8a6aae..924b2e6d7d15 100644
--- a/net/ipv4/tcp_input.c
+++ b/net/ipv4/tcp_input.c
@@ -2490,6 +2490,7 @@ static int tcp_ack_update_window(struct sock *sk, struct tcp_sock *tp,
 static void tcp_conservative_spur_to_response(struct tcp_sock *tp)
 {
 	tp->snd_cwnd = min(tp->snd_cwnd, tp->snd_ssthresh);
+	tp->snd_cwnd_cnt = 0;
 	tcp_moderate_cwnd(tp);
 }
 

