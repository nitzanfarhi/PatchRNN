commit c761d96b079e99d106fa4064e730ef7d0f312f9d
Author: Jens Axboe <axboe@fb.com>
Date:   Fri Jan 2 15:05:12 2015 -0700

    blk-mq: export blk_mq_freeze_queue()
    
    Commit b4c6a028774b exported the start and unfreeze, but we need
    the regular blk_mq_freeze_queue() for the loop conversion.
    
    Signed-off-by: Jens Axboe <axboe@fb.com>

diff --git a/block/blk-mq.c b/block/blk-mq.c
index 1a41d7aefbd5..a7d4a988516f 100644
--- a/block/blk-mq.c
+++ b/block/blk-mq.c
@@ -136,6 +136,7 @@ void blk_mq_freeze_queue(struct request_queue *q)
 	blk_mq_freeze_queue_start(q);
 	blk_mq_freeze_queue_wait(q);
 }
+EXPORT_SYMBOL_GPL(blk_mq_freeze_queue);
 
 void blk_mq_unfreeze_queue(struct request_queue *q)
 {
diff --git a/include/linux/blk-mq.h b/include/linux/blk-mq.h
index 3b43f509432c..5b6500c77ed2 100644
--- a/include/linux/blk-mq.h
+++ b/include/linux/blk-mq.h
@@ -212,6 +212,7 @@ void blk_mq_start_stopped_hw_queues(struct request_queue *q, bool async);
 void blk_mq_delay_queue(struct blk_mq_hw_ctx *hctx, unsigned long msecs);
 void blk_mq_tag_busy_iter(struct blk_mq_hw_ctx *hctx, busy_iter_fn *fn,
 		void *priv);
+void blk_mq_freeze_queue(struct request_queue *q);
 void blk_mq_unfreeze_queue(struct request_queue *q);
 void blk_mq_freeze_queue_start(struct request_queue *q);
 

