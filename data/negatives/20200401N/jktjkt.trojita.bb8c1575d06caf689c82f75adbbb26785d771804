commit bb8c1575d06caf689c82f75adbbb26785d771804
Author: Jan KundrÃ¡t <jkt@gentoo.org>
Date:   Mon Nov 8 15:15:40 2010 +0100

    Make sure to deleteLater() active tasks when killing the parser

diff --git a/src/Imap/Model/Model.cpp b/src/Imap/Model/Model.cpp
index 2ecf6cbc..72a056de 100644
--- a/src/Imap/Model/Model.cpp
+++ b/src/Imap/Model/Model.cpp
@@ -1101,6 +1101,10 @@ void Model::parsersMightBeIdling()
 
 void Model::killParser(Parser *parser)
 {
+    Q_FOREACH( ImapTask* task, _parsers[ parser ].activeTasks ) {
+        task->deleteLater();
+    }
+
     for ( QMap<CommandHandle, Task>::const_iterator it = _parsers[ parser ].commandMap.begin();
             it != _parsers[ parser ].commandMap.end(); ++it ) {
         // FIXME: fail the command, perform cleanup,...

