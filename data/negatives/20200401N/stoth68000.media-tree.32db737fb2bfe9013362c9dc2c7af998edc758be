commit 32db737fb2bfe9013362c9dc2c7af998edc758be
Author: Przemo Firszt <przemo@firszt.eu>
Date:   Sun Feb 19 20:20:29 2012 +0000

    HID: wacom: fix proximity tool release
    
    Don't zero the current tool before reporting its release to the input
    subsystem.
    
    Signed-off-by: Aristeu Rozanski <aris@redhat.com>
    Tested-by: Przemo Firszt <przemo@firszt.eu>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

diff --git a/drivers/hid/hid-wacom.c b/drivers/hid/hid-wacom.c
index acab74cde727..8b4922924142 100644
--- a/drivers/hid/hid-wacom.c
+++ b/drivers/hid/hid-wacom.c
@@ -322,10 +322,10 @@ static void wacom_i4_parse_pen_report(struct wacom_data *wdata,
 
 	switch (data[1]) {
 	case 0x80: /* Out of proximity report */
-		wdata->tool = 0;
 		input_report_key(input, BTN_TOUCH, 0);
 		input_report_abs(input, ABS_PRESSURE, 0);
 		input_report_key(input, wdata->tool, 0);
+		wdata->tool = 0;
 		input_sync(input);
 		break;
 	case 0xC2: /* Tool report */

