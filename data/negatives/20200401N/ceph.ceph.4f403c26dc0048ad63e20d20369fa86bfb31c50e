commit 4f403c26dc0048ad63e20d20369fa86bfb31c50e
Author: Sage Weil <sage@inktank.com>
Date:   Tue Oct 15 14:35:20 2013 -0700

    common: don't do special things for unprivileged daemons
    
    We generally do want an admin socket and log, and people usually run these
    as root.  This is more confusing than useful.
    
    Fixes: #6334
    Signed-off-by: Sage Weil <sage@inktank.com>

diff --git a/src/common/common_init.cc b/src/common/common_init.cc
index ef8cf01007..18fdf72678 100644
--- a/src/common/common_init.cc
+++ b/src/common/common_init.cc
@@ -75,12 +75,8 @@ CephContext *common_preinit(const CephInitParameters &iparams,
 
   if ((flags & CINIT_FLAG_UNPRIVILEGED_DAEMON_DEFAULTS) ||
       code_env != CODE_ENVIRONMENT_DAEMON) {
-    // no default log, pid_file, admin_socket
-    conf->set_val_or_die("pid_file", "");
-    conf->set_val_or_die("admin_socket", "");
-    conf->set_val_or_die("log_file", "");
-    // use less memory for logs
-    conf->set_val_or_die("log_max_recent", "500");
+    // do nothing special!  we used to do no default log, pid_file,
+    // admin_socket, but changed our minds.
   }
 
   return cct;

