commit ee294af7cfd915e4341dece8df4b5ae64e85cee4
Author: Brett Simmers <bsimmers@fb.com>
Date:   Fri Sep 7 10:25:19 2018 -0700

    Fix MInstrEffects for SetRange
    
    Summary:
    This was an oversight in D9371858. I left some comments there with
    possible consequences, and all of them are either unlikely or harmless in
    practice.
    
    Reviewed By: ricklavoie, alexeyt
    
    Differential Revision: D9658194
    
    fbshipit-source-id: f7416821de83d36481a07e22ddd0a869ba877dd8

diff --git a/hphp/runtime/vm/jit/minstr-effects.cpp b/hphp/runtime/vm/jit/minstr-effects.cpp
index 724c9a8777..534cd78643 100644
--- a/hphp/runtime/vm/jit/minstr-effects.cpp
+++ b/hphp/runtime/vm/jit/minstr-effects.cpp
@@ -26,9 +26,9 @@ namespace {
 template<typename T> T bad_value() { not_reached(); }
 
 Opcode canonicalOp(Opcode op) {
-  if (op == ElemUX || op == UnsetElem) return UnsetElem;
-  if (op == SetWithRefElem)            return SetWithRefElem;
-  if (op == SetRangeRev)               return SetRange;
+  if (op == ElemUX || op == UnsetElem)     return UnsetElem;
+  if (op == SetWithRefElem)                return SetWithRefElem;
+  if (op == SetRange || op == SetRangeRev) return SetRange;
 
   return opcodeHasFlags(op, MInstrProp) ? SetProp
        : opcodeHasFlags(op, MInstrElem) ? SetElem

