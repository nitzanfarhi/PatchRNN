commit c61691110a521bc070ee792fc87919cb75bd97c5
Author: Patrick Walton <pcwalton@mimiga.net>
Date:   Tue Sep 20 16:47:31 2011 -0700

    rt: Make rust_shape.h able to be included in more contexts

diff --git a/src/rt/rust_shape.h b/src/rt/rust_shape.h
index 96dac8054e..9a8e22e8a4 100644
--- a/src/rt/rust_shape.h
+++ b/src/rt/rust_shape.h
@@ -4,6 +4,11 @@
 #ifndef RUST_SHAPE_H
 #define RUST_SHAPE_H
 
+// Tell ISAAC to let go of max() and min() defines.
+#undef max
+#undef min
+
+#include <iostream>
 #include "rust_internal.h"
 
 // ISAAC pollutes our namespace.
@@ -128,7 +133,7 @@ struct size_align {
 
     inline void add(size_t extra_size, size_t extra_align) {
         size += extra_size;
-        alignment = max(alignment, extra_align);
+        alignment = std::max(alignment, extra_align);
     }
 
     static inline size_align make(size_t in_size) {

