commit 227ca46fb70506f236f86e40d170f5f030f351f7
Author: Nuno Lopes <nlopess@php.net>
Date:   Wed Apr 19 21:47:20 2006 +0000

    fix build with newer libtidy versions on windows
    # first commit on php-src. whatch out :)

diff --git a/ext/tidy/tidy.c b/ext/tidy/tidy.c
index 43327bdaba..39c25b7059 100644
--- a/ext/tidy/tidy.c
+++ b/ext/tidy/tidy.c
@@ -37,6 +37,11 @@
 #include "tidy.h"
 #include "buffio.h"
 
+/* compatibility with older versions of libtidy */
+#ifndef TIDY_CALL
+#define TIDY_CALL
+#endif
+
 #define PHP_TIDY_MODULE_VERSION	"2.0"
 
 /* {{{ ext/tidy macros
@@ -333,22 +338,22 @@ zend_module_entry tidy_module_entry = {
 ZEND_GET_MODULE(tidy)
 #endif
 
-void *php_tidy_malloc(size_t len)
+void* TIDY_CALL php_tidy_malloc(size_t len)
 {
 	return emalloc(len);
 }
 
-void *php_tidy_realloc(void *buf, size_t len)
+void* TIDY_CALL php_tidy_realloc(void *buf, size_t len)
 {
 	return erealloc(buf, len);
 }
 
-void php_tidy_free(void *buf)
+void TIDY_CALL php_tidy_free(void *buf)
 {
 	efree(buf);
 }
 
-void php_tidy_panic(ctmbstr msg)
+void TIDY_CALL php_tidy_panic(ctmbstr msg)
 {
 	TSRMLS_FETCH();
 	php_error_docref(NULL TSRMLS_CC, E_ERROR, "Could not allocate memory for tidy! (Reason: %s)", (char *)msg);

