commit 1c4828f916ffd5b7cc4d57d832cce615475b36da
Author: Felipe Balbi <balbi@ti.com>
Date:   Mon Jul 13 15:38:04 2015 -0500

    i2c: omap: on ->remove() call pm_runtime_put_sync()
    
    we're about to remove the module, so we can't
    really schedule a PM transition in the future,
    we must wait for it to finish.
    
    Signed-off-by: Felipe Balbi <balbi@ti.com>
    Signed-off-by: Wolfram Sang <wsa@the-dreams.de>

diff --git a/drivers/i2c/busses/i2c-omap.c b/drivers/i2c/busses/i2c-omap.c
index e359ad39753b..afc3bfca0b6c 100644
--- a/drivers/i2c/busses/i2c-omap.c
+++ b/drivers/i2c/busses/i2c-omap.c
@@ -1468,7 +1468,7 @@ static int omap_i2c_remove(struct platform_device *pdev)
 		return ret;
 
 	omap_i2c_write_reg(omap, OMAP_I2C_CON_REG, 0);
-	pm_runtime_put(&pdev->dev);
+	pm_runtime_put_sync(&pdev->dev);
 	pm_runtime_disable(&pdev->dev);
 	return 0;
 }

