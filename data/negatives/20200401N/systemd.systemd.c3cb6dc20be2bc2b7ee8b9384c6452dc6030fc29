commit c3cb6dc20be2bc2b7ee8b9384c6452dc6030fc29
Author: Tom Gundersen <teg@jklm.no>
Date:   Thu Dec 3 21:26:19 2015 +0100

    resolved: cache - improve logging
    
    Some DNS servers will hand out negative answers without SOA records,
    these can not be cached, so log about that fact.

diff --git a/src/resolve/resolved-dns-cache.c b/src/resolve/resolved-dns-cache.c
index 9ffbf1d1a..a2cbdd825 100644
--- a/src/resolve/resolved-dns-cache.c
+++ b/src/resolve/resolved-dns-cache.c
@@ -443,8 +443,17 @@ int dns_cache_put(
                 dns_cache_remove(c, key);
         }
 
-        if (!answer)
+        if (!answer) {
+                _cleanup_free_ char *key_str = NULL;
+
+                r = dns_resource_key_to_string(key, &key_str);
+                if (r < 0)
+                        return r;
+
+                log_debug("Not caching negative entry without a SOA record: %s", key_str);
+
                 return 0;
+        }
 
         for (i = 0; i < answer->n_rrs; i++)
                 dns_cache_remove(c, answer->items[i].rr->key);

