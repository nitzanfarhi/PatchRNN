commit 3a5f4f6bd2470e3f510cc807479fceec3f034d1a
Author: w00t <w00t@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Wed Oct 22 13:27:37 2008 +0000

    Fix MacGyver's rehash woes..
    
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@10687 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/configreader.cpp b/src/configreader.cpp
index 1c82b7387..617d5fdd5 100644
--- a/src/configreader.cpp
+++ b/src/configreader.cpp
@@ -585,6 +585,11 @@ bool DoneConnect(ServerConfig *conf, const char*)
 	{
 		User *u = *n;
 
+		/*
+		 * Make their existing class go away so that SetClass doesn't touch a wild ptr, important!
+		 */
+		u->MyClass = NULL;
+
 		u->SetClass();
 
 		/*

