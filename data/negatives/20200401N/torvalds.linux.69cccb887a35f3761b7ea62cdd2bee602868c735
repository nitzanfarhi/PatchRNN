commit 69cccb887a35f3761b7ea62cdd2bee602868c735
Author: Pavel Emelyanov <xemul@openvz.org>
Date:   Thu Oct 18 23:40:44 2007 -0700

    Use task_pid_nr() instead of pid_nr(task_pid())
    
    There are two places that do so - the cgroups subsystem and the autofs
    code.
    
    Signed-off-by: Pavel Emelyanov <xemul@openvz.org>
    Cc: Ian Kent <raven@themaw.net>
    Cc: Paul Menage <menage@google.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/fs/autofs/root.c b/fs/autofs/root.c
index 592f64037ae2..5efff3c0d886 100644
--- a/fs/autofs/root.c
+++ b/fs/autofs/root.c
@@ -214,7 +214,7 @@ static struct dentry *autofs_root_lookup(struct inode *dir, struct dentry *dentr
 
 	oz_mode = autofs_oz_mode(sbi);
 	DPRINTK(("autofs_lookup: pid = %u, pgrp = %u, catatonic = %d, "
-				"oz_mode = %d\n", pid_nr(task_pid(current)),
+				"oz_mode = %d\n", task_pid_nr(current),
 				task_pgrp_nr(current), sbi->catatonic,
 				oz_mode));
 
diff --git a/kernel/cgroup.c b/kernel/cgroup.c
index ca38db223f84..c2f12a49dff2 100644
--- a/kernel/cgroup.c
+++ b/kernel/cgroup.c
@@ -1763,7 +1763,7 @@ static int pid_array_load(pid_t *pidarray, int npids, struct cgroup *cont)
 	while ((tsk = cgroup_iter_next(cont, &it))) {
 		if (unlikely(n == npids))
 			break;
-		pidarray[n++] = pid_nr(task_pid(tsk));
+		pidarray[n++] = task_pid_nr(tsk);
 	}
 	cgroup_iter_end(cont, &it);
 	return n;

