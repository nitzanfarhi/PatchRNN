commit bfc1ccb390429818b129cc83897bbdf1edd2439c
Author: Sage Weil <sage@redhat.com>
Date:   Thu Jun 1 15:52:55 2017 -0400

    mon/MonCap: simplify client.bootstrap-osd
    
    Now it can only do 2 things:
    
     - mon getmap
     - osd new
    
    \o/
    
    Signed-off-by: Sage Weil <sage@redhat.com>

diff --git a/src/mon/MonCap.cc b/src/mon/MonCap.cc
index af98eb2d86..0bfc83d170 100644
--- a/src/mon/MonCap.cc
+++ b/src/mon/MonCap.cc
@@ -196,19 +196,10 @@ void MonCapGrant::expand_profile_mon(const EntityName& name) const
   }
   if (profile == "bootstrap-osd") {
     string prefix = "dm-crypt/osd";
-    profile_grants.push_back(MonCapGrant("config-key put", "key", StringConstraint("", prefix)));
     profile_grants.push_back(MonCapGrant("mon", MON_CAP_R));  // read monmap
     profile_grants.push_back(MonCapGrant("osd", MON_CAP_R));  // read osdmap
     profile_grants.push_back(MonCapGrant("mon getmap"));
-    profile_grants.push_back(MonCapGrant("osd create"));
-    profile_grants.push_back(MonCapGrant("auth get-or-create"));
-    profile_grants.back().command_args["entity"] = StringConstraint("", "client.");
-    prefix = "allow command \"config-key get\" with key=\"dm-crypt/osd/";
-    profile_grants.back().command_args["caps_mon"] = StringConstraint("", prefix);
-    profile_grants.push_back(MonCapGrant("auth add"));
-    profile_grants.back().command_args["entity"] = StringConstraint("", "osd.");
-    profile_grants.back().command_args["caps_mon"] = StringConstraint("allow profile osd", "");
-    profile_grants.back().command_args["caps_osd"] = StringConstraint("allow *", "");
+    profile_grants.push_back(MonCapGrant("osd new"));
   }
   if (profile == "bootstrap-mds") {
     profile_grants.push_back(MonCapGrant("mon", MON_CAP_R));  // read monmap

