commit cc1f4f102d3ce91c32374535ea7f741314b49a87
Author: Jan Kundr√°t <jkt@flaska.net>
Date:   Sat Aug 18 15:34:12 2012 +0200

    BINARY: only use the binary fetching on leaf MIME parts
    
    Thanks to Timo for his mail to the imap-protocol which let me know that there's
    a problem here.

diff --git a/src/Imap/Model/Model.cpp b/src/Imap/Model/Model.cpp
index 350d47d0..bdeed036 100644
--- a/src/Imap/Model/Model.cpp
+++ b/src/Imap/Model/Model.cpp
@@ -959,7 +959,10 @@ void Model::askForMsgPart(TreeItemPart *item, bool onlyFromCache)
         TreeItemPart::PartFetchingMode fetchingMode = TreeItemPart::FETCH_PART_IMAP;
         if (keepTask->parser && accessParser(keepTask->parser).capabilitiesFresh &&
                 accessParser(keepTask->parser).capabilities.contains(QLatin1String("BINARY"))) {
-            fetchingMode = TreeItemPart::FETCH_PART_BINARY;
+            if (!item->hasChildren(0)) {
+                // The BINARY only actually makes sense on leaf MIME nodes
+                fetchingMode = TreeItemPart::FETCH_PART_BINARY;
+            }
         }
         keepTask->requestPartDownload(item->message()->m_uid, item->partIdForFetch(fetchingMode), item->octets());
     }

