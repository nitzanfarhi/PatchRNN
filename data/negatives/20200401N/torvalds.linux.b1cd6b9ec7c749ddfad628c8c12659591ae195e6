commit b1cd6b9ec7c749ddfad628c8c12659591ae195e6
Author: Jassi <jassi.brar@samsung.com>
Date:   Fri Sep 18 15:22:27 2009 +0900

    ASoC: Return correct codec clock in s3c64xx-i2s
    
    Instead of always returnig pointer to the 'audio-bus' clock,
    check which clock is used to generate internal clocks and
    then return it's pointer.
    
    Signed-off-by: Jassi <jassi.brar@samsung.com>
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/sound/soc/s3c24xx/s3c64xx-i2s.c b/sound/soc/s3c24xx/s3c64xx-i2s.c
index aaf452096be2..43fb253a3429 100644
--- a/sound/soc/s3c24xx/s3c64xx-i2s.c
+++ b/sound/soc/s3c24xx/s3c64xx-i2s.c
@@ -124,8 +124,12 @@ static int s3c64xx_i2s_set_sysclk(struct snd_soc_dai *cpu_dai,
 struct clk *s3c64xx_i2s_get_clock(struct snd_soc_dai *dai)
 {
 	struct s3c_i2sv2_info *i2s = to_info(dai);
+	u32 iismod = readl(i2s->regs + S3C2412_IISMOD);
 
-	return i2s->iis_cclk;
+	if (iismod & S3C64XX_IISMOD_IMS_SYSMUX)
+		return i2s->iis_cclk;
+	else
+		return i2s->iis_pclk;
 }
 EXPORT_SYMBOL_GPL(s3c64xx_i2s_get_clock);
 

