commit af6d79a0a2235b5c3fb34197a875faa2aea712fc
Author: Andreas Ericsson <ae@op5.se>
Date:   Thu Mar 21 09:19:56 2013 +0000

    core: Publish and augment qh_strerror()
    
    It's generally useful to have other functions be able to grok the
    qh-returned error codes and print useful error messages from them,
    so let's make that possible.
    
    Signed-off-by: Andreas Ericsson <ae@op5.se>
    
    git-svn-id: https://nagios.svn.sourceforge.net/svnroot/nagios/nagioscore/trunk@2677 5f96b256-904b-4d8d-8c98-d829582c6739

diff --git a/base/query-handler.c b/base/query-handler.c
index d5f820d1..8ce5d7d3 100644
--- a/base/query-handler.c
+++ b/base/query-handler.c
@@ -39,8 +39,11 @@ static struct query_handler *qh_find_handler(const char *name)
 }
 
 /* subset of http error codes */
-static const char *qh_strerror(int code)
+const char *qh_strerror(int code)
 {
+	if (code < 0)
+		return "Low-level system error";
+
 	if (code == 100)
 		return "Continue";
 	if (code == 101)
diff --git a/include/nagios.h b/include/nagios.h
index ee360fbf..a9a51ff1 100644
--- a/include/nagios.h
+++ b/include/nagios.h
@@ -458,6 +458,7 @@ typedef int (*qh_handler)(int, char *, unsigned int);
 extern int qh_init(const char *path);
 extern void qh_deinit(const char *path);
 extern int qh_register_handler(const char *name, const char *description, unsigned int options, qh_handler handler);
+extern const char *qh_strerror(int code);
 
 /**** Configuration Functions ****/
 int read_main_config_file(char *);                     		/* reads the main config file (nagios.cfg) */

