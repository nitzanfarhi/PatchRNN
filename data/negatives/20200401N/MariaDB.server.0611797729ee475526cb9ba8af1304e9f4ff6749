commit 0611797729ee475526cb9ba8af1304e9f4ff6749
Author: Oleksandr Byelkin <sanja@mariadb.com>
Date:   Mon Nov 13 13:04:21 2017 +0100

    Fix of result code check by Monty's request.

diff --git a/sql/sql_union.cc b/sql/sql_union.cc
index 6f8d7a0b67d..e637110c798 100644
--- a/sql/sql_union.cc
+++ b/sql/sql_union.cc
@@ -302,7 +302,8 @@ int select_union_recursive::send_data(List<Item> &values)
 {
   int rc= select_unit::send_data(values);
 
-  if (write_err != HA_ERR_FOUND_DUPP_KEY && 
+  if (rc == 0 &&
+      write_err != HA_ERR_FOUND_DUPP_KEY &&
       write_err != HA_ERR_FOUND_DUPP_UNIQUE)
   { 
     int err;

