commit 87674722ea28bbcff6d14ba30a1e4c12537f4526
Author: jaybeepee <jason.penton@gmail.com>
Date:   Mon Sep 28 14:20:52 2015 +0200

    modules/ims_registrar_scscf: ignore port from RURI when looking up S-CSCF IMPU

diff --git a/modules/ims_registrar_scscf/lookup.c b/modules/ims_registrar_scscf/lookup.c
index 9beaba46e..671e2110a 100644
--- a/modules/ims_registrar_scscf/lookup.c
+++ b/modules/ims_registrar_scscf/lookup.c
@@ -76,8 +76,8 @@ int lookup(struct sip_msg* _m, udomain_t* _d) {
     if (_m->new_uri.s) aor = _m->new_uri;
     else aor = _m->first_line.u.request.uri;
 
-    for (i = 0; i < aor.len; i++)
-        if (aor.s[i] == ';' || aor.s[i] == '?') {
+    for (i = 4; i < aor.len; i++)
+        if (aor.s[i] == ':' || aor.s[i] == ';' || aor.s[i] == '?') {
             aor.len = i;
             break;
         }

