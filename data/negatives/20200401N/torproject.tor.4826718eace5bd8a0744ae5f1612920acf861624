commit 4826718eace5bd8a0744ae5f1612920acf861624
Author: Roger Dingledine <arma@torproject.org>
Date:   Fri Jan 21 03:18:49 2005 +0000

    special case so we don't yell when an empty http body doesn't specify a
    content-encoding
    
    
    svn:r3397

diff --git a/src/or/directory.c b/src/or/directory.c
index ee50f46e7..e9255747e 100644
--- a/src/or/directory.c
+++ b/src/or/directory.c
@@ -555,6 +555,8 @@ static int
 body_is_plausible(const char *body, size_t len, int purpose)
 {
   int i;
+  if (len == 0)
+    return 1; /* empty bodies don't need decompression */
   if (len < 32)
     return 0;
   if (purpose != DIR_PURPOSE_FETCH_RENDDESC) {

