commit 54a65f3a781a84eca0f544a5aca0843b7033fcb0
Author: Andre Lorbach <alorbach@adiscon.com>
Date:   Thu Jun 11 04:15:05 2015 -0700

    KSI: Added debug command line option
    
    Enable debug logging in rsksiutil by command line
    option now.

diff --git a/runtime/librsksi.h b/runtime/librsksi.h
index 57f1765db..609749109 100644
--- a/runtime/librsksi.h
+++ b/runtime/librsksi.h
@@ -430,6 +430,7 @@ void rsksi_errctxExit(gterrctx_t *ectx);
 void rsksi_errctxSetErrRec(gterrctx_t *ectx, char *rec);
 void rsksi_errctxFrstRecInBlk(gterrctx_t *ectx, char *rec);
 void rsksi_objfree(uint16_t tlvtype, void *obj);
+void rsksi_set_debug(int iDebug); 
 
 
 /* TODO: replace these? */
diff --git a/runtime/librsksi_read.c b/runtime/librsksi_read.c
index 1b64b6512..b2777df55 100644
--- a/runtime/librsksi_read.c
+++ b/runtime/librsksi_read.c
@@ -49,7 +49,7 @@ typedef unsigned char uchar;
 #endif
 #define MAXFNAME 1024
 
-static int rsksi_read_debug = 1;
+static int rsksi_read_debug = 0;
 char *rsksi_read_puburl = "http://verify.guardtime.com/gt-controlpublications.bin";
 char *rsksi_extend_puburl = "http://verifier.guardtime.net/gt-extendingservice";
 uint8_t rsksi_read_showVerified = 0;
@@ -1145,3 +1145,9 @@ done:
 		KSI_Signature_free(sig);
 	return r;
 }
+
+/* Helper function to enable debug */
+void rsksi_set_debug(int iDebug)
+{
+	rsksi_read_debug = iDebug; 
+}
diff --git a/tools/rsksiutil.c b/tools/rsksiutil.c
index 938cab886..da4bba43e 100644
--- a/tools/rsksiutil.c
+++ b/tools/rsksiutil.c
@@ -37,6 +37,7 @@ static enum { MD_DUMP, MD_DETECT_FILE_TYPE, MD_SHOW_SIGBLK_PARAMS,
               MD_VERIFY, MD_EXTEND
 } mode = MD_DUMP;
 static int verbose = 0;
+static int debug = 0; 
 
 static void
 dumpFile(char *name)
@@ -391,6 +392,7 @@ static struct option long_options[] =
 { 
 	{"dump", no_argument, NULL, 'D'},
 	{"verbose", no_argument, NULL, 'v'},
+	{"debug", no_argument, NULL, 'd'},
 	{"version", no_argument, NULL, 'V'},
 	{"detect-file-type", no_argument, NULL, 'T'},
 	{"show-sigblock-params", no_argument, NULL, 'B'},
@@ -408,13 +410,17 @@ main(int argc, char *argv[])
 	int opt;
 
 	while(1) {
-		opt = getopt_long(argc, argv, "DvVTBtPs", long_options, NULL);
+		opt = getopt_long(argc, argv, "dDvVTBtPs", long_options, NULL);
 		if(opt == -1)
 			break;
 		switch(opt) {
 		case 'v':
 			verbose = 1;
 			break;
+		case 'd':
+			debug = 1;
+			rsksi_set_debug(debug); 
+			break;
 		case 's':
 			rsksi_read_showVerified = 1;
 			break;

