commit 6d9885a8ce45cd9b7d36517ee823a480eaf95c02
Author: Jasper Spaans <jasper@vs19.net>
Date:   Thu Nov 24 16:53:36 2005 +0100

    [PATCH] fbcon: fix obvious bug in fbcon logo rotation code
    
    This code fixes a tiny problem with the recent fbcon rotation changes:
    fb_prepare_logo doesn't check the return value of fb_find_logo and that
    causes a crash for my while booting.
    
    Obvious & working & tested fix is here.
    
    Signed-off-by: Jasper Spaans <jasper@vs19.net>
    Acked-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/drivers/video/fbmem.c b/drivers/video/fbmem.c
index 9f180096c896..6240aedb4154 100644
--- a/drivers/video/fbmem.c
+++ b/drivers/video/fbmem.c
@@ -452,13 +452,17 @@ int fb_prepare_logo(struct fb_info *info, int rotate)
 
 	/* Return if no suitable logo was found */
 	fb_logo.logo = fb_find_logo(depth);
+
+	if (!fb_logo.logo) {
+		return 0;
+	}
 	
 	if (rotate == FB_ROTATE_UR || rotate == FB_ROTATE_UD)
 		yres = info->var.yres;
 	else
 		yres = info->var.xres;
 
-	if (fb_logo.logo && fb_logo.logo->height > yres) {
+	if (fb_logo.logo->height > yres) {
 		fb_logo.logo = NULL;
 		return 0;
 	}

