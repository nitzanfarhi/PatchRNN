commit 9bb99b147018945366c763b3d4d7008927dc8557
Author: John Stultz <john.stultz@linaro.org>
Date:   Mon Dec 6 13:32:12 2010 -0800

    timers: Fixup allmodconfig build issue
    
    Adds missed EXPORT_SYMBOL lines that cause the following build
    failures with allmodconfig:
    ERROR: "timerqueue_add" [drivers/rtc/rtc-core.ko] undefined!
    ERROR: "timerqueue_getnext" [drivers/rtc/rtc-core.ko] undefined!
    ERROR: "timerqueue_del" [drivers/rtc/rtc-core.ko] undefined!
    
    Reported-by: Ingo Molnar <mingo@elte.hu>
    Reported-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: John Stultz <john.stultz@linaro.org>

diff --git a/lib/timerqueue.c b/lib/timerqueue.c
index f46de84d9467..444b0934af92 100644
--- a/lib/timerqueue.c
+++ b/lib/timerqueue.c
@@ -24,6 +24,7 @@
 
 #include <linux/timerqueue.h>
 #include <linux/rbtree.h>
+#include <linux/module.h>
 
 /**
  * timerqueue_add - Adds timer to timerqueue.
@@ -57,6 +58,7 @@ void timerqueue_add(struct timerqueue_head *head, struct timerqueue_node *node)
 	if (!head->next || node->expires.tv64 < head->next->expires.tv64)
 		head->next = node;
 }
+EXPORT_SYMBOL_GPL(timerqueue_add);
 
 /**
  * timerqueue_del - Removes a timer from the timerqueue.
@@ -80,7 +82,7 @@ void timerqueue_del(struct timerqueue_head *head, struct timerqueue_node *node)
 	rb_erase(&node->node, &head->head);
 	RB_CLEAR_NODE(&node->node);
 }
-
+EXPORT_SYMBOL_GPL(timerqueue_del);
 
 /**
  * timerqueue_getnext - Returns the timer with the earlies expiration time
@@ -94,7 +96,7 @@ struct timerqueue_node *timerqueue_getnext(struct timerqueue_head *head)
 {
 	return head->next;
 }
-
+EXPORT_SYMBOL_GPL(timerqueue_getnext);
 
 /**
  * timerqueue_iterate_next - Returns the timer after the provided timer
@@ -116,3 +118,4 @@ struct timerqueue_node *timerqueue_iterate_next(struct timerqueue_node *node)
 		return NULL;
 	return container_of(next, struct timerqueue_node, node);
 }
+EXPORT_SYMBOL_GPL(timerqueue_iterate_next);

