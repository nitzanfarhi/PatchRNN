commit 075cbc9eb15da8f4cba7c7eaadedd8b030d3a87a
Author: Sujith <Sujith.Manoharan@atheros.com>
Date:   Thu Oct 23 12:14:02 2008 +0530

    mac80211: Change WARN_ON to WARN_ON_ONCE
    
    A warning would be printed for every packet that
    is transmitted if the rate control information isn't
    setup. Change this to WARN_ON_ONCE.
    
    Signed-off-by: Sujith <Sujith.Manoharan@atheros.com>
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/net/mac80211/tx.c b/net/mac80211/tx.c
index 21951bac1ef7..541e3e64493d 100644
--- a/net/mac80211/tx.c
+++ b/net/mac80211/tx.c
@@ -563,8 +563,8 @@ ieee80211_tx_h_rate_ctrl(struct ieee80211_tx_data *tx)
 				IEEE80211_TX_RC_USE_RTS_CTS;
 
 		/* RC is busted */
-		if (WARN_ON(info->control.rates[i].idx >=
-			    sband->n_bitrates)) {
+		if (WARN_ON_ONCE(info->control.rates[i].idx >=
+				 sband->n_bitrates)) {
 			info->control.rates[i].idx = -1;
 			continue;
 		}

