commit 580b370e087339596fa0a8064678d4c7c9dcba66
Author: Love Hornquist Astrand <lha@h5l.org>
Date:   Tue Jan 19 16:40:48 2010 +0000

    make pa-data optional

diff --git a/kdc/fast.c b/kdc/fast.c
index 719bac212..dff78d0a3 100644
--- a/kdc/fast.c
+++ b/kdc/fast.c
@@ -51,10 +51,13 @@ _kdc_fast_mk_response(krb5_context context,
     size_t size;
 
     memset(&fxfastrep, 0, sizeof(fxfastrep));
+    memset(&fastrep, 0, sizeof(fastrep));
     krb5_data_zero(data);
 
-    fastrep.padata.val = pa_data->val;
-    fastrep.padata.len = pa_data->len;
+    if (pa_data) {
+	fastrep.padata.val = pa_data->val;
+	fastrep.padata.len = pa_data->len;
+    }
     fastrep.strengthen_key = strengthen_key;
     fastrep.finished = finished;
     fastrep.nonce = nonce;

