commit fec34388a35a01a486eedfeab0a8d3aead3ebb84
Author: brain <brain@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Sun May 29 15:59:52 2005 +0000

    Made erroneous included configs cause the reader to bail
    
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@1554 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/inspircd_io.cpp b/src/inspircd_io.cpp
index de3d23689..a01048e85 100644
--- a/src/inspircd_io.cpp
+++ b/src/inspircd_io.cpp
@@ -355,6 +355,13 @@ bool LoadConf(const char* filename, std::stringstream *target, std::stringstream
 								std::string newstuff = merge.str();
 								*target << newstuff;
 							}
+							else
+							{
+								// the error propogates up to its parent recursively
+								// causing the config reader to bail at the top level.
+								fclose(conf);
+								return false;
+							}
 						}
 						else
 						{

