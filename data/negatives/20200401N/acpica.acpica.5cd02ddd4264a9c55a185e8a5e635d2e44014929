commit 5cd02ddd4264a9c55a185e8a5e635d2e44014929
Author: aystarik <aystarik>
Date:   Wed Jun 29 16:46:11 2005 +0000

    Global notify handler support
    
    
    date    99.10.22.22.23.00;      author rmoore1; state Exp;

diff --git a/source/components/events/evxface.c b/source/components/events/evxface.c
index b0f555eca..c3f222b3d 100644
--- a/source/components/events/evxface.c
+++ b/source/components/events/evxface.c
@@ -571,6 +571,45 @@ AcpiInstallNotifyHandler (
         return_ACPI_STATUS (AE_BAD_PARAMETER);
     }
 
+
+    /*
+     * Support for global notify handlers.  These handlers are invoked for
+     * every notifiy of the type specifiec
+     */
+
+    if (Device == ACPI_ROOT_OBJECT)
+    {
+        /*
+         *  Make sure the handler is not already installed.
+         */
+
+        if (((HandlerType == ACPI_SYSTEM_NOTIFY) && Gbl_SysNotify.Handler) ||
+            ((HandlerType == ACPI_DEVICE_NOTIFY) && Gbl_DrvNotify.Handler))
+        {
+            return_ACPI_STATUS (AE_EXIST);
+        }
+
+        if (HandlerType = ACPI_SYSTEM_NOTIFY)
+        {
+            Gbl_SysNotify.Nte = ObjEntry;
+            Gbl_SysNotify.Handler = Handler;
+            Gbl_SysNotify.Context = Context;
+        }
+
+        else
+        {
+            Gbl_DrvNotify.Nte = ObjEntry;
+            Gbl_DrvNotify.Handler = Handler;
+            Gbl_DrvNotify.Context = Context;
+        }
+
+
+        /* Global notify handler installed */
+
+        return_ACPI_STATUS (AE_OK);
+    }
+
+
     /*
      * These are the ONLY objects that can receive ACPI notifications
      */
@@ -594,8 +633,8 @@ AcpiInstallNotifyHandler (
          *  Make sure the handler is not already installed.
          */
 
-        if (((HandlerType = ACPI_SYSTEM_NOTIFY) && ObjDesc->Device.SysHandler) ||
-            ((HandlerType = ACPI_DEVICE_NOTIFY) && ObjDesc->Device.DrvHandler))
+        if (((HandlerType == ACPI_SYSTEM_NOTIFY) && ObjDesc->Device.SysHandler) ||
+            ((HandlerType == ACPI_DEVICE_NOTIFY) && ObjDesc->Device.DrvHandler))
         {
             return_ACPI_STATUS (AE_EXIST);
         }
@@ -623,6 +662,7 @@ AcpiInstallNotifyHandler (
         }
     }
 
+
     /* 
      *  We get here, we know that there is no handler installed
      *  so let's party

