commit 2bcf5cc8c2812d2e7db75ac675ef997455c7c50f
Author: Dima Turchenkov <dima.turchenkov@gmail.com>
Date:   Mon Dec 14 18:09:18 2015 +0300

    fix for list corruption

diff --git a/libr/core/anal.c b/libr/core/anal.c
index 71418f19e..7c1a18f26 100644
--- a/libr/core/anal.c
+++ b/libr/core/anal.c
@@ -269,10 +269,10 @@ static int r_anal_try_get_fcn(RCore *core, RAnalRef *ref, int fcndepth, int refd
 }
 
 static int r_anal_analyze_fcn_refs(RCore *core, RAnalFunction *fcn, int depth) {
-	RListIter *iter;
+	RListIter *iter, *tmp;
 	RAnalRef *ref;
 
-	r_list_foreach (fcn->refs, iter, ref) {
+	r_list_foreach_safe (fcn->refs, iter, tmp, ref) {
 		if (ref->addr != UT64_MAX) {
 			switch (ref->type) {
 			case 'd':

