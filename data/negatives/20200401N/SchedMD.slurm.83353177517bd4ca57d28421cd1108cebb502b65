commit 83353177517bd4ca57d28421cd1108cebb502b65
Author: Moe Jette <jette1@llnl.gov>
Date:   Mon Oct 20 17:58:18 2003 +0000

    Add logging of SIGXCPU send to active steps.

diff --git a/src/slurmd/req.c b/src/slurmd/req.c
index 3c685b749c..6490dcb70c 100644
--- a/src/slurmd/req.c
+++ b/src/slurmd/req.c
@@ -526,18 +526,23 @@ _rpc_kill_tasks(slurm_msg_t *msg, slurm_addr *cli_addr)
 }
 
 static void
-_kill_running_session_mgrs(uint32_t jobid, int signum)
+_kill_running_session_mgrs(uint32_t jobid, int signum, char *signame)
 {
 	List         steps = shm_get_steps();
 	ListIterator i     = list_iterator_create(steps);
-	job_step_t  *s     = NULL; 
+	job_step_t  *s     = NULL;
+	int          cnt   = 0;	
 
 	while ((s = list_next(i))) {
 		if ((s->jobid == jobid) && (s->sid > (pid_t) 0)) {
 			kill(s->sid, signum);
+			cnt++;
 		}
 	}
 	list_destroy(steps);
+	if (cnt)
+		verbose("Job %u: sent %s to %d active steps",
+			jobid, signame, cnt);
 
 	return;
 }
@@ -571,7 +576,7 @@ _rpc_timelimit(slurm_msg_t *msg, slurm_addr *cli_addr)
 	 *  Send SIGXCPU to warn session managers of job steps for this
 	 *   job that the job is about to be terminated
 	 */
-	_kill_running_session_mgrs(req->job_id, SIGXCPU);
+	_kill_running_session_mgrs(req->job_id, SIGXCPU, "SIGXCPU");
 
 	nsteps = _kill_all_active_steps(req->job_id, SIGTERM);
 

