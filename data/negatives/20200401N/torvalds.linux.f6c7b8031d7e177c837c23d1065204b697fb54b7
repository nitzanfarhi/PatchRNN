commit f6c7b8031d7e177c837c23d1065204b697fb54b7
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Mon Oct 30 14:07:38 2017 +0100

    platform/x86: peaq-wmi: Remove unnecessary checks from peaq_wmi_exit
    
    peaq_wmi_exit will only ever get called if peaq_wmi_init succeeds, so
    there is no need to repeat the checks from peaq_wmi_init.
    
    Suggested-by: Andy Shevchenko <andy.shevchenko@gmail.com>
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>
    Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>

diff --git a/drivers/platform/x86/peaq-wmi.c b/drivers/platform/x86/peaq-wmi.c
index 2da48ecc90c1..9b9e1f39bbfb 100644
--- a/drivers/platform/x86/peaq-wmi.c
+++ b/drivers/platform/x86/peaq-wmi.c
@@ -66,7 +66,7 @@ static void peaq_wmi_poll(struct input_polled_dev *dev)
 }
 
 /* Some other devices (Shuttle XS35) use the same WMI GUID for other purposes */
-static const struct dmi_system_id peaq_dmi_table[] = {
+static const struct dmi_system_id peaq_dmi_table[] __initconst = {
 	{
 		.matches = {
 			DMI_MATCH(DMI_SYS_VENDOR, "PEAQ"),
@@ -102,12 +102,6 @@ static int __init peaq_wmi_init(void)
 
 static void __exit peaq_wmi_exit(void)
 {
-	if (!dmi_check_system(peaq_dmi_table))
-		return;
-
-	if (!wmi_has_guid(PEAQ_DOLBY_BUTTON_GUID))
-		return;
-
 	input_unregister_polled_device(peaq_poll_dev);
 }
 

