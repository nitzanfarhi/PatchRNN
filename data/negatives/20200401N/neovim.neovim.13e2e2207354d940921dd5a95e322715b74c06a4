commit 13e2e2207354d940921dd5a95e322715b74c06a4
Author: rover <pathfinder2013@126.com>
Date:   Sun Jan 1 21:30:32 2017 +0800

    vim-patch:7.4.2028
    
    Problem:    cppcheck warns for using index before limits check.
    Solution:   Swap the expressions. (Dominique Pelle)
    
    https://github.com/vim/vim/commit/5498a41f5a62c3877fee0185adf3bf7245a9a547

diff --git a/src/nvim/mbyte.c b/src/nvim/mbyte.c
index e8b113176..ec4969d4f 100644
--- a/src/nvim/mbyte.c
+++ b/src/nvim/mbyte.c
@@ -2109,13 +2109,14 @@ char_u * enc_locale(void)
     } else
       s = p + 1;
   }
-  for (i = 0; s[i] != NUL && i < (int)sizeof(buf) - 1; ++i) {
-    if (s[i] == '_' || s[i] == '-')
+  for (i = 0; i < (int)sizeof(buf) - 1 && s[i] != NUL; i++) {
+    if (s[i] == '_' || s[i] == '-') {
       buf[i] = '-';
-    else if (isalnum((int)s[i]))
+    } else if (isalnum((int)s[i])) {
       buf[i] = TOLOWER_ASC(s[i]);
-    else
+    } else {
       break;
+    }
   }
   buf[i] = NUL;
 
diff --git a/src/nvim/version.c b/src/nvim/version.c
index 9ad40cddd..8497d213e 100644
--- a/src/nvim/version.c
+++ b/src/nvim/version.c
@@ -412,7 +412,7 @@ static int included_patches[] = {
   // 2031,
   // 2030 NA
   // 2029,
-  // 2028,
+  2028,
   // 2027 NA
   // 2026 NA
   // 2025 NA

