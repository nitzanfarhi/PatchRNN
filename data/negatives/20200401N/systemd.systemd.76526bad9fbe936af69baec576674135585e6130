commit 76526bad9fbe936af69baec576674135585e6130
Author: Lennart Poettering <lennart@poettering.net>
Date:   Fri Mar 4 22:50:56 2011 +0100

    machine-id: generate /etc/machine-id 0444 by default

diff --git a/src/machine-id-setup.c b/src/machine-id-setup.c
index 0ec619244..65792e9b8 100644
--- a/src/machine-id-setup.c
+++ b/src/machine-id-setup.c
@@ -91,7 +91,12 @@ int machine_id_setup(void) {
 
         m = umask(0000);
 
-        if ((fd = open("/etc/machine-id", O_RDWR|O_CREAT|O_CLOEXEC|O_NOCTTY, 0644)) >= 0)
+        /* We create this 0444, to indicate that this isn't really
+         * something you should ever modify. Of course, since the file
+         * will be owned by root it doesn't matter much, but maybe
+         * people look. */
+
+        if ((fd = open("/etc/machine-id", O_RDWR|O_CREAT|O_CLOEXEC|O_NOCTTY, 0444)) >= 0)
                 writable = true;
         else {
                 if ((fd = open("/etc/machine-id", O_RDONLY|O_CLOEXEC|O_NOCTTY)) < 0) {

