commit 3e5bc7ff6a23014daf2eb0b9a22986753ae2ec4f
Author: Stefano Sabatini <stefano.sabatini-lala@poste.it>
Date:   Thu Jan 27 01:01:34 2011 +0100

    In the start_frame() debug log, print the reference pos value rather than the evaluated value converted to int.
    
    That's required because -1 is evaluated as NAN, which converted back
    to int looks like a random number, this is especially annoying when
    debugging sources with undefined pos (as the video4linux2 device).
    
    Signed-off-by: Janne Grunau <janne-ffmpeg@jannau.net>

diff --git a/libavfilter/vf_setpts.c b/libavfilter/vf_setpts.c
index 0921df7c6..31fa1ef65 100644
--- a/libavfilter/vf_setpts.c
+++ b/libavfilter/vf_setpts.c
@@ -116,10 +116,10 @@ static void start_frame(AVFilterLink *inlink, AVFilterBufferRef *inpicref)
 
 #ifdef DEBUG
     av_log(inlink->dst, AV_LOG_DEBUG,
-           "n:%"PRId64" interlaced:%d pos:%d pts:%"PRId64" t:%f -> pts:%"PRId64" t:%f\n",
+           "n:%"PRId64" interlaced:%d pos:%"PRId64" pts:%"PRId64" t:%f -> pts:%"PRId64" t:%f\n",
            (int64_t)setpts->var_values[VAR_N],
            (int)setpts->var_values[VAR_INTERLACED],
-           (int)setpts->var_values[VAR_POS],
+           inpicref ->pos,
            inpicref ->pts, inpicref ->pts * av_q2d(inlink->time_base),
            outpicref->pts, outpicref->pts * av_q2d(inlink->time_base));
 #endif

