commit a549459c96ba99a691aa1cafeabdd327a7a2bfcf
Author: Thomas Wagner <Thomas.Wagner@hs-rm.de>
Date:   Tue Sep 25 21:32:55 2012 +0530

    ath9k: Fix rx filtering issue for older chips
    
    We need to have the promiscuous mode enabled for older
    chipsets so that the olderchips hardware does not
    filters out some valid/necessary frames that need
    to be sent to mac80211. Fix this by enabling promiscus
    mode for all the chipsets whose macversion <= AR9160
    chipsets. This should fix
    https://bugzilla.kernel.org/show_bug.cgi?id=45591
    
    shafi: made the fix generic by having the frame filtering
    disabled for chipsets older than AR9280.
    
    Cc: Javier Cardona <javier@cozybit.com>
    Signed-off-by: Thomas Wagner <Thomas.Wagner@hs-rm.de>
    Signed-off-by: Mohammed Shafi Shajakhan <mohammed@qca.qualcomm.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/ath/ath9k/recv.c b/drivers/net/wireless/ath/ath9k/recv.c
index 4480c0cc655f..83d16e7ed272 100644
--- a/drivers/net/wireless/ath/ath9k/recv.c
+++ b/drivers/net/wireless/ath/ath9k/recv.c
@@ -424,8 +424,8 @@ u32 ath_calcrxfilter(struct ath_softc *sc)
 		rfilt |= ATH9K_RX_FILTER_COMP_BAR;
 
 	if (sc->nvifs > 1 || (sc->rx.rxfilter & FIF_OTHER_BSS)) {
-		/* The following may also be needed for other older chips */
-		if (sc->sc_ah->hw_version.macVersion == AR_SREV_VERSION_9160)
+		/* This is needed for older chips */
+		if (sc->sc_ah->hw_version.macVersion <= AR_SREV_VERSION_9160)
 			rfilt |= ATH9K_RX_FILTER_PROM;
 		rfilt |= ATH9K_RX_FILTER_MCAST_BCAST_ALL;
 	}

