commit cd4602c895ef8be7c17f326bcbadc265f1ef08a4
Author: relan <relan@users.noreply.github.com>
Date:   Sun Nov 15 16:26:54 2009 +0000

    Add FUSE debug option (-d).

diff --git a/fuse/main.c b/fuse/main.c
index a34c761..03cf031 100644
--- a/fuse/main.c
+++ b/fuse/main.c
@@ -199,6 +199,7 @@ int main(int argc, char* argv[])
 	const char* spec = NULL;
 	const char* mount_point = NULL;
 	const char* mount_options = "";
+	int debug = 0;
 	struct fuse_chan* fc = NULL;
 	struct fuse* fh = NULL;
 	char** pp;
@@ -214,6 +215,8 @@ int main(int argc, char* argv[])
 				usage(argv[0]);
 			mount_options = *pp;
 		}
+		else if (strcmp(*pp, "-d") == 0)
+			debug = 1;
 		else if (spec == NULL)
 			spec = *pp;
 		else if (mount_point == NULL)
@@ -237,7 +240,8 @@ int main(int argc, char* argv[])
 		return 1;
 
 	/* create arguments for fuse_new() */
-	if (fuse_opt_add_arg(&newfs_args, "") != 0)
+	if (fuse_opt_add_arg(&newfs_args, "") != 0 ||
+		(debug && fuse_opt_add_arg(&newfs_args, "-d") != 0))
 	{
 		fuse_unmount(mount_point, fc);
 		return 1;

