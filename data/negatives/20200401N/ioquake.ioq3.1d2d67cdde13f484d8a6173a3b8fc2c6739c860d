commit 1d2d67cdde13f484d8a6173a3b8fc2c6739c860d
Author: Thilo Schulz <arny@ats.s.bawue.de>
Date:   Mon Feb 7 03:56:15 2011 +0000

    strdup still not accepted by some systems. *sigh*.

diff --git a/code/qcommon/vm_x86_64_assembler.c b/code/qcommon/vm_x86_64_assembler.c
index b5e79f98..9c6c5c69 100644
--- a/code/qcommon/vm_x86_64_assembler.c
+++ b/code/qcommon/vm_x86_64_assembler.c
@@ -241,12 +241,15 @@ static void hash_add_label(const char* label, unsigned address)
 {
 	struct hashentry* h;
 	unsigned i = hashkey(label, -1U);
+	int labellen;
 	
 	i %= sizeof(labelhash)/sizeof(labelhash[0]);
 	h = malloc(sizeof(struct hashentry));
 	
-	h->label = strdup(label);
-
+	labellen = strlen(label) + 1;
+	h->label = malloc(labellen);
+	memcpy(h->label, label, labellen);
+	
 	h->address = address;
 	h->next = labelhash[i];
 	labelhash[i] = h;

