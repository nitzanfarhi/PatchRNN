commit 1cec1e4e9a5ccfe1c515c8f2df6d16788c71ef41
Author: aystarik <aystarik>
Date:   Wed Jun 29 16:57:15 2005 +0000

    don't try secondary PM_EN write if doing S1
    
    
    date    2001.07.24.20.32.00;    author agrover; state Exp;

diff --git a/source/components/hardware/hwsleep.c b/source/components/hardware/hwsleep.c
index 901512ecc..e746fd316 100644
--- a/source/components/hardware/hwsleep.c
+++ b/source/components/hardware/hwsleep.c
@@ -2,7 +2,7 @@
 /******************************************************************************
  *
  * Name: hwsleep.c - ACPI Hardware Sleep/Wake Interface
- *              $Revision: 1.14 $
+ *              $Revision: 1.15 $
  *
  *****************************************************************************/
 
@@ -298,8 +298,11 @@ AcpiEnterSleepState (
     /* wait a second, then try again */
     AcpiOsStall(1000000);
 
-    AcpiHwRegisterWrite(ACPI_MTX_LOCK, PM1_CONTROL,
-        (1 << AcpiHwGetBitShift (SLP_EN_MASK)));
+    if (SleepState > ACPI_STATE_S1)
+    {
+        AcpiHwRegisterWrite(ACPI_MTX_LOCK, PM1_CONTROL,
+            (1 << AcpiHwGetBitShift (SLP_EN_MASK)));
+    }
 
     enable();
 

