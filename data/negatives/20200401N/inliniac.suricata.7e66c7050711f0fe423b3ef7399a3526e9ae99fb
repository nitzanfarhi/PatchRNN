commit 7e66c7050711f0fe423b3ef7399a3526e9ae99fb
Author: Victor Julien <victor@inliniac.net>
Date:   Wed May 27 14:11:57 2015 +0200

    counters: don't run if no counters have been registered

diff --git a/src/counters.c b/src/counters.c
index 08f6329a..7fa1045d 100644
--- a/src/counters.c
+++ b/src/counters.c
@@ -591,6 +591,9 @@ static int StatsOutput(ThreadVars *tv)
     const StatsCounter *pc = NULL;
     void *td = stats_thread_data;
 
+    if (counters_global_id == 0)
+        return -1;
+
     if (stats_table.nstats == 0) {
         StatsThreadRegister("Global", &stats_ctx->global_counter_ctx);
 

