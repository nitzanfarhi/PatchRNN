commit a87739388da6d00a757885428d42554e7eabf453
Author: Anton Khirnov <anton@khirnov.net>
Date:   Sun Oct 27 10:02:26 2013 +0100

    eatgv: stop using deprecated avcodec_set_dimensions

diff --git a/libavcodec/eatgv.c b/libavcodec/eatgv.c
index fabc5167b..92d914ef5 100644
--- a/libavcodec/eatgv.c
+++ b/libavcodec/eatgv.c
@@ -269,9 +269,10 @@ static int tgv_decode_frame(AVCodecContext *avctx,
         s->width  = AV_RL16(&buf[0]);
         s->height = AV_RL16(&buf[2]);
         if (s->avctx->width != s->width || s->avctx->height != s->height) {
-            avcodec_set_dimensions(s->avctx, s->width, s->height);
             av_freep(&s->frame_buffer);
             av_frame_unref(&s->last_frame);
+            if ((ret = ff_set_dimensions(s->avctx, s->width, s->height)) < 0)
+                return ret;
         }
 
         pal_count = AV_RL16(&buf[6]);
@@ -282,9 +283,6 @@ static int tgv_decode_frame(AVCodecContext *avctx,
         }
     }
 
-    if ((ret = av_image_check_size(s->width, s->height, 0, avctx)) < 0)
-        return ret;
-
     if ((ret = ff_get_buffer(avctx, frame, AV_GET_BUFFER_FLAG_REF)) < 0)
         return ret;
 

