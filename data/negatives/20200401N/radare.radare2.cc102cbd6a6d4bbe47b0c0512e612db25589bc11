commit cc102cbd6a6d4bbe47b0c0512e612db25589bc11
Author: Jaume Delcl√≤s (cosarara) <cosa.rara97@gmail.com>
Date:   Wed Jun 26 10:11:51 2013 +0200

    Stop function analysis at jump

diff --git a/libr/anal/fcn.c b/libr/anal/fcn.c
index 7410a7ba3..c035c70a6 100644
--- a/libr/anal/fcn.c
+++ b/libr/anal/fcn.c
@@ -146,6 +146,13 @@ R_API int r_anal_fcn(RAnal *anal, RAnalFunction *fcn, ut64 addr, ut8 *buf, ut64
 		}
 		switch (op.type) {
 		case R_ANAL_OP_TYPE_JMP:
+			if (!r_anal_fcn_xref_add (anal, fcn, op.addr, op.jump,
+					R_ANAL_REF_TYPE_CODE)) {
+				r_anal_op_fini (&op);
+				return R_ANAL_RET_ERROR;
+			} else {
+				return R_ANAL_RET_END;
+			}
 		case R_ANAL_OP_TYPE_CJMP:
 #if 0
 		// do not add xrefs for cjmps?

