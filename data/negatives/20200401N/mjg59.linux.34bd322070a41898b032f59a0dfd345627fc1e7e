commit 34bd322070a41898b032f59a0dfd345627fc1e7e
Author: MyungJoo Ham <myungjoo.ham@samsung.com>
Date:   Mon Nov 23 15:45:36 2015 +0900

    PM / devfreq: Do not show statistics if it's not ready.
    
    Before this patch for a device without statistics support,
    
    $ cat trans_stat
        From  :   To
              :   time(ms)
    Total transitions : 0
    $
    
    After this patch applied for such a device,
    
    $ cat trans_stat
    Not Supported.
    $
    
    Signed-off-by: MyungJoo Ham <myungjoo.ham@samsung.com>

diff --git a/drivers/devfreq/devfreq.c b/drivers/devfreq/devfreq.c
index d36fa2db4d29..984c5e9e7bdd 100644
--- a/drivers/devfreq/devfreq.c
+++ b/drivers/devfreq/devfreq.c
@@ -1049,6 +1049,8 @@ static ssize_t trans_stat_show(struct device *dev,
 	if (!devfreq->stop_polling &&
 			devfreq_update_status(devfreq, devfreq->previous_freq))
 		return 0;
+	if (max_state == 0)
+		return sprintf(buf, "Not Supported.\n");
 
 	len = sprintf(buf, "     From  :   To\n");
 	len += sprintf(buf + len, "           :");

