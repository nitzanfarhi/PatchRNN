commit fe506dd7c4ba576d5e3e7f151d87f45bb47c2c88
Author: Jack Pappas <jackp@server.fake>
Date:   Sat Feb 23 00:24:14 2013 -0500

    Use IPPROTO_TCP instead of SOL_TCP for cross-platform compatibility.

diff --git a/mono/io-layer/sockets.c b/mono/io-layer/sockets.c
index 285a1798e74..359dc8d602d 100644
--- a/mono/io-layer/sockets.c
+++ b/mono/io-layer/sockets.c
@@ -1291,13 +1291,13 @@ WSAIoctl (guint32 fd, gint32 command,
 			keepalivetime /= 1000;
 			if (keepalivetime == 0 || rem >= 500)
 				keepalivetime++;
-			ret = setsockopt (fd, SOL_TCP, TCP_KEEPIDLE, &keepalivetime, sizeof (uint32_t));
+			ret = setsockopt (fd, IPPROTO_TCP, TCP_KEEPIDLE, &keepalivetime, sizeof (uint32_t));
 			if (ret == 0) {
 				rem = keepaliveinterval % 1000;
 				keepaliveinterval /= 1000;
 				if (keepaliveinterval == 0 || rem >= 500)
 					keepaliveinterval++;
-				ret = setsockopt (fd, SOL_TCP, TCP_KEEPINTVL, &keepaliveinterval, sizeof (uint32_t));
+				ret = setsockopt (fd, IPPROTO_TCP, TCP_KEEPINTVL, &keepaliveinterval, sizeof (uint32_t));
 			}
 			if (ret != 0) {
 				gint errnum = errno;

