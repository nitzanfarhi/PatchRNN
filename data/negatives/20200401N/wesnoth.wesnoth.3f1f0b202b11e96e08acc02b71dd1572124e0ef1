commit 3f1f0b202b11e96e08acc02b71dd1572124e0ef1
Author: Mark de Wever <koraq@xs4all.nl>
Date:   Mon Feb 8 16:32:24 2010 +0000

    Move some code under the new widgets switch.

diff --git a/src/gui/dialogs/lobby_main.cpp b/src/gui/dialogs/lobby_main.cpp
index acd393081e..d61bfa110d 100644
--- a/src/gui/dialogs/lobby_main.cpp
+++ b/src/gui/dialogs/lobby_main.cpp
@@ -783,11 +783,12 @@ void tlobby_main::update_playerlist()
 			lobby = true;
 		}
 	}
-	player_list_.active_game.list->clear();
-	player_list_.active_room.list->clear();
-	player_list_.other_rooms.list->clear();
-	player_list_.other_games.list->clear();
-	if(new_widgets) {
+	if(!new_widgets) {
+		player_list_.active_game.list->clear();
+		player_list_.active_room.list->clear();
+		player_list_.other_rooms.list->clear();
+		player_list_.other_games.list->clear();
+	} else {
 		assert(player_list_.active_game.tree);
 		assert(player_list_.active_room.tree);
 		assert(player_list_.other_games.tree);
@@ -890,10 +891,12 @@ void tlobby_main::update_playerlist()
 						&tlobby_main::user_dialog_callback, this, userptr));
 		}
 	}
-	player_list_.active_game.auto_hide();
-	player_list_.active_room.auto_hide();
-	player_list_.other_rooms.auto_hide();
-	player_list_.other_games.auto_hide();
+	if(!new_widgets) {
+		player_list_.active_game.auto_hide();
+		player_list_.active_room.auto_hide();
+		player_list_.other_rooms.auto_hide();
+		player_list_.other_games.auto_hide();
+	}
 
 	player_list_dirty_ = false;
 }

