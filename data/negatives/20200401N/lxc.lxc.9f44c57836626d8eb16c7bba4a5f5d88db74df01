commit 9f44c57836626d8eb16c7bba4a5f5d88db74df01
Author: Michel Normand <normand@fr.ibm.com>
Date:   Fri Oct 9 11:38:39 2009 +0200

    remove the LXCPATH/<name>/nsgroup file
    
    There is no more need of this file so remove it.
    
    Signed-off-by: Michel Normand <normand@fr.ibm.com>
    Signed-off-by: Daniel Lezcano <dlezcano@fr.ibm.com>

diff --git a/src/lxc/cgroup.c b/src/lxc/cgroup.c
index fc13d991..aa06dd54 100644
--- a/src/lxc/cgroup.c
+++ b/src/lxc/cgroup.c
@@ -119,23 +119,7 @@ int lxc_rename_nsgroup(const char *name, struct lxc_handler *handler)
 	return ret;
 }
 
-int lxc_link_nsgroup(const char *name, const char *nsgroup)
-{
-	char lxc[MAXPATHLEN];
-	int ret;
-
-	snprintf(lxc, MAXPATHLEN, LXCPATH "/%s/nsgroup", name);
-
-	unlink(lxc);
-	ret = symlink(nsgroup, lxc);
-	if (ret)
-		SYSERROR("failed to create symlink %s->%s", nsgroup, lxc);
-	else
-		DEBUG("'%s' linked to '%s'", nsgroup, lxc);
-
-	return ret;
-}
-
+#warning keep lxc_unlink_nsgroup fct to be able to destroy old created container.
 int lxc_unlink_nsgroup(const char *name)
 {
 	char nsgroup[MAXPATHLEN];
diff --git a/src/lxc/cgroup.h b/src/lxc/cgroup.h
index cc125b2d..88791bed 100644
--- a/src/lxc/cgroup.h
+++ b/src/lxc/cgroup.h
@@ -26,9 +26,7 @@
 #define MAXPRIOLEN 24
 
 struct lxc_handler;
-int lxc_get_cgroup_mount(const char *mtab, char *mnt);
 int lxc_rename_nsgroup(const char *name, struct lxc_handler *handler);
-int lxc_link_nsgroup(const char *name, const char *nsgroup);
 int lxc_unlink_nsgroup(const char *name);
 int lxc_cgroup_path_get(char **path, const char *name);
 
diff --git a/src/lxc/start.c b/src/lxc/start.c
index 1e2a28f0..2447b2d5 100644
--- a/src/lxc/start.c
+++ b/src/lxc/start.c
@@ -424,8 +424,7 @@ int lxc_spawn(const char *name, struct lxc_handler *handler, char *const argv[])
 		goto out_abort;
 	}
 
-	if (lxc_rename_nsgroup(name, handler) ||
-	    lxc_link_nsgroup(name, handler->nsgroup))
+	if (lxc_rename_nsgroup(name, handler))
 		goto out_abort;
 
 	/* Create the network configuration */

