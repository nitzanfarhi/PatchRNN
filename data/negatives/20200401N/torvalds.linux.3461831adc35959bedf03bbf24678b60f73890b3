commit 3461831adc35959bedf03bbf24678b60f73890b3
Author: Antti Palosaari <crope@iki.fi>
Date:   Sun Nov 6 22:14:18 2016 -0200

    [media] af9033: return regmap for integrated IT913x tuner driver
    
    IT9130 series contains integrated tuner driver, which uses that
    demodulator address space. Return regmap in order to allow it913x
    driver communication.
    
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@s-opensource.com>

diff --git a/drivers/media/dvb-frontends/af9033.c b/drivers/media/dvb-frontends/af9033.c
index 0794c94baae5..7e0d1cf74705 100644
--- a/drivers/media/dvb-frontends/af9033.c
+++ b/drivers/media/dvb-frontends/af9033.c
@@ -1150,6 +1150,7 @@ static int af9033_probe(struct i2c_client *client,
 		cfg->ops->pid_filter = af9033_pid_filter;
 		cfg->ops->pid_filter_ctrl = af9033_pid_filter_ctrl;
 	}
+	cfg->regmap = dev->regmap;
 	i2c_set_clientdata(client, dev);
 
 	dev_info(&client->dev, "Afatech AF9033 successfully attached\n");
diff --git a/drivers/media/dvb-frontends/af9033.h b/drivers/media/dvb-frontends/af9033.h
index 4eb64432345e..8193f9805c4f 100644
--- a/drivers/media/dvb-frontends/af9033.h
+++ b/drivers/media/dvb-frontends/af9033.h
@@ -83,6 +83,12 @@ struct af9033_config {
 	 * returned by that driver
 	 */
 	struct dvb_frontend **fe;
+
+	/*
+	 * regmap for IT913x integrated tuner driver
+	 * returned by that driver
+	 */
+	struct regmap *regmap;
 };
 
 struct af9033_ops {

