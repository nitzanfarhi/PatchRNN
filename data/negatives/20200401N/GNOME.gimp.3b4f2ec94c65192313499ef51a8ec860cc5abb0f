commit 3b4f2ec94c65192313499ef51a8ec860cc5abb0f
Author: Michael Natterer <mitch@gimp.org>
Date:   Fri Oct 1 10:33:39 2010 +0200

    app: add a GimpCanvasProxyGroup that will be used for guides

diff --git a/app/display/gimpdisplayshell.c b/app/display/gimpdisplayshell.c
index 73be89ea5e..b6eed9427d 100644
--- a/app/display/gimpdisplayshell.c
+++ b/app/display/gimpdisplayshell.c
@@ -293,6 +293,11 @@ gimp_display_shell_init (GimpDisplayShell *shell)
 
   shell->canvas_item = gimp_canvas_group_new ();
 
+  shell->guides = gimp_canvas_proxy_group_new ();
+  gimp_canvas_group_add_item (GIMP_CANVAS_GROUP (shell->canvas_item),
+                              shell->guides);
+  g_object_unref (shell->guides);
+
   shell->sample_points = gimp_canvas_proxy_group_new ();
   gimp_canvas_group_add_item (GIMP_CANVAS_GROUP (shell->canvas_item),
                               shell->sample_points);
@@ -805,6 +810,7 @@ gimp_display_shell_dispose (GObject *object)
     {
       g_object_unref (shell->canvas_item);
       shell->canvas_item = NULL;
+      shell->guides = NULL;
       shell->sample_points = NULL;
     }
 
diff --git a/app/display/gimpdisplayshell.h b/app/display/gimpdisplayshell.h
index 22cdb801f1..e65ea5d879 100644
--- a/app/display/gimpdisplayshell.h
+++ b/app/display/gimpdisplayshell.h
@@ -136,6 +136,7 @@ struct _GimpDisplayShell
   cairo_pattern_t   *checkerboard;     /*  checkerboard pattern               */
 
   GimpCanvasItem    *canvas_item;      /*  items drawn on the canvas          */
+  GimpCanvasItem    *guides;           /*  item proxies of guides             */
   GimpCanvasItem    *sample_points;    /*  item proxies of sample points      */
 
   guint              title_idle_id;    /*  title update idle ID               */

