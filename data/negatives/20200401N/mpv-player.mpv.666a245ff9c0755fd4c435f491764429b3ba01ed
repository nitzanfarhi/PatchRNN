commit 666a245ff9c0755fd4c435f491764429b3ba01ed
Author: eugeni <eugeni@b3059339-0415-0410-9bf9-f77b7e298cf2>
Date:   Tue Sep 18 19:51:22 2007 +0000

    More precise line spacing.
    
    
    git-svn-id: svn://svn.mplayerhq.hu/mplayer/trunk@24577 b3059339-0415-0410-9bf9-f77b7e298cf2

diff --git a/libass/ass_render.c b/libass/ass_render.c
index 63309076cc..d0facd7cb4 100644
--- a/libass/ass_render.c
+++ b/libass/ass_render.c
@@ -1474,7 +1474,7 @@ static void wrap_lines_smart(int max_text_width)
 			int height = text_info.lines[cur_line - 1].desc + text_info.lines[cur_line].asc;
 			cur_line ++;
 			pen_shift_x = - cur->pos.x;
-			pen_shift_y += d6_to_int(height) + global_settings->line_spacing;
+			pen_shift_y += d6_to_int(height + double_to_d6(global_settings->line_spacing));
 			mp_msg(MSGT_ASS, MSGL_DBG2, "shifting from %d to %d by (%d, %d)\n", i, text_info.length - 1, pen_shift_x, pen_shift_y);
 		}
 		cur->pos.x += pen_shift_x;

