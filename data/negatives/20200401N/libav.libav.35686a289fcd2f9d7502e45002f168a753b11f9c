commit 35686a289fcd2f9d7502e45002f168a753b11f9c
Author: Martin Storsjö <martin@martin.st>
Date:   Wed Dec 11 18:52:44 2013 +0200

    mp3adu: Set the channel layout properly
    
    This fixes decoding, broken since 7e35037.
    
    This is similar to what was done for the normal mp3 decoder in
    f4a86bc9.
    
    Signed-off-by: Martin Storsjö <martin@martin.st>

diff --git a/libavcodec/mpegaudiodec_template.c b/libavcodec/mpegaudiodec_template.c
index 9427dbfc5..9ce03efcc 100644
--- a/libavcodec/mpegaudiodec_template.c
+++ b/libavcodec/mpegaudiodec_template.c
@@ -1722,6 +1722,7 @@ static int decode_frame_adu(AVCodecContext *avctx, void *data,
     /* update codec info */
     avctx->sample_rate = s->sample_rate;
     avctx->channels    = s->nb_channels;
+    avctx->channel_layout = s->nb_channels == 1 ? AV_CH_LAYOUT_MONO : AV_CH_LAYOUT_STEREO;
     if (!avctx->bit_rate)
         avctx->bit_rate = s->bit_rate;
 

