commit 4dfb5752e0714228ff6fb0a2728ee03638ac232f
Author: antirez <antirez@gmail.com>
Date:   Mon Jan 28 13:00:03 2013 +0100

    Send 'expired' events when a key expires by lookup.

diff --git a/src/db.c b/src/db.c
index 220503c3..8429aa4b 100644
--- a/src/db.c
+++ b/src/db.c
@@ -543,6 +543,8 @@ int expireIfNeeded(redisDb *db, robj *key) {
     /* Delete the key */
     server.stat_expiredkeys++;
     propagateExpire(db,key);
+    notifyKeyspaceEvent(REDIS_NOTIFY_EXPIRED,
+        "expired",key,db->id);
     return dbDelete(db,key);
 }
 

