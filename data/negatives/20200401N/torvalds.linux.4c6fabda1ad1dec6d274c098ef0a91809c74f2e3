commit 4c6fabda1ad1dec6d274c098ef0a91809c74f2e3
Author: Vineet Gupta <vgupta@synopsys.com>
Date:   Thu Mar 30 10:02:57 2017 -0700

    ARC: fix build warnings with !CONFIG_KPROBES
    
    |   CC      lib/nmi_backtrace.o
    | In file included from ../include/linux/kprobes.h:43:0,
    |                  from ../lib/nmi_backtrace.c:17:
    | ../arch/arc/include/asm/kprobes.h:57:13: warning: 'trap_is_kprobe' defined but not used [-Wunused-function]
    |  static void trap_is_kprobe(unsigned long address, struct pt_regs *regs)
    |              ^~~~~~~~~~~~~~
    
    The warning started with 7d134b2ce6 ("kprobes: move kprobe declarations
    to asm-generic/kprobes.h") which started including <asm/kprobes.h>
    unconditionally into <linux/kprobes.h> exposing a stub function for
    !CONFIG_KPROBES to rest of world. Fix that by making the stub a macro
    
    Signed-off-by: Vineet Gupta <vgupta@synopsys.com>

diff --git a/arch/arc/include/asm/kprobes.h b/arch/arc/include/asm/kprobes.h
index 00bdbe167615..2e52d18e6bc7 100644
--- a/arch/arc/include/asm/kprobes.h
+++ b/arch/arc/include/asm/kprobes.h
@@ -54,9 +54,7 @@ int kprobe_fault_handler(struct pt_regs *regs, unsigned long cause);
 void kretprobe_trampoline(void);
 void trap_is_kprobe(unsigned long address, struct pt_regs *regs);
 #else
-static void trap_is_kprobe(unsigned long address, struct pt_regs *regs)
-{
-}
+#define trap_is_kprobe(address, regs)
 #endif /* CONFIG_KPROBES */
 
 #endif /* _ARC_KPROBES_H */

