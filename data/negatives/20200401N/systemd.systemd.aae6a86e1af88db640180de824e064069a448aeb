commit aae6a86e1af88db640180de824e064069a448aeb
Author: Lennart Poettering <lennart@poettering.net>
Date:   Fri Dec 18 14:33:59 2015 +0100

    resolved: refuse to add auxiliary transactions loops
    
    Let's be safe and explicitly avoid that we add an auxiliary transaction
    dependency on ourselves.

diff --git a/src/resolve/resolved-dns-transaction.c b/src/resolve/resolved-dns-transaction.c
index e65593e14..5b6846f00 100644
--- a/src/resolve/resolved-dns-transaction.c
+++ b/src/resolve/resolved-dns-transaction.c
@@ -1181,6 +1181,12 @@ static int dns_transaction_request_dnssec_rr(DnsTransaction *t, DnsResourceKey *
         assert(t);
         assert(key);
 
+        r = dns_resource_key_equal(t->key, key);
+        if (r < 0)
+                return r;
+        if (r > 0) /* Don't go in circles */
+                return 0;
+
         /* Try to get the data from the trust anchor */
         r = dns_trust_anchor_lookup(&t->scope->manager->trust_anchor, key, &a);
         if (r < 0)

