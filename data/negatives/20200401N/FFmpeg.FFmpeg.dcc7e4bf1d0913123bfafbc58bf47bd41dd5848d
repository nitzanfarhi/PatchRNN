commit dcc7e4bf1d0913123bfafbc58bf47bd41dd5848d
Author: Anton Khirnov <anton@khirnov.net>
Date:   Wed Feb 19 20:42:39 2014 +0100

    af_resample: preserve frame properties

diff --git a/libavfilter/af_resample.c b/libavfilter/af_resample.c
index 224e0ed28c..a89ab35e5c 100644
--- a/libavfilter/af_resample.c
+++ b/libavfilter/af_resample.c
@@ -252,6 +252,14 @@ static int filter_frame(AVFilterLink *inlink, AVFrame *in)
 
         if (ret > 0) {
             out->nb_samples = ret;
+
+            ret = av_frame_copy_props(out, in);
+            if (ret < 0) {
+                av_frame_free(&out);
+                goto fail;
+            }
+
+            out->sample_rate = outlink->sample_rate;
             if (in->pts != AV_NOPTS_VALUE) {
                 out->pts = av_rescale_q(in->pts, inlink->time_base,
                                             outlink->time_base) -

