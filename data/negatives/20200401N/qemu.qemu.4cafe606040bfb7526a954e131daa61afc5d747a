commit 4cafe606040bfb7526a954e131daa61afc5d747a
Author: Jan Kiszka <jan.kiszka@siemens.com>
Date:   Fri Feb 3 22:06:47 2012 +0100

    KVM: Fix breakages of QOM conversion
    
    KVM APIC and PIC require instance sizes.
    
    Signed-off-by: Jan Kiszka <jan.kiszka@siemens.com>
    Signed-off-by: Anthony Liguori <aliguori@us.ibm.com>

diff --git a/hw/kvm/apic.c b/hw/kvm/apic.c
index 89e33b0ac8..dfc2ab3b03 100644
--- a/hw/kvm/apic.c
+++ b/hw/kvm/apic.c
@@ -135,6 +135,7 @@ static void kvm_apic_class_init(ObjectClass *klass, void *data)
 static TypeInfo kvm_apic_info = {
     .name = "kvm-apic",
     .parent = TYPE_APIC_COMMON,
+    .instance_size = sizeof(APICCommonState),
     .class_init = kvm_apic_class_init,
 };
 
diff --git a/hw/kvm/i8259.c b/hw/kvm/i8259.c
index 297d64e11f..14bd427518 100644
--- a/hw/kvm/i8259.c
+++ b/hw/kvm/i8259.c
@@ -126,6 +126,7 @@ static void kvm_i8259_class_init(ObjectClass *klass, void *data)
 static TypeInfo kvm_i8259_info = {
     .name  = "kvm-i8259",
     .parent = TYPE_PIC_COMMON,
+    .instance_size = sizeof(PICCommonState),
     .class_init = kvm_i8259_class_init,
 };
 

