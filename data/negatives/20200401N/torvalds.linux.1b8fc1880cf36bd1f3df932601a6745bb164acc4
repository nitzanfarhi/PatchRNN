commit 1b8fc1880cf36bd1f3df932601a6745bb164acc4
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Feb 11 18:56:03 2007 +0100

    [ARM] 4159/1: S3C2410: fix compile of arch/arm/mach-s3c2410/mach-aml5900.c
    
    Fix compile of arch/arm/mach-s3c2410/mach-aml5900.c due to missing
    fixes that have been applied to the rest of the tree.
    
    Include <linux/serial_core.h> to provide the upf_t type needed for
    the serial code, and remove the old static map of the SPI which is
    not needed for the new spi drivers.
    
    mach-amlm5900.c:51: include/asm/arch/regs-serial.h:200: error: parse error befo
    re "upf_t"
    mach-amlm5900.c:117: error: 'S3C24XX_VA_SPI' undeclared here (not in a function)
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-s3c2410/mach-amlm5900.c b/arch/arm/mach-s3c2410/mach-amlm5900.c
index d54cda1b3006..72f2cc4fcd03 100644
--- a/arch/arm/mach-s3c2410/mach-amlm5900.c
+++ b/arch/arm/mach-s3c2410/mach-amlm5900.c
@@ -35,7 +35,7 @@
 #include <linux/device.h>
 #include <linux/platform_device.h>
 #include <linux/proc_fs.h>
-
+#include <linux/serial_core.h>
 
 #include <asm/mach/arch.h>
 #include <asm/mach/map.h>
@@ -113,12 +113,6 @@ static struct platform_device amlm5900_device_nor = {
 #endif
 
 static struct map_desc amlm5900_iodesc[] __initdata = {
-	{
-		.virtual	= (u32)S3C24XX_VA_SPI,
-		.pfn		= __phys_to_pfn(S3C2410_PA_SPI),
-		.length		= SZ_1M,
-		.type		= MT_DEVICE
-	}
 };
 
 #define UCON S3C2410_UCON_DEFAULT

