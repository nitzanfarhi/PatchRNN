commit 77867fff033ea549096c49d863c564ad7d8be36f
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Tue Jul 28 14:44:04 2009 -0700

    ioat: fix type mismatch for ->dmacount
    
    ->dmacount tracks the sequence number of active descriptors.  It is
    written to the DMACOUNT register to update the channel's view of pending
    descriptors in the chain.  The register is 16-bits so ->dmacount should
    be unsigned and 16-bit as well.  Also modify ->desccount to maintain
    alignment.
    
    This was never a problem in practice because we never compared dmacount
    values, but this is a bug waiting to happen.
    
    Signed-off-by: Maciej Sosnowski <maciej.sosnowski@intel.com>
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>

diff --git a/drivers/dma/ioat/dma.h b/drivers/dma/ioat/dma.h
index 1226e35f2709..9f0c853b6a77 100644
--- a/drivers/dma/ioat/dma.h
+++ b/drivers/dma/ioat/dma.h
@@ -102,8 +102,8 @@ struct ioat_dma_chan {
 	struct delayed_work work;
 
 	int pending;
-	int dmacount;
-	int desccount;
+	u16 dmacount;
+	u16 desccount;
 
 	struct ioatdma_device *device;
 	struct dma_chan common;

