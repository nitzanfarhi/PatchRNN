commit eb809ec06123365a3adbcdf7f314ff3f1b691619
Author: Sergei Golubchik <sergii@pisem.net>
Date:   Wed Jan 23 16:23:50 2013 +0100

    32-bit fix: first cast the value to a signed type, then subtract

diff --git a/mysys/my_malloc.c b/mysys/my_malloc.c
index e9956263ce1..8d1a3d926d6 100644
--- a/mysys/my_malloc.c
+++ b/mysys/my_malloc.c
@@ -188,7 +188,7 @@ void *my_realloc(void *oldpoint, size_t size, myf my_flags)
                          my_flags & MY_THREAD_SPECIFIC);
     }
     else
-      update_malloc_size((longlong) (size - old_size), old_flags);
+      update_malloc_size((longlong)size - (longlong)old_size, old_flags);
   }
 
   DBUG_PRINT("exit",("ptr: %p", point));

