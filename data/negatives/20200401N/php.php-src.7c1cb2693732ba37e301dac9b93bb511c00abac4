commit 7c1cb2693732ba37e301dac9b93bb511c00abac4
Author: Felipe Pena <felipe@php.net>
Date:   Sat Aug 6 00:59:21 2011 +0000

    - Fixed bug #55313 (Number of retries not set when params specified)
      patch by: kevin at kevinlocke dot name

diff --git a/ext/imap/php_imap.c b/ext/imap/php_imap.c
index 9c0ed32dd9..a0b52ed243 100644
--- a/ext/imap/php_imap.c
+++ b/ext/imap/php_imap.c
@@ -1227,7 +1227,7 @@ static void php_imap_do_open(INTERNAL_FUNCTION_PARAMETERS, int persistent)
 	IMAPG(imap_password) = estrndup(passwd, passwd_len);
 
 #ifdef SET_MAXLOGINTRIALS
-	if (argc == 5) {
+	if (argc >= 5) {
 		if (retries < 0) {
 			php_error_docref(NULL TSRMLS_CC, E_WARNING ,"Retries must be greater or equal to 0");
 		} else {

