commit aa169282254299326d8f3ddaac3e100f258243a7
Author: Timo Sirainen <tss@iki.fi>
Date:   Wed Feb 9 23:14:13 2005 +0200

    code cleanup
    
    --HG--
    branch : HEAD

diff --git a/src/lib-storage/index/maildir/maildir-storage.c b/src/lib-storage/index/maildir/maildir-storage.c
index 094ba5d30..24435f203 100644
--- a/src/lib-storage/index/maildir/maildir-storage.c
+++ b/src/lib-storage/index/maildir/maildir-storage.c
@@ -293,7 +293,8 @@ static int mkdir_verify(struct index_storage *storage,
 		}
 	}
 
-	if (mkdir_parents(dir, CREATE_MODE) < 0 && (errno != EEXIST || !verify)) {
+	if (mkdir_parents(dir, CREATE_MODE) < 0 &&
+	    (errno != EEXIST || !verify)) {
 		if (errno != EEXIST && (!verify || errno != ENOENT)) {
 			mail_storage_set_critical(&storage->storage,
 						  "mkdir(%s) failed: %m", dir);
@@ -346,7 +347,7 @@ static int create_index_dir(struct index_storage *storage, const char *name)
 		return 0;
 
 	dir = t_strconcat(storage->index_dir, "/"MAILDIR_FS_SEP_S, name, NULL);
-	if (mkdir_parents(dir, CREATE_MODE) == -1 && errno != EEXIST) {
+	if (mkdir_parents(dir, CREATE_MODE) < 0 && errno != EEXIST) {
 		mail_storage_set_critical(&storage->storage,
 					  "mkdir(%s) failed: %m", dir);
 		return -1;

