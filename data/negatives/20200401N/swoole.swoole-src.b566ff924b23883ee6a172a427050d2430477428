commit b566ff924b23883ee6a172a427050d2430477428
Author: GXhua <393323503@qq.com>
Date:   Tue Jun 16 13:42:37 2015 +0800

    change zrequest => zrequest_object

diff --git a/swoole_phpng.c b/swoole_phpng.c
index 015534a5..ba320564 100644
--- a/swoole_phpng.c
+++ b/swoole_phpng.c
@@ -161,7 +161,7 @@ inline int sw_zend_hash_find(HashTable *ht, char *k, int len, void **v) {
       }
 #else
       zval key;
-        ZVAL_STRING(&key, k);
+        ZVAL_STRINGL(&key, k,len);
 
         zval *value = zend_hash_find(ht, Z_STR(key));
 
diff --git a/swoole_websocket.c b/swoole_websocket.c
index 9591c64e..50350a78 100644
--- a/swoole_websocket.c
+++ b/swoole_websocket.c
@@ -97,7 +97,8 @@ void swoole_websocket_onOpen(swoole_http_client *client)
         zval **args[2];
         swServer *serv = SwooleG.serv;
         zval *zserv = (zval *) serv->ptr2;
-        zval *zrequest = client->request.zrequest;
+//        zval *zrequest = client->request.zrequest;
+         zval *zrequest = client->request.zrequest_object;
         zval *retval = NULL;
 
 #ifdef __CYGWIN__

