commit 9170e34537bd31f0abadee874ed28a855a6a619a
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Tue Jan 23 12:45:57 2007 +0000

    adding assert to protect delayed_pic
    
    Originally committed as revision 7661 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/h264.c b/libavcodec/h264.c
index 00c3573ea..5a5621483 100644
--- a/libavcodec/h264.c
+++ b/libavcodec/h264.c
@@ -8341,6 +8341,9 @@ static int decode_frame(AVCodecContext *avctx,
 
         pics = 0;
         while(h->delayed_pic[pics]) pics++;
+
+        assert(pics+1 < sizeof(h->delayed_pic) / sizeof(h->delayed_pic[0]));
+
         h->delayed_pic[pics++] = cur;
         if(cur->reference == 0)
             cur->reference = 1;

