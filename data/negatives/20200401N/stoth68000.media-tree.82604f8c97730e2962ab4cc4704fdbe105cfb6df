commit 82604f8c97730e2962ab4cc4704fdbe105cfb6df
Author: Mostyn Bramley-Moore <mbmcode@gmail.com>
Date:   Sun Sep 7 11:46:40 2014 +0200

    staging/lustre: annotate lock/unlock in lov_stripe_lock / lov_stripe_unlock
    
    Annotate the lock/unlock pair in lov_stripe_lock/lov_stripe_unlock to
    avoid sparse warning about a context imbalance.
    Part of the eudyptula challenge: http://eudyptula-challenge.org/
    
    Signed-off-by: Mostyn Bramley-Moore <mbmcode@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/lustre/lustre/lov/lov_obd.c b/drivers/staging/lustre/lustre/lov/lov_obd.c
index d1eb6dfa4fbc..f0beb4c1e281 100644
--- a/drivers/staging/lustre/lustre/lov/lov_obd.c
+++ b/drivers/staging/lustre/lustre/lov/lov_obd.c
@@ -2129,6 +2129,7 @@ static int lov_set_info_async(const struct lu_env *env, struct obd_export *exp,
 }
 
 void lov_stripe_lock(struct lov_stripe_md *md)
+		__acquires(&md->lsm_lock)
 {
 	LASSERT(md->lsm_lock_owner != current_pid());
 	spin_lock(&md->lsm_lock);
@@ -2138,6 +2139,7 @@ void lov_stripe_lock(struct lov_stripe_md *md)
 EXPORT_SYMBOL(lov_stripe_lock);
 
 void lov_stripe_unlock(struct lov_stripe_md *md)
+		__releases(&md->lsm_lock)
 {
 	LASSERT(md->lsm_lock_owner == current_pid());
 	md->lsm_lock_owner = 0;

