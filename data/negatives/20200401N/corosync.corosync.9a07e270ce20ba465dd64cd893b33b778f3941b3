commit 9a07e270ce20ba465dd64cd893b33b778f3941b3
Author: Steven Dake <sdake@redhat.com>
Date:   Fri Jul 15 16:51:37 2005 +0000

    defect 740
    if open callback isn't set on saCkptCheckpointOpenAsync, return SA_AIS_ERR_INIT
    
    
    git-svn-id: http://svn.fedorahosted.org/svn/corosync/trunk@758 fd59a12c-fef9-0310-b244-a6a79926bd2f

diff --git a/lib/ckpt.c b/lib/ckpt.c
index 0f85643c..383e8267 100644
--- a/lib/ckpt.c
+++ b/lib/ckpt.c
@@ -635,6 +635,11 @@ saCkptCheckpointOpenAsync (
 		goto error_exit;
 	}
 
+	if (ckptInstance->callbacks.saCkptCheckpointOpenCallback == NULL) {
+		error = SA_AIS_ERR_INIT;
+		goto error_put_ckpt;
+	}
+
 	error = saHandleCreate (&checkpointHandleDatabase,
 		sizeof (struct ckptCheckpointInstance), &checkpointHandle);
 	if (error != SA_AIS_OK) {

