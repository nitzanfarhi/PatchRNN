commit 468d9222802955ad65e0e3b49d240e9581e75351
Author: Roger Dingledine <arma@torproject.org>
Date:   Mon Jul 30 01:07:06 2007 +0000

    start hunting bugs, first in a non-crashy manner
    
    
    svn:r10978

diff --git a/src/or/config.c b/src/or/config.c
index 4663e5b3d..0f6f8e0c9 100644
--- a/src/or/config.c
+++ b/src/or/config.c
@@ -756,6 +756,10 @@ config_free_all(void)
 const char *
 safe_str(const char *address)
 {
+  if (!address) { /* XXX020 eventually turn this into an assert */
+    log_warn(LD_BUG, "safe_str() called with NULL address.");
+    return "EMPTY";
+  }
   if (get_options()->SafeLogging)
     return "[scrubbed]";
   else

