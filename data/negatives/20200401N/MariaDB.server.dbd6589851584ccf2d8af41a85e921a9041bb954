commit dbd6589851584ccf2d8af41a85e921a9041bb954
Author: konstantin@mysql.com <>
Date:   Tue Jan 11 18:02:44 2005 +0300

    A fix for Bug#7365 "embedded server for MacOS: problem with prepared
    statements": no test case, the test case is there already,
    libmysqld/examples/client_test.c, we just need to run it on a daily basis.

diff --git a/libmysqld/lib_sql.cc b/libmysqld/lib_sql.cc
index 26d97fa03c8..15fe3a03390 100644
--- a/libmysqld/lib_sql.cc
+++ b/libmysqld/lib_sql.cc
@@ -219,12 +219,13 @@ static my_bool emb_mysql_read_query_result(MYSQL *mysql)
 static int emb_stmt_execute(MYSQL_STMT *stmt)
 {
   DBUG_ENTER("emb_stmt_execute");
+  char header[4];
+  int4store(header, stmt->stmt_id);
   THD *thd= (THD*)stmt->mysql->thd;
   thd->client_param_count= stmt->param_count;
   thd->client_params= stmt->params;
   if (emb_advanced_command(stmt->mysql, COM_EXECUTE,0,0,
-			   (const char*)&stmt->stmt_id,sizeof(stmt->stmt_id),
-			   1) ||
+                           header, sizeof(header), 1) ||
       emb_mysql_read_query_result(stmt->mysql))
   {
     NET *net= &stmt->mysql->net;

