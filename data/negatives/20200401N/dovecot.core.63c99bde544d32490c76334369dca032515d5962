commit 63c99bde544d32490c76334369dca032515d5962
Author: Timo Sirainen <tss@iki.fi>
Date:   Sun Nov 5 19:55:49 2006 +0200

    If both mail_location and default_mail_env are set in the config file, give
    an error.
    
    --HG--
    branch : HEAD

diff --git a/src/master/master-settings.c b/src/master/master-settings.c
index 56dd815ef..916447a87 100644
--- a/src/master/master-settings.c
+++ b/src/master/master-settings.c
@@ -874,6 +874,10 @@ static bool settings_fix(struct settings *set, bool nochecks)
 	if (*set->mail_location == '\0') {
 		/* keep this for backwards compatibility */
 		set->mail_location = set->default_mail_env;
+	} else if (*set->default_mail_env != '\0') {
+		i_error("Both mail_location and default_mail_env set. "
+			"Use only one of them.");
+		return FALSE;
 	}
 	return nochecks ? TRUE : settings_verify(set);
 }

