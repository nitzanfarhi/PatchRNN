commit 369567e46edced4f4a959ce5a241c171e269a3e2
Author: Ruben Kerkhof <ruben@rubenkerkhof.com>
Date:   Fri Dec 25 11:46:04 2015 +0100

    uuid plugin: make it work on OpenBSD

diff --git a/src/uuid.c b/src/uuid.c
index a607d619..89766268 100644
--- a/src/uuid.c
+++ b/src/uuid.c
@@ -124,6 +124,21 @@ uuid_get_from_sysctlbyname(const char *name)
         return NULL;
     return (strdup (uuid));
 }
+#elif defined(__OpenBSD__)
+static char *
+uuid_get_from_sysctl(void)
+{
+    char uuid[UUID_PRINTABLE_NORMAL_LENGTH + 1];
+    size_t len = sizeof (uuid);
+    int mib[2];
+
+    mib[0] = CTL_HW;
+    mib[1] = HW_UUID;
+
+    if (sysctl(mib, 2, uuid, &len, NULL, 0) == -1)
+        return NULL;
+    return (strdup (uuid));
+}
 #endif
 
 #if HAVE_LIBHAL_H
@@ -218,6 +233,9 @@ uuid_get_local(void)
 #elif defined(__NetBSD__)
     if ((uuid = uuid_get_from_sysctlbyname("machdep.dmi.system-uuid")) != NULL)
         return (uuid);
+#elif defined(__OpenBSD__)
+    if ((uuid = uuid_get_from_sysctl()) != NULL)
+        return (uuid);
 #elif defined(__linux__)
     if ((uuid = uuid_get_from_file("/sys/class/dmi/id/product_uuid")) != NULL)
         return (uuid);

