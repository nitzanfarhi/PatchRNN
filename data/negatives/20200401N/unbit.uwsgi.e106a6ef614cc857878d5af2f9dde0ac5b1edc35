commit e106a6ef614cc857878d5af2f9dde0ac5b1edc35
Author: Riccardo Magliocchetti <riccardo.magliocchetti@gmail.com>
Date:   Sat Jan 26 21:23:17 2013 +0100

    plugins/python: check uwsgi_connect return code in uwsgi_python_harakiri
    
    Reported by Coverity as CID #970996.

diff --git a/plugins/python/python_plugin.c b/plugins/python/python_plugin.c
index 9ad87a28..b183bdef 100644
--- a/plugins/python/python_plugin.c
+++ b/plugins/python/python_plugin.c
@@ -1802,7 +1802,7 @@ void uwsgi_python_harakiri(int wid) {
 		char *address = uwsgi_concat2(up.tracebacker, uwsgi_num2str(wid));
 
         	int fd = uwsgi_connect(address, -1, 0);
-        	for (;;) {
+        	while (fd >= 0) {
                 	int ret = uwsgi_waitfd(fd, uwsgi.shared->options[UWSGI_OPTION_SOCKET_TIMEOUT]);
                 	if (ret <= 0) {
 				break;

