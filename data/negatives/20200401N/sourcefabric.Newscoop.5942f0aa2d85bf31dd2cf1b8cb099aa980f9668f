commit 5942f0aa2d85bf31dd2cf1b8cb099aa980f9668f
Author: mugur <mugur@952d13e4-84fd-0310-bd7c-ee2827c68691>
Date:   Mon Apr 25 19:03:27 2005 +0000

    in CActPrint::takeAction(): fixed print publication [field] bug

diff --git a/campsite/implementation/parser/parser/actions.cpp b/campsite/implementation/parser/parser/actions.cpp
index a5aa76336..ea950ba2f 100644
--- a/campsite/implementation/parser/parser/actions.cpp
+++ b/campsite/implementation/parser/parser/actions.cpp
@@ -1545,8 +1545,12 @@ int CActPrint::takeAction(CContext& c, sockstream& fs)
 	{
 		if (c.Publication() < 0)
 			return ERR_NOPARAM;
-		table = "Publications as p, Aliases as a";
-		w = "p.IdDefaultAlias = a.Id";
+		table = "Publications as p";
+		if (field == "a.Name")
+		{
+			table += ", Aliases as a";
+			w = "p.IdDefaultAlias = a.Id";
+		}
 		SetNrField("p.Id", c.Publication(), buf, w);
 	}
 	else if (modifier == CMS_ST_ISSUE)
@@ -1627,8 +1631,6 @@ int CActPrint::takeAction(CContext& c, sockstream& fs)
 		w += (w != "" ? string(" and ") : string("")) + buf.str();
 	}
 	string coQuery = string("select ");
-	if (modifier == CMS_ST_PUBLICATION)
-		coQuery += string("p.");
 	coQuery += field + " from " + table;
 	if (w != "")
 		coQuery += string(" where ") + w;

