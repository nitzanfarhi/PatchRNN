commit cd573917c33be5f2bd75e4216c9a05ba51096bca
Author: Lu Guanqun <guanqun.lu@intel.com>
Date:   Tue May 3 17:33:28 2011 +0100

    intel_sst: Set de-bounce time
    
    In order to make jack detection behave properly, we have to set
    the de-bounce time, otherwise, some weird events happens:
    e.g. no plug-out event seen.
    
    Signed-off-by: Lu Guanqun <guanqun.lu@intel.com>
    Signed-off-by: Alan Cox <alan@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/intel_sst/intelmid_v2_control.c b/drivers/staging/intel_sst/intelmid_v2_control.c
index 34cddb8fecad..6516a9854713 100644
--- a/drivers/staging/intel_sst/intelmid_v2_control.c
+++ b/drivers/staging/intel_sst/intelmid_v2_control.c
@@ -83,6 +83,7 @@ enum reg_v3 {
 	HPLMIXSEL = 0x12b,
 	HPRMIXSEL = 0x12c,
 	LOANTIPOP = 0x12d,
+	AUXDBNC = 0x12f,
 };
 
 /****
@@ -859,7 +860,10 @@ static int nc_set_selected_input_dev(u8 value)
 		sc_access[3].reg_addr = 0x105;
 		sc_access[3].value = 0x40;
 		sc_access[3].mask = MASK6;
-		num_val = 4;
+		sc_access[4].reg_addr = AUXDBNC;
+		sc_access[4].mask = MASK7|MASK6|MASK5|MASK4|MASK3|MASK2|MASK1|MASK0;
+		sc_access[4].value = 0xff;
+		num_val = 5;
 		break;
 
 	case DMIC:

