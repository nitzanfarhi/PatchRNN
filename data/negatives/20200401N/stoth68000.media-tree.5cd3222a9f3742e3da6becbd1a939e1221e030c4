commit 5cd3222a9f3742e3da6becbd1a939e1221e030c4
Author: Guenter Roeck <guenter.roeck@ericsson.com>
Date:   Thu Dec 8 10:55:16 2011 -0800

    hwmon: (f75375s) Disable setting DC fan control mode for F75373
    
    F75373 does not support DC (linear voltage) fan control mode, so don't let
    the user set it.
    
    Cc: Riku Voipio <riku.voipio@iki.fi>
    Reviewed-by: Bjoern Gerhart <oss@extracloud.de>
    Signed-off-by: Guenter Roeck <guenter.roeck@ericsson.com>

diff --git a/drivers/hwmon/f75375s.c b/drivers/hwmon/f75375s.c
index 9c3f078e263b..35b570e56ff0 100644
--- a/drivers/hwmon/f75375s.c
+++ b/drivers/hwmon/f75375s.c
@@ -372,6 +372,10 @@ static ssize_t set_pwm_mode(struct device *dev, struct device_attribute *attr,
 	if (!(val == 0 || val == 1))
 		return -EINVAL;
 
+	/* F75373 does not support DC (linear voltage) fan control mode */
+	if (data->kind == f75373 && val == 0)
+		return -EINVAL;
+
 	mutex_lock(&data->update_lock);
 	conf = f75375_read8(client, F75375_REG_CONFIG1);
 	conf &= ~(1 << FAN_CTRL_LINEAR(nr));

