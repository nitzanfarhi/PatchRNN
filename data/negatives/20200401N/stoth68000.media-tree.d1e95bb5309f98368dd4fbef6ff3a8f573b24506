commit d1e95bb5309f98368dd4fbef6ff3a8f573b24506
Author: Ben Hutchings <ben@decadent.org.uk>
Date:   Sun Oct 10 16:11:02 2010 +0100

    perf trace: Fix detection of script extension
    
    The extension starts with the last dot in the name, not the first.
    
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
    LKML-Reference: <1286723462.2955.206.camel@localhost>
    Signed-off-by: Ben Hutchings <ben@decadent.org.uk>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>

diff --git a/tools/perf/builtin-trace.c b/tools/perf/builtin-trace.c
index 3ea62199ffe1..deda1a93131e 100644
--- a/tools/perf/builtin-trace.c
+++ b/tools/perf/builtin-trace.c
@@ -282,7 +282,7 @@ static int parse_scriptname(const struct option *opt __used,
 		script++;
 	} else {
 		script = str;
-		ext = strchr(script, '.');
+		ext = strrchr(script, '.');
 		if (!ext) {
 			fprintf(stderr, "invalid script extension");
 			return -1;

