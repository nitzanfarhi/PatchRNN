commit 63e4e822f20e4cc020bff47fc7e1f6da2087a3fb
Author: Dan Vr√°til <dvratil@redhat.com>
Date:   Wed May 6 17:41:22 2015 +0200

    Actually unset the env variable when the value is empty

diff --git a/xdg-app-builtins-run.c b/xdg-app-builtins-run.c
index 47f071dd..7f34f18e 100644
--- a/xdg-app-builtins-run.c
+++ b/xdg-app-builtins-run.c
@@ -388,7 +388,10 @@ xdg_app_builtin_run (int argc, char **argv, GCancellable *cancellable, GError **
   for (i = 0; i < env_array->len; i++)
     {
        EnvVar *var = g_ptr_array_index (env_array, i);
-       g_setenv (var->name, var->value, TRUE);
+       if (!var->value || !var->value[0])
+         g_unsetenv (var->name);
+       else
+         g_setenv (var->name, var->value, TRUE);
     }
 
   xdg_app_run_in_transient_unit (app);

