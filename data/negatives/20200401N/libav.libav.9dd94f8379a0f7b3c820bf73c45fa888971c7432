commit 9dd94f8379a0f7b3c820bf73c45fa888971c7432
Author: Alex Converse <aconverse@google.com>
Date:   Mon Mar 28 13:54:18 2011 -0700

    mov: Add support for zero-sized stsc runs.
    
    A zero sized stsc run doesn't make a lot of sense but the spec does not
    prohibit them and MPlayer VLC demuxers support them.
    
    Signed-off-by: Anton Khirnov <anton@khirnov.net>

diff --git a/libavformat/mov.c b/libavformat/mov.c
index 94f19a684..b57c1aab1 100644
--- a/libavformat/mov.c
+++ b/libavformat/mov.c
@@ -1553,7 +1553,7 @@ static void mov_build_index(MOVContext *mov, AVStream *st)
 
         for (i = 0; i < sc->chunk_count; i++) {
             current_offset = sc->chunk_offsets[i];
-            if (stsc_index + 1 < sc->stsc_count &&
+            while (stsc_index + 1 < sc->stsc_count &&
                 i + 1 == sc->stsc_data[stsc_index + 1].first)
                 stsc_index++;
             for (j = 0; j < sc->stsc_data[stsc_index].count; j++) {

