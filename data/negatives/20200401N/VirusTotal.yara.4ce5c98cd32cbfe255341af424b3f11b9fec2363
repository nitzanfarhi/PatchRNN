commit 4ce5c98cd32cbfe255341af424b3f11b9fec2363
Author: Victor M. Alvarez <vmalvarez@virustotal.com>
Date:   Mon Jul 30 13:10:33 2018 +0200

    Declare variables before first statement in block as required Visual C++ 9.0.

diff --git a/libyara/atoms.c b/libyara/atoms.c
index cd7f379..86e6bb9 100644
--- a/libyara/atoms.c
+++ b/libyara/atoms.c
@@ -211,13 +211,13 @@ int yr_atoms_table_quality(
     }
     else
     {
-      if (atom_length == YR_MAX_ATOM_LENGTH)
-        return table[middle].quality;
-
       int i = middle + 1;
       int quality = table[middle].quality;
       int min_quality = quality;
 
+      if (atom_length == YR_MAX_ATOM_LENGTH)
+        return table[middle].quality;
+
       while (i < end && memcmp(table[i].atom, atom, atom_length) == 0)
       {
         if (min_quality > table[i].quality)

