commit 0d3aa8b7be9c3f8423359d090148fb7da0e5ea49
Author: Daniel Stenberg <daniel@haxx.se>
Date:   Sun Feb 15 13:55:24 2004 +0000

    Use the was_iface variable when binding a socket locally, even if no
    SO_BINDTODEVICE is present, to prevent compiler warnings about the variable

diff --git a/lib/connect.c b/lib/connect.c
index c9578c178..97d5d34d0 100644
--- a/lib/connect.c
+++ b/lib/connect.c
@@ -244,23 +244,20 @@ static CURLcode bindlocal(struct connectdata *conn,
 
       if(h)
         was_iface = TRUE;
-
     }
-    else {
-      if(strlen(data->set.device)>1) {
-        /*
-         * This was not an interface, resolve the name as a host name
-         * or IP number
-         */
-        rc = Curl_resolv(conn, data->set.device, 0, &h);
-        if(rc == 1)
-          (void)Curl_wait_for_resolv(conn, &h);
 
-        if(h)
-          /* we know data->set.device is shorter than the myhost array */
-          strcpy(myhost, data->set.device);
+    if(!was_iface) {
+      /*
+       * This was not an interface, resolve the name as a host name
+       * or IP number
+       */
+      rc = Curl_resolv(conn, data->set.device, 0, &h);
+      if(rc == 1)
+        (void)Curl_wait_for_resolv(conn, &h);
 
-      }
+      if(h)
+        /* we know data->set.device is shorter than the myhost array */
+        strcpy(myhost, data->set.device);
     }
 
     if(! *myhost) {

