commit 077d01f2fcc305809f084ccc34badc531ae2f30a
Author: Cory Fields <cory-nospam-@coryfields.com>
Date:   Mon Jul 17 13:14:53 2017 -0400

    random: only use getentropy on openbsd

diff --git a/src/random.cpp b/src/random.cpp
index 3226abb69..b308e8f4a 100644
--- a/src/random.cpp
+++ b/src/random.cpp
@@ -227,10 +227,12 @@ void GetOSRand(unsigned char *ent32)
             RandFailure();
         }
     }
-#elif defined(HAVE_GETENTROPY)
+#elif defined(HAVE_GETENTROPY) && defined(__OpenBSD__)
     /* On OpenBSD this can return up to 256 bytes of entropy, will return an
      * error if more are requested.
      * The call cannot return less than the requested number of bytes.
+       getentropy is explicitly limited to openbsd here, as a similar (but not
+       the same) function may exist on other platforms via glibc.
      */
     if (getentropy(ent32, NUM_OS_RANDOM_BYTES) != 0) {
         RandFailure();

