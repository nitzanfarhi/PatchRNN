commit 54ce3b86b40549b3a08db6924d2e2a4325090bcc
Author: ellson <devnull@localhost>
Date:   Fri Sep 8 16:31:13 2006 +0000

    Fix #1012 - missing edge labels in -Txdot

diff --git a/lib/common/emit.c b/lib/common/emit.c
index 69dbe526e..109419b0b 100644
--- a/lib/common/emit.c
+++ b/lib/common/emit.c
@@ -1522,7 +1522,7 @@ static bool edge_in_box(edge_t *e, boxf b)
     return FALSE;
 }
 
-static void emit_begin_edge(GVJ_t * job, edge_t * e)
+void emit_begin_edge(GVJ_t * job, edge_t * e)
 {
     obj_state_t *obj;
     int flags = job->flags;
@@ -1632,7 +1632,7 @@ static void emit_begin_edge(GVJ_t * job, edge_t * e)
 	gvrender_begin_anchor(job, obj->url, obj->tooltip, obj->target);
 }
 
-static void emit_end_edge(GVJ_t * job)
+void emit_end_edge(GVJ_t * job)
 {
     obj_state_t *obj = job->obj;
     edge_t *e = obj->u.e;
diff --git a/lib/common/output.c b/lib/common/output.c
index c85c49287..7e7f24e33 100644
--- a/lib/common/output.c
+++ b/lib/common/output.c
@@ -407,7 +407,9 @@ void extend_attrs(GVJ_t * job, graph_t *g, agxbuf** xbufs)
             if (ED_spl(e) == NULL)
                 continue;
 
+            emit_begin_edge (job, e);
             emit_edge_graphics (job, e);
+            emit_end_edge (job);
             agxset(e, e_draw->index, agxbuse(xbufs[EMIT_EDRAW]));
             if (t_draw) agxset(e, t_draw->index, agxbuse(xbufs[EMIT_TDRAW]));
             if (h_draw) agxset(e, h_draw->index, agxbuse(xbufs[EMIT_HDRAW]));
diff --git a/lib/common/render.h b/lib/common/render.h
index 0e9720eab..5d73f590b 100644
--- a/lib/common/render.h
+++ b/lib/common/render.h
@@ -95,7 +95,9 @@ extern "C" {
     extern double elapsed_sec(void);
     extern void emit_background(GVJ_t * job, graph_t *g);
     extern void emit_clusters(GVJ_t * job, Agraph_t * g, int flags);
+    extern void emit_begin_edge(GVJ_t * job, edge_t * e);
     extern void emit_edge_graphics(GVJ_t * job, edge_t * e);
+    extern void emit_end_edge(GVJ_t * job);
     extern void emit_graph(GVJ_t * job, graph_t * g);
     extern void emit_label(GVJ_t * job, emit_state_t emit_state, textlabel_t *);
     extern int emit_once(char *message);

