commit 87c6416d0caff986965a40b038c919d12014ee30
Author: Patrick Walton <pcwalton@mimiga.net>
Date:   Thu Sep 8 13:23:06 2011 -0700

    rt: Don't double-print commas when logging e.g. a vec of boxes

diff --git a/src/rt/rust_shape.cpp b/src/rt/rust_shape.cpp
index 47f8b1d688..7f242143d5 100644
--- a/src/rt/rust_shape.cpp
+++ b/src/rt/rust_shape.cpp
@@ -440,6 +440,7 @@ log::walk_string(const std::pair<ptr,ptr> &data) {
 void
 log::walk_struct(const uint8_t *end_sp) {
     out << prefix << "(";
+    prefix = "";
 
     bool first = true;
     while (sp != end_sp) {
diff --git a/src/rt/rust_shape.h b/src/rt/rust_shape.h
index 16a271cf5f..96dac8054e 100644
--- a/src/rt/rust_shape.h
+++ b/src/rt/rust_shape.h
@@ -984,16 +984,19 @@ private:
 
     void walk_box() {
         out << prefix << "@";
+        prefix = "";
         data<log,ptr>::walk_box_contents();
     }
 
     void walk_fn() {
         out << prefix << "fn";
+        prefix = "";
         data<log,ptr>::walk_fn_contents(dp);
     }
 
     void walk_obj() {
         out << prefix << "obj";
+        prefix = "";
         data<log,ptr>::walk_obj_contents(dp);
     }
 

