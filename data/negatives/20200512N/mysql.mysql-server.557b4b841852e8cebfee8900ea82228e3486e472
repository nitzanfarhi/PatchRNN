commit 557b4b841852e8cebfee8900ea82228e3486e472
Author: Sunny Bains <Sunny.Bains@Oracle.Com>
Date:   Sat Jan 26 14:55:28 2013 +1100

    Bug#16207240: INNODB: PB2 TESTS FAILING WITH UN-EXPECTED ERROR (HITTING ASSERT-ABORT)
    
    Followup fix, minor cleanup.

diff --git a/storage/innobase/srv/srv0start.cc b/storage/innobase/srv/srv0start.cc
index 8ff746e342a..e3b3cc0519d 100644
--- a/storage/innobase/srv/srv0start.cc
+++ b/storage/innobase/srv/srv0start.cc
@@ -1075,6 +1075,7 @@ srv_shutdown_all_bg_threads()
 			" had not exited at shutdown!",
 			(ulong) os_thread_count);
 	} else {
+		/* Reset the start state. */
 		srv_start_state = SRV_START_STATE_NONE;
 	}
 }
@@ -1118,9 +1119,9 @@ innobase_start_or_create_for_mysql(void)
 	char		logfilename[10000];
 	char*		logfile0	= NULL;
 	size_t		dirnamelen;
-	unsigned	i		= 0;
 
-	srv_start_state_set(SRV_START_STATE_NONE);
+	/* Reset the start state. */
+	srv_start_state = SRV_START_STATE_NONE;
 
 	if (srv_read_only_mode) {
 		ib_logf(IB_LOG_LEVEL_INFO, "Started in read only mode");

