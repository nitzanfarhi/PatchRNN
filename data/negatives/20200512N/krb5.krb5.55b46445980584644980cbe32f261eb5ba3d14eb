commit 55b46445980584644980cbe32f261eb5ba3d14eb
Author: Greg Hudson <ghudson@mit.edu>
Date:   Fri Jul 15 18:51:31 2016 -0400

    Fix error handling in k5_expand_path()
    
    In k5_expand_path_tokens_extra(), don't throw away non-zero return
    statuses in the cleanup handler.  Reported by Will Fiveash.
    
    ticket: 8455
    target_version: 1.14-next
    target_version: 1.13-next
    tags: pullup

diff --git a/src/lib/krb5/os/expand_path.c b/src/lib/krb5/os/expand_path.c
index 6142b3bbd..a8a14f4bb 100644
--- a/src/lib/krb5/os/expand_path.c
+++ b/src/lib/krb5/os/expand_path.c
@@ -537,5 +537,5 @@ k5_expand_path_tokens_extra(krb5_context context, const char *path_in,
 cleanup:
     k5_buf_free(&buf);
     free_extra_tokens(extra_tokens);
-    return 0;
+    return ret;
 }

