commit 1387fe4a95cc9e7b7fd997b7c676161bfac05c41
Author: Blue Swirl <blauwirbel@gmail.com>
Date:   Fri Aug 28 19:04:13 2009 +0000

    Fix Sparc64 breakage: add dummy ISA irqs
    
    Signed-off-by: Blue Swirl <blauwirbel@gmail.com>

diff --git a/hw/sun4u.c b/hw/sun4u.c
index 012a76a976..ece83e6163 100644
--- a/hw/sun4u.c
+++ b/hw/sun4u.c
@@ -352,11 +352,19 @@ static void ebus_mmio_mapfunc(PCIDevice *pci_dev, int region_num,
     }
 }
 
+static void dummy_isa_irq_handler(void *opaque, int n, int level)
+{
+}
+
 /* EBUS (Eight bit bus) bridge */
 static void
 pci_ebus_init(PCIBus *bus, int devfn)
 {
+    qemu_irq *isa_irq;
+
     pci_create_simple(bus, devfn, "ebus");
+    isa_irq = qemu_allocate_irqs(dummy_isa_irq_handler, NULL, 16);
+    isa_bus_irqs(isa_irq);
 }
 
 static int

