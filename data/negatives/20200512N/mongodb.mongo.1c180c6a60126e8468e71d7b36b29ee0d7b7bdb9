commit 1c180c6a60126e8468e71d7b36b29ee0d7b7bdb9
Author: dannenberg <dannenberg.matt@gmail.com>
Date:   Wed Jun 15 11:35:46 2011 -0400

    SERVER-3267 very basic custom prompt added

diff --git a/shell/dbshell.cpp b/shell/dbshell.cpp
index b5dac976c8..0014b34f7a 100644
--- a/shell/dbshell.cpp
+++ b/shell/dbshell.cpp
@@ -669,6 +669,8 @@ int _main(int argc, char* argv[]) {
 
         shellHistoryInit();
 
+        string prompt;
+
         //v8::Handle<v8::Object> shellHelper = baseContext_->Global()->Get( v8::String::New( "shellHelper" ) )->ToObject();
 
         while ( 1 ) {
@@ -677,8 +679,11 @@ int _main(int argc, char* argv[]) {
 //            shellMainScope->localConnect;
             //DBClientWithCommands *c = getConnection( JSContext *cx, JSObject *obj );
 
-            string prompt(sayReplSetMemberState()+"> ");
-
+            if (scope->exec("prompt", "", false, false, false)) {
+                prompt = scope->getString("prompt");
+             } else {
+                prompt = sayReplSetMemberState()+"> ";
+             }
             char * line = shellReadline( prompt.c_str() );
 
             if ( line ) {

