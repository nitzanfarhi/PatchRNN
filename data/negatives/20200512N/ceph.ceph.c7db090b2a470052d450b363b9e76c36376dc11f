commit c7db090b2a470052d450b363b9e76c36376dc11f
Author: Yan, Zheng <zheng.z.yan@intel.com>
Date:   Mon Sep 23 15:28:52 2013 +0800

    fragtree_t: fix get_leaves_under()
    
    If fragtree is (*^1, 1*^1) and we want leaves under frag 000*.
    get_leaves_under() return frag 0*, frag 10* and frag 11*. This is
    obviously wrong.
    
    Signed-off-by: Yan, Zheng <zheng.z.yan@intel.com>

diff --git a/src/include/frag.h b/src/include/frag.h
index 715eb09828..fbe5b43f8c 100644
--- a/src/include/frag.h
+++ b/src/include/frag.h
@@ -285,7 +285,7 @@ public:
    */
   void get_leaves_under(frag_t x, std::list<frag_t>& ls) const {
     std::list<frag_t> q;
-    q.push_back(get_branch(x));
+    q.push_back(get_branch_or_leaf(x));
     while (!q.empty()) {
       frag_t t = q.front();
       q.pop_front();

