commit a29c7127297af7f72384cb2a96571853d16e6f82
Author: Andreas HÃ¥kon <andreas.hakon@protonmail.com>
Date:   Fri Jan 13 13:07:57 2017 +0100

    avformat: Fix Pro-MPEG non-square matrix
    
    Reviewed-by:vtarca@mobibase.com
    Signed-off-by: Michael Niedermayer <michael@niedermayer.cc>

diff --git a/libavformat/prompeg.c b/libavformat/prompeg.c
index cc1baa4ac0..9770a916a2 100644
--- a/libavformat/prompeg.c
+++ b/libavformat/prompeg.c
@@ -432,7 +432,7 @@ static int prompeg_write(URLContext *h, const uint8_t *buf, int size) {
 
     // FEC (column) send block-aligned
     if (!s->first && s->packet_idx % s->d == 0) {
-        col_out_idx = s->packet_idx / s->l;
+        col_out_idx = s->packet_idx / s->d;
         if ((ret = prompeg_write_fec(h, s->fec_col[col_out_idx], PROMPEG_FEC_COL)) < 0)
             goto end;
         written += ret;

