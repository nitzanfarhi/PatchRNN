commit ccac2e27f165e846289dd192b573102bc995f6b4
Author: Philip Gladstone <philipjsg@users.sourceforge.net>
Date:   Thu May 9 12:37:44 2002 +0000

    * Add the 'flags' field to the list of codec fields passed from ffserver to
      ffmpeg. This gives the VideoHighQuality patch a fighting chance.
    
    Originally committed as revision 479 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libav/ffm.c b/libav/ffm.c
index 04010f99b9..3f444c2815 100644
--- a/libav/ffm.c
+++ b/libav/ffm.c
@@ -153,6 +153,7 @@ static int ffm_write_header(AVFormatContext *s)
         put_be32(pb, codec->codec_id);
         put_byte(pb, codec->codec_type);
         put_be32(pb, codec->bit_rate);
+        put_be32(pb, codec->flags);
         /* specific info */
         switch(codec->codec_type) {
         case CODEC_TYPE_VIDEO:
@@ -376,6 +377,7 @@ static int ffm_read_header(AVFormatContext *s, AVFormatParameters *ap)
         st->codec.codec_id = get_be32(pb);
         st->codec.codec_type = get_byte(pb); /* codec_type */
         codec->bit_rate = get_be32(pb);
+        codec->flags = get_be32(pb);
         /* specific info */
         switch(codec->codec_type) {
         case CODEC_TYPE_VIDEO:

