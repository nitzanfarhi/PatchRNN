commit 19eae0bc3849e553aabf0f61cc2070236c2fffe7
Author: Elly Jones <elly@leptoquark.net>
Date:   Tue Oct 11 21:32:34 2011 -0400

    Update LinkModules invocation to use new prototype
    
    LLVM revision 141606 changes the prototype of llvm::Linker::LinkModules.
    
    Signed-off-by: Elly Jones <elly@leptoquark.net>

diff --git a/src/rustllvm/RustWrapper.cpp b/src/rustllvm/RustWrapper.cpp
index 624b5854b5..3031ce6685 100644
--- a/src/rustllvm/RustWrapper.cpp
+++ b/src/rustllvm/RustWrapper.cpp
@@ -53,7 +53,7 @@ extern "C" bool LLVMLinkModules(LLVMModuleRef Dest, LLVMModuleRef Src) {
   // function" error.
   Module *DM = reinterpret_cast<Module *>(Dest);
   Module *SM = reinterpret_cast<Module *>(Src);
-  if (Linker::LinkModules(DM, SM, &err)) {
+  if (Linker::LinkModules(DM, SM, Linker::DestroySource, &err)) {
     LLVMRustError = err.c_str();
     return false;
   }

