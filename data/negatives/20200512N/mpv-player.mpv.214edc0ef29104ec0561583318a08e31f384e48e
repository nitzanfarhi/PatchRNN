commit 214edc0ef29104ec0561583318a08e31f384e48e
Author: mplayer-svn <svn@mplayerhq.hu>
Date:   Sun Aug 12 17:57:35 2012 +0000

    command: expand properties for "run" command
    
    Change "run" command to expand properties.
    
    Patch by Jan Christoph Uhde [Jan UhdeJc com], documentation
    part changed by me.
    
    git-svn-id: svn://svn.mplayerhq.hu/mplayer/trunk@35081 b3059339-0415-0410-9bf9-f77b7e298cf2
    Author: reimar

diff --git a/command.c b/command.c
index 8bcfc8c0d2..5c77480bfe 100644
--- a/command.c
+++ b/command.c
@@ -3372,7 +3372,11 @@ void run_command(MPContext *mpctx, mp_cmd_t *cmd)
     case MP_CMD_RUN:
 #ifndef __MINGW32__
         if (!fork()) {
-            execl("/bin/sh", "sh", "-c", cmd->args[0].v.s, NULL);
+            char *exp_cmd = property_expand_string(mpctx, cmd->args[0].v.s);
+            if (exp_cmd) {
+                execl("/bin/sh", "sh", "-c", exp_cmd, NULL);
+                free(exp_cmd);
+            }
             exit(0);
         }
 #endif

