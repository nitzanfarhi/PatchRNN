commit 4744b43431e8613f920c5cba88346756f53c5165
Author: Tim Bird <tim.bird@am.sony.com>
Date:   Fri Aug 1 14:05:50 2008 -0700

    embedded: fix vc_translate operator precedence
    
    This fixes a bug in operator precedence in the newly introduced vc_translate
    macro.  Without this fix, the translation of some characters on the
    kernel console is garbled.
    
    This patch was copied to the e-mail list previously for testing.  Now,
    all reports confirm that it works, so this is an official post for
    application.
    
    Signed-off-by: Tim Bird <tim.bird@am.sony.com>
    Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>

diff --git a/include/linux/vt_kern.h b/include/linux/vt_kern.h
index 14c0e91be9b5..8c8119ffee12 100644
--- a/include/linux/vt_kern.h
+++ b/include/linux/vt_kern.h
@@ -74,7 +74,7 @@ void con_protect_unimap(struct vc_data *vc, int rdonly);
 int con_copy_unimap(struct vc_data *dst_vc, struct vc_data *src_vc);
 
 #define vc_translate(vc, c) ((vc)->vc_translate[(c) |			\
-					(vc)->vc_toggle_meta ? 0x80 : 0])
+					((vc)->vc_toggle_meta ? 0x80 : 0)])
 #else
 #define con_set_trans_old(arg) (0)
 #define con_get_trans_old(arg) (-EINVAL)

