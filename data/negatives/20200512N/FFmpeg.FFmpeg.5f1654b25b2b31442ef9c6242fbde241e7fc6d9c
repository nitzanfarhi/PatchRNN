commit 5f1654b25b2b31442ef9c6242fbde241e7fc6d9c
Author: Maxim Poliakovski <max_pole@gmx.de>
Date:   Mon Mar 8 06:49:16 2010 +0000

    Scale tile dimensions in case both local decoding and scalability mode
    are used in Indeo 5 stream.
    Patch by Maxim ($indeo5dec_author)
    
    Originally committed as revision 22318 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/ivi_common.c b/libavcodec/ivi_common.c
index e4cb42fb50..531b7d7521 100644
--- a/libavcodec/ivi_common.c
+++ b/libavcodec/ivi_common.c
@@ -256,6 +256,11 @@ int av_cold ff_ivi_init_tiles(IVIPlaneDesc *planes, int tile_width, int tile_hei
         t_width  = !p ? tile_width  : (tile_width  + 3) >> 2;
         t_height = !p ? tile_height : (tile_height + 3) >> 2;
 
+        if (!p && planes[0].num_bands == 4) {
+            t_width  >>= 1;
+            t_height >>= 1;
+        }
+
         for (b = 0; b < planes[p].num_bands; b++) {
             band = &planes[p].bands[b];
             x_tiles = IVI_NUM_TILES(band->width, t_width);

