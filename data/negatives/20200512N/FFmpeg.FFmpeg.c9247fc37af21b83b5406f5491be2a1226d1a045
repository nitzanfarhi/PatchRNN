commit c9247fc37af21b83b5406f5491be2a1226d1a045
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Wed Apr 7 21:33:53 2004 +0000

    dont reduce the min_distance of AVIndexEntry
    
    Originally committed as revision 2979 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/utils.c b/libavformat/utils.c
index 6a445e2589..ad51b04beb 100644
--- a/libavformat/utils.c
+++ b/libavformat/utils.c
@@ -915,6 +915,9 @@ int av_add_index_entry(AVStream *st,
                 memmove(entries + index + 1, entries + index, sizeof(AVIndexEntry)*(st->nb_index_entries - index));
             }
             st->nb_index_entries++;
+        }else{
+            if(ie->pos == pos && distance < ie->min_distance) //dont reduce the distance
+                distance= ie->min_distance;
         }
     }else{
         index= st->nb_index_entries++;

