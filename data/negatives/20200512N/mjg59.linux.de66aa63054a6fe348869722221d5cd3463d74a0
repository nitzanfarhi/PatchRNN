commit de66aa63054a6fe348869722221d5cd3463d74a0
Author: Johan Hedberg <johan.hedberg@intel.com>
Date:   Sun Jan 27 00:31:27 2013 +0200

    Bluetooth: Store UUIDs in the same order that they were added
    
    We should be encoding UUIDs to the EIR data in the same order that they
    were added to the kernel, i.e. each UUID should be added to the end of
    the UUIDs list. This patch fixes the issue by using list_add_tail
    instead of list_add for storing the UUIDs.
    
    Signed-off-by: Johan Hedberg <johan.hedberg@intel.com>
    Acked-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>

diff --git a/net/bluetooth/mgmt.c b/net/bluetooth/mgmt.c
index e7f944f52ff2..4fd45a3271e0 100644
--- a/net/bluetooth/mgmt.c
+++ b/net/bluetooth/mgmt.c
@@ -1330,7 +1330,7 @@ static int add_uuid(struct sock *sk, struct hci_dev *hdev, void *data, u16 len)
 	memcpy(uuid->uuid, cp->uuid, 16);
 	uuid->svc_hint = cp->svc_hint;
 
-	list_add(&uuid->list, &hdev->uuids);
+	list_add_tail(&uuid->list, &hdev->uuids);
 
 	err = update_class(hdev);
 	if (err < 0)

