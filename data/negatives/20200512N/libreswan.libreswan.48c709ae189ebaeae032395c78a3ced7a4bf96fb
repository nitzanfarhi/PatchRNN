commit 48c709ae189ebaeae032395c78a3ced7a4bf96fb
Author: Tuomo Soini <tis@foobar.fi>
Date:   Tue Apr 27 10:40:32 2010 +0300

    Fix CK_PERMANENT rekeying exception more readable.

diff --git a/programs/pluto/initiate.c b/programs/pluto/initiate.c
index 6ad674f69..63045af19 100644
--- a/programs/pluto/initiate.c
+++ b/programs/pluto/initiate.c
@@ -798,7 +798,7 @@ initiate_ondemand_body(struct find_oppo_bundle *b
 
 	/* otherwise, there is some kind of static conn that can handle
 	 * this connection, so we initiate it */
-	if(c->kind == CK_PERMANENT && USE_NETKEY)
+	if(c->kind == CK_PERMANENT && kern_interface == USE_NETKEY)
 	{
 	    /* there is already a tunnel and with netkey we need to ignore */
 	    return 0;

