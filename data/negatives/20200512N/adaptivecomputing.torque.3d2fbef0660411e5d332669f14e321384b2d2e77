commit 3d2fbef0660411e5d332669f14e321384b2d2e77
Author: jacksond <jacksond@8f940c70-5916-0410-ac46-d1fa2fa6ea29>
Date:   Thu Jan 24 18:14:48 2008 +0000

    INCR:           update diagnostic messages

diff --git a/src/server/req_stat.c b/src/server/req_stat.c
index 0ac514104..67848b5e8 100644
--- a/src/server/req_stat.c
+++ b/src/server/req_stat.c
@@ -940,7 +940,7 @@ void req_stat_node(
 
   if ((pbsndmast == NULL) || (svr_totnodes <= 0)) 
     {
-    req_reject(PBSE_NONODES,0,preq,NULL,"node list is empty");
+    req_reject(PBSE_NONODES,0,preq,NULL,"node list is empty - check 'server_priv/nodes' file");
 
     return;
     }
@@ -951,7 +951,7 @@ void req_stat_node(
     {
     type = 1;
     }
-  else if ((*name == ':') && (*(name+1) != '\0'))
+  else if ((*name == ':') && (*(name + 1) != '\0'))
     {
     if (!strcmp(name+1,"ALL"))
       {
diff --git a/src/server/svr_recov.c b/src/server/svr_recov.c
index 806375f44..9a7a88bf8 100644
--- a/src/server/svr_recov.c
+++ b/src/server/svr_recov.c
@@ -136,7 +136,7 @@ int svr_recov(
   char *svrfile)  /* I */
 
   {
-  static char *this_function_name = "svr_recov";
+  static char *id = "svr_recov";
   int i;
   int sdb;
 
@@ -146,7 +146,19 @@ int svr_recov(
 
   if (sdb < 0) 
     {
-    log_err(errno, this_function_name, msg_svdbopen);
+    if (errno == ENOENT)
+      {
+      char tmpLine[MMAX_LINE];
+
+      snprintf(tmpLine,sizeof(tmpLine),"cannot locate server database '%s' - use 'pbs_server -t create' to create new database if database has not been initialized.",
+        svrfile);
+
+      log_err(errno,id,tmpLine);
+      }
+    else
+      {
+      log_err(errno,id,msg_svdbopen);
+      }
 
     return(-1);
     }
@@ -158,9 +170,9 @@ int svr_recov(
   if (i != sizeof(struct server_qs)) 
     {
     if (i < 0) 
-      log_err(errno, this_function_name, "read of serverdb failed");
+      log_err(errno,id,"read of serverdb failed");
     else
-      log_err(errno, this_function_name, "short read of serverdb");
+      log_err(errno,id,"short read of serverdb");
 
     close(sdb);
 
@@ -177,7 +189,7 @@ int svr_recov(
 	(int)SRV_ATR_LAST,
         0) != 0 ) 
     {
-    log_err(errno, this_function_name, "error on recovering server attr");
+    log_err(errno,id,"error on recovering server attr");
 
     close(sdb);
 

