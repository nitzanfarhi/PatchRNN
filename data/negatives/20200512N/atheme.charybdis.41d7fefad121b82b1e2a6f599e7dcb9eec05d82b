commit 41d7fefad121b82b1e2a6f599e7dcb9eec05d82b
Author: Jilles Tjoelker <jilles@stack.nl>
Date:   Thu Jul 31 21:56:05 2008 +0200

    Fix some part of IPv6 dline checking.

diff --git a/src/listener.c b/src/listener.c
index 60289fb2..88415583 100644
--- a/src/listener.c
+++ b/src/listener.c
@@ -512,7 +512,7 @@ accept_precallback(rb_fde_t *F, struct sockaddr *addr, rb_socklen_t addrlen, voi
 		return 0;
 	}
 
-	aconf = find_dline(addr, AF_INET);
+	aconf = find_dline(addr, addr->sa_family);
 	if(aconf != NULL && (aconf->status & CONF_EXEMPTDLINE))
 		return 1;
 	

