commit c503cee8cad4a2c1b165640799280940d2b51b6d
Author: Andre Malo <nd@apache.org>
Date:   Sat Feb 21 15:45:02 2004 +0000

    allow log pipes to be relative to serverroot as well
    
    
    git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@102727 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/modules/loggers/mod_log_forensic.c b/modules/loggers/mod_log_forensic.c
index ca59239d39..93e53d4c00 100644
--- a/modules/loggers/mod_log_forensic.c
+++ b/modules/loggers/mod_log_forensic.c
@@ -74,8 +74,9 @@ static void open_log(server_rec *s, apr_pool_t *p)
 
     if (*cfg->logname == '|') {
         piped_log *pl;
+        const char *pname = ap_server_root_relative(p, cfg->logname + 1);
 
-        pl = ap_open_piped_log(p, cfg->logname+1);
+        pl = ap_open_piped_log(p, pname);
         if (pl == NULL) {
             ap_log_error(APLOG_MARK, APLOG_ERR, 0, s,
                          "couldn't spawn forensic log pipe %s", cfg->logname);
@@ -84,7 +85,7 @@ static void open_log(server_rec *s, apr_pool_t *p)
         cfg->fd = ap_piped_log_write_fd(pl);
     }
     else {
-        char *fname = ap_server_root_relative(p, cfg->logname);
+        const char *fname = ap_server_root_relative(p, cfg->logname);
         apr_status_t rv;
 
         if ((rv = apr_file_open(&cfg->fd, fname,

