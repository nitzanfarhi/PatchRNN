commit 17c82bce16e33b177c04ee38c85c09087a09bc80
Author: Lidza Louina <lidza.louina@gmail.com>
Date:   Wed Aug 21 21:48:35 2013 -0400

    staging: dgap: tty.c: fixes errors with tty function calls
    
    This patch fixes errors with the tty function calls
    tty_buffer_request_room, tty_insert_flip_string_flags,
    tty_insert_flip_string and tty_flip_buffer_push.
    
    They now take struct tty_port as a parameter instead
    of tty_struct.
    
    Signed-off-by: Lidza Louina <lidza.louina@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/dgap/dgap_tty.c b/drivers/staging/dgap/dgap_tty.c
index e7aea5ef51c5..4c3cc9460c75 100644
--- a/drivers/staging/dgap/dgap_tty.c
+++ b/drivers/staging/dgap/dgap_tty.c
@@ -881,20 +881,20 @@ void dgap_input(struct channel_t *ch)
 		if (I_PARMRK(tp) || I_BRKINT(tp) || I_INPCK(tp)) {
 			dgap_parity_scan(ch, ch->ch_bd->flipbuf, ch->ch_bd->flipflagbuf, &len);
 
-			len = tty_buffer_request_room(tp, len);
-			tty_insert_flip_string_flags(tp, ch->ch_bd->flipbuf,
+			len = tty_buffer_request_room(tp->port, len);
+			tty_insert_flip_string_flags(tp->port, ch->ch_bd->flipbuf,
 				ch->ch_bd->flipflagbuf, len);
 		}
 		else {
-			len = tty_buffer_request_room(tp, len);
-			tty_insert_flip_string(tp, ch->ch_bd->flipbuf, len);
+			len = tty_buffer_request_room(tp->port, len);
+			tty_insert_flip_string(tp->port, ch->ch_bd->flipbuf, len);
 		}
 
 		DGAP_UNLOCK(ch->ch_lock, lock_flags2);
 		DGAP_UNLOCK(bd->bd_lock, lock_flags);
 
 		/* Tell the tty layer its okay to "eat" the data now */
-		tty_flip_buffer_push(tp);
+		tty_flip_buffer_push(tp->port);
 	}
 
 	if (ld)

