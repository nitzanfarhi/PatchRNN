commit 80e1ca692107b0bc5b088fd9c4a20726fb1a66a2
Author: Bayi Cheng <bayi.cheng@mediatek.com>
Date:   Fri Dec 18 11:02:40 2015 +0800

    mtd: mtk-nor: adjust sequence of trigger function and assignment function
    
    Move write data register before excute command to avoid
    missing first byte write to nor flash
    
    Signed-off-by: Bayi Cheng <bayi.cheng@mediatek.com>
    Signed-off-by: Brian Norris <computersforpeace@gmail.com>

diff --git a/drivers/mtd/spi-nor/mtk-quadspi.c b/drivers/mtd/spi-nor/mtk-quadspi.c
index e1dd9fd16fbe..d5f850d035bb 100644
--- a/drivers/mtd/spi-nor/mtk-quadspi.c
+++ b/drivers/mtd/spi-nor/mtk-quadspi.c
@@ -272,10 +272,10 @@ static int mt8173_nor_write_single_byte(struct mt8173_nor *mt8173_nor,
 	mt8173_nor_set_addr(mt8173_nor, addr);
 
 	for (i = 0; i < length; i++) {
+		writeb(*data++, mt8173_nor->base + MTK_NOR_WDATA_REG);
 		ret = mt8173_nor_execute_cmd(mt8173_nor, MTK_NOR_PIO_WR_CMD);
 		if (ret < 0)
 			return ret;
-		writeb(*data++, mt8173_nor->base + MTK_NOR_WDATA_REG);
 	}
 	return 0;
 }

