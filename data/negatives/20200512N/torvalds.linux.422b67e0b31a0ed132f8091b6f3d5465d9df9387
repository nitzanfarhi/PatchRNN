commit 422b67e0b31a0ed132f8091b6f3d5465d9df9387
Author: Tomi Valkeinen <tomi.valkeinen@ti.com>
Date:   Mon Oct 6 15:03:57 2014 +0300

    videomode: provide dummy inline functions for !CONFIG_OF
    
    If CONFIG_OF is disabled but we build any driver that tries to
    use of_get_display_timing, we get this link error:
    
    ERROR: "of_get_display_timing" [drivers/gpu/drm/rcar-du/rcar-du-drm.ko] undefined!
    
    This adds an empty inline function as an alternative, to avoid changing
    each driver using this function when we want to build them without
    CONFIG_OF.
    
    Reported-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>

diff --git a/include/video/of_display_timing.h b/include/video/of_display_timing.h
index 79e6697af6cf..ea755b5616d8 100644
--- a/include/video/of_display_timing.h
+++ b/include/video/of_display_timing.h
@@ -15,9 +15,25 @@ struct display_timings;
 
 #define OF_USE_NATIVE_MODE -1
 
+#ifdef CONFIG_OF
 int of_get_display_timing(struct device_node *np, const char *name,
 		struct display_timing *dt);
 struct display_timings *of_get_display_timings(struct device_node *np);
 int of_display_timings_exist(struct device_node *np);
+#else
+static inline int of_get_display_timing(struct device_node *np, const char *name,
+		struct display_timing *dt)
+{
+	return -ENOSYS;
+}
+static inline struct display_timings *of_get_display_timings(struct device_node *np)
+{
+	return NULL;
+}
+static inline int of_display_timings_exist(struct device_node *np)
+{
+	return -ENOSYS;
+}
+#endif
 
 #endif

