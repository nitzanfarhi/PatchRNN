commit 73bfe0bd9adb8e4dfcee7239e56a425c6d58f4e9
Author: G.Balaji <balajig81@gmail.com>
Date:   Fri Sep 23 22:36:20 2011 +0530

    bgpd: Addition of ipv6 network command in Multicast address family mode.
    
          The patch adds the ipv6 network command in the BGP multicast address
          family mode.

diff --git a/bgpd/bgp_route.c b/bgpd/bgp_route.c
index 3e5e9c2f..ba530321 100644
--- a/bgpd/bgp_route.c
+++ b/bgpd/bgp_route.c
@@ -4167,7 +4167,7 @@ DEFUN (ipv6_bgp_network,
        "Specify a network to announce via BGP\n"
        "IPv6 prefix <network>/<length>\n")
 {
-  return bgp_static_set (vty, vty->index, argv[0], AFI_IP6, SAFI_UNICAST,
+  return bgp_static_set (vty, vty->index, argv[0], AFI_IP6, bgp_node_safi(vty),
                          NULL, 0);
 }
 
@@ -4190,7 +4190,7 @@ DEFUN (no_ipv6_bgp_network,
        "Specify a network to announce via BGP\n"
        "IPv6 prefix <network>/<length>\n")
 {
-  return bgp_static_unset (vty, vty->index, argv[0], AFI_IP6, SAFI_UNICAST);
+  return bgp_static_unset (vty, vty->index, argv[0], AFI_IP6, bgp_node_safi(vty));
 }
 
 ALIAS (no_ipv6_bgp_network,
@@ -12580,6 +12580,9 @@ bgp_route_init (void)
   install_element (BGP_IPV6_NODE, &no_ipv6_aggregate_address_cmd);
   install_element (BGP_IPV6_NODE, &no_ipv6_aggregate_address_summary_only_cmd);
 
+  install_element (BGP_IPV6M_NODE, &ipv6_bgp_network_cmd);
+  install_element (BGP_IPV6M_NODE, &no_ipv6_bgp_network_cmd);
+
   /* Old config IPv6 BGP commands.  */
   install_element (BGP_NODE, &old_ipv6_bgp_network_cmd);
   install_element (BGP_NODE, &old_no_ipv6_bgp_network_cmd);

