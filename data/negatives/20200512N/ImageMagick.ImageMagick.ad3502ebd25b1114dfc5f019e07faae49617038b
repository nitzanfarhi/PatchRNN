commit ad3502ebd25b1114dfc5f019e07faae49617038b
Author: cristy <urban-warrior@git.imagemagick.org>
Date:   Wed Nov 2 19:10:45 2011 +0000

diff --git a/MagickCore/fx.c b/MagickCore/fx.c
index c25452c73..e21f4f941 100644
--- a/MagickCore/fx.c
+++ b/MagickCore/fx.c
@@ -2719,6 +2719,12 @@ static MagickRealType FxEvaluateSubexpression(FxInfo *fx_info,
     case 'N':
     case 'n':
     {
+      if (LocaleNCompare(expression,"not",3) == 0)
+        {
+          alpha=FxEvaluateSubexpression(fx_info,channel,x,y,expression+3,beta,
+            exception);
+          return((MagickRealType) (alpha < MagickEpsilon));
+        }
       if (LocaleCompare(expression,"n") == 0)
         return(FxGetSymbol(fx_info,channel,x,y,expression,exception));
       break;

