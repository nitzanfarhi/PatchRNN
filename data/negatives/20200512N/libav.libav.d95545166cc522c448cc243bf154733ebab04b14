commit d95545166cc522c448cc243bf154733ebab04b14
Author: Jai Menon <jmenon86@gmail.com>
Date:   Tue May 26 16:59:05 2009 +0000

    Use dimensions stored in AVCodecContext instead of local variables.
    
    Originally committed as revision 18954 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/libopenjpeg.c b/libavcodec/libopenjpeg.c
index a3035fd29..2c30c3000 100644
--- a/libavcodec/libopenjpeg.c
+++ b/libavcodec/libopenjpeg.c
@@ -144,10 +144,10 @@ static int libopenjpeg_decode_frame(AVCodecContext *avctx,
         adjust[x] = FFMAX(image->comps[x].prec - 8, 0);
     }
 
-    for(y = 0; y < height; y++) {
-        index = y*width;
+    for(y = 0; y < avctx->height; y++) {
+        index = y*avctx->width;
         img_ptr = picture->data[0] + y*picture->linesize[0];
-        for(x = 0; x < width; x++, index++) {
+        for(x = 0; x < avctx->width; x++, index++) {
             *img_ptr++ = image->comps[0].data[index] >> adjust[0];
             if(image->numcomps > 2 && check_image_attributes(image)) {
                 *img_ptr++ = image->comps[1].data[index] >> adjust[1];

