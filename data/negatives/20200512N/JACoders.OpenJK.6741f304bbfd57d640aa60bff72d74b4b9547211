commit 6741f304bbfd57d640aa60bff72d74b4b9547211
Author: Ensiform <ensiform@gmail.com>
Date:   Wed Apr 17 22:48:43 2013 -0500

    Adds r_mode -2 for windows.  Uses your desktop resolution.

diff --git a/codemp/win32/win_glimp.cpp b/codemp/win32/win_glimp.cpp
index d6440014..52a45e94 100644
--- a/codemp/win32/win_glimp.cpp
+++ b/codemp/win32/win_glimp.cpp
@@ -710,7 +710,28 @@ static rserr_t GLW_SetMode( int mode,
 	// print out informational messages
 	//
 	Com_Printf ("...setting mode %d:", mode );
-	if ( !R_GetModeInfo( &glConfig.vidWidth, &glConfig.vidHeight, mode ) )
+	if (mode == -2)
+	{
+		int OSwidth = GetSystemMetrics (SM_CXSCREEN);
+		int OSheight = GetSystemMetrics (SM_CYSCREEN);
+
+		// use desktop video resolution
+		if( OSheight > 0 )
+		{
+			glConfig.vidWidth = OSwidth;
+			glConfig.vidHeight = OSheight;
+		}
+		else
+		{
+			glConfig.vidWidth = 640;
+			glConfig.vidHeight = 480;
+			Com_Printf( "Cannot determine display resolution, assuming 640x480\n" );
+		}
+
+		//TODO Aspect stuff?
+		//glConfig.windowAspect = (float)glConfig.vidWidth / (float)glConfig.vidHeight;
+	}
+	else if ( !R_GetModeInfo( &glConfig.vidWidth, &glConfig.vidHeight, mode ) )
 	{
 		Com_Printf (" invalid mode\n" );
 		return RSERR_INVALID_MODE;

