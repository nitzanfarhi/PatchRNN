commit d44f3e4059506a182f59218b1e967d42b01e097c
Author: Martin Storsjö <martin@martin.st>
Date:   Sat Feb 28 01:17:09 2015 +0200

    avio: Apply avoptions on the URLContext itself as well
    
    Currently the list of avoptions for URLContext is empty though,
    but such options will be added.
    
    Signed-off-by: Martin Storsjö <martin@martin.st>

diff --git a/libavformat/avio.c b/libavformat/avio.c
index 668e5eab8..4da6b7416 100644
--- a/libavformat/avio.c
+++ b/libavformat/avio.c
@@ -176,6 +176,9 @@ int ffurl_open(URLContext **puc, const char *filename, int flags,
     int ret = ffurl_alloc(puc, filename, flags, int_cb, protocols);
     if (ret)
         return ret;
+    if (options &&
+        (ret = av_opt_set_dict(*puc, options)) < 0)
+        goto fail;
     if (options && (*puc)->prot->priv_data_class &&
         (ret = av_opt_set_dict((*puc)->priv_data, options)) < 0)
         goto fail;

