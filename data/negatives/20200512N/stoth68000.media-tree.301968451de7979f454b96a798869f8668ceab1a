commit 301968451de7979f454b96a798869f8668ceab1a
Author: Anton Vorontsov <avorontsov@ru.mvista.com>
Date:   Sat Mar 21 13:30:05 2009 -0700

    fsl_pq_mdio: Revive Gianfar TBI PHY support
    
    commit 1577ecef766650a57fceb171acee2b13cbfaf1d3 ("netdev: Merge UCC
    and gianfar MDIO bus drivers") broke the TSEC TBI PHY support: the
    driver now refuses to probe TBI MDIO buses as it doesn't know about
    "fsl,gianfar-tbi" compatible entry, and thus _probe() fails with
    -ENODEV status.
    
    Fix this by adding "fsl,gianfar-tbi" to the list of known Gianfar
    MDIO buses.
    
    Signed-off-by: Anton Vorontsov <avorontsov@ru.mvista.com>
    Acked-by: Andy Fleming <afleming@freescale.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/fsl_pq_mdio.c b/drivers/net/fsl_pq_mdio.c
index b0ce1445d4a8..6be36b9bc31b 100644
--- a/drivers/net/fsl_pq_mdio.c
+++ b/drivers/net/fsl_pq_mdio.c
@@ -321,6 +321,7 @@ static int fsl_pq_mdio_probe(struct of_device *ofdev,
 	dev_set_drvdata(&ofdev->dev, new_bus);
 
 	if (of_device_is_compatible(np, "fsl,gianfar-mdio") ||
+			of_device_is_compatible(np, "fsl,gianfar-tbi") ||
 			of_device_is_compatible(np, "gianfar")) {
 #ifdef CONFIG_GIANFAR
 		tbipa = get_gfar_tbipa(regs);

