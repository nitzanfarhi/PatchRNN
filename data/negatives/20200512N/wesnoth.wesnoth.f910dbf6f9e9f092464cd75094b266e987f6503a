commit f910dbf6f9e9f092464cd75094b266e987f6503a
Author: fendrin <fabianmueller5@gmx.de>
Date:   Wed May 15 22:20:56 2013 +0200

    Fix the non working swap palette icon action.

diff --git a/src/editor/editor_controller.cpp b/src/editor/editor_controller.cpp
index 42934dfc6f..efd7d39f64 100644
--- a/src/editor/editor_controller.cpp
+++ b/src/editor/editor_controller.cpp
@@ -603,7 +603,6 @@ bool editor_controller::execute_command(hotkey::HOTKEY_COMMAND command, int inde
 			return true;
 		case HOTKEY_EDITOR_PALETTE_ITEM_SWAP:
 			toolkit_->get_palette_manager()->active_palette().swap();
-			toolkit_->set_mouseover_overlay();
 			return true;
 		case HOTKEY_EDITOR_PARTIAL_UNDO:
 			if (dynamic_cast<const editor_action_chain*>(context_manager_->get_map_context().last_undo_action()) != NULL) {
diff --git a/src/editor/palette/editor_palettes.cpp b/src/editor/palette/editor_palettes.cpp
index 75ec6fc038..8cd5eae791 100644
--- a/src/editor/palette/editor_palettes.cpp
+++ b/src/editor/palette/editor_palettes.cpp
@@ -258,6 +258,9 @@ template<class Item>
 void editor_palette<Item>::swap()
 {
 	std::swap(selected_fg_item_, selected_bg_item_);
+	select_fg_item(selected_fg_item_);
+	select_bg_item(selected_bg_item_);
+	set_dirty();
 }
 template void editor_palette<t_translation::t_terrain>::swap();
 template void editor_palette<unit_type>::swap();

