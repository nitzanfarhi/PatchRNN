commit 6c8214fbc3aa54b7bd7c27b2ff243d371dbc16be
Author: Sage Weil <sage@inktank.com>
Date:   Thu May 17 13:27:47 2012 -0700

    mon: include quorum member names in 'mon stat'
    
    Signed-off-by: Sage Weil <sage@inktank.com>

diff --git a/src/mon/Monitor.h b/src/mon/Monitor.h
index 116e43e270..1614e06f3a 100644
--- a/src/mon/Monitor.h
+++ b/src/mon/Monitor.h
@@ -206,6 +206,12 @@ public:
   epoch_t get_epoch();
   int get_leader() { return leader; }
   const set<int>& get_quorum() { return quorum; }
+  set<string> get_quorum_names() {
+    set<string> q;
+    for (set<int>::iterator p = quorum.begin(); p != quorum.end(); ++p)
+      q.insert(monmap->get_name(*p));
+    return q;
+  }
 
   void bootstrap();
   void reset();
diff --git a/src/mon/MonmapMonitor.cc b/src/mon/MonmapMonitor.cc
index 2aad118da3..34669cbaec 100644
--- a/src/mon/MonmapMonitor.cc
+++ b/src/mon/MonmapMonitor.cc
@@ -143,7 +143,8 @@ bool MonmapMonitor::preprocess_command(MMonCommand *m)
   if (m->cmd.size() > 1) {
     if (m->cmd[1] == "stat") {
       mon->monmap->print_summary(ss);
-      ss << ", election epoch " << mon->get_epoch() << ", quorum " << mon->get_quorum();
+      ss << ", election epoch " << mon->get_epoch() << ", quorum " << mon->get_quorum()
+	 << " " << mon->get_quorum_names();
       r = 0;
     }
     else if (m->cmd.size() == 2 && m->cmd[1] == "getmap") {

