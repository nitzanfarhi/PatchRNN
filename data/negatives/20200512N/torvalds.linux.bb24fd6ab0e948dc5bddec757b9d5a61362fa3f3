commit bb24fd6ab0e948dc5bddec757b9d5a61362fa3f3
Author: Joakim Tjernlund <joakim.tjernlund@transmode.se>
Date:   Thu Aug 4 03:19:45 2011 +0000

    ucc_geth: Add SUPPORTED_MII and SUPPORTED_Autoneg
    
    The driver supports Autoneg and at least MII. Tell the PHY
    that to avoid any confusion in the PHY code.
    
    Signed-off-by: Joakim Tjernlund <Joakim.Tjernlund@transmode.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/ucc_geth.c b/drivers/net/ucc_geth.c
index d3465ab50e56..42f8e31b0bbb 100644
--- a/drivers/net/ucc_geth.c
+++ b/drivers/net/ucc_geth.c
@@ -1761,10 +1761,12 @@ static int init_phy(struct net_device *dev)
 	if (priv->phy_interface == PHY_INTERFACE_MODE_SGMII)
 		uec_configure_serdes(dev);
 
-	phydev->supported &= (ADVERTISED_10baseT_Half |
-				 ADVERTISED_10baseT_Full |
-				 ADVERTISED_100baseT_Half |
-				 ADVERTISED_100baseT_Full);
+	phydev->supported &= (SUPPORTED_MII |
+			      SUPPORTED_Autoneg |
+			      ADVERTISED_10baseT_Half |
+			      ADVERTISED_10baseT_Full |
+			      ADVERTISED_100baseT_Half |
+			      ADVERTISED_100baseT_Full);
 
 	if (priv->max_speed == SPEED_1000)
 		phydev->supported |= ADVERTISED_1000baseT_Full;

