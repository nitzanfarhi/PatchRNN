commit 0a429fd15ecb05d7d5fa8eb4adaff69c7a00984b
Author: Fabio Baltieri <fabio.baltieri@linaro.org>
Date:   Thu Jun 13 15:56:03 2013 +0200

    ARM: ux500: set coherent_dma_mask for dma40
    
    Set coherent_dma_mask to DMA_BIT_MASK(32) for dma40 platform_device, as
    without this DMA allocations were failing with the error:
    
    dma40 dma40.0: coherent DMA mask is unset
    
    when booting without device-tree.
    
    Signed-off-by: Fabio Baltieri <fabio.baltieri@linaro.org>
    Signed-off-by: Linus Walleij <linus.walleij@linaro.org>

diff --git a/arch/arm/mach-ux500/devices-db8500.c b/arch/arm/mach-ux500/devices-db8500.c
index 516a6f57d159..bc316062e0c2 100644
--- a/arch/arm/mach-ux500/devices-db8500.c
+++ b/arch/arm/mach-ux500/devices-db8500.c
@@ -49,6 +49,7 @@ struct stedma40_platform_data dma40_plat_data = {
 struct platform_device u8500_dma40_device = {
 	.dev = {
 		.platform_data = &dma40_plat_data,
+		.coherent_dma_mask = DMA_BIT_MASK(32),
 	},
 	.name = "dma40",
 	.id = 0,

