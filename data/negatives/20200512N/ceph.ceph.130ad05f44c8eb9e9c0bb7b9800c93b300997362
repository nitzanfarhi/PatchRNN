commit 130ad05f44c8eb9e9c0bb7b9800c93b300997362
Author: xie xingguo <xie.xingguo@zte.com.cn>
Date:   Thu Jun 29 15:24:00 2017 +0800

    os/bluestore/bluestore_tool: output error code correctly if we fail to mkdir
    
    Signed-off-by: xie xingguo <xie.xingguo@zte.com.cn>

diff --git a/src/os/bluestore/bluestore_tool.cc b/src/os/bluestore/bluestore_tool.cc
index d6ca7c2b19..213f01ac77 100644
--- a/src/os/bluestore/bluestore_tool.cc
+++ b/src/os/bluestore/bluestore_tool.cc
@@ -260,6 +260,7 @@ int main(int argc, char **argv)
       string full = out_dir + "/" + dir;
       r = ::mkdir(full.c_str(), 0755);
       if (r < 0) {
+        r = -errno;
 	cerr << "mkdir " << full << " failed: " << cpp_strerror(r) << std::endl;
 	exit(1);
       }

