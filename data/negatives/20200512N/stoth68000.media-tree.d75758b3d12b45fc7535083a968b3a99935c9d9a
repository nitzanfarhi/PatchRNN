commit d75758b3d12b45fc7535083a968b3a99935c9d9a
Author: Dan Carpenter <error27@gmail.com>
Date:   Fri Jul 8 09:45:32 2011 +0100

    gma500: reversed test in mdfld_dbi_dsr_exit()
    
    We should only cleanup "dsr_info" if it's non-NULL obviously and not
    the other way around.
    
    Signed-off-by: Dan Carpenter <error27@gmail.com>
    Signed-off-by: Alan Cox <alan@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/gma500/mdfld_dsi_dbi.c b/drivers/staging/gma500/mdfld_dsi_dbi.c
index 9d2d97db1961..489734553317 100644
--- a/drivers/staging/gma500/mdfld_dsi_dbi.c
+++ b/drivers/staging/gma500/mdfld_dsi_dbi.c
@@ -642,7 +642,7 @@ void mdfld_dbi_dsr_exit(struct drm_device *dev)
 	struct drm_psb_private *dev_priv = dev->dev_private;
 	struct mdfld_dbi_dsr_info *dsr_info = dev_priv->dbi_dsr_info;
 
-	if (!dsr_info) {
+	if (dsr_info) {
 		del_timer_sync(&dsr_info->dsr_timer);
 		kfree(dsr_info);
 		dev_priv->dbi_dsr_info = NULL;

