commit aac2de8a87ec0fd3ddcea2278f6bec555947b639
Author: Philippe Canal <pcanal@fnal.gov>
Date:   Wed Mar 9 17:41:58 2011 +0000

    From Lukasz:
    
    The ROOT bug (<http://savannah.cern.ch/support/?119348>) is related to the fact that
    TKey happily ignores the return code from TFile::ReadBuffer. The attached patch fixes
    the problem for this particular use case.
    
    
    git-svn-id: http://root.cern.ch/svn/root/trunk@38346 27541ba8-7e3a-0410-8455-c3a389f83636

diff --git a/io/sql/inc/TKeySQL.h b/io/sql/inc/TKeySQL.h
index b239fbdb2c..252ccc1bdc 100644
--- a/io/sql/inc/TKeySQL.h
+++ b/io/sql/inc/TKeySQL.h
@@ -72,7 +72,7 @@ public:
    virtual void     *ReadObjectAny(const TClass *expectedClass);
   
    virtual void      ReadBuffer(char *&) {}
-   virtual void      ReadFile() {}
+   virtual Bool_t    ReadFile() { return kTRUE; }
    virtual void      SetBuffer() { fBuffer = 0; }
    virtual Int_t     WriteFile(Int_t =1, TFile* = 0) { return 0; }
 
diff --git a/io/xml/inc/TKeyXML.h b/io/xml/inc/TKeyXML.h
index b2bed4d9aa..d343fe51f6 100644
--- a/io/xml/inc/TKeyXML.h
+++ b/io/xml/inc/TKeyXML.h
@@ -54,7 +54,7 @@ public:
    virtual void     *ReadObjectAny(const TClass *expectedClass);
    
    virtual void      ReadBuffer(char *&) {}
-   virtual void      ReadFile() {}
+   virtual Bool_t    ReadFile() { return kTRUE; }
    virtual void      SetBuffer() { fBuffer = 0; }
    virtual Int_t     WriteFile(Int_t =1, TFile* = 0) { return 0; }
    

