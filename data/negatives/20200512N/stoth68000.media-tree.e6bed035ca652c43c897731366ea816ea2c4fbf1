commit e6bed035ca652c43c897731366ea816ea2c4fbf1
Author: Chase Southwood <chase.southwood@yahoo.com>
Date:   Fri Feb 14 21:59:40 2014 -0600

    Staging: comedi: kcomedilib: replace deprecated simple_strtoul() with kstrtouint()
    
    Since simple_strtoul() has been deprecated, replace it with kstrtouint().
    Also, since return code checking for this new function is enforced, add a
    check to ensure that the conversion has succeeded.
    
    Signed-off-by: Chase Southwood <chase.southwood@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/comedi/kcomedilib/kcomedilib_main.c b/drivers/staging/comedi/kcomedilib/kcomedilib_main.c
index 7dc5a18e69d4..8777f958c041 100644
--- a/drivers/staging/comedi/kcomedilib/kcomedilib_main.c
+++ b/drivers/staging/comedi/kcomedilib/kcomedilib_main.c
@@ -41,7 +41,8 @@ struct comedi_device *comedi_open(const char *filename)
 	if (strncmp(filename, "/dev/comedi", 11) != 0)
 		return NULL;
 
-	minor = simple_strtoul(filename + 11, NULL, 0);
+	if (kstrtouint(filename + 11, 0, &minor))
+		return NULL;
 
 	if (minor >= COMEDI_NUM_BOARD_MINORS)
 		return NULL;

