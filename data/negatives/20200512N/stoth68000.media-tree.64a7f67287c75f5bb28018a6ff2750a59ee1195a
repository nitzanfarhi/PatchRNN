commit 64a7f67287c75f5bb28018a6ff2750a59ee1195a
Author: Luciano Coelho <luciano.coelho@nokia.com>
Date:   Thu Oct 8 21:56:28 2009 +0300

    wl1271: hack to disable filters
    
    This is a hack to disable all filters in the join command.  This is based on
    Kalle Valo's patch for wl1251.
    
    Cc: Kalle Valo <kalle.valo@nokia.com>
    Signed-off-by: Luciano Coelho <luciano.coelho@nokia.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/wl12xx/wl1271_cmd.c b/drivers/net/wireless/wl12xx/wl1271_cmd.c
index 35a6e67f7ae4..ac93efd53f2a 100644
--- a/drivers/net/wireless/wl12xx/wl1271_cmd.c
+++ b/drivers/net/wireless/wl12xx/wl1271_cmd.c
@@ -208,6 +208,15 @@ int wl1271_cmd_join(struct wl1271 *wl)
 	join->rx_config_options = wl->rx_config;
 	join->rx_filter_options = wl->rx_filter;
 
+	/*
+	 * FIXME: disable temporarily all filters because after commit
+	 * 9cef8737 "mac80211: fix managed mode BSSID handling" broke
+	 * association. The filter logic needs to be implemented properly
+	 * and once that is done, this hack can be removed.
+	 */
+	join->rx_config_options = 0;
+	join->rx_filter_options = WL1271_DEFAULT_RX_FILTER;
+
 	join->basic_rate_set = RATE_MASK_1MBPS | RATE_MASK_2MBPS |
 		RATE_MASK_5_5MBPS | RATE_MASK_11MBPS;
 

