commit e09ffa45243e8615f3f9874c2d59abf6edde7084
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sat Dec 17 23:08:46 2011 +0100

    msvideo1enc: Check that dimensions are a multiple of 4.
    Fixes Ticket784
    Found by: ami_stuff
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/msvideo1enc.c b/libavcodec/msvideo1enc.c
index 837fca5ea4..09cc7a196d 100644
--- a/libavcodec/msvideo1enc.c
+++ b/libavcodec/msvideo1enc.c
@@ -261,6 +261,10 @@ static av_cold int encode_init(AVCodecContext *avctx)
     if (av_image_check_size(avctx->width, avctx->height, 0, avctx) < 0) {
         return -1;
     }
+    if((avctx->width&3) || (avctx->height&3)){
+        av_log(avctx, AV_LOG_ERROR, "width and height must be multiplies of 4\n");
+        return -1;
+    }
 
     avcodec_get_frame_defaults(&c->pic);
     avctx->coded_frame = (AVFrame*)&c->pic;

