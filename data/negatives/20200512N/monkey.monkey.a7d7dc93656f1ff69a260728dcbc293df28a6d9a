commit a7d7dc93656f1ff69a260728dcbc293df28a6d9a
Author: Jonathan Gonzalez V <zeus@gnu.org>
Date:   Thu Oct 7 12:23:33 2010 -0400

    liana_ssl: Fixed the return values for _mkp_event_read() to proper follow the new event api

diff --git a/plugins/liana_ssl/liana_ssl.c b/plugins/liana_ssl/liana_ssl.c
index 2fac7a92..2db558e1 100644
--- a/plugins/liana_ssl/liana_ssl.c
+++ b/plugins/liana_ssl/liana_ssl.c
@@ -655,7 +655,7 @@ int _mkp_event_read(int socket_fd)
         PLUGIN_TRACE("Error initiating the ssl session");
 #endif
         matrixSslDeleteSession(conn->ssl);
-        return -1;
+        return MK_PLUGIN_RET_EVENT_CLOSE;
     }
 #ifdef TRACE
     PLUGIN_TRACE("Ssl session started");
@@ -671,8 +671,8 @@ int _mkp_event_read(int socket_fd)
 #ifdef TRACE
         PLUGIN_TRACE("Error trying to handshake with the client");
 #endif
-        return -1;
+        return MK_PLUGIN_RET_EVENT_CLOSE;
     }
 
-    return 0;
+    return MK_PLUGIN_RET_EVENT_NEXT;
 }

