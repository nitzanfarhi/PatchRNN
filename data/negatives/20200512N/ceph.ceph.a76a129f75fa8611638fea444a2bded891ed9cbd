commit a76a129f75fa8611638fea444a2bded891ed9cbd
Author: Samuel Just <sam.just@inktank.com>
Date:   Tue Apr 1 12:19:52 2014 -0700

    PG: set role for replicated even if role != shard
    
    Fixes: #7939
    Signed-off-by: Samuel Just <sam.just@inktank.com>

diff --git a/src/osd/PG.cc b/src/osd/PG.cc
index fab6981688..55d791cbe9 100644
--- a/src/osd/PG.cc
+++ b/src/osd/PG.cc
@@ -4644,7 +4644,7 @@ void PG::start_peering_interval(
     state_clear(PG_STATE_REMAPPED);
 
   int role = osdmap->calc_pg_role(osd->whoami, acting, acting.size());
-  if (role == pg_whoami.shard)
+  if (pool.info.is_replicated() || role == pg_whoami.shard)
     set_role(role);
   else
     set_role(-1);

