commit 6f741455b02419b2f1e3a97fdda3e0d1298a17cd
Author: Avner BenHanoch <avnerb@mellanox.com>
Date:   Wed Apr 20 14:20:26 2016 +0300

    xio: rename: discard_input_queue -> discard_out_queues
    
    the new name better describes the method, plus it matches
    rename: flush_input_queue -> flush_out_queues in a previous commit
    
    Signed-off-by: Avner BenHanoch <avnerb@mellanox.com>

diff --git a/src/msg/xio/XioConnection.cc b/src/msg/xio/XioConnection.cc
index 0da5dbcabe..e579bc75a6 100644
--- a/src/msg/xio/XioConnection.cc
+++ b/src/msg/xio/XioConnection.cc
@@ -636,7 +636,7 @@ int XioConnection::flush_out_queues(uint32_t flags) {
   return 0;
 }
 
-int XioConnection::discard_input_queue(uint32_t flags)
+int XioConnection::discard_out_queues(uint32_t flags)
 {
   Message::Queue disc_q;
   XioSubmit::Queue deferred_q;
@@ -748,7 +748,7 @@ int XioConnection::_mark_down(uint32_t flags)
 
   /* XXX this will almost certainly be called again from
    * on_disconnect_event() */
-  discard_input_queue(flags|CState::OP_FLAG_LOCKED);
+  discard_out_queues(flags|CState::OP_FLAG_LOCKED);
 
   if (! (flags & CState::OP_FLAG_LOCKED))
     pthread_spin_unlock(&sp);
@@ -820,7 +820,7 @@ int XioConnection::CState::state_fail(Message* m, uint32_t flags)
   session_state.set(DISCONNECTED);
   startup_state.set(FAIL);
 
-  xcon->discard_input_queue(flags|OP_FLAG_LOCKED);
+  xcon->discard_out_queues(flags|OP_FLAG_LOCKED);
   xcon->adjust_clru(flags|OP_FLAG_LOCKED|OP_FLAG_LRU);
 
   xcon->disconnect();
diff --git a/src/msg/xio/XioConnection.h b/src/msg/xio/XioConnection.h
index 4ea9a703c2..e9ce77a383 100644
--- a/src/msg/xio/XioConnection.h
+++ b/src/msg/xio/XioConnection.h
@@ -241,7 +241,7 @@ private:
   int on_disconnect_event() {
     connected.set(false);
     pthread_spin_lock(&sp);
-    discard_input_queue(CState::OP_FLAG_LOCKED);
+    discard_out_queues(CState::OP_FLAG_LOCKED);
     pthread_spin_unlock(&sp);
     return 0;
   }
@@ -328,7 +328,7 @@ public:
   void msg_send_fail(XioSend *xsend, int code);
   void msg_release_fail(struct xio_msg *msg, int code);
   int flush_out_queues(uint32_t flags);
-  int discard_input_queue(uint32_t flags);
+  int discard_out_queues(uint32_t flags);
   int adjust_clru(uint32_t flags);
 private:
   void send_keepalive_or_ack_internal(bool ack = false, const utime_t *tp = nullptr);

