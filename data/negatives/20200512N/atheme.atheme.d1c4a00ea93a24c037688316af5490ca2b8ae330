commit d1c4a00ea93a24c037688316af5490ca2b8ae330
Author: William Pitcock <nenolod@atheme.org>
Date:   Fri Aug 27 00:51:38 2010 -0500

    groupserv: Fixups.

diff --git a/modules/groupserv/basecmds.c b/modules/groupserv/basecmds.c
index 735698274..5f31dc47e 100644
--- a/modules/groupserv/basecmds.c
+++ b/modules/groupserv/basecmds.c
@@ -83,10 +83,10 @@ static void gs_cmd_flags(sourceinfo_t *si, int parc, char *parv[])
 	unsigned int dir;
 	char *c;
 
-	if (!parv[0] || !parv[1])
+	if (!parv[0])
 	{
 		command_fail(si, fault_needmoreparams, STR_INSUFFICIENT_PARAMS, "FLAGS");
-		command_fail(si, fault_needmoreparams, _("Syntax: FLAGS <!group> <user> <changes>"));
+		command_fail(si, fault_needmoreparams, _("Syntax: FLAGS <!group> [user] [changes]"));
 		return;
 	}
 
@@ -102,13 +102,7 @@ static void gs_cmd_flags(sourceinfo_t *si, int parc, char *parv[])
 		return;
 	}
 
-	if ((mu = myuser_find_ext(parv[1])) == NULL)
-	{
-		command_fail(si, fault_nosuch_target, _("\2%s\2 is not a registered account."), parv[1]);
-		return;
-	}
-
-	if (!parv[2])
+	if (!parv[1])
 	{
 		node_t *n;
 		int i = 1;
@@ -131,6 +125,12 @@ static void gs_cmd_flags(sourceinfo_t *si, int parc, char *parv[])
 		return;
 	}
 
+	if ((mu = myuser_find_ext(parv[1])) == NULL)
+	{
+		command_fail(si, fault_nosuch_target, _("\2%s\2 is not a registered account."), parv[1]);
+		return;
+	}
+
 	ga = groupacs_find(mg, mu, 0);
 	if (ga != NULL)
 		flags = ga->flags;

