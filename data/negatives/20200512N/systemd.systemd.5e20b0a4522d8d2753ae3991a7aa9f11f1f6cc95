commit 5e20b0a4522d8d2753ae3991a7aa9f11f1f6cc95
Author: Lennart Poettering <lennart@poettering.net>
Date:   Fri Nov 17 19:24:06 2017 +0100

    cgroup: properly determine cgroups zombie processes belong to
    
    When a process becomes a zombie its cgroup might be deleted. Let's add
    some minimal code to detect cases like this, so that we can still
    attribute this back to the original cgroup.

diff --git a/src/basic/cgroup-util.c b/src/basic/cgroup-util.c
index a7964fb5a..ae8f2d116 100644
--- a/src/basic/cgroup-util.c
+++ b/src/basic/cgroup-util.c
@@ -1104,6 +1104,11 @@ int cg_pid_get_path(const char *controller, pid_t pid, char **path) {
                 if (!p)
                         return -ENOMEM;
 
+                /* Truncate suffix indicating the process is a zombie */
+                e = endswith(p, " (deleted)");
+                if (e)
+                        *e = 0;
+
                 *path = p;
                 return 0;
         }

