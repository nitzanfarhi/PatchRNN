commit 22f197127b293432ff88be572fb4669e0d9cf532
Author: Durran Jordan <durran@gmail.com>
Date:   Wed Apr 17 18:34:53 2013 +0200

    Define DBL2NUM if non existant

diff --git a/ext/bson/native.c b/ext/bson/native.c
index 1aa5c2c..e3b30fd 100644
--- a/ext/bson/native.c
+++ b/ext/bson/native.c
@@ -17,6 +17,10 @@
 #define INT642NUM(v) LL2NUM(v)
 #endif
 
+#ifndef DBL2NUM
+#define DBL2NUM(dbl) rb_float_new(dbl)
+#endif
+
 #ifndef HOST_NAME_MAX
 #define HOST_NAME_MAX 256
 #endif

