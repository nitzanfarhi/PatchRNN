commit ff5fd1eb9d6b04ed573ff5777d401bd9706306e9
Author: MAN-AT-ARMS <M4N4T4RMS@gmail.com>
Date:   Wed Apr 4 13:00:03 2018 -0400

    All: Fix exploit to reset player by sending wrong serverId

diff --git a/MP/code/server/sv_client.c b/MP/code/server/sv_client.c
index 7f30adc..04d768a 100644
--- a/MP/code/server/sv_client.c
+++ b/MP/code/server/sv_client.c
@@ -2068,7 +2068,7 @@ void SV_ExecuteClientMessage( client_t *cl, msg_t *msg ) {
 		}
 		// if we can tell that the client has dropped the last
 		// gamestate we sent them, resend it
-		if ( cl->messageAcknowledge > cl->gamestateMessageNum ) {
+		if ( cl->state != CS_ACTIVE && cl->messageAcknowledge > cl->gamestateMessageNum ) {
 			Com_DPrintf( "%s : dropped gamestate, resending\n", cl->name );
 			SV_SendClientGameState( cl );
 		}
diff --git a/SP/code/server/sv_client.c b/SP/code/server/sv_client.c
index 68d2733..5731429 100644
--- a/SP/code/server/sv_client.c
+++ b/SP/code/server/sv_client.c
@@ -1905,7 +1905,7 @@ void SV_ExecuteClientMessage( client_t *cl, msg_t *msg ) {
 		}
 		// if we can tell that the client has dropped the last
 		// gamestate we sent them, resend it
-		if ( cl->messageAcknowledge > cl->gamestateMessageNum ) {
+		if ( cl->state != CS_ACTIVE && cl->messageAcknowledge > cl->gamestateMessageNum ) {
 			Com_DPrintf( "%s : dropped gamestate, resending\n", cl->name );
 			SV_SendClientGameState( cl );
 		}

