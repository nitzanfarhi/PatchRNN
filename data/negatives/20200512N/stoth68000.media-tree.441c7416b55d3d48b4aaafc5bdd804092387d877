commit 441c7416b55d3d48b4aaafc5bdd804092387d877
Author: Jeremy Fitzhardinge <jeremy.fitzhardinge@citrix.com>
Date:   Fri Mar 6 09:56:59 2009 -0800

    xen/privcmd: print SIGBUS faults
    
    Print more detail about privcmd mapping faults for debugging.
    
    [ Impact: debug ]
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy.fitzhardinge@citrix.com>

diff --git a/drivers/xen/xenfs/privcmd.c b/drivers/xen/xenfs/privcmd.c
index c7192f314f86..6b602f505363 100644
--- a/drivers/xen/xenfs/privcmd.c
+++ b/drivers/xen/xenfs/privcmd.c
@@ -403,6 +403,10 @@ static long privcmd_ioctl(struct file *file,
 #ifndef HAVE_ARCH_PRIVCMD_MMAP
 static int privcmd_fault(struct vm_area_struct *vma, struct vm_fault *vmf)
 {
+	printk(KERN_DEBUG "privcmd_fault: vma=%p %lx-%lx, pgoff=%lx, uv=%p\n",
+	       vma, vma->vm_start, vma->vm_end,
+	       vmf->pgoff, vmf->virtual_address);
+
 	return VM_FAULT_SIGBUS;
 }
 

