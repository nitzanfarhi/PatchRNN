commit be18b5067f9f787179f04c49168060165ed6be08
Author: Timo Sirainen <tss@iki.fi>
Date:   Sun May 25 04:49:08 2008 +0300

    Fixed previous transaction log assert-avoidance check.
    
    --HG--
    branch : HEAD

diff --git a/src/lib-index/mail-transaction-log-view.c b/src/lib-index/mail-transaction-log-view.c
index 147b506dd..37095b599 100644
--- a/src/lib-index/mail-transaction-log-view.c
+++ b/src/lib-index/mail-transaction-log-view.c
@@ -149,7 +149,8 @@ int mail_transaction_log_view_set(struct mail_transaction_log_view *view,
 		return -1;
 	}
 
-	if (min_file_offset > 0 && min_file_offset < view->tail->hdr.hdr_size) {
+	if (min_file_offset > 0 &&
+	    min_file_offset < view->log->files->hdr.hdr_size) {
 		/* log file offset is probably corrupted in the index file. */
 		mail_transaction_log_view_set_corrupted(view,
 			"file_seq=%u, min_file_offset (%"PRIuUOFF_T

