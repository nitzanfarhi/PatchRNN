commit 04f66b6921415384c345da9420ee69f4113e20d6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 21 14:39:09 2009 +0200

    carrierroute: export MI commands
    
    - MI commands exported from mod_init
    - MI API is now a library (lib/kmi), SR core does not call anymore
      register_mi_mod(...)

diff --git a/modules/carrierroute/carrierroute.c b/modules/carrierroute/carrierroute.c
index 3278b873b..11f438b3c 100644
--- a/modules/carrierroute/carrierroute.c
+++ b/modules/carrierroute/carrierroute.c
@@ -157,6 +157,12 @@ struct module_exports exports = {
 static int mod_init(void) {
 	struct stat fs;
 
+	if(register_mi_mod(exports.name, mi_cmds)!=0)
+	{
+		LM_ERR("failed to register MI commands\n");
+		return -1;
+	}
+
 	subscriber_table.len = strlen(subscriber_table.s);
 	subscriber_username_col.len = strlen(subscriber_username_col.s);
 	subscriber_domain_col.len = strlen(subscriber_domain_col.s);

