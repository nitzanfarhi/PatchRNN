commit c777427c0851bbfeb2b5c842265779233a24fd96
Author: Nikita Popov <nikic@php.net>
Date:   Thu Jul 24 21:07:37 2014 +0200

    Fix interning bug

diff --git a/Zend/zend_compile.c b/Zend/zend_compile.c
index d68aa175a7..d402ff7814 100644
--- a/Zend/zend_compile.c
+++ b/Zend/zend_compile.c
@@ -6153,8 +6153,11 @@ void zend_compile_class_decl(zend_ast *ast TSRMLS_DC) {
 		efree(import_name_lc);
 	}
 
+	name = zend_new_interned_string(name TSRMLS_CC);
+	lcname = zend_new_interned_string(lcname TSRMLS_CC);
+
 	ce->type = ZEND_USER_CLASS;
-	ce->name = zend_new_interned_string(name TSRMLS_CC);
+	ce->name = name;
 	zend_initialize_class_data(ce, 1 TSRMLS_CC);
 
 	ce->ce_flags |= decl->flags;

