commit 1bc035bc03542c0b2215effc0e53c5c9d2e786ac
Author: Justin Ruggles <justin.ruggles@gmail.com>
Date:   Sat Feb 4 16:29:37 2012 -0500

    ape: return error if seeking to the current packet fails in ape_read_packet()

diff --git a/libavformat/ape.c b/libavformat/ape.c
index 345648eb3..a6e9bf1d7 100644
--- a/libavformat/ape.c
+++ b/libavformat/ape.c
@@ -361,7 +361,8 @@ static int ape_read_packet(AVFormatContext * s, AVPacket * pkt)
     if (ape->currentframe > ape->totalframes)
         return AVERROR(EIO);
 
-    avio_seek (s->pb, ape->frames[ape->currentframe].pos, SEEK_SET);
+    if (avio_seek(s->pb, ape->frames[ape->currentframe].pos, SEEK_SET) < 0)
+        return AVERROR(EIO);
 
     /* Calculate how many blocks there are in this frame */
     if (ape->currentframe == (ape->totalframes - 1))

