commit 34c2f978de8ba9c19f360ea7a60ef9bba4a1c2b1
Author: Will Estes <wlestes@users.sourceforge.net>
Date:   Mon May 21 19:50:45 2001 +0000

    complete john millaway's reentrant patch

diff --git a/gen.c b/gen.c
index 22632ee..ef51baa 100644
--- a/gen.c
+++ b/gen.c
@@ -1427,13 +1427,13 @@ void make_tables()
 		indent_puts( "{" );
 		indent_puts( "int yyl;" );
 		do_indent();
-		out_str( "for ( yyl = %s; yyl < yyleng; ++yyl )\n",
+		out_str( "for ( yyl = %s; yyl < YY_G(yyleng); ++yyl )\n",
 			yymore_used ? (yytext_is_array ? "yy_prev_more_offset" :
 							 "yy_more_len") : "0");
 		indent_up();
-		indent_puts( "if ( yytext[yyl] == '\\n' )" );
+		indent_puts( "if ( YY_G(yytext)[yyl] == '\\n' )" );
 		indent_up();
-		indent_puts( "++yylineno;" );
+		indent_puts( "++YY_G(yylineno);" );
 		indent_down();
 		indent_down();
 		indent_puts( "}" );

