commit 55426296963c678650e26fc5e61ea75a5598ef5a
Author: Steven Rostedt (Red Hat) <rostedt@goodmis.org>
Date:   Tue Mar 24 09:57:51 2015 -0400

    tools lib traceevent: Handle %z in bprint format
    
    The %z printf specifier was not handled making trace_printk()s in the
    kernel that used this break on output.
    
    Reported-by: Shawn Bohrer <shawn.bohrer@gmail.com>
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Cc: Andrew Morton <akpm@linux-foundation.org>
    Cc: Jiri Olsa <jolsa@redhat.com>
    Cc: Namhyung Kim <namhyung@kernel.org>
    Cc: Shawn Bohrer <shawn.bohrer@gmail.com>
    Link: http://lkml.kernel.org/r/20150324135922.844361717@goodmis.org
    Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>

diff --git a/tools/lib/traceevent/event-parse.c b/tools/lib/traceevent/event-parse.c
index e71c472d6a81..bdb1dd618e0e 100644
--- a/tools/lib/traceevent/event-parse.c
+++ b/tools/lib/traceevent/event-parse.c
@@ -4008,6 +4008,10 @@ static struct print_arg *make_bprint_args(char *fmt, void *data, int size, struc
 				goto process_again;
 			case '.':
 				goto process_again;
+			case 'z':
+			case 'Z':
+				ls = 1;
+				goto process_again;
 			case 'p':
 				ls = 1;
 				/* fall through */

