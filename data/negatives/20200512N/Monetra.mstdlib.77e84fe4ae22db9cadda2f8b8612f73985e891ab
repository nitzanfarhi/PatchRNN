commit 77e84fe4ae22db9cadda2f8b8612f73985e891ab
Author: Brad House <brad@monetra.com>
Date:   Wed Sep 6 11:15:41 2017 -0400

    fix some nitpick clang static analyzer warnings

diff --git a/sql/m_sql_connpool.c b/sql/m_sql_connpool.c
index 01f3e0e25..4a008e6d5 100644
--- a/sql/m_sql_connpool.c
+++ b/sql/m_sql_connpool.c
@@ -537,11 +537,11 @@ static M_sql_error_t M_sql_connpool_spawn(M_sql_connpool_t *pool, M_sql_connpool
 		/* Try to connect up to num_hosts times, or until successful */
 		for (j=0; j<pool_data->num_hosts; j++) {
 			err = M_sql_conn_create(&conn, pool, i, is_readonly, temp, sizeof(temp));
-			if (err == M_SQL_ERROR_SUCCESS || conn == NULL)
+			if (err == M_SQL_ERROR_SUCCESS)
 				break;
 		}
 
-		if (err != M_SQL_ERROR_SUCCESS) {
+		if (err != M_SQL_ERROR_SUCCESS || conn == NULL) {
 			pool_data->info[i] = M_SQL_CONN_INFO_FAILED;
 			M_snprintf(error, error_size, "(%s) #%zu of %zu: %s", is_readonly?"RO":"RW", i+1, start_conns, temp);
 		} else {
diff --git a/sql/m_sql_report.c b/sql/m_sql_report.c
index e6138e8dd..c3cdae4ea 100644
--- a/sql/m_sql_report.c
+++ b/sql/m_sql_report.c
@@ -406,7 +406,7 @@ static M_sql_report_encap_type_t M_sql_report_col_needs_encap(const M_sql_report
 		type = M_SQL_REPORT_ENCAP_ONLY;
 	}
 
-	for (i=0; i<data_len; i++) {
+	for (i=0; data != NULL && i<data_len; i++) {
 		if (data[i] == report->field_encaps || data[i] == report->field_escape)
 				return M_SQL_REPORT_ENCAP_REWRITE;
 

