commit 1179fbbca30fe0765cf935e9c514944c9e8ca818
Author: Gabriel Morin <gabrielmorin@gmail.com>
Date:   Mon Aug 9 20:40:33 2010 +0000

    Whiteboard: add more conditions to block whiteboard activation...
    
    ...at critical moments.

diff --git a/src/whiteboard/manager.cpp b/src/whiteboard/manager.cpp
index 55a1ba0cb9..e985b71901 100644
--- a/src/whiteboard/manager.cpp
+++ b/src/whiteboard/manager.cpp
@@ -102,10 +102,13 @@ void manager::print_help_once()
 
 void manager::set_active(bool active)
 {
-	if(is_observer())
+	if(wait_for_side_init_
+				|| executing_actions_
+				|| is_observer()
+				|| resources::controller->is_linger_mode())
 	{
 		active_ = false;
-		LOG_WB << "Whiteboard can't be activated by observers.\n";
+		LOG_WB << "Whiteboard can't be activated now.\n";
 	}
 	else if (active != active_)
 	{
@@ -128,7 +131,8 @@ void manager::set_invert_behavior(bool invert)
 	bool block_whiteboard_activation = false;
 	if(wait_for_side_init_
 			|| executing_actions_
-			|| is_observer())
+			|| is_observer()
+			|| resources::controller->is_linger_mode())
 	{
 		 block_whiteboard_activation = true;
 	}

