commit 94ddc5023cfe8e642304cd6bb23b6efc4b42f0c8
Author: Andrew Cagney <cagney@gnu.org>
Date:   Wed Aug 30 21:07:47 2017 -0400

    nss: when there is no NSS DB, don't try to authenticate
    
    Eliminates LSW_NSS_SKIP_AUTH

diff --git a/include/lswnss.h b/include/lswnss.h
index cb03fa2bf..51389d1b3 100644
--- a/include/lswnss.h
+++ b/include/lswnss.h
@@ -28,10 +28,6 @@ enum lsw_nss_flags {
 	 * Should shutdown call PR_CLEANUP.
 	 */
 	LSW_NSS_SKIP_PR_CLEANUP = 2,
-	/*
-	 * Should setup try to authenticate.
-	 */
-	LSW_NSS_SKIP_AUTH = 4,
 };
 
 /*
diff --git a/lib/libswan/lswnss.c b/lib/libswan/lswnss.c
index 8aca564b1..18268ecc8 100644
--- a/lib/libswan/lswnss.c
+++ b/lib/libswan/lswnss.c
@@ -98,7 +98,7 @@ bool lsw_nss_setup(const char *configdir, unsigned setup_flags,
 		PK11_SetPasswordFunc(get_password);
 	}
 
-	if (!(flags & LSW_NSS_SKIP_AUTH)) {
+	if (configdir != NULL) {
 		PK11SlotInfo *slot = lsw_nss_get_authenticated_slot(err);
 		if (slot == NULL) {
 			return FALSE;

