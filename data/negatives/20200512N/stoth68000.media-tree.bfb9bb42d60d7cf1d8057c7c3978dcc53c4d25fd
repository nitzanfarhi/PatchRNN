commit bfb9bb42d60d7cf1d8057c7c3978dcc53c4d25fd
Author: Lars-Peter Clausen <lars@metafoo.de>
Date:   Sat Jan 11 14:02:17 2014 +0100

    dma: pl330: Set residue_granularity
    
    The pl330 driver currently does not support residue reporting, so set the
    residue granularity to DMA_RESIDUE_GRANULARITY_DESCRIPTOR.
    
    Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>
    Acked-by: Vinod Koul <vinod.koul@intel.com>
    Signed-off-by: Mark Brown <broonie@linaro.org>

diff --git a/drivers/dma/pl330.c b/drivers/dma/pl330.c
index cdf0483b8f2d..b8a7adf7023c 100644
--- a/drivers/dma/pl330.c
+++ b/drivers/dma/pl330.c
@@ -2887,6 +2887,7 @@ static int pl330_dma_device_slave_caps(struct dma_chan *dchan,
 	caps->directions = BIT(DMA_DEV_TO_MEM) | BIT(DMA_MEM_TO_DEV);
 	caps->cmd_pause = false;
 	caps->cmd_terminate = true;
+	caps->residue_granularity = DMA_RESIDUE_GRANULARITY_DESCRIPTOR;
 
 	return 0;
 }

