commit c6a9dbb678b8915dde16e013ff8f084c07ab9319
Author: Xiao-Yu Zhang <Xiao-Yu.Zhang@Sun.COM>
Date:   Fri Mar 27 10:28:34 2009 +0800

    6818681 ahci: disable MSI interrupt for nVidia MCP78s [GeForce 8200] chipset

diff --git a/usr/src/uts/common/io/sata/adapters/ahci/ahci.c b/usr/src/uts/common/io/sata/adapters/ahci/ahci.c
index dfcb77169e..e749299c46 100644
--- a/usr/src/uts/common/io/sata/adapters/ahci/ahci.c
+++ b/usr/src/uts/common/io/sata/adapters/ahci/ahci.c
@@ -2991,6 +2991,14 @@ ahci_config_space_init(ahci_ctl_t *ahci_ctlp)
 		ahci_ctlp->ahcictl_cap |= AHCI_CAP_32BIT_DMA;
 	}
 
+	/* ASUS M3N-HT (NVidia 780a) does not support MSI */
+	if (venid == 0x10de && devid == 0x0ad4) {
+		AHCIDBG0(AHCIDBG_INIT, ahci_ctlp,
+		    "ASUS M3N-HT (NVidia 780a) does not support MSI "
+		    "interrupts, so force it to use fixed interrupts.");
+		ahci_msi_enabled = B_FALSE;
+	}
+
 	/*
 	 * Check if capabilities list is supported and if so,
 	 * get initial capabilities pointer and clear bits 0,1.

