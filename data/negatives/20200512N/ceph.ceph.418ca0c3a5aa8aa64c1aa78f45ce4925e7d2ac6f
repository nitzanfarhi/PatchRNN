commit 418ca0c3a5aa8aa64c1aa78f45ce4925e7d2ac6f
Author: David Zafman <dzafman@redhat.com>
Date:   Tue Feb 10 20:25:05 2015 -0800

    osd: Update object state after removing watch from object info
    
    Fixes: #10784
    
    Signed-off-by: David Zafman <dzafman@redhat.com>

diff --git a/src/osd/ReplicatedPG.cc b/src/osd/ReplicatedPG.cc
index 5fb847a219..5c21ff3ce5 100644
--- a/src/osd/ReplicatedPG.cc
+++ b/src/osd/ReplicatedPG.cc
@@ -7990,6 +7990,9 @@ void ReplicatedPG::handle_watch_timeout(WatchRef watch)
 
   // obc ref swallowed by repop!
   simple_repop_submit(repop);
+
+  // apply new object state.
+  ctx->obc->obs = ctx->new_obs;
 }
 
 ObjectContextRef ReplicatedPG::create_object_context(const object_info_t& oi,

