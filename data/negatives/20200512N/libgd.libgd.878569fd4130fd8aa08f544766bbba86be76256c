commit 878569fd4130fd8aa08f544766bbba86be76256c
Author: Pierre Joye <pierre.php@gmail.com>
Date:   Sun Jun 19 15:40:53 2016 +0700

    return if ctx creation failed

diff --git a/src/gd_webp.c b/src/gd_webp.c
index 5bf833c..7202c42 100644
--- a/src/gd_webp.c
+++ b/src/gd_webp.c
@@ -163,6 +163,9 @@ freeargb:
 BGD_DECLARE(void) gdImageWebpEx (gdImagePtr im, FILE * outFile, int quantization)
 {
 	gdIOCtx *out = gdNewFileCtx(outFile);
+	if (out == NULL) {
+		return;
+	}
 	gdImageWebpCtx(im, out, quantization);
 	out->gd_free(out);
 }
@@ -170,6 +173,9 @@ BGD_DECLARE(void) gdImageWebpEx (gdImagePtr im, FILE * outFile, int quantization
 BGD_DECLARE(void) gdImageWebp (gdImagePtr im, FILE * outFile)
 {
 	gdIOCtx *out = gdNewFileCtx(outFile);
+	if (out == NULL) {
+		return;
+	}
 	gdImageWebpCtx(im, out, -1);
 	out->gd_free(out);
 }
@@ -178,6 +184,9 @@ BGD_DECLARE(void *) gdImageWebpPtr (gdImagePtr im, int *size)
 {
 	void *rv;
 	gdIOCtx *out = gdNewDynamicCtx(2048, NULL);
+	if (out == NULL) {
+		return NULL;
+	}
 	gdImageWebpCtx(im, out, -1);
 	rv = gdDPExtractData(out, size);
 	out->gd_free(out);
@@ -189,6 +198,9 @@ BGD_DECLARE(void *) gdImageWebpPtrEx (gdImagePtr im, int *size, int quantization
 {
 	void *rv;
 	gdIOCtx *out = gdNewDynamicCtx(2048, NULL);
+	if (out == NULL) {
+		return NULL;
+	}
 	gdImageWebpCtx(im, out, quantization);
 	rv = gdDPExtractData(out, size);
 	out->gd_free(out);

