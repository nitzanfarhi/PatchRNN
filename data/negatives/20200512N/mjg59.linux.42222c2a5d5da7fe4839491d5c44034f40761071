commit 42222c2a5d5da7fe4839491d5c44034f40761071
Author: Wang Long <long.wanglong@huawei.com>
Date:   Thu May 21 09:34:22 2015 -0700

    fs/pstore: update the backend parameter in pstore module
    
    This patch update the module parameter backend, so it is visible
    through /sys/module/pstore/parameters/backend.
    
    For example:
    if pstore backend is ramoops, with this patch:
            # cat /sys/module/pstore/parameters/backend
            ramoops
    and without this patch:
            # cat /sys/module/pstore/parameters/backend
            (null)
    
    Signed-off-by: Wang Long <long.wanglong@huawei.com>
    Acked-by: Mark Salyzyn <salyzyn@android.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

diff --git a/fs/pstore/platform.c b/fs/pstore/platform.c
index de525ec0b490..791743deedf1 100644
--- a/fs/pstore/platform.c
+++ b/fs/pstore/platform.c
@@ -456,6 +456,12 @@ int pstore_register(struct pstore_info *psi)
 		add_timer(&pstore_timer);
 	}
 
+	/*
+	 * Update the module parameter backend, so it is visible
+	 * through /sys/module/pstore/parameters/backend
+	 */
+	backend = psi->name;
+
 	pr_info("Registered %s as persistent store backend\n", psi->name);
 
 	return 0;

