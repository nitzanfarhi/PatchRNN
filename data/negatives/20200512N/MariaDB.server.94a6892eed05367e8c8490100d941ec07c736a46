commit 94a6892eed05367e8c8490100d941ec07c736a46
Author: unknown <hf@deer.mysql.r18.ru>
Date:   Sun Jan 5 17:56:11 2003 +0400

    SCRUM
    additions about DEFAULT in UPDATE and SELECT
    
    
    sql/item.cc:
      Item_default_value::print added
    sql/item.h:
      Some functions added with Sanja's suggestions

diff --git a/sql/item.cc b/sql/item.cc
index 310e704bd41..d2d1856d592 100644
--- a/sql/item.cc
+++ b/sql/item.cc
@@ -1150,6 +1150,12 @@ bool Item_default_value::fix_fields(THD *thd, struct st_table_list *table_list,
   return 0;
 }
 
+void Item_default_value::print(String *str)
+{
+  str->append("default(");
+  arg->print(str);
+  str->append(')');
+}
 
 /*
   If item is a const function, calculate it and return a const item
diff --git a/sql/item.h b/sql/item.h
index ce9f4af3371..a4bbb7560b3 100644
--- a/sql/item.h
+++ b/sql/item.h
@@ -674,6 +674,12 @@ class Item_default_value : public Item_field
   enum Type type() const { return DEFAULT_VALUE_ITEM; }
   bool eq(const Item *item, bool binary_cmp) const;
   bool fix_fields(THD *, struct st_table_list *, Item **);
+  bool check_loop(uint id)
+  {
+    return Item_field::check_loop(id) || arg->check_loop(id);
+  }
+  void set_outer_resolving() { arg->set_outer_resolving(); }
+  void print(String *str);
 };
 
 class Item_cache: public Item

