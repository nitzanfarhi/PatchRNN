commit c8c77d8d97be1eb863da606d282590c8ef5c44e5
Author: Peter Ross <pross@xvid.org>
Date:   Tue Feb 23 10:28:11 2010 +0000

    Use reported_size to truncate final Bink Audio frame
    
    Originally committed as revision 21993 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/binkaudio.c b/libavcodec/binkaudio.c
index 1aca5bceb..b3f74d04d 100644
--- a/libavcodec/binkaudio.c
+++ b/libavcodec/binkaudio.c
@@ -272,11 +272,7 @@ static int decode_frame(AVCodecContext *avctx,
         get_bits_align32(gb);
     }
 
-    *data_size = (uint8_t*)samples - (uint8_t*)data;
-    if (reported_size != *data_size) {
-        av_log(avctx, AV_LOG_WARNING, "reported data size (%d) does not match output data size (%d)\n",
-             reported_size, *data_size);
-    }
+    *data_size = FFMIN(reported_size, (uint8_t*)samples - (uint8_t*)data);
     return buf_size;
 }
 

