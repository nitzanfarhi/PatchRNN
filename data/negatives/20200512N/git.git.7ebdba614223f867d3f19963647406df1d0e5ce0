commit 7ebdba614223f867d3f19963647406df1d0e5ce0
Author: Johannes Schindelin <Johannes.Schindelin@gmx.de>
Date:   Tue May 2 16:58:37 2006 +0200

    repo-config: trim white-space before comment
    
    Earlier, calling
    
            git-repo-config core.hello
    
    on a .git/config like this:
    
            [core]
                    hello = world ; a comment
    
    would yield "world " (i.e. with a trailing space).
    
    Signed-off-by: Johannes Schindelin <Johannes.Schindelin@gmx.de>
    Signed-off-by: Junio C Hamano <junkio@cox.net>
    (cherry picked from c1aee1fd8d94da9b3c5d2dc1d4264f7e73a58f80 commit)

diff --git a/config.c b/config.c
index a3e14d76e..2cdf5fcab 100644
--- a/config.c
+++ b/config.c
@@ -60,6 +60,12 @@ static char *parse_value(void)
 			space = 1;
 			continue;
 		}
+		if (!quote) {
+			if (c == ';' || c == '#') {
+				comment = 1;
+				continue;
+			}
+		}
 		if (space) {
 			if (len)
 				value[len++] = ' ';
@@ -93,12 +99,6 @@ static char *parse_value(void)
 			quote = 1-quote;
 			continue;
 		}
-		if (!quote) {
-			if (c == ';' || c == '#') {
-				comment = 1;
-				continue;
-			}
-		}
 		value[len++] = c;
 	}
 }

