commit 3c80b42532bcd6924b6afb3cf6609b1d285906ac
Author: Aaron Jones <aaronmdjones@gmail.com>
Date:   Thu Jan 15 00:00:00 2015 +0000

    Allow clients to have a resolved hostname of localhost
    
    I slightly changed the patch to match surrounding style.
    
    (cherry picked from commit 0b06270fd6266c85d19e008efcd039605daf59d0)

diff --git a/src/s_user.c b/src/s_user.c
index 2d7705dc..9ad3ee88 100644
--- a/src/s_user.c
+++ b/src/s_user.c
@@ -734,6 +734,9 @@ valid_hostname(const char *hostname)
 	if(hostname == NULL)
 		return NO;
 
+	if(!strcmp(hostname, "localhost"))
+		return YES;
+
 	if('.' == *p || ':' == *p || '/' == *p)
 		return NO;
 

