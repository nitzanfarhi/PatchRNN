commit 2c1ee29835bc381f150a578afcd0b30b7423554b
Author: reimar <reimar@b3059339-0415-0410-9bf9-f77b7e298cf2>
Date:   Sun Jun 17 10:24:10 2007 +0000

    Set subtitle type in mpg demuxer. Fixes subtitle switching with 'j'
    (previously subtitles would just disappear).
    
    
    git-svn-id: svn://svn.mplayerhq.hu/mplayer/trunk@23570 b3059339-0415-0410-9bf9-f77b7e298cf2

diff --git a/libmpdemux/demux_mpg.c b/libmpdemux/demux_mpg.c
index 3498a40472..a2a3d369e6 100644
--- a/libmpdemux/demux_mpg.c
+++ b/libmpdemux/demux_mpg.c
@@ -423,8 +423,9 @@ static int demux_mpg_read_packet(demuxer_t *demux,int id){
         aid&=0x1F;
 
         if(!demux->s_streams[aid]){
+            sh_sub_t *sh = new_sh_sub(demux, aid);
+            if (sh) sh->type = 'v';
             mp_msg(MSGT_DEMUX,MSGL_V,"==> Found subtitle: %d\n",aid);
-            new_sh_sub(demux, aid);
         }
 
         if(demux->sub->id > -1)

