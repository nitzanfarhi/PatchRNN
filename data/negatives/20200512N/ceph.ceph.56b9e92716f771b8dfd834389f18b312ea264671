commit 56b9e92716f771b8dfd834389f18b312ea264671
Author: Sage Weil <sage@newdream.net>
Date:   Tue Nov 16 10:32:19 2010 -0800

    osd: fix trailing + in pg state string rendering
    
    Signed-off-by: Sage Weil <sage@newdream.net>

diff --git a/src/osd/osd_types.h b/src/osd/osd_types.h
index 39de3a2b12..f251cd579c 100644
--- a/src/osd/osd_types.h
+++ b/src/osd/osd_types.h
@@ -585,7 +585,11 @@ static inline std::string pg_state_string(int state)
   if (state & PG_STATE_SCANNING)
     oss << "scanning+";
   string ret(oss.str());
-  return (ret.length() == 0) ? "inactive" : ret;
+  if (ret.length() > 0)
+    ret.resize(ret.length() - 1);
+  else
+    ret = "inactive";
+  return ret;
 }
 
 

