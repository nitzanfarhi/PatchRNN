commit 6212362fba186fd63e66d2854067b4323976f76e
Author: glenlow <devnull@localhost>
Date:   Wed Apr 1 00:13:59 2009 +0000

    must protect text output with xml_string

diff --git a/plugin/visio/VisioText.cpp b/plugin/visio/VisioText.cpp
index 6d5e6c044..3c451d669 100644
--- a/plugin/visio/VisioText.cpp
+++ b/plugin/visio/VisioText.cpp
@@ -19,6 +19,8 @@
 #include "gvcjob.h"
 #include "gvio.h"
 
+extern "C" char *xml_string(char* str);
+
 namespace Visio
 {
 	static const float INCHES_PER_POINT = 1.0 / 72.0;
@@ -70,7 +72,7 @@ namespace Visio
 	
 	void Run::Print(GVJ_t* job, unsigned int index) const
 	{
-		gvprintf(job, "<pp IX='%d'/><cp IX='%d'/>%s\n", index, index, _text ? _text : "");	/* para mark + char mark + actual text */
+		gvprintf(job, "<pp IX='%d'/><cp IX='%d'/>%s\n", index, index, _text ? xml_string(_text) : "");	/* para mark + char mark + actual text */
 	}
 	
 	Text* Text::CreateText(GVJ_t* job, pointf p, textpara_t* para)

