commit 6a6674a674040956dbb3887fd11e5786a774b63a
Author: unknown <bell@desktop.sanja.is.com.ua>
Date:   Tue Dec 11 09:17:10 2007 +0200

    Page number calculation fixed.

diff --git a/storage/maria/ma_loghandler.c b/storage/maria/ma_loghandler.c
index d2fc3e951e1..02a087a5802 100644
--- a/storage/maria/ma_loghandler.c
+++ b/storage/maria/ma_loghandler.c
@@ -2099,7 +2099,7 @@ static my_bool translog_buffer_flush(struct st_translog_buffer *buffer)
   }
 
   file.file= buffer->file;
-  for (i= 0, pg= buffer->offset / TRANSLOG_PAGE_SIZE;
+  for (i= 0, pg= LSN_OFFSET(buffer->offset) / TRANSLOG_PAGE_SIZE;
        i < buffer->size;
        i+= TRANSLOG_PAGE_SIZE, pg++)
   {

