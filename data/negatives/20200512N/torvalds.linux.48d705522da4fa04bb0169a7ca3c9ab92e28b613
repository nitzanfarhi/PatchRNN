commit 48d705522da4fa04bb0169a7ca3c9ab92e28b613
Author: Micon, David <DMicon@pelco.com>
Date:   Sat May 20 14:59:59 2006 -0700

    [PATCH] HID read busywait fix
    
    Make a read of a HID device block until data is available.  Without it, the
    read goes into a busy-wait loop until data is available.
    
    Cc: Greg KH <greg@kroah.com>
    Acked-by: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/drivers/usb/input/hiddev.c b/drivers/usb/input/hiddev.c
index 6dd666696178..c4670e1d4654 100644
--- a/drivers/usb/input/hiddev.c
+++ b/drivers/usb/input/hiddev.c
@@ -317,6 +317,7 @@ static ssize_t hiddev_read(struct file * file, char __user * buffer, size_t coun
 				}
 
 				schedule();
+				set_current_state(TASK_INTERRUPTIBLE);
 			}
 
 			set_current_state(TASK_RUNNING);

