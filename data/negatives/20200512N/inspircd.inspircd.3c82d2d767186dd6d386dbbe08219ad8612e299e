commit 3c82d2d767186dd6d386dbbe08219ad8612e299e
Author: special <special@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Fri Aug 18 00:56:26 2006 +0000

    Forward port of /list pattern matching, reported by Stskeeps
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@4940 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/cmd_list.cpp b/src/cmd_list.cpp
index 7aa9319ba..ab9ca083d 100644
--- a/src/cmd_list.cpp
+++ b/src/cmd_list.cpp
@@ -17,17 +17,18 @@
 #include "users.h"
 #include "ctables.h"
 #include "commands.h"
-
 #include "inspircd.h"
 #include "commands/cmd_list.h"
-
-
+#include "wildcard.h"
 
 void cmd_list::Handle (const char** parameters, int pcnt, userrec *user)
 {
 	user->WriteServ("321 %s Channel :Users Name",user->nick);
 	for (chan_hash::const_iterator i = ServerInstance->chanlist.begin(); i != ServerInstance->chanlist.end(); i++)
 	{
+		// attempt to match a glob pattern
+		if (pcnt && !match(i->second->name, parameters[0]))
+			continue;
 		// if the channel is not private/secret, OR the user is on the channel anyway
 		bool n = i->second->HasUser(user);
 		if (((!(i->second->modes[CM_PRIVATE])) && (!(i->second->modes[CM_SECRET]))) || (n))

