commit d1f0e7273401e1470b8ed919961e6989eab1f986
Author: Roland Knall <roland.knall@br-automation.com>
Date:   Wed Oct 28 06:59:35 2015 +0100

    frame_data: Reset subnum if visited is resetted
    
     subnum get's resetted when the file is reloaded. But subnum
     does not get resetted, if for instance a preference has been
     set directly via (Protocol Name)->Protocol Preferences-> ...
     in the Protocol list. But flags.visited get's resetted.
    
     This leads to the scenario, where reloading a trace starts subnum
     with 0 and applying a preference starts subnum with the highest
     value it had before.
    
     This patch ensures, that all methods for reloading the frame
     lead to the same init value
    
    Change-Id: I167d1e03f7e2e6c60492f501ee5cb9555ac12ac9
    Reviewed-on: https://code.wireshark.org/review/11341
    Reviewed-by: Roland Knall <rknall@gmail.com>
    Reviewed-by: Michael Mann <mmann78@netscape.net>
    Reviewed-by: Pascal Quantin <pascal.quantin@gmail.com>

diff --git a/epan/frame_data.c b/epan/frame_data.c
index 526e95f924..d24a34412c 100644
--- a/epan/frame_data.c
+++ b/epan/frame_data.c
@@ -374,6 +374,7 @@ void
 frame_data_reset(frame_data *fdata)
 {
   fdata->flags.visited = 0;
+  fdata->subnum = 0;
 
   if (fdata->pfd) {
     g_slist_free(fdata->pfd);

