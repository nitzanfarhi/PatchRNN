commit 6fec07ab7ee185bb2ae4e075fd7e4536f753de98
Author: Con Kolivas <kernel@kolivas.org>
Date:   Fri May 31 23:10:46 2013 +1000

    Check for pool enabled in cnx_needed.

diff --git a/cgminer.c b/cgminer.c
index bfe1db33..df52d584 100644
--- a/cgminer.c
+++ b/cgminer.c
@@ -4800,6 +4800,9 @@ static bool cnx_needed(struct pool *pool)
 {
 	struct pool *cp;
 
+	if (pool->enabled != POOL_ENABLED)
+		return false;
+
 	/* Balance strategies need all pools online */
 	if (pool_strategy == POOL_BALANCE)
 		return true;

