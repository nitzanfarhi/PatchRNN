commit b47235bca1bc9eae2fec459aba351311085cf505
Author: Brendan Cully <brendan@kublai.com>
Date:   Thu Sep 8 15:54:07 2005 +0000

    Forget line number when resolving in pager. This is beginning to get
    messy - maybe it would be better to only remember on specific operations
    like sync.

diff --git a/pager.c b/pager.c
index 4751a76ae..eb74c33ed 100644
--- a/pager.c
+++ b/pager.c
@@ -2688,7 +2688,9 @@ CHECK_IMAP_ACL(IMAP_ACL_DELETE);
   if (IsHeader (extra))
   {
     Context->msgnotreadyet = -1;
-    if (rc != -1)
+    if (rc == -1 || rc == OP_MAIN_NEXT_UNDELETED || rc == OP_NEXT_ENTRY)
+      OldHdr = NULL;
+    else
     {
       TopLine = topline;
       OldHdr = extra->hdr;

