commit 29200f12a1167076346415e18eee9065cb77a859
Author: Martin Hicks <mort@bork.org>
Date:   Thu Feb 19 15:05:47 2015 -0500

    sata-fsl: Apply link speed limits
    
    The driver was ignoring limits requested by libata.force.  The output
    would look like:
    
    fsl-sata ffe18000.sata: Sata FSL Platform/CSB Driver init
    ata1: FORCE: PHY spd limit set to 1.5Gbps
    ata1: SATA max UDMA/133 irq 74
    ata1: Signature Update detected @ 0 msecs
    ata1: SATA link up 3.0 Gbps (SStatus 123 SControl 310)
    
    Signed-off-by: Martin Hicks <mort@bork.org>
    Signed-off-by: Tejun Heo <tj@kernel.org>

diff --git a/drivers/ata/sata_fsl.c b/drivers/ata/sata_fsl.c
index f9054cd36a72..5389579c5120 100644
--- a/drivers/ata/sata_fsl.c
+++ b/drivers/ata/sata_fsl.c
@@ -869,6 +869,8 @@ static int sata_fsl_hardreset(struct ata_link *link, unsigned int *class,
 	 */
 	ata_msleep(ap, 1);
 
+	sata_set_spd(link);
+
 	/*
 	 * Now, bring the host controller online again, this can take time
 	 * as PHY reset and communication establishment, 1st D2H FIS and

