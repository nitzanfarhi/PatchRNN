commit 4a7a3929b0d419903a0888966ef8383a443f1f93
Author: Luke Dashjr <luke-jr+git@utopios.org>
Date:   Sun Feb 17 19:54:49 2013 +0000

    Bugfix: watchdog: Use processor thr_info even if it isn't a real thread

diff --git a/miner.c b/miner.c
index b81a79d7..2ebb1bba 100644
--- a/miner.c
+++ b/miner.c
@@ -7331,7 +7331,8 @@ static void *watchdog_thread(void __maybe_unused *userdata)
 		for (i = 0; i < total_devices; ++i) {
 			struct cgpu_info *cgpu = devices[i];
 			struct thr_info *thr;
-			for (int thrid = 0; thrid < cgpu->threads; ++thrid) {
+			int threadobjs = cgpu->threads ?: 1;
+			for (int thrid = 0; thrid < threadobjs; ++thrid) {
 				thr = cgpu->thr[thrid];
 				if (!thr->q->frozen)
 					break;

