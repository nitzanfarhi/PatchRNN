commit 657205bdd7b276d95b3a5bac7e856e22c4001136
Author: Sreenivasa Honnur <Sreenivasa.Honnur@neterion.com>
Date:   Mon Oct 5 01:52:54 2009 +0000

    vxge: Update driver_config->vpath_per_dev for each function in probe.
    
    - Update driver_config->vpath_per_dev for each function in probe.
    
    - vpath_per_device specifies number of vpaths supported for each function/device. The
      current code was updating vpath_per_device only for physical device, however this has
      to be updated for each function also in case of a MF(Multi function) device.
    
    Signed-off-by: Sreenivasa Honnur <sreenivasa.honnur@neterion.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/vxge/vxge-main.c b/drivers/net/vxge/vxge-main.c
index 068d7a9d3e36..7a851ac30c60 100644
--- a/drivers/net/vxge/vxge-main.c
+++ b/drivers/net/vxge/vxge-main.c
@@ -4088,9 +4088,10 @@ vxge_probe(struct pci_dev *pdev, const struct pci_device_id *pre)
 		driver_config->config_dev_cnt = 0;
 		driver_config->total_dev_cnt = 0;
 		driver_config->g_no_cpus = 0;
-		driver_config->vpath_per_dev = max_config_vpath;
 	}
 
+	driver_config->vpath_per_dev = max_config_vpath;
+
 	driver_config->total_dev_cnt++;
 	if (++driver_config->config_dev_cnt > max_config_dev) {
 		ret = 0;

