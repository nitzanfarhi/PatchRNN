commit 6db0885a6cadbfb5d4f24e0b34c5ff30eb66300f
Author: Janusz Dziedzic <janusz.dziedzic@tieto.com>
Date:   Tue Oct 7 12:26:43 2014 +0200

    ath10k: fix WMI scan command length
    
    Fix WMI scan command length we setup when scan request.
    
    This fix issue with 636 firmware when scan always failed
    with message:
    
    ath10k_pci 0000:02:00.0: wmi start scan
    ath10k_pci 0000:02:00.0: wmi stop scan reqid 1 req_type 0 vdev/scan_id 0
    ath10k_pci 0000:02:00.0: failed to stop wmi scan: -11
    ath10k_pci 0000:02:00.0: failed to stop scan: -11
    ath10k_pci 0000:02:00.0: failed to start hw scan: -110
    
    Signed-off-by: Janusz Dziedzic <janusz.dziedzic@tieto.com>
    Signed-off-by: Kalle Valo <kvalo@qca.qualcomm.com>

diff --git a/drivers/net/wireless/ath/ath10k/wmi.c b/drivers/net/wireless/ath/ath10k/wmi.c
index c145b985f7a5..7ca9dcb12847 100644
--- a/drivers/net/wireless/ath/ath10k/wmi.c
+++ b/drivers/net/wireless/ath/ath10k/wmi.c
@@ -3506,10 +3506,10 @@ int ath10k_wmi_start_scan(struct ath10k *ar,
 		return ret;
 
 	if (test_bit(ATH10K_FW_FEATURE_WMI_10X, ar->fw_features))
-		len = sizeof(struct wmi_start_scan_cmd) +
+		len = sizeof(struct wmi_10x_start_scan_cmd) +
 		      ath10k_wmi_start_scan_tlvs_len(arg);
 	else
-		len = sizeof(struct wmi_10x_start_scan_cmd) +
+		len = sizeof(struct wmi_start_scan_cmd) +
 		      ath10k_wmi_start_scan_tlvs_len(arg);
 
 	skb = ath10k_wmi_alloc_skb(ar, len);

