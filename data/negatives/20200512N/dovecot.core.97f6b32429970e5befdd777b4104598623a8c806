commit 97f6b32429970e5befdd777b4104598623a8c806
Author: Timo Sirainen <tss@iki.fi>
Date:   Wed Mar 16 17:42:06 2011 +0200

    lib-storage: Added first_recent_uid to struct mailbox_status.

diff --git a/src/lib-storage/index/index-status.c b/src/lib-storage/index/index-status.c
index 8f9708269..4ae6e7dd8 100644
--- a/src/lib-storage/index/index-status.c
+++ b/src/lib-storage/index/index-status.c
@@ -154,6 +154,7 @@ void index_storage_get_status(struct mailbox *box,
 	}
 	status_r->unseen = hdr->messages_count - hdr->seen_messages_count;
 	status_r->uidvalidity = hdr->uid_validity;
+	status_r->first_recent_uid = hdr->first_recent_uid;
 	status_r->uidnext = hdr->next_uid;
 	status_r->nonpermanent_modseqs = mail_index_is_in_memory(box->index);
 	if ((items & STATUS_HIGHESTMODSEQ) != 0) {
diff --git a/src/lib-storage/mail-storage.h b/src/lib-storage/mail-storage.h
index bda35650a..b98dd921f 100644
--- a/src/lib-storage/mail-storage.h
+++ b/src/lib-storage/mail-storage.h
@@ -66,7 +66,8 @@ enum mailbox_status_items {
 	STATUS_KEYWORDS		= 0x40,
 	STATUS_HIGHESTMODSEQ	= 0x80,
 	STATUS_CACHE_FIELDS	= 0x100,
-	STATUS_VIRTUAL_SIZE	= 0x200
+	STATUS_VIRTUAL_SIZE	= 0x200,
+	STATUS_FIRST_RECENT_UID	= 0x400
 };
 
 enum mailbox_search_result_flags {
@@ -184,6 +185,7 @@ struct mailbox_status {
 	uint32_t uidnext;
 
 	uint32_t first_unseen_seq;
+	uint32_t first_recent_uid;
 	uint64_t highest_modseq;
 	/* sum of virtual size of all messages in mailbox */
 	uint64_t virtual_size;

