commit 9fd1ae4c42b172894b9b4cd3bffd079c418bb9c0
Author: Sage Weil <sage.weil@dreamhost.com>
Date:   Thu Feb 3 15:09:36 2011 -0800

    filestore: fix (part of) wipe_subvol
    
    Signed-off-by: Sage Weil <sage.weil@dreamhost.com>

diff --git a/src/os/FileStore.cc b/src/os/FileStore.cc
index f84d8d195e..e8e8adb75e 100644
--- a/src/os/FileStore.cc
+++ b/src/os/FileStore.cc
@@ -595,9 +595,8 @@ int FileStore::wipe_subvol(const char *s)
   while (::readdir_r(dir, (struct dirent*)buf, &de) == 0) {
     if (!de)
       break;
-    if (strcmp(de->d_name, "."))
-      continue;
-    if (strcmp(de->d_name, ".."))
+    if (strcmp(de->d_name, ".") == 0 ||
+	strcmp(de->d_name, "..") == 0)
       continue;
     ostringstream oss;
     oss << basedir << "/" << de->d_name;

