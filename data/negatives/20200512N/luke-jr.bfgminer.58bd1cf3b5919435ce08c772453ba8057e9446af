commit 58bd1cf3b5919435ce08c772453ba8057e9446af
Author: Luke Dashjr <luke-jr+git@utopios.org>
Date:   Mon May 19 08:08:36 2014 +0000

    If the current pool lacks its own block change detection, keep the pool used for that connected

diff --git a/miner.c b/miner.c
index f74eb66b..8aca29f6 100644
--- a/miner.c
+++ b/miner.c
@@ -8406,6 +8406,10 @@ static bool cnx_needed(struct pool *pool)
 	/* We've run out of work, bring anything back to life. */
 	if (no_work)
 		return true;
+	
+	// If the current pool lacks its own block change detection, see if we are needed for that
+	if (pool_active_lp_pool(cp) == pool)
+		return true;
 
 	return false;
 }

