commit 6ff1f6153022821252de615858a6adf0b193eec0
Author: Ronald S. Bultje <rsbultje@gmail.com>
Date:   Sat Nov 15 14:44:48 2008 +0000

    Call check_back_and_send_rr() function only in case of RTP as a transport.
    Don't call it for RDT, since it is unneeded and it doesn't provide a
    RTPDemuxContext, leading to some memory errors. See "[PATCH] fix small
    memory error in rtsp.c" thread on ML.
    
    Originally committed as revision 15828 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/rtsp.c b/libavformat/rtsp.c
index f7596d2a3..543032e35 100644
--- a/libavformat/rtsp.c
+++ b/libavformat/rtsp.c
@@ -1399,7 +1399,7 @@ static int rtsp_read_packet(AVFormatContext *s,
     case RTSP_LOWER_TRANSPORT_UDP:
     case RTSP_LOWER_TRANSPORT_UDP_MULTICAST:
         len = udp_read_packet(s, &rtsp_st, buf, sizeof(buf));
-        if (len >=0 && rtsp_st->tx_ctx)
+        if (len >=0 && rtsp_st->tx_ctx && rt->transport == RTSP_TRANSPORT_RTP)
             rtp_check_and_send_back_rr(rtsp_st->tx_ctx, len);
         break;
     }

