commit f8637584d90a3328ef0c12419c2bfb223edf0c86
Author: Pierre Joye <pajoye@php.net>
Date:   Thu Aug 27 09:39:01 2009 +0000

    - Fix for #48746, fix mounted volume and junctions when used from vista or later, they are actually prepended with \??\

diff --git a/TSRM/tsrm_virtual_cwd.c b/TSRM/tsrm_virtual_cwd.c
index bb1e329954..a2bcd78ffd 100644
--- a/TSRM/tsrm_virtual_cwd.c
+++ b/TSRM/tsrm_virtual_cwd.c
@@ -723,6 +723,11 @@ static int tsrm_realpath_r(char *path, int start, int len, int *ll, time_t *t, i
 					rname_off += 4;
 					rname_len -= 4;
 				}
+				if(reparsetarget[rname_off] == L'\\' && reparsetarget[rname_off + 1] == L'?' &&
+					reparsetarget[rname_off + 2] == L'?' && reparsetarget[rname_off + 3] == L'\\') {
+					rname_off += 4;
+					rname_len -= 4;
+				}
 			}
 
 			/* Convert wide string to narrow string */

