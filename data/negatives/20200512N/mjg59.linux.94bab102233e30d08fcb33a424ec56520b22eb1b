commit 94bab102233e30d08fcb33a424ec56520b22eb1b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Aug 20 14:54:08 2015 +1000

    drm/nouveau/core: switch to device pri macros
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

diff --git a/drivers/gpu/drm/nouveau/nvkm/core/subdev.c b/drivers/gpu/drm/nouveau/nvkm/core/subdev.c
index b96cb2cca55e..fd1a94c5bf38 100644
--- a/drivers/gpu/drm/nouveau/nvkm/core/subdev.c
+++ b/drivers/gpu/drm/nouveau/nvkm/core/subdev.c
@@ -64,9 +64,11 @@ _nvkm_subdev_init(struct nvkm_object *object)
 int
 nvkm_subdev_fini(struct nvkm_subdev *subdev, bool suspend)
 {
+	struct nvkm_device *device = subdev->device;
+
 	if (subdev->unit) {
-		nv_mask(subdev, 0x000200, subdev->unit, 0x00000000);
-		nv_mask(subdev, 0x000200, subdev->unit, subdev->unit);
+		nvkm_mask(device, 0x000200, subdev->unit, 0x00000000);
+		nvkm_mask(device, 0x000200, subdev->unit, subdev->unit);
 	}
 
 	return nvkm_object_fini(&subdev->object, suspend);

