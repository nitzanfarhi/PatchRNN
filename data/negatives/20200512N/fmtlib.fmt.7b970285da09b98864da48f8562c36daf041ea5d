commit 7b970285da09b98864da48f8562c36daf041ea5d
Author: Victor Zverovich <victor.zverovich@gmail.com>
Date:   Fri Dec 28 09:24:06 2012 -0800

    Fix the build.

diff --git a/format.cc b/format.cc
index 6779973..7ad0908 100644
--- a/format.cc
+++ b/format.cc
@@ -139,7 +139,7 @@ void FormatDecimal(char *buffer, uint64_t value, unsigned num_digits) {
 #ifdef _MSC_VER
 int signbit(double value) {
   if (value < 0) return 1;
-  if (!isnan(value)) return 0;
+  if (value == value) return 0;
   int dec = 0, sign = 0;
   ecvt(value, 0, &dec, &sign);
   return sign;

