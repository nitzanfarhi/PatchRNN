commit bc309d9d7612f005a3d50ecf099ddf9b706a1bf6
Author: Jason Dillaman <dillaman@redhat.com>
Date:   Wed Dec 23 13:26:39 2015 -0500

    librbd: properly handle replay of snap remove RPC message
    
    Fixes: #14164
    Backport: infernalis
    Signed-off-by: Jason Dillaman <dillaman@redhat.com>

diff --git a/src/librbd/internal.cc b/src/librbd/internal.cc
index b3cae8973b..35b3003adb 100644
--- a/src/librbd/internal.cc
+++ b/src/librbd/internal.cc
@@ -839,7 +839,7 @@ int validate_pool(IoCtx &io_ctx, CephContext *cct) {
                                            snap_name),
                                boost::bind(&ImageWatcher::notify_snap_remove,
                                            ictx->image_watcher, snap_name));
-      if (r < 0 && r != -EEXIST) {
+      if (r < 0 && r != -ENOENT) {
         return r;
       }
     } else {

