commit eeeafd384f2f1709d48ba00c807e86d4890cf6b5
Author: Axel Lin <axel.lin@ingics.com>
Date:   Wed Aug 6 08:06:50 2014 +0800

    hwmon: (hih6130) Fix missing hih6130->write_length setting
    
    The hih6130->write_length setting was accidently removed by commit
    ebc6b9383f3e "hwmon: (hih6130) Convert to devm_hwmon_device_register_with_groups",
    fix it.
    
    Signed-off-by: Axel Lin <axel.lin@ingics.com>
    Signed-off-by: Guenter Roeck <linux@roeck-us.net>

diff --git a/drivers/hwmon/hih6130.c b/drivers/hwmon/hih6130.c
index 0e01c4e13e33..7b73d2002d3e 100644
--- a/drivers/hwmon/hih6130.c
+++ b/drivers/hwmon/hih6130.c
@@ -238,6 +238,9 @@ static int hih6130_probe(struct i2c_client *client,
 	hih6130->client = client;
 	mutex_init(&hih6130->lock);
 
+	if (!i2c_check_functionality(client->adapter, I2C_FUNC_SMBUS_QUICK))
+		hih6130->write_length = 1;
+
 	hwmon_dev = devm_hwmon_device_register_with_groups(dev, client->name,
 							   hih6130,
 							   hih6130_groups);

