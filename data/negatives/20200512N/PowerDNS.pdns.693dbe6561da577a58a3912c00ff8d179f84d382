commit 693dbe6561da577a58a3912c00ff8d179f84d382
Author: Bert Hubert <bert.hubert@netherlabs.nl>
Date:   Wed May 19 06:51:12 2010 +0000

    do not try to process UDP AXFR queries anymore. Spotted by Alexander Gall of SWITCH, thanks.
    
    
    git-svn-id: svn://svn.powerdns.com/pdns/trunk/pdns@1619 d19b8d6e-7fed-0310-83ef-9ca221ded41b

diff --git a/pdns/syncres.cc b/pdns/syncres.cc
index fb8bba57a..f24637ed3 100644
--- a/pdns/syncres.cc
+++ b/pdns/syncres.cc
@@ -1,6 +1,6 @@
 /*
     PowerDNS Versatile Database Driven Nameserver
-    Copyright (C) 2003 - 2009  PowerDNS.COM BV
+    Copyright (C) 2003 - 2010  PowerDNS.COM BV
 
     This program is free software; you can redistribute it and/or modify
     it under the terms of the GNU General Public License version 2 as published 
@@ -74,6 +74,10 @@ SyncRes::SyncRes(const struct timeval& now) :  d_outqueries(0), d_tcpoutqueries(
 int SyncRes::beginResolve(const string &qname, const QType &qtype, uint16_t qclass, vector<DNSResourceRecord>&ret)
 {
   s_queries++;
+  
+  if( (qtype.getCode() == QType::AXFR)) 
+    return -1;
+  
   if( (qtype.getCode()==QType::PTR && pdns_iequals(qname, "1.0.0.127.in-addr.arpa.")) ||
       (qtype.getCode()==QType::A && qname.length()==10 && pdns_iequals(qname, "localhost."))) {
     ret.clear();

