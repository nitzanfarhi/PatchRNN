commit e2fc623e7dda6004cf24ec1470c5a8cc6e1a05e3
Author: Yijing Wang <wangyijing@huawei.com>
Date:   Wed Nov 20 17:28:25 2013 +0800

    ata: fix acpi_bus_get_device() return value check
    
    Since acpi_bus_get_device() returns plain int and not acpi_status,
    ACPI_FAILURE() should not be used for checking its return value.  Fix
    that.
    
    tj: Dropped unused local variable @status from odd_can_poweroff().
        Reported by kbuild test bot.
    
    Signed-off-by: Yijing Wang <wangyijing@huawei.com>
    Signed-off-by: Tejun Heo <tj@kernel.org>
    Acked-by: Aaron Lu <aaron.lu@intel.com>
    Cc: linux-ide@vger.kernel.org
    Cc: kbuild test robot <fengguang.wu@intel.com>

diff --git a/drivers/ata/libata-zpodd.c b/drivers/ata/libata-zpodd.c
index 68f9e3293e9c..88949c6d55dd 100644
--- a/drivers/ata/libata-zpodd.c
+++ b/drivers/ata/libata-zpodd.c
@@ -88,15 +88,13 @@ static enum odd_mech_type zpodd_get_mech_type(struct ata_device *dev)
 static bool odd_can_poweroff(struct ata_device *ata_dev)
 {
 	acpi_handle handle;
-	acpi_status status;
 	struct acpi_device *acpi_dev;
 
 	handle = ata_dev_acpi_handle(ata_dev);
 	if (!handle)
 		return false;
 
-	status = acpi_bus_get_device(handle, &acpi_dev);
-	if (ACPI_FAILURE(status))
+	if (acpi_bus_get_device(handle, &acpi_dev))
 		return false;
 
 	return acpi_device_can_poweroff(acpi_dev);

