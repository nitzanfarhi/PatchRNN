commit 1fb18b5d4c12331ca10787985ce10fd13d45104d
Author:  <Dao-Gang.Qu@sun.com>
Date:   Fri Oct 23 11:13:42 2009 +0800

    Bug#46640: output from mysqlbinlog command in 5.1 breaks replication
    
    Added parentheses around assignment used as truth value for suppressing warnings.

diff --git a/sql/log_event.cc b/sql/log_event.cc
index 76532836b73..2cb253c9c56 100644
--- a/sql/log_event.cc
+++ b/sql/log_event.cc
@@ -7541,7 +7541,7 @@ int Rows_log_event::do_apply_event(Relay_log_info const *rli)
   }
 
   if (get_flags(STMT_END_F))
-    if (error= rows_event_stmt_cleanup(rli, thd))
+    if ((error= rows_event_stmt_cleanup(rli, thd)))
       rli->report(ERROR_LEVEL, error,
                   "Error in %s event: commit of row events failed, "
                   "table `%s`.`%s`",
diff --git a/sql/log_event_old.cc b/sql/log_event_old.cc
index 3389821a718..357bc78b1cd 100644
--- a/sql/log_event_old.cc
+++ b/sql/log_event_old.cc
@@ -1842,7 +1842,7 @@ int Old_rows_log_event::do_apply_event(Relay_log_info const *rli)
       are involved, commit the transaction and flush the pending event to the
       binlog.
     */
-    if (error= ha_autocommit_or_rollback(thd, 0))
+    if ((error= ha_autocommit_or_rollback(thd, 0)))
       rli->report(ERROR_LEVEL, error,
                   "Error in %s event: commit of row events failed, "
                   "table `%s`.`%s`",

