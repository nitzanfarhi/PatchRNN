commit 0cb4814105de3a2da408db23bbc98c3634dca320
Author: Daniel Stenberg <daniel@haxx.se>
Date:   Tue Jul 25 12:13:57 2000 +0000

    tiny adjustments to set the start-time before the curl_connect() is called to
    allow the connect function to better deal with timeouts, as was just added
    to ftp

diff --git a/lib/url.c b/lib/url.c
index 5194da011..a8fe1ec77 100644
--- a/lib/url.c
+++ b/lib/url.c
@@ -1166,13 +1166,16 @@ CURLcode curl_connect(CURL *curl, CURLconnect **in_connect)
   }
 
   if(conn->curl_connect) {
-    /* is there a post-connect() procedure? */
+    /* is there a connect() procedure? */
+    conn->now = tvnow(); /* set this here for timeout purposes in the
+                            connect procedure, it is later set again for the
+                            progress meter purpose */
     result = conn->curl_connect(conn);
     if(result != CURLE_OK)
       return result; /* pass back errors */
   }
 
-  pgrsTime(data, TIMER_CONNECT);
+  pgrsTime(data, TIMER_CONNECT); /* we're connected */
 
   conn->now = tvnow(); /* time this *after* the connect is done */
   conn->bytecount = 0;

