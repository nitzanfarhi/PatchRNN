commit 9d1c973a7b569652cea0ea00dc7ac409b08a8381
Author: Arik Nemtsov <arik@wizery.com>
Date:   Thu May 10 12:13:14 2012 +0300

    wl18xx: create per-chip-family private storage
    
    Make use of the wlcore provided private storage in the 18xx low-level
    driver.
    
    Signed-off-by: Arik Nemtsov <arik@wizery.com>
    Signed-off-by: Luciano Coelho <coelho@ti.com>

diff --git a/drivers/net/wireless/ti/wl18xx/main.c b/drivers/net/wireless/ti/wl18xx/main.c
index 6a487c83752d..b298e0121377 100644
--- a/drivers/net/wireless/ti/wl18xx/main.c
+++ b/drivers/net/wireless/ti/wl18xx/main.c
@@ -313,8 +313,9 @@ int __devinit wl18xx_probe(struct platform_device *pdev)
 {
 	struct wl1271 *wl;
 	struct ieee80211_hw *hw;
+	struct wl18xx_priv *priv;
 
-	hw = wlcore_alloc_hw(0);
+	hw = wlcore_alloc_hw(sizeof(*priv));
 	if (IS_ERR(hw)) {
 		wl1271_error("can't allocate hw");
 		return PTR_ERR(hw);

