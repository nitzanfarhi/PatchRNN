commit 73637408663279c5a3df51efcd573b9760ede15f
Author: Timo Sirainen <tss@iki.fi>
Date:   Wed Sep 4 02:08:20 2002 +0300

    more verbose error messages for hash corruption
    
    --HG--
    branch : HEAD

diff --git a/src/lib-index/mail-index.c b/src/lib-index/mail-index.c
index 9a98b5c7c..dde4660f1 100644
--- a/src/lib-index/mail-index.c
+++ b/src/lib-index/mail-index.c
@@ -1006,8 +1006,9 @@ MailIndexRecord *mail_index_lookup_uid_range(MailIndex *index,
 				index_set_error(index,
 						"Corrupted hash for index %s: "
 						"lookup returned offset to "
-						"different UID",
-						index->filepath);
+						"different UID (%u vs %u)",
+						index->filepath,
+						rec->uid, uid);
 				index->set_flags |=
 					MAIL_INDEX_FLAG_REBUILD_HASH;
 				rec = NULL;
diff --git a/src/lib-index/mail-messageset.c b/src/lib-index/mail-messageset.c
index e13e80e59..e2c4b77c7 100644
--- a/src/lib-index/mail-messageset.c
+++ b/src/lib-index/mail-messageset.c
@@ -221,8 +221,9 @@ static int mail_index_uid_foreach(MailIndex *index,
 		if (rec->uid != uid) {
 			/* hash is corrupted */
 			index_set_error(index, "Corrupted hash for index %s: "
-					"lookup returned offset to "
-					"different UID", index->filepath);
+					"lookup returned offset to different "
+					"UID (%u vs %u)", index->filepath,
+					rec->uid, uid);
 
 			index->set_flags |= MAIL_INDEX_FLAG_REBUILD_HASH;
 			return -1;

