commit b89fc2e5e7b6d6da3ab9a2dc05810794e5eac869
Author: Uwe Kleine-König <u.kleine-koenig@pengutronix.de>
Date:   Sat Jan 9 20:45:13 2010 -0300

    V4L/DVB sh_mobile_ceu: don't check platform_get_irq's return value against zero
    
    platform_get_irq returns -ENXIO on failure, so !irq was probably
    always true.  Better use (int)irq <= 0.  Note that a return value of
    zero is still handled as error even though this could mean irq0.
    
    This is a followup to 305b3228f9ff4d59f49e6d34a7034d44ee8ce2f0 that
    changed the return value of platform_get_irq from 0 to -ENXIO on error.
    
    Cc: David Vrabel <dvrabel@arcom.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Mauro Carvalho Chehab <mchehab@infradead.org>
    Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Cc: Magnus Damm <damm@igel.co.jp>
    Cc: Kuninori Morimoto <morimoto.kuninori@renesas.com>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Cc: linux-media@vger.kernel.org
    Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de>
    Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/sh_mobile_ceu_camera.c b/drivers/media/video/sh_mobile_ceu_camera.c
index d69363f0d8c9..f09c7140d6b2 100644
--- a/drivers/media/video/sh_mobile_ceu_camera.c
+++ b/drivers/media/video/sh_mobile_ceu_camera.c
@@ -1827,7 +1827,7 @@ static int __devinit sh_mobile_ceu_probe(struct platform_device *pdev)
 
 	res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
 	irq = platform_get_irq(pdev, 0);
-	if (!res || !irq) {
+	if (!res || (int)irq <= 0) {
 		dev_err(&pdev->dev, "Not enough CEU platform resources.\n");
 		err = -ENODEV;
 		goto exit;

