commit 824ab78215c51429a2b0e17356a00a59e4e91a9a
Author: Jisheng Zhang <jszhang@marvell.com>
Date:   Wed Nov 12 19:08:47 2014 +0800

    net: pxa168_eth: move SET_NETDEV_DEV a bit earlier
    
    This is to ensure the net_device's dev.parent is set before we used it
    in dma_zalloc_coherent() from init_hash_table().
    
    Signed-off-by: Jisheng Zhang <jszhang@marvell.com>
    Acked-by: Antoine Tenart <antoine.tenart@free-electrons.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/ethernet/marvell/pxa168_eth.c b/drivers/net/ethernet/marvell/pxa168_eth.c
index 21ddecef151e..38f7ceee77d2 100644
--- a/drivers/net/ethernet/marvell/pxa168_eth.c
+++ b/drivers/net/ethernet/marvell/pxa168_eth.c
@@ -1540,8 +1540,8 @@ static int pxa168_eth_probe(struct platform_device *pdev)
 	if (err)
 		goto err_free_mdio;
 
-	pxa168_init_hw(pep);
 	SET_NETDEV_DEV(dev, &pdev->dev);
+	pxa168_init_hw(pep);
 	err = register_netdev(dev);
 	if (err)
 		goto err_mdiobus;

