commit e879eb9cd75b404441504644026a646c48f8a8ca
Author: matyhtf <mikan.tenny@gmail.com>
Date:   Sun Jan 4 10:25:53 2015 +0800

    remove active = 1

diff --git a/src/reactor/ReactorBase.c b/src/reactor/ReactorBase.c
index f26ae321..c5ff9348 100644
--- a/src/reactor/ReactorBase.c
+++ b/src/reactor/ReactorBase.c
@@ -148,7 +148,6 @@ swConnection* swReactor_get(swReactor *reactor, int fd)
     if (!socket->active)
     {
         socket->fd = fd;
-        socket->active = 1;
     }
     return socket;
 }
diff --git a/swoole_client.c b/swoole_client.c
index b6a0ba95..a3dbf6c6 100644
--- a/swoole_client.c
+++ b/swoole_client.c
@@ -348,7 +348,7 @@ static int php_swoole_client_onWrite(swReactor *reactor, swEvent *event)
 
     if (cli->socket->active)
     {
-        swReactor_onWrite(SwooleG.main_reactor, event);
+        return swReactor_onWrite(SwooleG.main_reactor, event);
     }
 	else
 	{

