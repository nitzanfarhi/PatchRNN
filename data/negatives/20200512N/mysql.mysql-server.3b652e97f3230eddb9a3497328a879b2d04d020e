commit 3b652e97f3230eddb9a3497328a879b2d04d020e
Author: Tomas Ulin <tomas.ulin@sun.com>
Date:   Tue Aug 19 08:30:59 2008 +0200

    continued fix for reset master

diff --git a/sql/ha_ndbcluster_binlog.cc b/sql/ha_ndbcluster_binlog.cc
index c3a5f65bc05..90289778615 100644
--- a/sql/ha_ndbcluster_binlog.cc
+++ b/sql/ha_ndbcluster_binlog.cc
@@ -500,6 +500,10 @@ static int ndbcluster_reset_logs(THD *thd)
   if (!ndb_binlog_running)
     return 0;
 
+  /* only reset master should reset logs */
+  if (!(thd->lex->type & REFRESH_MASTER))
+    return 0;
+
   DBUG_ENTER("ndbcluster_reset_logs");
 
   /*

