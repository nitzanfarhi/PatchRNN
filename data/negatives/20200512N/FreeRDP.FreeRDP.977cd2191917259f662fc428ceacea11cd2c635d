commit 977cd2191917259f662fc428ceacea11cd2c635d
Author: Marc-Andr√© Moreau <marcandre.moreau@gmail.com>
Date:   Wed Jan 28 15:16:31 2015 -0500

    libfreerdp-core: don't enable GatewayBypassLocal by default

diff --git a/client/common/cmdline.c b/client/common/cmdline.c
index 84d0b4321..843c5a0f4 100644
--- a/client/common/cmdline.c
+++ b/client/common/cmdline.c
@@ -78,7 +78,7 @@ COMMAND_LINE_ARGUMENT_A args[] =
 	{ "gu", COMMAND_LINE_VALUE_REQUIRED, "[<domain>\\]<user> or <user>[@<domain>]", NULL, NULL, -1, NULL, "Gateway username" },
 	{ "gp", COMMAND_LINE_VALUE_REQUIRED, "<password>", NULL, NULL, -1, NULL, "Gateway password" },
 	{ "gd", COMMAND_LINE_VALUE_REQUIRED, "<domain>", NULL, NULL, -1, NULL, "Gateway domain" },
-	{ "gateway-usage-method", COMMAND_LINE_VALUE_REQUIRED, "<direct|detect>", NULL, NULL, -1, NULL, "Gateway usage method" },
+	{ "gateway-usage-method", COMMAND_LINE_VALUE_REQUIRED, "<direct|detect>", NULL, NULL, -1, "gum", "Gateway usage method" },
 	{ "load-balance-info", COMMAND_LINE_VALUE_REQUIRED, "<info string>", NULL, NULL, -1, NULL, "Load balance info" },
 	{ "app", COMMAND_LINE_VALUE_REQUIRED, "<executable path> or <||alias>", NULL, NULL, -1, NULL, "Remote application program" },
 	{ "app-name", COMMAND_LINE_VALUE_REQUIRED, "<app name>", NULL, NULL, -1, NULL, "Remote application name for user interface" },
@@ -1464,7 +1464,7 @@ int freerdp_client_settings_parse_command_line_arguments(rdpSettings* settings,
 			settings->GatewayEnabled = TRUE;
 			settings->GatewayUseSameCredentials = TRUE;
 
-			freerdp_set_gateway_usage_method(settings, TSC_PROXY_MODE_DETECT);
+			freerdp_set_gateway_usage_method(settings, TSC_PROXY_MODE_DIRECT);
 		}
 		CommandLineSwitchCase(arg, "gu")
 		{
diff --git a/libfreerdp/core/settings.c b/libfreerdp/core/settings.c
index f5eb66c04..0eecfa27b 100644
--- a/libfreerdp/core/settings.c
+++ b/libfreerdp/core/settings.c
@@ -394,7 +394,7 @@ rdpSettings* freerdp_settings_new(DWORD flags)
 		settings->MultifragMaxRequestSize = 0xFFFF;
 
 		settings->GatewayUseSameCredentials = FALSE;
-		settings->GatewayBypassLocal = TRUE;
+		settings->GatewayBypassLocal = FALSE;
 
 		settings->FastPathInput = TRUE;
 		settings->FastPathOutput = TRUE;

