commit c6cc8b7637434dedee5c5d19a60f88ffddc57983
Author: Lian Duan <blazeblue@gmail.com>
Date:   Mon Jul 4 23:29:38 2016 +0200

    Set SO_REUSEADDR before bind.

diff --git a/src/Server.cpp b/src/Server.cpp
index 8d0fe71..82b0446 100644
--- a/src/Server.cpp
+++ b/src/Server.cpp
@@ -151,7 +151,10 @@ Server::Server(int port, bool master, int options, int maxPayload, SSLContext ss
         listenPoll = new uv_poll_t;
         listenPoll->data = this;
 
-        if (bind(listenFd, (sockaddr *) &listenAddr, sizeof(sockaddr_in)) | listen(listenFd, 10)) {
+        int on = 1;
+        setsockopt(listenFd, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on));
+
+        if (bind(listenFd, (sockaddr *) &listenAddr, sizeof(sockaddr_in)) || listen(listenFd, 10)) {
             throw ERR_LISTEN;
         }
 

