commit 744568d8bfc557ad7ad5c9144f1df8646cdd6a95
Author: Alan Robertson <alanr@unix.sh>
Date:   Sun Jun 12 06:52:56 2005 +0000

    Converted from nanosleep to mssleep() - missing include - so I changed it while I was here...
    
    CVS patchset: 6625
    CVS date: 2005/06/12 06:52:56
    
    Mercurial revision: ac018f8888da743b44c3b49f5ca53bd53b00f80c

diff --git a/crm/crmd/pengine.c b/crm/crmd/pengine.c
index d7dbdaae9..d9d53bdf1 100644
--- a/crm/crmd/pengine.c
+++ b/crm/crmd/pengine.c
@@ -25,6 +25,7 @@
 #include <unistd.h>			/* for access */
 #include <clplumbing/cl_signal.h>
 #include <clplumbing/realtime.h>
+#include <clplumbing/timers.h>
 #include <sys/types.h>	/* for calls to open */
 #include <sys/stat.h>	/* for calls to open */
 #include <fcntl.h>	/* for calls to open */
@@ -157,7 +158,6 @@ do_pe_invoke_callback(const HA_Message *msg, int call_id, int rc,
 	int ccm_transition_id = -1;
 	gboolean cib_has_quorum = FALSE;
 	crm_data_t *local_cib = find_xml_node(output, XML_TAG_CIB, TRUE);
-	static const struct timespec cib_wait = {0,500000000L}; /* 0.5s */
 
 	if(AM_I_DC == FALSE
 	   || is_set(fsa_input_register, R_PE_CONNECTED) == FALSE
@@ -183,7 +183,7 @@ do_pe_invoke_callback(const HA_Message *msg, int call_id, int rc,
 			  " matches: CIB=%d < CRM=%d",
 			  ccm_transition_id, fsa_membership_copy->id);
 		
-		nanosleep(&cib_wait, NULL); /* give the CIB time to catch up */
+		mssleep(500);
 		register_fsa_action(A_PE_INVOKE);
 		return;
 

