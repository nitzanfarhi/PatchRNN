commit b3e9f8ebc26b41b2e72da276c217d2c77397a869
Author: Valery Yatsko <darkwire.tl@gmail.com>
Date:   Wed Apr 9 23:22:51 2008 +0400

    Importing ratbox3 r25213 changeset

diff --git a/src/ircd.c b/src/ircd.c
index a19b617f..bf13e0d3 100644
--- a/src/ircd.c
+++ b/src/ircd.c
@@ -336,7 +336,7 @@ initialize_global_set_options(void)
 
 	GlobalSetOptions.maxclients = ServerInfo.default_max_clients;
 
-	if(GlobalSetOptions.maxclients > (maxconnections - MAX_BUFFER))
+	if(GlobalSetOptions.maxclients > (maxconnections - MAX_BUFFER) || (GlobalSetOptions.maxclients <= 0))
 		GlobalSetOptions.maxclients = maxconnections - MAX_BUFFER;
 
 	GlobalSetOptions.autoconn = 1;

