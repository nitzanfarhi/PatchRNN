commit 0e2cc42cfb4d09c19140f89853e3f0cf4d8c5142
Author: Richard Levitte <levitte@openssl.org>
Date:   Wed Oct 9 15:36:23 2002 +0000

    Make sure that the 'config' variable is correctly defined and declared
    for monolithic as well as non-monolithic biuld.
    More work is probably needed in this area.
    PR: 144

diff --git a/apps/apps.h b/apps/apps.h
index 32a79605ee..dae52bd016 100644
--- a/apps/apps.h
+++ b/apps/apps.h
@@ -144,8 +144,10 @@ int WIN32_rename(char *oldname,char *newname);
 #define MAIN(a,v)	main(a,v)
 
 #ifndef NON_MAIN
+CONF *config=NULL;
 BIO *bio_err=NULL;
 #else
+extern CONF *config;
 extern BIO *bio_err;
 #endif
 
diff --git a/apps/openssl.c b/apps/openssl.c
index 1c4a4291aa..d093715676 100644
--- a/apps/openssl.c
+++ b/apps/openssl.c
@@ -139,11 +139,11 @@ static unsigned long MS_CALLBACK hash(const void *a_void);
 static int MS_CALLBACK cmp(const void *a_void,const void *b_void);
 static LHASH *prog_init(void );
 static int do_cmd(LHASH *prog,int argc,char *argv[]);
-CONF *config=NULL;
 char *default_config_file=NULL;
 
 /* Make sure there is only one when MONOLITH is defined */
 #ifdef MONOLITH
+CONF *config=NULL;
 BIO *bio_err=NULL;
 #endif
 

