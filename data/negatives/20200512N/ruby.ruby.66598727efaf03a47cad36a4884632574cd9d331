commit 66598727efaf03a47cad36a4884632574cd9d331
Author: eban <eban@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   Thu Nov 27 09:13:50 2003 +0000

    win32/win32.c (rb_win32_stat): add "." to buf1 only if it has a drive letter.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@5038 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

diff --git a/win32/win32.c b/win32/win32.c
index 6a7f6be9b8..966c326466 100644
--- a/win32/win32.c
+++ b/win32/win32.c
@@ -2734,7 +2734,7 @@ rb_w32_stat(const char *path, struct stat *st)
 	    *end = '\0';
 	else if (*end != '\\')
 	    strcat(buf1, "\\");
-    } else if (*end == '\\' || *end == ':')
+    } else if (*end == '\\' || (buf1 + 1 == end && *end == ':'))
 	strcat(buf1, ".");
 
     ret = stat(buf1, st);

