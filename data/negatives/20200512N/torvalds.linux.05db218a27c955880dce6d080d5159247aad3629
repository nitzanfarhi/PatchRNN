commit 05db218a27c955880dce6d080d5159247aad3629
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Nov 4 09:49:07 2005 +1100

    [XFS] Fix an inode32 regression - if no options are presented, must still
    set default flags.
    
    SGI-PV: 945242
    SGI-Modid: xfs-linux-melb:xfs-kern:24292a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

diff --git a/fs/xfs/xfs_vfsops.c b/fs/xfs/xfs_vfsops.c
index 94f0858699b5..7bdbd991ab1c 100644
--- a/fs/xfs/xfs_vfsops.c
+++ b/fs/xfs/xfs_vfsops.c
@@ -1687,7 +1687,7 @@ xfs_parseargs(
 #endif
 
 	if (!options)
-		return 0;
+		goto done;
 
 	iosize = dsunit = dswidth = vol_dsunit = vol_dswidth = 0;
 
@@ -1867,9 +1867,9 @@ printk("XFS: irixsgid is now a sysctl(2) variable, option is deprecated.\n");
 		args->sunit = args->swidth = 0;
 	}
 
+done:
 	if (args->flags & XFSMNT_32BITINODES)
 		vfsp->vfs_flag |= VFS_32BITINODES;
-
 	if (args->flags2)
 		args->flags |= XFSMNT_FLAGS2;
 	return 0;

