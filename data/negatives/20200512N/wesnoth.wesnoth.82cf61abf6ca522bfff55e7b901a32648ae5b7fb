commit 82cf61abf6ca522bfff55e7b901a32648ae5b7fb
Author: Guillaume Melquiond <guillaume.melquiond@gmail.com>
Date:   Thu Aug 13 21:01:17 2009 +0000

    Fixed huge cpu usage when the window is hidden.

diff --git a/src/display.cpp b/src/display.cpp
index 979dc28717..9bbffb5a0f 100644
--- a/src/display.cpp
+++ b/src/display.cpp
@@ -1918,7 +1918,7 @@ void display::clear_redraw_observers()
 
 void display::draw(bool update,bool force) {
 //	log_scope("display::draw");
-	if (screen_.update_locked()) {
+	if (screen_.update_locked() || (SDL_GetAppState() & SDL_APPACTIVE) == 0) {
 		return;
 	}
 	bool changed = draw_init();

