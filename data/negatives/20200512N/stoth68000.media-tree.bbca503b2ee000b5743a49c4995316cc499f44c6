commit bbca503b2ee000b5743a49c4995316cc499f44c6
Author: Sudip Mukherjee <sudipm.mukherjee@gmail.com>
Date:   Tue Apr 12 20:56:10 2016 +0530

    parport: use subsys_initcall
    
    The drivers which depends on parport may sometimes try to iniitialize
    and register with parport bus even before parport has actually
    registered with the device layer.
    The simplest solution is to mark the init function as subsys_initcall()
    and load the parport before the other drivers loads.
    
    Signed-off-by: Sudip Mukherjee <sudip.mukherjee@codethink.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/parport/procfs.c b/drivers/parport/procfs.c
index c776333a68bc..74ed3e459a3e 100644
--- a/drivers/parport/procfs.c
+++ b/drivers/parport/procfs.c
@@ -617,5 +617,5 @@ static void __exit parport_default_proc_unregister (void)
 }
 #endif
 
-module_init(parport_default_proc_register)
+subsys_initcall(parport_default_proc_register)
 module_exit(parport_default_proc_unregister)

