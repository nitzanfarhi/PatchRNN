commit 933a838aa1aae8388438bb002fbdaf6fca519a5c
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Tue Dec 29 18:21:39 2009 +0100

    pcmcia: make use of pcmcia_dev_resume() return value
    
    In runtime_resume(), do not throw away the return value of
    pcmcia_dev_resume(), for we can use it (at least) in
    pcmcia_store_pm_state(). This also fixes the pointless assignment
    previosly seen there, as noted by Dan Carpenter.
    
    CC: Dan Carpenter <error27@gmail.com>
    Tested-by: Wolfram Sang <w.sang@pengutronix.de>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

diff --git a/drivers/pcmcia/ds.c b/drivers/pcmcia/ds.c
index 1a4a3c49cc15..defa44c27b97 100644
--- a/drivers/pcmcia/ds.c
+++ b/drivers/pcmcia/ds.c
@@ -970,13 +970,14 @@ static int runtime_suspend(struct device *dev)
 	return rc;
 }
 
-static void runtime_resume(struct device *dev)
+static int runtime_resume(struct device *dev)
 {
 	int rc;
 
 	down(&dev->sem);
 	rc = pcmcia_dev_resume(dev);
 	up(&dev->sem);
+	return rc;
 }
 
 /************************ per-device sysfs output ***************************/
@@ -1027,7 +1028,7 @@ static ssize_t pcmcia_store_pm_state(struct device *dev, struct device_attribute
 	if ((!p_dev->suspended) && !strncmp(buf, "off", 3))
 		ret = runtime_suspend(dev);
 	else if (p_dev->suspended && !strncmp(buf, "on", 2))
-		runtime_resume(dev);
+		ret = runtime_resume(dev);
 
 	return ret ? ret : count;
 }

