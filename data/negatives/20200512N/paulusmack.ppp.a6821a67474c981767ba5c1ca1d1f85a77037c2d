commit a6821a67474c981767ba5c1ca1d1f85a77037c2d
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Feb 16 22:25:49 2003 +0000

    Honour the allow-ip option even with noauth

diff --git a/pppd/auth.c b/pppd/auth.c
index cda341a..a92d9e9 100644
--- a/pppd/auth.c
+++ b/pppd/auth.c
@@ -73,7 +73,7 @@
  * OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
  */
 
-#define RCSID	"$Id: auth.c,v 1.90 2002/12/04 23:03:32 paulus Exp $"
+#define RCSID	"$Id: auth.c,v 1.91 2003/02/16 22:25:49 paulus Exp $"
 
 #include <stdio.h>
 #include <stddef.h>
@@ -605,6 +605,9 @@ link_established(unit)
 	    && protp->lowerup != NULL)
 	    (*protp->lowerup)(unit);
 
+    if (!auth_required && noauth_addrs != NULL)
+	set_allowed_addrs(unit, NULL, NULL)
+
     if (auth_required && !(go->neg_upap || go->neg_chap || go->neg_eap)) {
 	/*
 	 * We wanted the peer to authenticate itself, and it refused:

