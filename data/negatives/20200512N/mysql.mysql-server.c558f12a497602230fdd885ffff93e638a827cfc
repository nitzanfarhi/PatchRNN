commit c558f12a497602230fdd885ffff93e638a827cfc
Author: Mikael Ronstrom <mikael@dator8>
Date:   Fri Mar 4 12:44:49 2011 +0100

    Added comment on how to expand the use of the debug sync framework for scheduler

diff --git a/sql/debug_sync.cc b/sql/debug_sync.cc
index 5ec4953b546..7f69ae54037 100644
--- a/sql/debug_sync.cc
+++ b/sql/debug_sync.cc
@@ -1745,6 +1745,10 @@ static void debug_sync_execute(THD *thd, st_debug_sync_action *action)
         We don't use enter_cond()/exit_cond(). They do not save old
         mutex and cond. This would prohibit the use of DEBUG_SYNC
         between other places of enter_cond() and exit_cond().
+
+        We need to check for existence of thd->mysys_var to also make
+        it possible to use DEBUG_SYNC framework in scheduler when this
+        variable has been set to NULL.
       */
       if (thd->mysys_var)
       {

