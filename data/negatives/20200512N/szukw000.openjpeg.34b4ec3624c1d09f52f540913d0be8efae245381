commit 34b4ec3624c1d09f52f540913d0be8efae245381
Author: Mathieu Malaterre <mathieu.malaterre@gmail.com>
Date:   Mon Mar 26 13:15:40 2012 +0000

    [trunk] fix another simple warning

diff --git a/applications/jpip/libopenjpip/ihdrbox_manager.c b/applications/jpip/libopenjpip/ihdrbox_manager.c
index 0e0f173b..d501b612 100644
--- a/applications/jpip/libopenjpip/ihdrbox_manager.c
+++ b/applications/jpip/libopenjpip/ihdrbox_manager.c
@@ -30,6 +30,7 @@
 
 #include <stdio.h>
 #include <stdlib.h>
+#include <assert.h>
 #include "ihdrbox_manager.h"
 
 ihdrbox_param_t * gene_ihdrbox( metadatalist_param_t *metadatalist, Byte_t *jpipstream)
@@ -37,6 +38,7 @@ ihdrbox_param_t * gene_ihdrbox( metadatalist_param_t *metadatalist, Byte_t *jpip
   ihdrbox_param_t *ihdrbox;
   metadata_param_t *meta;
   box_param_t *jp2h, *ihdr;
+  int bpc_val;
   
   jp2h = NULL;
   meta = metadatalist->first;
@@ -65,7 +67,9 @@ ihdrbox_param_t * gene_ihdrbox( metadatalist_param_t *metadatalist, Byte_t *jpip
   ihdrbox->height = big4( jpipstream+get_DBoxoff(ihdr));
   ihdrbox->width  = big4( jpipstream+get_DBoxoff(ihdr)+4);
   ihdrbox->nc     = big2( jpipstream+get_DBoxoff(ihdr)+8);
-  ihdrbox->bpc    = *(jpipstream+get_DBoxoff(ihdr)+10)+1;
+  bpc_val = *(jpipstream+get_DBoxoff(ihdr)+10)+1;
+  assert( bpc_val >= 0 && bpc_val <= 255 );
+  ihdrbox->bpc    = (Byte_t)bpc_val;
 
   free( ihdr);
 

