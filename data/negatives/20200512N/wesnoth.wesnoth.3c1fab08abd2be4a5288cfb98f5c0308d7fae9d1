commit 3c1fab08abd2be4a5288cfb98f5c0308d7fae9d1
Author: Gregory Shikhman <cornmander@cornmander.com>
Date:   Mon Aug 10 08:11:51 2009 +0000

    Fixed the variables read from gamestate.classification...
    
    ...so that mp logs are complete instead of malformed. Fixed a logic
    error in a recent refactor.

diff --git a/src/upload_log.cpp b/src/upload_log.cpp
index 2b522089bb..5bde4eff17 100644
--- a/src/upload_log.cpp
+++ b/src/upload_log.cpp
@@ -262,7 +262,7 @@ upload_log::upload_log(bool enable) :
 
 void upload_log::read_replay()
 {
-	if( !uploader_settings::new_uploader || !enabled_ || !game_config::debug ) {
+	if( !uploader_settings::new_uploader || !enabled_ || game_config::debug ) {
 		return;
 	}
 
@@ -465,9 +465,9 @@ void upload_log::start(game_state &state, const std::string map_data)
 	delete game_;
 	game_ = new config();
 	(*game_)["time"] = lexical_cast<std::string>(SDL_GetTicks() / 1000);
-	(*game_)["campaign"] = state.classification().campaign_define;
+	(*game_)["campaign"] = state.classification().campaign_type;
 	(*game_)["difficulty"] = state.classification().difficulty;
-	(*game_)["scenario"] = state.classification().scenario;
+	(*game_)["scenario"] = state.classification().label;
 	if(uploader_settings::new_uploader) {
 		//replace newlines in map definition with semicolons so that braindead server-side wml parser doesn't get confused
 		std::string encoded_map(map_data);

