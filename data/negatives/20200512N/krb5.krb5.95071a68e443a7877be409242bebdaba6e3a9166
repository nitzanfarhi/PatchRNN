commit 95071a68e443a7877be409242bebdaba6e3a9166
Author: Alexandra Ellwood <lxs@mit.edu>
Date:   Wed Jun 25 19:50:11 2008 +0000

    kadm5_setkey_principal_3 not copying key_data_ver and key_data_kvno
    
    Added lines to copy these fields.
    
    ticket: new
    status: open
    
    git-svn-id: svn://anonsvn.mit.edu/krb5/trunk@20472 dc483132-0cff-0310-8789-dd5450dbe970

diff --git a/src/lib/kadm5/srv/svr_principal.c b/src/lib/kadm5/srv/svr_principal.c
index e7c566338..4fb114f35 100644
--- a/src/lib/kadm5/srv/svr_principal.c
+++ b/src/lib/kadm5/srv/svr_principal.c
@@ -1891,6 +1891,8 @@ kadm5_setkey_principal_3(void *server_handle,
 	    goto done;
 	}
 	tptr = &kdb.key_data[i];
+	tptr->key_data_ver = tmp_key_data.key_data_ver;
+	tptr->key_data_kvno = tmp_key_data.key_data_kvno;
 	for (k = 0; k < tmp_key_data.key_data_ver; k++) {
 	    tptr->key_data_type[k] = tmp_key_data.key_data_type[k];
 	    tptr->key_data_length[k] = tmp_key_data.key_data_length[k];

