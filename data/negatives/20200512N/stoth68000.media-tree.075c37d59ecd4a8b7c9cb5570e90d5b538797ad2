commit 075c37d59ecd4a8b7c9cb5570e90d5b538797ad2
Author: Ulf Hansson <ulf.hansson@linaro.org>
Date:   Mon Mar 20 11:19:23 2017 +0100

    PM / Domains: Don't warn about IRQ safe device for an always on PM domain
    
    When an IRQ safe device is attached to a no sleep domain, genpd prints a
    warning once, as to indicate it is a suboptimal configuration from power
    consumption point of view.
    
    However the warning doesn't make sense for an always on domain, since it
    anyway remains powered on. Therefore, let's change to not print the warning
    for this configuration.
    
    Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
    Reviewed-by: Viresh Kumar <viresh.kumar@linaro.org>
    Reviewed-by: Geert Uytterhoeven <geert+renesas@glider.be>
    Reviewed-by: Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>
    Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>

diff --git a/drivers/base/power/domain.c b/drivers/base/power/domain.c
index c0318c130396..06807933a285 100644
--- a/drivers/base/power/domain.c
+++ b/drivers/base/power/domain.c
@@ -132,8 +132,12 @@ static inline bool irq_safe_dev_in_no_sleep_domain(struct device *dev,
 
 	ret = pm_runtime_is_irq_safe(dev) && !genpd_is_irq_safe(genpd);
 
-	/* Warn once if IRQ safe dev in no sleep domain */
-	if (ret)
+	/*
+	 * Warn once if an IRQ safe device is attached to a no sleep domain, as
+	 * to indicate a suboptimal configuration for PM. For an always on
+	 * domain this isn't case, thus don't warn.
+	 */
+	if (ret && !genpd_is_always_on(genpd))
 		dev_warn_once(dev, "PM domain %s will not be powered off\n",
 				genpd->name);
 

