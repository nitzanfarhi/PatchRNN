commit a5d3cc273a01610cab3f18506d3c7f2aa7e23c35
Author: Bron Gondwana <brong@fastmail.fm>
Date:   Thu Feb 12 11:41:05 2015 +1100

    vparse: add more APIs

diff --git a/lib/vparse.c b/lib/vparse.c
index bd490c13b..8562b7f44 100644
--- a/lib/vparse.c
+++ b/lib/vparse.c
@@ -878,6 +878,33 @@ EXPORTED struct vparse_entry *vparse_add_entry(struct vparse_card *card, const c
     return entry;
 }
 
+EXPORTED struct vparse_entry *vparse_get_entry(struct vparse_card *card, const char *group, const char *name)
+{
+    struct vparse_entry *entry = NULL;
+
+    for (entry = card->properties; entry; entry = entry->next) {
+	if (!strcmpsafe(entry->group, group) && !strcmpsafe(entry->name, name))
+	    break;
+    }
+
+    return entry;
+}
+
+EXPORTED void vparse_delete_entries(struct vparse_card *card, const char *group, const char *name)
+{
+    struct vparse_entry **entryp = &card->properties;
+    while (*entryp) {
+	struct vparse_entry *entry = *entryp;
+	if (!strcmpsafe(entry->group, group) && !strcmpsafe(entry->name, name)) {
+	    *entryp = entry->next;
+	    _free_entry(entry);
+	}
+	else {
+	    entryp = &((*entryp)->next);
+	}
+    }
+}
+
 #ifdef DEBUG
 static int _dump_card(struct vparse_card *card)
 {
diff --git a/lib/vparse.h b/lib/vparse.h
index 0ace279c2..a05dc1ef3 100644
--- a/lib/vparse.h
+++ b/lib/vparse.h
@@ -86,7 +86,7 @@ extern const strarray_t *vparse_multival(const struct vparse_card *card, const c
 /* editing functions */
 extern struct vparse_card *vparse_new_card(const char *type);
 extern void vparse_free_card(struct vparse_card *card);
-extern int vparse_delete_entries(struct vparse_card *card, const char *group, const char *name);
+extern void vparse_delete_entries(struct vparse_card *card, const char *group, const char *name);
 extern struct vparse_entry *vparse_get_entry(struct vparse_card *card, const char *group, const char *name);
 extern struct vparse_entry *vparse_add_entry(struct vparse_card *card, const char *group, const char *name, const char *value);
 extern void vparse_set_value(struct vparse_entry *entry, const char *value);

