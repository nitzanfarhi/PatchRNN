commit a8eb2e709e826cfdb44af619b14b5d4e2f12a2e1
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Wed Dec 16 17:40:38 2015 -0500

    SERVER-21536 don't refresh connections that have already been checked out

diff --git a/src/mongo/executor/connection_pool.cpp b/src/mongo/executor/connection_pool.cpp
index d23cac6175..1d41cded11 100644
--- a/src/mongo/executor/connection_pool.cpp
+++ b/src/mongo/executor/connection_pool.cpp
@@ -368,6 +368,12 @@ void ConnectionPool::SpecificPool::addToReady(stdx::unique_lock<stdx::mutex>& lk
 
                             stdx::unique_lock<stdx::mutex> lk(_parent->_mutex);
 
+                            if (!_readyPool.count(connPtr)) {
+                                // We've already been checked out. We don't need to refresh
+                                // ourselves.
+                                return;
+                            }
+
                             conn = takeFromPool(_readyPool, connPtr);
 
                             // If we're in shutdown, we don't need to refresh connections

