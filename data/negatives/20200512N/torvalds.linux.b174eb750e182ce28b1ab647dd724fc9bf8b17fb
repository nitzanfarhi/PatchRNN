commit b174eb750e182ce28b1ab647dd724fc9bf8b17fb
Author: Hans Verkuil <hans.verkuil@cisco.com>
Date:   Mon May 4 07:25:52 2015 -0300

    [media] ov5642: avoid calling ov5642_find_datafmt() twice
    
    Simplify ov5642_set_fmt().
    
    Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com>
    Reported-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@s-opensource.com>

diff --git a/drivers/media/i2c/soc_camera/ov5642.c b/drivers/media/i2c/soc_camera/ov5642.c
index f31e537afbe5..39f420db9c70 100644
--- a/drivers/media/i2c/soc_camera/ov5642.c
+++ b/drivers/media/i2c/soc_camera/ov5642.c
@@ -811,7 +811,7 @@ static int ov5642_set_fmt(struct v4l2_subdev *sd,
 	mf->field	= V4L2_FIELD_NONE;
 
 	if (format->which == V4L2_SUBDEV_FORMAT_ACTIVE)
-		priv->fmt = ov5642_find_datafmt(mf->code);
+		priv->fmt = fmt;
 	else
 		cfg->try_fmt = *mf;
 	return 0;

