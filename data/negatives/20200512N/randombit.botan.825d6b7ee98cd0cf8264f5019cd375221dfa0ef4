commit 825d6b7ee98cd0cf8264f5019cd375221dfa0ef4
Author: Daniel Wyatt <Daniel.Wyatt@gmail.com>
Date:   Thu Jan 4 17:29:47 2018 -0500

    Change default userid for SM2 signatures.
    
    GM/T 0009-2012 apparently specifies that this should default to the
    16-byte hex sequence 31,32,33,34,35,36,37,38,31,32,33,34,35,36,37,38.

diff --git a/src/lib/pubkey/sm2/sm2.cpp b/src/lib/pubkey/sm2/sm2.cpp
index 1b20ee6fa..28f455ba3 100644
--- a/src/lib/pubkey/sm2/sm2.cpp
+++ b/src/lib/pubkey/sm2/sm2.cpp
@@ -214,6 +214,12 @@ SM2_Signature_PublicKey::create_verification_op(const std::string& params,
          hash = params.substr(comma+1, std::string::npos);
          }
 
+      if (userid.empty())
+         {
+         // GM/T 0009-2012 specifies this as the default userid
+         userid = "1234567812345678";
+         }
+
       return std::unique_ptr<PK_Ops::Verification>(new SM2_Verification_Operation(*this, userid, hash));
       }
 
@@ -239,6 +245,12 @@ SM2_Signature_PrivateKey::create_signature_op(RandomNumberGenerator& /*rng*/,
          hash = params.substr(comma+1, std::string::npos);
          }
 
+      if (userid.empty())
+         {
+         // GM/T 0009-2012 specifies this as the default userid
+         userid = "1234567812345678";
+         }
+
       return std::unique_ptr<PK_Ops::Signature>(new SM2_Signature_Operation(*this, userid, hash));
       }
 

