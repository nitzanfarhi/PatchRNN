commit f5a7de756468af56e7d9dc3cb857b18ba70d1246
Author: oga <oga@openbsd.org>
Date:   Mon Nov 24 04:26:50 2008 +0000

    actually set the bus_space_tag

diff --git a/sys/dev/pci/drm/drm_drv.c b/sys/dev/pci/drm/drm_drv.c
index e385230dac8..e84445fed60 100644
--- a/sys/dev/pci/drm/drm_drv.c
+++ b/sys/dev/pci/drm/drm_drv.c
@@ -55,6 +55,12 @@ int	 drm_detach(struct device *, int);
 int	 drm_activate(struct device *, enum devact);
 int	 drmprint(void *, const char *);
 
+/*
+ * attach drm to a pci-based driver.
+ *
+ * This function does all the pci-specific calculations for the 
+ * drm_attach_args.
+ */
 struct device *
 drm_attach_pci(const struct drm_driver_info *driver, struct pci_attach_args *pa,
     int is_agp, struct device *dev)
@@ -119,6 +125,7 @@ drm_attach(struct device *parent, struct device *self, void *aux)
 	dev->driver = da->driver;
 
 	dev->dmat = da->dmat;
+	dev->bst = da->bst;
 	dev->irq = da->irq;
 	dev->unique = da->busid;
 	dev->unique_len = da->busid_len;

