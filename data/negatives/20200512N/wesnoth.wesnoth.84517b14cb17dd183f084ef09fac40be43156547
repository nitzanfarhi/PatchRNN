commit 84517b14cb17dd183f084ef09fac40be43156547
Author: Iurii Chernyi <terraninfo@terraninfo.net>
Date:   Sun Dec 13 20:50:55 2009 +0000

    fix bug with handling of old-style AI parameters in MP scenarios
    
    they had no effect, because they were overridden with the default
    AI. Fix by disabling that override for sides with allow_player=no ,
    because they had no dropdown box to choose the AI type/override
    anyway. Reused existing string.

diff --git a/src/multiplayer_connect.cpp b/src/multiplayer_connect.cpp
index 719354b2fa..dc6fbfb50e 100644
--- a/src/multiplayer_connect.cpp
+++ b/src/multiplayer_connect.cpp
@@ -654,10 +654,14 @@ config connect::side::get_config() const
 			}
 			{
 				res["id"] = res["save_id"];
-				const config &ai_cfg = ai::configuration::get_ai_config_for(ai_algorithm_);
-				res.add_child("ai",ai_cfg);
 				utils::string_map symbols;
-				symbols["playername"] = ai_cfg["description"];
+				if (allow_player_) {
+					const config &ai_cfg = ai::configuration::get_ai_config_for(ai_algorithm_);
+					res.add_child("ai",ai_cfg);
+					symbols["playername"] = ai_cfg["description"];
+				} else { // do not import default ai cfg here - all is set by scenario config
+					symbols["playername"] = _("Computer Player");
+				}
 				symbols["side"] = res["side"].str();
 				description = vgettext("$playername $side",symbols);
 			}

