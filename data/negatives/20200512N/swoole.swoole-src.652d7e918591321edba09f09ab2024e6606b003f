commit 652d7e918591321edba09f09ab2024e6606b003f
Author: matyhtf <mikan.tenny@gmail.com>
Date:   Wed Mar 29 19:26:37 2017 +0800

    fixed CID-1397854 (coverity)

diff --git a/src/network/Client.c b/src/network/Client.c
index 8a66fe93..740035b5 100644
--- a/src/network/Client.c
+++ b/src/network/Client.c
@@ -254,8 +254,9 @@ static int swClient_inet_addr(swClient *cli, char *host, int port)
     else if (cli->type == SW_SOCK_UNIX_STREAM || cli->type == SW_SOCK_UNIX_DGRAM)
     {
         cli->server_addr.addr.un.sun_family = AF_UNIX;
-        strncpy(cli->server_addr.addr.un.sun_path, host, sizeof(cli->server_addr.addr.un.sun_path));
-        cli->server_addr.len = sizeof(cli->server_addr.addr.un);
+        strncpy(cli->server_addr.addr.un.sun_path, host, sizeof(cli->server_addr.addr.un.sun_path) - 1);
+        cli->server_addr.addr.un.sun_path[sizeof(cli->server_addr.addr.un.sun_path) - 1] = 0;
+        cli->server_addr.len = strlen(cli->server_addr.addr.un);
         return SW_OK;
     }
     if (cli->async)

