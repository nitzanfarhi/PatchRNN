commit 8f648b74c348e866e3d24b038258919341b87a9e
Author: Kostya Shishkov <kostya.shishkov@gmail.com>
Date:   Sun Oct 18 06:58:00 2009 +0000

    Accept RTMP packets with one-byte header
    
    Originally committed as revision 20269 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/rtmppkt.c b/libavformat/rtmppkt.c
index af416a4f1..4ca12a004 100644
--- a/libavformat/rtmppkt.c
+++ b/libavformat/rtmppkt.c
@@ -87,8 +87,7 @@ int ff_rtmp_packet_read(URLContext *h, RTMPPacket *p,
 
     hdr >>= 6;
     if (hdr == RTMP_PS_ONEBYTE) {
-        //todo
-        return -1;
+        timestamp = prev_pkt[channel_id].timestamp;
     } else {
         if (url_read_complete(h, buf, 3) != 3)
             return AVERROR(EIO);

