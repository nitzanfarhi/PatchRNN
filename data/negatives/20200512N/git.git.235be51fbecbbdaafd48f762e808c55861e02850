commit 235be51fbecbbdaafd48f762e808c55861e02850
Author: Johannes Schindelin <johannes.schindelin@gmx.de>
Date:   Mon Jan 30 13:28:28 2017 +0100

    mingw: allow hooks to be .exe files
    
    Executable files in Windows need to have the extension '.exe', otherwise
    they do not work. Extend the hooks to not just look at the hard coded
    names, but also at the names extended by the custom STRIP_EXTENSION,
    which is defined as '.exe' in Windows.
    
    Signed-off-by: Johannes Schindelin <johannes.schindelin@gmx.de>
    Signed-off-by: Junio C Hamano <gitster@pobox.com>

diff --git a/run-command.c b/run-command.c
index ca905a9e8..79780a4ab 100644
--- a/run-command.c
+++ b/run-command.c
@@ -852,8 +852,14 @@ const char *find_hook(const char *name)
 
 	strbuf_reset(&path);
 	strbuf_git_path(&path, "hooks/%s", name);
-	if (access(path.buf, X_OK) < 0)
+	if (access(path.buf, X_OK) < 0) {
+#ifdef STRIP_EXTENSION
+		strbuf_addstr(&path, STRIP_EXTENSION);
+		if (access(path.buf, X_OK) >= 0)
+			return path.buf;
+#endif
 		return NULL;
+	}
 	return path.buf;
 }
 

