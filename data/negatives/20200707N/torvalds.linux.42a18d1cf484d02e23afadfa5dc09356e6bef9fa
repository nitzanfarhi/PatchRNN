commit 42a18d1cf484d02e23afadfa5dc09356e6bef9fa
Author: Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
Date:   Mon May 12 16:11:39 2014 +0200

    ARM: mvebu: mvebu-soc-id: add missing clk_put() call
    
    The mvebu-soc-id code in mach-mvebu/ needs to enable a clock to read
    the SoC device ID and revision number. To do so, it does a clk_get(),
    then a clk_prepare_enable(), reads the value, and disables the clock
    with clk_disable_unprepare(). However, it forgets to clk_put() the
    clock. This commit fixes this issue.
    
    Signed-off-by: Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
    Link: https://lkml.kernel.org/r/1399903900-29977-2-git-send-email-thomas.petazzoni@free-electrons.com
    Cc: <stable@vger.kernel.org> # 3.14+
    Fixes: af8d1c63afcb ("ARM: mvebu: Add support to get the ID and the revision of a SoC")
    Acked-by: Gregory CLEMENT <gregory.clement@free-electrons.com>
    Tested-by: Gregory CLEMENT <gregory.clement@free-electrons.com>
    Tested-by: Andrew Lunn <andrew@lunn.ch>
    Tested-by: Willy Tarreau <w@1wt.eu>
    Signed-off-by: Jason Cooper <jason@lakedaemon.net>

diff --git a/arch/arm/mach-mvebu/mvebu-soc-id.c b/arch/arm/mach-mvebu/mvebu-soc-id.c
index f3d4cf53f746..b52af6f4a0c6 100644
--- a/arch/arm/mach-mvebu/mvebu-soc-id.c
+++ b/arch/arm/mach-mvebu/mvebu-soc-id.c
@@ -109,6 +109,7 @@ static int __init mvebu_soc_id_init(void)
 
 res_ioremap:
 	clk_disable_unprepare(clk);
+	clk_put(clk);
 
 clk_err:
 	of_node_put(child);

