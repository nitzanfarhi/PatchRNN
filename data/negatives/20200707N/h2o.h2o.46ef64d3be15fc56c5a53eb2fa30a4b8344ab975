commit 46ef64d3be15fc56c5a53eb2fa30a4b8344ab975
Author: Kazuho Oku <kazuhooku@gmail.com>
Date:   Mon Nov 10 14:08:21 2014 +0900

    fix memory copy bug in upgrade to http2

diff --git a/lib/request.c b/lib/request.c
index 5bb14957..825d79ef 100644
--- a/lib/request.c
+++ b/lib/request.c
@@ -56,7 +56,7 @@ void h2o_init_request(h2o_req_t *req, h2o_conn_t *conn, h2o_req_t *src)
         COPY(scheme);
         req->version = src->version;
         h2o_vector_reserve(&req->pool, (h2o_vector_t*)&req->headers, sizeof(h2o_header_t), src->headers.size);
-        memcpy(req->headers.entries, src->headers.entries, src->headers.size);
+        memcpy(req->headers.entries, src->headers.entries, sizeof(req->headers.entries[0]) * src->headers.size);
         req->headers.size = src->headers.size;
         req->entity = src->entity;
         req->http1_is_persistent = src->http1_is_persistent;

