commit 527681481fbec0e3420e161f456b450e7d5dae88
Author: markyuan@tencent.com <syyuanyizhi@163.com>
Date:   Wed Feb 24 19:29:16 2016 +0800

    Update RingBuffer.c
    
    修复可能导致的指针越界的问题

diff --git a/src/memory/RingBuffer.c b/src/memory/RingBuffer.c
index 3c0d65f4..599fbd3e 100644
--- a/src/memory/RingBuffer.c
+++ b/src/memory/RingBuffer.c
@@ -130,7 +130,7 @@ static void* swRingBuffer_alloc(swMemoryPool *pool, uint32_t size)
 
     if (object->status == 0)
     {
-        if (object->alloc_offset + alloc_size >= object->size)
+        if (object->alloc_offset + alloc_size >= (object->size - sizeof(swRingBuffer_item)))
         {
             uint32_t skip_n = object->size - object->alloc_offset;
 

