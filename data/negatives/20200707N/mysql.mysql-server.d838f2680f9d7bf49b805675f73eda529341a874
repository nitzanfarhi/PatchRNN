commit d838f2680f9d7bf49b805675f73eda529341a874
Author: Bin Su <bin.x.su@oracle.com>
Date:   Thu Aug 10 14:04:17 2017 +0800

    WL#9536: Address review comment from Dmitry.

diff --git a/sql/sql_table.cc b/sql/sql_table.cc
index d0bc87db453..df4dad87af3 100644
--- a/sql/sql_table.cc
+++ b/sql/sql_table.cc
@@ -6212,7 +6212,7 @@ bool mysql_create_table(THD *thd, TABLE_LIST *create_table,
     if (!result && !thd->is_plugin_fake_ddl())
       result= trans_commit_stmt(thd) || trans_commit_implicit(thd);
 
-    if (result)
+    if (result && !thd->is_plugin_fake_ddl())
     {
       trans_rollback_stmt(thd);
       /*

