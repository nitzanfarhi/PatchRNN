commit 814601908de3d256e9a01a2b416c283ba2fded97
Author: Jeffrey Altman <jaltman@secure-endpoints.com>
Date:   Wed Jul 23 15:09:15 2008 +0000

    The NIM error reporting functions (in src/windows/identity/kherr ) keep
    track of the the error message with the highest severity level that was
    reported for a specific error reporting context.  However, if another
    error message of the same severity is reported, the error message being
    tracked will be updated to be the newly received error.
    
    The user will often only be notified of the error message that was
    tracked for a specific operation.  Therefore, tracking the last message
    with the highest priority has the unfortunate side-effect of not
    reporting the cause of a failure.
    
    This patch changes the condition for updating the tracked error message
    to be the first message with the highest severity.
    
    ticket: 6047
    tags: pullup
    
    git-svn-id: svn://anonsvn.mit.edu/krb5/trunk@20573 dc483132-0cff-0310-8789-dd5450dbe970

diff --git a/src/windows/identity/kherr/kherr.c b/src/windows/identity/kherr/kherr.c
index 8c43fd811..006feb3af 100644
--- a/src/windows/identity/kherr/kherr.c
+++ b/src/windows/identity/kherr/kherr.c
@@ -474,7 +474,7 @@ add_event(kherr_context * c, kherr_event * e)
     }
 
     QPUT(c,e);
-    if(c->severity >= e->severity) {
+    if(c->severity > e->severity) {
         if (e->severity <= KHERR_ERROR)
             notify_ctx_event(KHERR_CTX_ERROR, c);
 

