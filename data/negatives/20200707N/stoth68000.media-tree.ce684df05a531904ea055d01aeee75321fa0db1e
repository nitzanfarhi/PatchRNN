commit ce684df05a531904ea055d01aeee75321fa0db1e
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Mon Apr 10 13:17:43 2006 -0700

    IB/cache: Use correct pointer to calculate size
    
    When allocating gid_cache, use kmalloc(sizeof *gid_cache, ...) rather
    than kmalloc(sizeof *pkey_cache, ...).  It doesn't really matter which
    one is used, since the size ends up the same either way, but it's much
    better to say what we mean.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

diff --git a/drivers/infiniband/core/cache.c b/drivers/infiniband/core/cache.c
index c57a3871184c..50364c0b090c 100644
--- a/drivers/infiniband/core/cache.c
+++ b/drivers/infiniband/core/cache.c
@@ -302,7 +302,7 @@ static void ib_cache_setup_one(struct ib_device *device)
 		kmalloc(sizeof *device->cache.pkey_cache *
 			(end_port(device) - start_port(device) + 1), GFP_KERNEL);
 	device->cache.gid_cache =
-		kmalloc(sizeof *device->cache.pkey_cache *
+		kmalloc(sizeof *device->cache.gid_cache *
 			(end_port(device) - start_port(device) + 1), GFP_KERNEL);
 
 	if (!device->cache.pkey_cache || !device->cache.gid_cache) {

