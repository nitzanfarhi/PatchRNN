commit 98770b00e535f4805e75cdd6b1c9ab10e046023f
Author: erg <devnull@localhost>
Date:   Wed Apr 14 17:45:22 2010 +0000

    Use getAttrInt for defaultnodeshape rather than getAttrBool;
    hook back in background graphics

diff --git a/cmd/smyrna/topviewfuncs.c b/cmd/smyrna/topviewfuncs.c
index 34a153f6a..7cd21c572 100644
--- a/cmd/smyrna/topviewfuncs.c
+++ b/cmd/smyrna/topviewfuncs.c
@@ -330,8 +330,13 @@ void renderNodes(Agraph_t * g)
     xdot * x;
     int ind;
 
-    defaultNodeShape=getAttrBool(g,g,"defaultnodeshape",0);
+    defaultNodeShape=getAttrInt(g,g,"defaultnodeshape",0);
 
+    x=parseXdotwithattrs(g);
+    if (x) {
+	draw_xdot(x,-0.2);
+	freeXDot (x);
+    }
     for (v = agfstnode(g); v; v = agnxtnode(g, v)) 
     {
 	    if(!object_color(v,&c))

