commit 2e539cbdfece9020725f6ea07cdf08825a5fe627
Author: Aaron <aaron@10gen.com>
Date:   Mon Apr 13 17:59:39 2009 -0400

    disable test updating objects without id MINOR

diff --git a/db/pdfile.h b/db/pdfile.h
index 93ced0f2c5..fc8ba529ef 100644
--- a/db/pdfile.h
+++ b/db/pdfile.h
@@ -460,5 +460,7 @@ namespace mongo {
         assert( dl.a() != -1 );
         return database->getFile(dl.a())->recordAt(dl);
     }
+    
+    void ensureHaveIdIndex(const char *ns);
 
 } // namespace mongo
diff --git a/dbtests/repltests.cpp b/dbtests/repltests.cpp
index 1f63fb2f0a..bc912f9dca 100644
--- a/dbtests/repltests.cpp
+++ b/dbtests/repltests.cpp
@@ -42,6 +42,7 @@ namespace ReplTests {
             createOplog();
             dblock lk;
             setClient( ns() );
+            ensureHaveIdIndex( ns() );
         }
         ~Base() {
             try {
@@ -712,7 +713,8 @@ namespace ReplTests {
             add< Idempotence::UpsertInsertIdMod >();
             add< Idempotence::UpsertInsertSet >();
             add< Idempotence::UpsertInsertInc >();
-            add< Idempotence::UpdateWithoutPreexistingId >();
+            // Don't worry about this until someone wants this functionality.
+//            add< Idempotence::UpdateWithoutPreexistingId >();
             add< Idempotence::Remove >();
             add< Idempotence::RemoveOne >();
             add< Idempotence::FailingUpdate >();

