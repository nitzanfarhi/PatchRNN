commit 245cc757e4d673ce07b090b09064951f3d029896
Author: dirk <dirk@git.imagemagick.org>
Date:   Thu Jan 16 18:31:58 2014 +0000

    Ignore user supplied layer mask.

diff --git a/coders/psd.c b/coders/psd.c
index 5c07c3db8..f88cce6a0 100644
--- a/coders/psd.c
+++ b/coders/psd.c
@@ -912,7 +912,7 @@ static MagickStatusType ReadPSDChannelZip(Image *image,
 
   if (image->debug != MagickFalse)
     (void) LogMagickEvent(CoderEvent,GetMagickModule(),
-       "      layer data is RLE compressed");
+       "      layer data is ZIP compressed");
 
   compact_pixels=(unsigned char *) AcquireQuantumMemory(compact_size,
     sizeof(*compact_pixels));
@@ -1016,6 +1016,13 @@ static MagickStatusType ReadPSDChannel(Image *image,PSDInfo *psd_info,
   MagickStatusType
     status;
 
+  if (layer_info->channel_info[channel].type < -1)
+  {
+    /* ignore user supplied layer mask */
+    SeekBlob(image,layer_info->channel_info[channel].size-2,SEEK_CUR);
+    return(MagickTrue);
+  }
+
   offset=TellBlob(image);
   status=MagickTrue;
   switch(compression)

