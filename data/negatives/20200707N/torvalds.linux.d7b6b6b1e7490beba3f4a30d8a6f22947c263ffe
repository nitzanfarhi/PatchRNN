commit d7b6b6b1e7490beba3f4a30d8a6f22947c263ffe
Author: Tomi Valkeinen <tomi.valkeinen@ti.com>
Date:   Fri Aug 10 14:17:47 2012 +0300

    OMAPDSS: fix registering the vsync isr in apply
    
    When we enable an output we don't check if we need to register the vsync
    isr. This causes us to miss vsync interrupts until somebody changes the
    configuration of an overlay or an overlay manager.
    
    Add the registration to dss_mgr_enable to fix the problem.
    
    Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>

diff --git a/drivers/video/omap2/dss/apply.c b/drivers/video/omap2/dss/apply.c
index e923d9f90ee6..e85ec05238ab 100644
--- a/drivers/video/omap2/dss/apply.c
+++ b/drivers/video/omap2/dss/apply.c
@@ -1035,6 +1035,9 @@ int dss_mgr_enable(struct omap_overlay_manager *mgr)
 	if (!mgr_manual_update(mgr))
 		mp->updating = true;
 
+	if (!dss_data.irq_enabled && need_isr())
+		dss_register_vsync_isr();
+
 	spin_unlock_irqrestore(&data_lock, flags);
 
 	if (!mgr_manual_update(mgr))

