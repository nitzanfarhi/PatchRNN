commit 251886d8bc6f565c14acb34b12c007b994c2e56d
Author: Tomi Valkeinen <tomi.valkeinen@ti.com>
Date:   Thu Nov 15 13:20:02 2012 +0200

    OMAPDSS: DISPC: pclk & lclk rates for writeback
    
    Change the dispc_plane_pclk_rate and dispc_plane_lclk_rate functions to
    return 0 if the given plane is the writeback plane. The clocks are not
    valid for WB, but returning 0 from these functions instead of running
    into BUG() will simplify the code that uses these functions.
    
    Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>

diff --git a/drivers/video/omap2/dss/dispc.c b/drivers/video/omap2/dss/dispc.c
index 531961424d33..fff26fd5d17f 100644
--- a/drivers/video/omap2/dss/dispc.c
+++ b/drivers/video/omap2/dss/dispc.c
@@ -3232,14 +3232,24 @@ unsigned long dispc_core_clk_rate(void)
 
 static unsigned long dispc_plane_pclk_rate(enum omap_plane plane)
 {
-	enum omap_channel channel = dispc_ovl_get_channel_out(plane);
+	enum omap_channel channel;
+
+	if (plane == OMAP_DSS_WB)
+		return 0;
+
+	channel = dispc_ovl_get_channel_out(plane);
 
 	return dispc_mgr_pclk_rate(channel);
 }
 
 static unsigned long dispc_plane_lclk_rate(enum omap_plane plane)
 {
-	enum omap_channel channel = dispc_ovl_get_channel_out(plane);
+	enum omap_channel channel;
+
+	if (plane == OMAP_DSS_WB)
+		return 0;
+
+	channel	= dispc_ovl_get_channel_out(plane);
 
 	return dispc_mgr_lclk_rate(channel);
 }

