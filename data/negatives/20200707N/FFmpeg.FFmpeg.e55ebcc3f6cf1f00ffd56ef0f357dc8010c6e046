commit e55ebcc3f6cf1f00ffd56ef0f357dc8010c6e046
Author: Martin Storsj√∂ <martin@martin.st>
Date:   Thu Aug 19 14:50:40 2010 +0000

    Move the definition of the maximum url size for static buffers to internal.h
    
    Originally committed as revision 24833 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/http.c b/libavformat/http.c
index 75bfd3a5f4..e26da072cc 100644
--- a/libavformat/http.c
+++ b/libavformat/http.c
@@ -35,7 +35,6 @@
 
 /* used for protocol handling */
 #define BUFFER_SIZE 1024
-#define URL_SIZE    4096
 #define MAX_REDIRECTS 8
 
 typedef struct {
@@ -46,7 +45,7 @@ typedef struct {
     int http_code;
     int64_t chunksize;      /**< Used if "Transfer-Encoding: chunked" otherwise -1. */
     int64_t off, filesize;
-    char location[URL_SIZE];
+    char location[MAX_URL_SIZE];
     HTTPAuthState auth_state;
     unsigned char headers[BUFFER_SIZE];
     int willclose;          /**< Set if the server correctly handles Connection: close and will close the connection after feeding us the content. */
@@ -162,7 +161,7 @@ static int http_open(URLContext *h, const char *uri, int flags)
     h->is_streamed = 1;
 
     s->filesize = -1;
-    av_strlcpy(s->location, uri, URL_SIZE);
+    av_strlcpy(s->location, uri, sizeof(s->location));
 
     return http_open_cnx(h);
 }
diff --git a/libavformat/internal.h b/libavformat/internal.h
index 1b33fb153a..9f91d33b15 100644
--- a/libavformat/internal.h
+++ b/libavformat/internal.h
@@ -24,6 +24,8 @@
 #include <stdint.h>
 #include "avformat.h"
 
+#define MAX_URL_SIZE 4096
+
 typedef struct AVCodecTag {
     enum CodecID id;
     unsigned int tag;

