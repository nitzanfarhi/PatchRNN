commit f13c6b54a879aaa771ec64b5a066b939e8f8e7f0
Author: Cristy <urban-warrior@imagemagick.org>
Date:   Sun May 28 06:42:25 2017 -0400

    https://github.com/ImageMagick/ImageMagick/issues/501

diff --git a/coders/jp2.c b/coders/jp2.c
index 94b775e1c..b9fe4ab00 100644
--- a/coders/jp2.c
+++ b/coders/jp2.c
@@ -391,7 +391,7 @@ static Image *ReadJP2Image(const ImageInfo *image_info,ExceptionInfo *exception)
         (jp2_image->comps[0].dy != jp2_image->comps[i].dy) ||
         (jp2_image->comps[0].prec != jp2_image->comps[i].prec) ||
         (jp2_image->comps[0].sgnd != jp2_image->comps[i].sgnd) ||
-        (jp2_image->comps[i].data == NULL))
+        ((image->ping == MagickFalse) && (jp2_image->comps[i].data == NULL)))
       {
         opj_destroy_codec(jp2_codec);
         opj_image_destroy(jp2_image);

