commit 638831aacc683da40bb0e126e937047242463b72
Author: Alex Beregszaszi <alex@rtfs.hu>
Date:   Sat Feb 24 02:16:12 2007 +0000

    disconnect client if trailer is sent
    
    Originally committed as revision 8109 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/ffserver.c b/ffserver.c
index ba87f3598..7b64cc7a5 100644
--- a/ffserver.c
+++ b/ffserver.c
@@ -870,6 +870,9 @@ static int handle_connection(HTTPContext *c)
         }
         if (http_send_data(c) < 0)
             return -1;
+        /* close connection if trailer sent */
+        if (c->state == HTTPSTATE_SEND_DATA_TRAILER)
+            return -1;
         break;
     case HTTPSTATE_RECEIVE_DATA:
         /* no need to read if no events */

