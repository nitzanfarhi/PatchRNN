commit a510880f6ea00ee28f22ec61a3c53357bb1bbaa5
Author: Leilei Zhao <leilei.zhao@atmel.com>
Date:   Fri Feb 27 16:07:15 2015 +0800

    tty/serial: at91: correct buffer size used in DMA
    
    The buffer size set in DMA is inconsistent with its allocation.
    So keep them consistent here. The structure atmel_uart_char is
    used in PIO mode with its meaning. But here in DMA, all of the
    buffer is treated as general char.
    
    Signed-off-by: Leilei Zhao <leilei.zhao@atmel.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/tty/serial/atmel_serial.c b/drivers/tty/serial/atmel_serial.c
index 1a1d255baab5..6b70ec6d1704 100644
--- a/drivers/tty/serial/atmel_serial.c
+++ b/drivers/tty/serial/atmel_serial.c
@@ -1030,7 +1030,7 @@ static int atmel_prepare_rx_dma(struct uart_port *port)
 	BUG_ON(!PAGE_ALIGNED(ring->buf));
 	sg_set_page(&atmel_port->sg_rx,
 		    virt_to_page(ring->buf),
-		    ATMEL_SERIAL_RINGSIZE,
+		    sizeof(struct atmel_uart_char) * ATMEL_SERIAL_RINGSIZE,
 		    (int)ring->buf & ~PAGE_MASK);
 	nent = dma_map_sg(port->dev,
 			  &atmel_port->sg_rx,

