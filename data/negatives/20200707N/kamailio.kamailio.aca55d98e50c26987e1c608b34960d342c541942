commit aca55d98e50c26987e1c608b34960d342c541942
Author: Ovidius Sas <sip.nslu@gmail.com>
Date:   Mon Sep 29 18:59:05 2008 +0000

    cleanup shared memory on exit
    
    
    git-svn-id: https://openser.svn.sourceforge.net/svnroot/openser/trunk@5013 689a6050-402a-0410-94f2-e92a70836424

diff --git a/modules_k/lcr/lcr_mod.c b/modules_k/lcr/lcr_mod.c
index ed08dc784..064fbb68a 100644
--- a/modules_k/lcr/lcr_mod.c
+++ b/modules_k/lcr/lcr_mod.c
@@ -631,6 +631,30 @@ static void destroy(void)
 	if (lcrs_2[i].prefix_re) shm_free(lcrs_2[i].prefix_re);
 	if (lcrs_2[i].from_uri_re) shm_free(lcrs_2[i].from_uri_re);
     }
+    if(gws_1) {
+        shm_free(gws_1);
+        gws_1 = NULL;
+    }
+    if(gws_2) {
+        shm_free(gws_2);
+        gws_2 = NULL;
+    }
+    if(gws) {
+        shm_free(gws);
+        gws = NULL;
+    }
+    if(lcrs_1) { 
+        shm_free(lcrs_1);
+        lcrs_1 = NULL;
+    }
+    if(lcrs_2) {
+        shm_free(lcrs_2);
+        lcrs_2 = NULL;
+    }
+    if(lcrs) {
+        shm_free(lcrs);
+        lcrs = NULL;
+    }
 }
 
 

