commit 3e2d2112af00f5abb44792496a1b3e77fbd34d09
Author: Embedthis Software <dev@embedthis.com>
Date:   Mon Nov 10 14:53:57 2014 -0800

    FIX: reuse existing routes in http.json

diff --git a/src/paks/http/httpLib.c b/src/paks/http/httpLib.c
index 5f2380748..45d9dc7f1 100644
--- a/src/paks/http/httpLib.c
+++ b/src/paks/http/httpLib.c
@@ -4611,6 +4611,7 @@ static void parseRoutes(HttpRoute *route, cchar *key, MprJson *prop)
 {
     MprJson     *child;
     HttpRoute   *newRoute;
+    cchar       *pattern;
     int         ji;
 
     if (route->loaded) {
@@ -4627,16 +4628,21 @@ static void parseRoutes(HttpRoute *route, cchar *key, MprJson *prop)
                 httpAddRouteSet(route, child->value);
 
             } else if (child->type & MPR_JSON_OBJ) {
-                /*
-                    Create a new route
-                 */
-                newRoute = httpCreateInheritedRoute(route);
-                httpSetRouteHost(newRoute, route->host);
+                newRoute = 0;
+                if ((pattern = mprLookupJson(child, "pattern")) != 0) {
+                   newRoute = httpLookupRouteByPattern(route->host, pattern);
+                }
+                if (!newRoute) {
+                    newRoute = httpCreateInheritedRoute(route);
+                    httpSetRouteHost(newRoute, route->host);
+                }
                 parseAll(newRoute, key, child);
                 if (newRoute->error) {
                     break;
                 }
-                httpFinalizeRoute(newRoute);
+                if (pattern) {
+                    httpFinalizeRoute(newRoute);
+                }
             }
         }
     }

