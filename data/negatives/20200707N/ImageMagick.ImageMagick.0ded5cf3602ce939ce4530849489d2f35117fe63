commit 0ded5cf3602ce939ce4530849489d2f35117fe63
Author: cristy <urban-warrior@git.imagemagick.org>
Date:   Sun Mar 22 14:05:05 2015 +0000

diff --git a/MagickCore/blob.c b/MagickCore/blob.c
index 5f27903ac..91e291007 100644
--- a/MagickCore/blob.c
+++ b/MagickCore/blob.c
@@ -3848,6 +3848,8 @@ MagickPrivate MagickBooleanType SetBlobExtent(Image *image,
       if ((MagickSizeType) offset >= extent)
         break;
       offset=SeekBlob(image,(MagickOffsetType) extent-1,SEEK_SET);
+      if (offset < 0)
+        break;
       count=(ssize_t) fwrite((const unsigned char *) "",1,1,
         image->blob->file_info.file);
 #if defined(MAGICKCORE_HAVE_POSIX_FALLOCATE)

