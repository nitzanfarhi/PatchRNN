commit 5e02bac3172fcad964eeef70ad21f583982a6eba
Author: Linus Walleij <linus.walleij@linaro.org>
Date:   Thu Apr 30 15:15:49 2015 +0200

    iio: st_sensors: make detection more helpful
    
    The ST sensors are detected by reading a WhoAmI register and
    matching the number found to a sensor name string. To make it
    easier to figure out what happens when things go wrong, print
    the WhoAmI value and the device name we're trying to match.
    
    Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
    Signed-off-by: Jonathan Cameron <jic23@kernel.org>

diff --git a/drivers/iio/common/st_sensors/st_sensors_core.c b/drivers/iio/common/st_sensors/st_sensors_core.c
index cbeb5e01bc3a..1255b157c71c 100644
--- a/drivers/iio/common/st_sensors/st_sensors_core.c
+++ b/drivers/iio/common/st_sensors/st_sensors_core.c
@@ -503,7 +503,8 @@ int st_sensors_check_device_support(struct iio_dev *indio_dev,
 			break;
 	}
 	if (n == ARRAY_SIZE(sensor_settings[i].sensors_supported)) {
-		dev_err(&indio_dev->dev, "device name and WhoAmI mismatch.\n");
+		dev_err(&indio_dev->dev, "device name \"%s\" and WhoAmI (0x%02x) mismatch",
+			indio_dev->name, wai);
 		goto sensor_name_mismatch;
 	}
 

