commit b127aa8bafb3b5b555ab0e7d6f87cb8a541a3d46
Author: Julia Lawall <julia@diku.dk>
Date:   Tue Dec 4 00:33:07 2007 -0800

    [SPARC]: Add missing of_node_put
    
    There should be an of_node_put when breaking out of a loop that iterates
    using for_each_node_by_type.
    
    Signed-off-by: Julia Lawall <julia@diku.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/arch/sparc/kernel/devices.c b/arch/sparc/kernel/devices.c
index af90a5f9ab57..b240b8863fd0 100644
--- a/arch/sparc/kernel/devices.c
+++ b/arch/sparc/kernel/devices.c
@@ -62,8 +62,10 @@ static int __cpu_find_by(int (*compare)(int, int, void *), void *compare_arg,
 		int err = check_cpu_node(dp->node, &cur_inst,
 					 compare, compare_arg,
 					 prom_node, mid);
-		if (!err)
+		if (!err) {
+			of_node_put(dp);
 			return 0;
+		}
 	}
 
 	return -ENODEV;

