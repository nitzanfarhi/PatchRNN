commit 1396a21ba0d4ec381db19bc9cd5b6f25a89cf633
Author: Martin Hicks <mort@sgi.com>
Date:   Wed Jul 21 19:27:05 2010 -0500

    kdb: break out of kdb_ll() when command is terminated
    
    Without this patch the "ll" linked-list traversal command won't
    terminate when you hit q/Q.
    
    Signed-off-by: Martin Hicks <mort@sgi.com>
    Signed-off-by: Jason Wessel <jason.wessel@windriver.com>

diff --git a/kernel/debug/kdb/kdb_main.c b/kernel/debug/kdb/kdb_main.c
index 184cd8209c36..a7fe2e98d613 100644
--- a/kernel/debug/kdb/kdb_main.c
+++ b/kernel/debug/kdb/kdb_main.c
@@ -2291,6 +2291,9 @@ static int kdb_ll(int argc, const char **argv)
 	while (va) {
 		char buf[80];
 
+		if (KDB_FLAG(CMD_INTERRUPT))
+			return 0;
+
 		sprintf(buf, "%s " kdb_machreg_fmt "\n", command, va);
 		diag = kdb_parse(buf);
 		if (diag)

