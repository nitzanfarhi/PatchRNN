commit 336c6e4690ea017a11799aa331ffedd4c59a31ad
Author: Lennart Poettering <lennart@poettering.net>
Date:   Fri Feb 14 02:04:09 2014 +0100

    service: if we don't know the main pid of a service, we cannot accept any notification messages

diff --git a/src/core/service.c b/src/core/service.c
index 8c47e24bf..5c6b63865 100644
--- a/src/core/service.c
+++ b/src/core/service.c
@@ -3349,10 +3349,12 @@ static void service_notify_message(Unit *u, pid_t pid, char **tags) {
                 return;
         }
 
-        if (s->notify_access == NOTIFY_MAIN && s->main_pid != 0 && pid != s->main_pid) {
-                log_warning_unit(u->id,
-                                 "%s: Got notification message from PID "PID_FMT", but reception only permitted for PID "PID_FMT,
-                                 u->id, pid, s->main_pid);
+        if (s->notify_access == NOTIFY_MAIN && pid != s->main_pid) {
+
+                if (s->main_pid != 0)
+                        log_warning_unit(u->id, "%s: Got notification message from PID "PID_FMT", but reception only permitted for main PID "PID_FMT, u->id, pid, s->main_pid);
+                else
+                        log_warning_unit(u->id, "%s: Got notification message from PID "PID_FMT", but reception only permitted for main PID which is currently not known", u->id, pid);
                 return;
         }
 

