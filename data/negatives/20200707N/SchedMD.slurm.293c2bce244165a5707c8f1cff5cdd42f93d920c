commit 293c2bce244165a5707c8f1cff5cdd42f93d920c
Author: Brian Christiansen <brian@schedmd.com>
Date:   Wed Apr 19 12:49:51 2017 -0600

    Don't revoke a job that is already completed
    
    Prevents a second call to the database. This could happen when the
    origin job is cancelled and the sibling jobs report back that the job is
    gone as well.

diff --git a/src/slurmctld/fed_mgr.c b/src/slurmctld/fed_mgr.c
index 8ec8b4f813..bd1e8a49d3 100644
--- a/src/slurmctld/fed_mgr.c
+++ b/src/slurmctld/fed_mgr.c
@@ -3202,6 +3202,9 @@ extern int fed_mgr_job_revoke(struct job_record *job_ptr, bool job_complete,
 	uint32_t origin_id;
 	uint32_t state = JOB_REVOKED;
 
+	if (IS_JOB_COMPLETED(job_ptr)) /* job already completed */
+		return SLURM_SUCCESS;
+
 	if (!_is_fed_job(job_ptr, &origin_id))
 		return SLURM_SUCCESS;
 

