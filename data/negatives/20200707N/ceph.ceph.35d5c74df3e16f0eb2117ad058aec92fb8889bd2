commit 35d5c74df3e16f0eb2117ad058aec92fb8889bd2
Author: Sage Weil <sage@newdream.net>
Date:   Thu Dec 18 11:49:42 2008 -0800

    osd: clear_prior when activating
    
    This just ensures that, once active, an osd state change affecting our
    prior_set won't make us repeer.  E.g., a prior going down.

diff --git a/src/osd/PG.cc b/src/osd/PG.cc
index 32e093f27b..c51f75fce2 100644
--- a/src/osd/PG.cc
+++ b/src/osd/PG.cc
@@ -1279,6 +1279,9 @@ void PG::activate(ObjectStore::Transaction& t,
 
   need_up_thru = false;
 
+  // clear prior set (and dependency info)... we are done peering!
+  clear_prior();
+
   // write pg info, log
   write_info(t);
   write_log(t);

