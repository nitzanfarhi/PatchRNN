commit e3d8affb0d2d95f2da61e30ce86b33177feb91e8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 4 18:57:57 2010 +0000

    drm/i915: Permit pinning whilst the device is 'suspended'
    
    As pinning (allocating and binding GTT memory) does not actually invoke
    GPU commands, it is safe, and indeed is attempted, during resumption
    from suspension:
    
      [drm:intel_init_clock_gating] *ERROR* failed to pin power context: -16
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reported-by: Hugh Dickins <hugh.dickins@tiscali.co.uk>
    Cc: stable@kernel.org
    Signed-off-by: Eric Anholt <eric@anholt.net>

diff --git a/drivers/gpu/drm/i915/i915_gem.c b/drivers/gpu/drm/i915/i915_gem.c
index 0330c3aa8032..21950ef987c7 100644
--- a/drivers/gpu/drm/i915/i915_gem.c
+++ b/drivers/gpu/drm/i915/i915_gem.c
@@ -2582,9 +2582,6 @@ i915_gem_object_bind_to_gtt(struct drm_gem_object *obj, unsigned alignment)
 	bool retry_alloc = false;
 	int ret;
 
-	if (dev_priv->mm.suspended)
-		return -EBUSY;
-
 	if (obj_priv->madv != I915_MADV_WILLNEED) {
 		DRM_ERROR("Attempting to bind a purgeable object\n");
 		return -EINVAL;

