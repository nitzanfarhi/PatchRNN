commit a9fbef62b6492995219c7e7dcd3bd6afd1e9fd45
Author: Christophe Dumez <chris@qbittorrent.org>
Date:   Thu Dec 30 17:05:29 2010 +0000

    Fix ampersand support in search engine field (closes #695715)

diff --git a/src/searchengine/searchengine.cpp b/src/searchengine/searchengine.cpp
index 643df4705..4c99d4335 100644
--- a/src/searchengine/searchengine.cpp
+++ b/src/searchengine/searchengine.cpp
@@ -321,7 +321,7 @@ void SearchEngine::on_search_button_clicked(){
   // Reload environment variables (proxy)
   searchProcess->setEnvironment(QProcess::systemEnvironment());
 
-  QString pattern = search_pattern->text().trimmed();
+  const QString pattern = search_pattern->text().trimmed();
   // No search pattern entered
   if(pattern.isEmpty()){
     QMessageBox::critical(0, tr("Empty search pattern"), tr("Please type a search pattern first"));
@@ -331,7 +331,9 @@ void SearchEngine::on_search_button_clicked(){
   currentSearchTab=new SearchTab(this);
   connect(currentSearchTab->header(), SIGNAL(sectionResized(int, int, int)), this, SLOT(propagateSectionResized(int,int,int)));
   all_tab.append(currentSearchTab);
-  tabWidget->addTab(currentSearchTab, pattern);
+  QString tabName = pattern;
+  tabName.replace(QRegExp("&{1}"), "&&");
+  tabWidget->addTab(currentSearchTab, tabName);
   tabWidget->setCurrentWidget(currentSearchTab);
 #if QT_VERSION < 0x040500
   closeTab_button->setEnabled(true);

