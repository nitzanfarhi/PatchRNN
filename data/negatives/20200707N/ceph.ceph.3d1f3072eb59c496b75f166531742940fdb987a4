commit 3d1f3072eb59c496b75f166531742940fdb987a4
Author: Yehuda Sadeh <yehuda@hq.newdream.net>
Date:   Mon Jul 26 15:34:31 2010 -0700

    rgw: fix returned error code in If-None-Match

diff --git a/src/rgw/rgw_rados.cc b/src/rgw/rgw_rados.cc
index baa092beb9..e443407180 100644
--- a/src/rgw/rgw_rados.cc
+++ b/src/rgw/rgw_rados.cc
@@ -590,8 +590,8 @@ int RGWRados::prepare_get_obj(std::string& bucket, std::string& oid,
     if (if_nomatch) {
       cerr << "etag=" << etag << " " << " if_nomatch=" << if_nomatch << endl;
       if (strcmp(if_nomatch, etag.c_str()) == 0) {
-        err->num = "412";
-        err->code = "PreconditionFailed";
+        err->num = "304";
+        err->code = "NotModified";
         goto done_err;
       }
     }

