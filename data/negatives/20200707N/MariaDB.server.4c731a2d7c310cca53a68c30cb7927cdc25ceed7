commit 4c731a2d7c310cca53a68c30cb7927cdc25ceed7
Author: Marko Mäkelä <marko.makela@mariadb.com>
Date:   Fri Feb 2 15:04:52 2018 +0200

    Adapt a MySQL 5.7 fix for SET GLOBAL innodb_buffer_pool_size
    
    Bug#23590280 NO WARNING WHEN REDUCING INNODB_BUFFER_POOL_SIZE
    INSIZE (sic) THE FIRST CHUNK
    
    innodb_buffer_pool_size_validate(): Issue a warning if the
    requested innodb_buffer_pool_size is less than
    innodb_buffer_pool_chunk_size, because we cannot shrink individual
    chunks.

diff --git a/storage/innobase/handler/ha_innodb.cc b/storage/innobase/handler/ha_innodb.cc
index 5dee02bed67..8ae8e003905 100644
--- a/storage/innobase/handler/ha_innodb.cc
+++ b/storage/innobase/handler/ha_innodb.cc
@@ -22566,8 +22566,19 @@ innodb_buffer_pool_size_validate(
 
 	*static_cast<longlong*>(save) = requested_buf_pool_size;
 
+	if (srv_buf_pool_size == static_cast<ulint>(intbuf)) {
+		buf_pool_mutex_exit_all();
+		/* nothing to do */
+		return(0);
+	}
+
 	if (srv_buf_pool_size == requested_buf_pool_size) {
 		buf_pool_mutex_exit_all();
+		push_warning_printf(thd, Sql_condition::WARN_LEVEL_WARN,
+				    ER_WRONG_ARGUMENTS,
+				    "innodb_buffer_pool_size must be at least"
+				    " innodb_buffer_pool_chunk_size=%lu",
+				    srv_buf_pool_chunk_unit);
 		/* nothing to do */
 		return(0);
 	}

