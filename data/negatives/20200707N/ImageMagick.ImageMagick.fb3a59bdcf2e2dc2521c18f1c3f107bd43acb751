commit fb3a59bdcf2e2dc2521c18f1c3f107bd43acb751
Author: cristy <urban-warrior@git.imagemagick.org>
Date:   Wed Apr 7 19:52:52 2010 +0000

diff --git a/coders/psd.c b/coders/psd.c
index 1338be2ed..24baab042 100644
--- a/coders/psd.c
+++ b/coders/psd.c
@@ -1995,6 +1995,7 @@ static MagickBooleanType WritePSDImage(const ImageInfo *image_info,Image *image)
   if (icc_profile != (StringInfo *) NULL)
     length+=PSDQuantum(GetStringInfoLength(icc_profile))+12;
   (void) WriteBlobMSBLong(image,length);
+  WriteResolutionResourceBlock(image);
   if (bim_profile != (StringInfo *) NULL)
     (void) WriteBlob(image,GetStringInfoLength(bim_profile),GetStringInfoDatum(
       bim_profile));
@@ -2009,7 +2010,6 @@ static MagickBooleanType WritePSDImage(const ImageInfo *image_info,Image *image)
       if (length != GetStringInfoLength(icc_profile))
         (void) WriteBlobByte(image,0);
     }
-  WriteResolutionResourceBlock(image);
 
 compute_layer_info:
   layer_count = 0;

