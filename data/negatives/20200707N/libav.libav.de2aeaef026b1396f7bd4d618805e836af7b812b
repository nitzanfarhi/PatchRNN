commit de2aeaef026b1396f7bd4d618805e836af7b812b
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Fri Aug 10 01:15:51 2007 +0000

    fix x11grab
    
    Originally committed as revision 10046 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/ffmpeg.c b/ffmpeg.c
index 7bae7257f..fa3d6244a 100644
--- a/ffmpeg.c
+++ b/ffmpeg.c
@@ -1778,7 +1778,8 @@ static int av_encode(AVFormatContext **output_files,
         is = input_files[ist->file_index];
         ist->pts = 0;
         ist->next_pts=0;
-        if(input_files_ts_offset[ist->file_index] != -is->start_time)
+        if(   input_files_ts_offset[ist->file_index] != -is->start_time
+           && !(is->start_time == AV_NOPTS_VALUE && input_files_ts_offset[ist->file_index]==0))
             ist->next_pts= AV_NOPTS_VALUE;
         ist->is_start = 1;
     }

