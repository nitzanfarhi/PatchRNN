commit 62e4f7241a99e5102fbe0ec52dc0ab6c00a4bf1b
Author: Sebastien Helleu <flashcode@flashtux.org>
Date:   Sun Oct 26 16:40:16 2008 +0100

    Fix crash when switching server with alt+s

diff --git a/src/plugins/irc/irc-command.c b/src/plugins/irc/irc-command.c
index a8892592f..00ab0e635 100644
--- a/src/plugins/irc/irc-command.c
+++ b/src/plugins/irc/irc-command.c
@@ -3111,6 +3111,8 @@ irc_command_server (void *data, struct t_gui_buffer *buffer, int argc,
             if (irc_current_server)
             {
                 ptr_server = irc_current_server->next_server;
+                if (!ptr_server)
+                    ptr_server = irc_servers;
                 while (ptr_server != irc_current_server)
                 {
                     if (ptr_server->buffer)

