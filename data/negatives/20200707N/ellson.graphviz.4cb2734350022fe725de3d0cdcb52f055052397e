commit 4cb2734350022fe725de3d0cdcb52f055052397e
Author: ellson <devnull@localhost>
Date:   Wed Jun 21 13:31:28 2006 +0000

    fix crash on unknown shape - reported by Ryan Schmidt

diff --git a/lib/gvc/gvusershape.c b/lib/gvc/gvusershape.c
index b15c84ef3..4317b8031 100644
--- a/lib/gvc/gvusershape.c
+++ b/lib/gvc/gvusershape.c
@@ -266,6 +266,9 @@ usershape_t *gvusershape_find(char *name)
 {
     usershape_t probe;
 
+    if (!ImageDict)
+	return NULL;
+
     probe.name = name;
     return (dtsearch(ImageDict, &probe));
 }

