commit f7085641eeaeaab5216bab143287d2288940d9a2
Author: Mark Brown <broonie@opensource.wolfsonmicro.com>
Date:   Tue Feb 21 16:24:00 2012 +0000

    ASoC: wm8994: Move wm_hubs callback before we start ramping VMID
    
    Allows the generic code to set up for that.
    
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/sound/soc/codecs/wm8994.c b/sound/soc/codecs/wm8994.c
index 0b1c271468af..33bc718f1649 100644
--- a/sound/soc/codecs/wm8994.c
+++ b/sound/soc/codecs/wm8994.c
@@ -784,6 +784,8 @@ static void vmid_reference(struct snd_soc_codec *codec)
 				    WM8994_LINEOUT2_DISCH,
 				    WM8994_LINEOUT_VMID_BUF_ENA);
 
+		wm_hubs_vmid_ena(codec);
+
 		/* Startup bias, VMID ramp & buffer */
 		snd_soc_update_bits(codec, WM8994_ANTIPOP_2,
 				    WM8994_BIAS_SRC |
@@ -796,8 +798,6 @@ static void vmid_reference(struct snd_soc_codec *codec)
 				    WM8994_VMID_BUF_ENA |
 				    (0x2 << WM8994_VMID_RAMP_SHIFT));
 
-		wm_hubs_vmid_ena(codec);
-
 		/* Main bias enable, VMID=2x40k */
 		snd_soc_update_bits(codec, WM8994_POWER_MANAGEMENT_1,
 				    WM8994_BIAS_ENA |

