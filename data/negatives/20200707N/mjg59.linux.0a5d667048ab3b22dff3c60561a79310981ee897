commit 0a5d667048ab3b22dff3c60561a79310981ee897
Author: Pramod Gurav <pramod.gurav@smartplayin.com>
Date:   Sat Aug 30 16:43:00 2014 +0530

    pinctrl: sirf: Remove gpiochip on failure cases
    
    This patch releases gpiochip related resources by calling
    gpiochip_remove when gpiochip_irqchip_add fails.
    
    CC: Linus Walleij <linus.walleij@linaro.org>
    CC: Barry Song <Baohua.Song@csr.com>
    CC: Rongjun Ying <rongjun.ying@csr.com>
    CC: Yuping Luo <yuping.luo@csr.com>
    Signed-off-by: Pramod Gurav <pramod.gurav@smartplayin.com>
    Signed-off-by: Linus Walleij <linus.walleij@linaro.org>

diff --git a/drivers/pinctrl/sirf/pinctrl-sirf.c b/drivers/pinctrl/sirf/pinctrl-sirf.c
index 6f252fd7cb0c..b713bd59ffbb 100644
--- a/drivers/pinctrl/sirf/pinctrl-sirf.c
+++ b/drivers/pinctrl/sirf/pinctrl-sirf.c
@@ -853,7 +853,7 @@ static int sirfsoc_gpio_probe(struct device_node *np)
 	if (err) {
 		dev_err(&pdev->dev,
 			"could not connect irqchip to gpiochip\n");
-		goto out;
+		goto out_banks;
 	}
 
 	for (i = 0; i < SIRFSOC_GPIO_NO_OF_BANKS; i++) {

