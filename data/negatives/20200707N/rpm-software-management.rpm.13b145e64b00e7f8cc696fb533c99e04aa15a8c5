commit 13b145e64b00e7f8cc696fb533c99e04aa15a8c5
Author: ewt <devnull@localhost>
Date:   Thu Jun 27 18:18:15 1996 +0000

    supports version 3 packages
    
    CVS patchset: 683
    CVS date: 1996/06/27 18:18:15

diff --git a/lib/package.c b/lib/package.c
index f2264c047..03163e522 100644
--- a/lib/package.c
+++ b/lib/package.c
@@ -64,7 +64,12 @@ int pkgReadHeader(int fd, Header * hdr, int * isSource) {
 	    readOldHeader(fd, hdr, isSource);
 	    arch = getArchNum();
 	    addEntry(*hdr, RPMTAG_ARCH, INT8_TYPE, &arch, 1);
-	} else if (lead.major == 2) {
+	} else if (lead.major == 2 || lead.major == 3) {
+	    if (lead.minor) {
+		error(RPMERR_NEWPACKAGE, "only packages with minor numbers = 0"
+			" are supported by this version of RPM");
+		return 2;
+	    }
 	    if (!readSignature(fd, lead.signature_type, NULL)) {
 	       return 2;
 	    }

