commit afdab56a42b7b1ce4a5d7d9ff7deca5a5cb72c6d
Author: Greg Farnum <gregf@hq.newdream.net>
Date:   Fri Feb 26 11:28:25 2010 -0800

    msgr: Remove the type CEPH_ENTITY_TYPE_ADMIN.
    It *looks* like this won't break EntityName's isAdmin() function as that
    depends on a set name, and client.admin will satisfy it. I think.

diff --git a/src/ceph.cc b/src/ceph.cc
index c533016515..fb0741aff4 100644
--- a/src/ceph.cc
+++ b/src/ceph.cc
@@ -627,7 +627,7 @@ int main(int argc, const char **argv, const char *envp[])
   
   // start up network
   SimpleMessenger *messenger = new SimpleMessenger();
-  messenger->register_entity(entity_name_t::ADMIN());
+  messenger->register_entity(entity_name_t::CLIENT());
   messenger->add_dispatcher_head(&dispatcher);
 
   messenger->start();
diff --git a/src/dumpjournal.cc b/src/dumpjournal.cc
index cc245c0f10..d30fa60a04 100644
--- a/src/dumpjournal.cc
+++ b/src/dumpjournal.cc
@@ -93,7 +93,7 @@ int main(int argc, const char **argv, const char *envp[])
   messenger->bind();
   g_conf.daemonize = false; // not us!
   messenger->start();
-  messenger->register_entity(entity_name_t::ADMIN());
+  messenger->register_entity(entity_name_t::CLIENT());
   messenger->add_dispatcher_head(&dispatcher);
 
   inodeno_t ino = MDS_INO_LOG_OFFSET + mds;
diff --git a/src/include/ceph_strings.cc b/src/include/ceph_strings.cc
index 8e4be6a80c..76b11b54e1 100644
--- a/src/include/ceph_strings.cc
+++ b/src/include/ceph_strings.cc
@@ -10,7 +10,6 @@ const char *ceph_entity_type_name(int type)
 	case CEPH_ENTITY_TYPE_OSD: return "osd";
 	case CEPH_ENTITY_TYPE_MON: return "mon";
 	case CEPH_ENTITY_TYPE_CLIENT: return "client";
-	case CEPH_ENTITY_TYPE_ADMIN: return "admin";
 	case CEPH_ENTITY_TYPE_AUTH: return "auth";
 	default: return "unknown";
 	}
diff --git a/src/include/msgr.h b/src/include/msgr.h
index 8aaab414f3..5e576d087f 100644
--- a/src/include/msgr.h
+++ b/src/include/msgr.h
@@ -50,8 +50,7 @@ struct ceph_entity_name {
 #define CEPH_ENTITY_TYPE_MDS    0x02
 #define CEPH_ENTITY_TYPE_OSD    0x04
 #define CEPH_ENTITY_TYPE_CLIENT 0x08
-#define CEPH_ENTITY_TYPE_ADMIN  0x10
-#define CEPH_ENTITY_TYPE_AUTH   0x20
+#define CEPH_ENTITY_TYPE_AUTH   0x10
 
 #define CEPH_ENTITY_TYPE_ANY    0xFF
 
diff --git a/src/msg/msg_types.h b/src/msg/msg_types.h
index 41711c733b..584692564f 100644
--- a/src/msg/msg_types.h
+++ b/src/msg/msg_types.h
@@ -30,7 +30,6 @@ public:
   static const int TYPE_MDS = CEPH_ENTITY_TYPE_MDS;
   static const int TYPE_OSD = CEPH_ENTITY_TYPE_OSD;
   static const int TYPE_CLIENT = CEPH_ENTITY_TYPE_CLIENT;
-  static const int TYPE_ADMIN = CEPH_ENTITY_TYPE_ADMIN;
 
   static const int NEW = -1;
 
@@ -45,7 +44,6 @@ public:
   static entity_name_t MDS(int i=NEW) { return entity_name_t(TYPE_MDS, i); }
   static entity_name_t OSD(int i=NEW) { return entity_name_t(TYPE_OSD, i); }
   static entity_name_t CLIENT(int i=NEW) { return entity_name_t(TYPE_CLIENT, i); }
-  static entity_name_t ADMIN(int i=NEW) { return entity_name_t(TYPE_ADMIN, i); }
   
   __s64 num() const { return _num; }
   int type() const { return _type; }
@@ -59,7 +57,6 @@ public:
   bool is_mds() const { return type() == TYPE_MDS; }
   bool is_osd() const { return type() == TYPE_OSD; }
   bool is_mon() const { return type() == TYPE_MON; }
-  bool is_admin() const { return type() == TYPE_ADMIN; }
 
   operator ceph_entity_name() const {
     ceph_entity_name n = { _type, init_le64(_num) };
diff --git a/wireshark/ceph/msgr.h b/wireshark/ceph/msgr.h
index 9abc879e25..f1d1041747 100644
--- a/wireshark/ceph/msgr.h
+++ b/wireshark/ceph/msgr.h
@@ -50,7 +50,6 @@ struct ceph_entity_name {
 #define CEPH_ENTITY_TYPE_MDS    2
 #define CEPH_ENTITY_TYPE_OSD    3
 #define CEPH_ENTITY_TYPE_CLIENT 4
-#define CEPH_ENTITY_TYPE_ADMIN  5
 
 /*
  * entity_addr -- network address

