commit 66ede06684f48e47cc4f9e95f59e092624cc9370
Author: Bron Gondwana <brong@fastmail.fm>
Date:   Thu Apr 20 01:04:26 2017 +1000

    document why we're doing the nasty hack to read lastalarm data in sync_support after annotations are copied

diff --git a/imap/sync_support.c b/imap/sync_support.c
index e1056cadb..1caa9c4eb 100644
--- a/imap/sync_support.c
+++ b/imap/sync_support.c
@@ -2108,6 +2108,11 @@ out:
 
     if (record) {
         if (mailbox->mbtype & MBTYPE_CALENDAR) {
+            // NOTE: this is because we don't pass the annotations through
+            // with the record as we create it, so we can't update the alarm
+            // database properly.  Instead, we don't set anything when we append
+            // by checking for .silent, and instead update the database by touching
+            // the alarm AFTER writing the record.
             caldav_alarm_touch_record(mailbox, record);
         }
     }

