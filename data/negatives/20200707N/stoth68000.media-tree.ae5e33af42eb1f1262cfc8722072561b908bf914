commit ae5e33af42eb1f1262cfc8722072561b908bf914
Author: Finn Thain <fthain@telegraphics.com.au>
Date:   Wed Mar 23 21:10:23 2016 +1100

    ncr5380: Reduce max_lun limit
    
    The driver has a limit of eight LUs because of the byte-sized bitfield
    that is used for busy flags. That means the maximum LUN is 7. The default
    is 8.
    
    Signed-off-by: Finn Thain <fthain@telegraphics.com.au>
    Tested-by: Michael Schmitz <schmitzmic@gmail.com>
    Tested-by: Ondrej Zary <linux@rainbow-software.org>
    Reviewed-by: Hannes Reinecke <hare@suse.com>
    Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>

diff --git a/drivers/scsi/NCR5380.c b/drivers/scsi/NCR5380.c
index 305330b26349..5187c31a48be 100644
--- a/drivers/scsi/NCR5380.c
+++ b/drivers/scsi/NCR5380.c
@@ -488,6 +488,8 @@ static int NCR5380_init(struct Scsi_Host *instance, int flags)
 	int i;
 	unsigned long deadline;
 
+	instance->max_lun = 7;
+
 	hostdata->host = instance;
 	hostdata->id_mask = 1 << instance->this_id;
 	hostdata->id_higher_mask = 0;

