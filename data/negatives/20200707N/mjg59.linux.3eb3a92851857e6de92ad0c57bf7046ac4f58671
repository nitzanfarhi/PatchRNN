commit 3eb3a92851857e6de92ad0c57bf7046ac4f58671
Author: Hannes Reinecke <hare@suse.de>
Date:   Thu Jul 29 10:10:16 2010 +0200

    [SCSI] Return NEEDS_RETRY for eh commands with status BUSY
    
    When the transport is busy and we're sending an EH command drivers
    occasionally return 'BUSY'. As this in most cases is the TUR
    command sent as part of the error recovery this is a sure way
    to make the error recovery escalate. Returning 'NEEDS_RETRY'
    here will just retry the TUR command and eventually abort the
    original command, thus making error handling far smoother.
    
    Signed-off-by: Hannes Reinecke <hare@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@suse.de>

diff --git a/drivers/scsi/scsi_error.c b/drivers/scsi/scsi_error.c
index 2bf98469dc4c..cfd01ef8a9d4 100644
--- a/drivers/scsi/scsi_error.c
+++ b/drivers/scsi/scsi_error.c
@@ -481,6 +481,7 @@ static int scsi_eh_completed_normally(struct scsi_cmnd *scmd)
 		scsi_handle_queue_full(scmd->device);
 		/* fall through */
 	case BUSY:
+		return NEEDS_RETRY;
 	default:
 		return FAILED;
 	}

