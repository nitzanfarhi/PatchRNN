commit 0fb84ce0dbffee26dc0934496e6bcdce853fa0d0
Author: Mauro Carvalho Chehab <mchehab@redhat.com>
Date:   Tue Dec 2 08:30:16 2008 -0300

    V4L/DVB (12846): tuner-xc2028: Fix skip code for devices with broken read (tm6000)
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/common/tuners/tuner-xc2028.c b/drivers/media/common/tuners/tuner-xc2028.c
index 53f0fbb33cc6..61a7e138c748 100644
--- a/drivers/media/common/tuners/tuner-xc2028.c
+++ b/drivers/media/common/tuners/tuner-xc2028.c
@@ -811,6 +811,10 @@ static int check_firmware(struct dvb_frontend *fe, unsigned int type,
 		  hwmodel, (version & 0xf000) >> 12, (version & 0xf00) >> 8,
 		  (version & 0xf0) >> 4, version & 0xf);
 
+
+	if (priv->ctrl.read_not_reliable)
+		goto read_not_reliable;
+
 	/* Check firmware version against what we downloaded. */
 	if (priv->firm_version != ((version & 0xf0) << 4 | (version & 0x0f))) {
 		if (!priv->ctrl.read_not_reliable) {
@@ -834,6 +838,7 @@ static int check_firmware(struct dvb_frontend *fe, unsigned int type,
 		goto fail;
 	}
 
+read_not_reliable:
 	memcpy(&priv->cur_fw, &new_fw, sizeof(priv->cur_fw));
 
 	/*

