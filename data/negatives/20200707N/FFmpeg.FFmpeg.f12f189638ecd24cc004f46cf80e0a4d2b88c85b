commit f12f189638ecd24cc004f46cf80e0a4d2b88c85b
Author: Mashiat Sarker Shakkhar <shahriman_ams@yahoo.com>
Date:   Sun Nov 6 03:00:49 2011 +0600

    Implement reset_codec()
    (cherry picked from commit c56313aa7969691f1a779e5ac5666f012676836f)
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/wmalosslessdec.c b/libavcodec/wmalosslessdec.c
index 0ed4f059ed..a60f477089 100644
--- a/libavcodec/wmalosslessdec.c
+++ b/libavcodec/wmalosslessdec.c
@@ -746,6 +746,17 @@ static void clear_codec_buffers(WmallDecodeCtx *s)
     }
 }
 
+static void reset_codec(WmallDecodeCtx *s)
+{
+    int ich, ilms;
+    s->mclms_recent = s->mclms_order * s->num_channels;
+    for (ich = 0; ich < s->num_channels; ich++)
+        for (ilms = 0; ilms < s->cdlms_ttl[ich]; ilms++)
+            s->cdlms[ich][ilms].recent = s->cdlms[ich][ilms].order;
+}
+
+
+
 /**
  *@brief Decode a single subframe (block).
  *@param s codec context

