commit 84004c37192dc91a8dcc9f213ca2cfa22b4f40e4
Author: Timo Sirainen <tss@iki.fi>
Date:   Thu Jul 12 02:23:59 2007 +0300

    Header lookups from cache returned always "doesn't exist".
    
    --HG--
    branch : HEAD

diff --git a/src/lib-index/mail-cache-lookup.c b/src/lib-index/mail-cache-lookup.c
index db8095acc..59a175678 100644
--- a/src/lib-index/mail-cache-lookup.c
+++ b/src/lib-index/mail-cache-lookup.c
@@ -469,9 +469,9 @@ int mail_cache_lookup_headers(struct mail_cache_view *view, string_t *dest,
 		}
 
 	}
-	if (ret <= 0) {
+	if (ret < 0) {
 		t_pop();
-		return ret;
+		return -1;
 	}
 
 	/* check that all fields were found */

