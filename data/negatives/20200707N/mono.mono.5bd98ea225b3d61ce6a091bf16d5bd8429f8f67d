commit 5bd98ea225b3d61ce6a091bf16d5bd8429f8f67d
Author: Gonzalo Paniagua Javier <gonzalo.mono@gmail.com>
Date:   Fri Aug 25 08:14:38 2006 +0000

    do not exit after the first read!
    
    svn path=/trunk/mono/; revision=64344

diff --git a/eglib/src/gspawn.c b/eglib/src/gspawn.c
index cf849f5f355..3cfa0c08a96 100644
--- a/eglib/src/gspawn.c
+++ b/eglib/src/gspawn.c
@@ -85,8 +85,7 @@ read_pipes (int outfd, gchar **out_str, int errfd, gchar **err_str)
 				err_closed = (nread <= 0);
 			}
 		}
-		
-	} while (res == -1 && errno == EINTR);
+	} while (res > 0 || (res == -1 && errno == EINTR));
 
 	g_free (buffer);
 	if (out_str)

