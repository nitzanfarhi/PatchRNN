commit 65d29cbc57fccebdf553b01ba6e4694012d2469d
Author: Christian Brauner <christian.brauner@canonical.com>
Date:   Mon Nov 21 22:31:39 2016 +0100

    cgroups: handle non-existent isolcpus file
    
    If the file "/sys/devices/system/cpu/isolated" doesn't exist, we can't just
    simply bail. We still need to check whether we need to copy the parents cpu
    settings.
    
    Signed-off-by: Christian Brauner <christian.brauner@canonical.com>

diff --git a/src/lxc/cgroups/cgfsng.c b/src/lxc/cgroups/cgfsng.c
index 285fd98e..d3215d76 100644
--- a/src/lxc/cgroups/cgfsng.c
+++ b/src/lxc/cgroups/cgfsng.c
@@ -454,6 +454,18 @@ static bool filter_and_set_cpus(char *path, bool am_initialized)
 	if (!file_exists(__ISOL_CPUS)) {
 		/* This system doesn't expose isolated cpus. */
 		DEBUG("Path: "__ISOL_CPUS" to read isolated cpus from does not exist.\n");
+		cpulist = posscpus;
+		/* No isolated cpus but we weren't already initialized by
+		 * someone. We should simply copy the parents cpuset.cpus
+		 * values.
+		 */
+		if (!am_initialized) {
+			DEBUG("Copying cpuset of parent cgroup.");
+			goto copy_parent;
+		}
+		/* No isolated cpus but we were already initialized by someone.
+		 * Nothing more to do for us.
+		 */
 		goto on_success;
 	}
 

