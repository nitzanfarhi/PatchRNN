commit 1490f879e2f8230fa00af4913eef9141208757f0
Author: inaam <>
Date:   Mon Sep 14 14:20:48 2009 +0000

    branches/zip  rb://159
    
    In case of pages that are not made young the counter is incremented
    only when the page in question is 'old'. In case of pages that are
    made young the counter is incremented in case of all pages. For apple
    to apple comparison this patch changes the 'young-making' counter to
    consider only 'old' blocks.
    
    Approved by: Marko

diff --git a/buf/buf0lru.c b/buf/buf0lru.c
index dd632ace4ac..d3a79d62d3f 100644
--- a/buf/buf0lru.c
+++ b/buf/buf0lru.c
@@ -1273,7 +1273,10 @@ buf_LRU_make_block_young(
 	buf_page_t*	bpage)	/*!< in: control block */
 {
 	ut_ad(buf_pool_mutex_own());
-	buf_pool->stat.n_pages_made_young++;
+
+	if (bpage->old) {
+		buf_pool->stat.n_pages_made_young++;
+	}
 
 	buf_LRU_remove_block(bpage);
 	buf_LRU_add_block_low(bpage, FALSE);

