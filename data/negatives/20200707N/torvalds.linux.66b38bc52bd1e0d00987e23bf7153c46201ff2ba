commit 66b38bc52bd1e0d00987e23bf7153c46201ff2ba
Author: Michael Wang <wangyun@linux.vnet.ibm.com>
Date:   Mon Oct 8 16:59:18 2012 +0800

    rcu: split 'rcugp' to each flavor
    
    This patch add new 'rcugp' to each flavor's folder, now we could use:
            'cat /debugfs/rcu/rsp/rcugp'
    to get the selected rsp info.
    
    Signed-off-by: Michael Wang <wangyun@linux.vnet.ibm.com>
    Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>

diff --git a/kernel/rcutree_trace.c b/kernel/rcutree_trace.c
index cae417de4b94..c90d2a917def 100644
--- a/kernel/rcutree_trace.c
+++ b/kernel/rcutree_trace.c
@@ -360,6 +360,26 @@ static const struct file_operations rcugp_fops = {
 	.release = single_release,
 };
 
+static int new_show_rcugp(struct seq_file *m, void *v)
+{
+	struct rcu_state *rsp = (struct rcu_state *)m->private;
+	show_one_rcugp(m, rsp);
+	return 0;
+}
+
+static int new_rcugp_open(struct inode *inode, struct file *file)
+{
+	return single_open(file, new_show_rcugp, inode->i_private);
+}
+
+static const struct file_operations new_rcugp_fops = {
+	.owner = THIS_MODULE,
+	.open = new_rcugp_open,
+	.read = seq_read,
+	.llseek = no_llseek,
+	.release = seq_release,
+};
+
 static void print_one_rcu_pending(struct seq_file *m, struct rcu_data *rdp)
 {
 	if (!rdp->beenonline)
@@ -468,6 +488,12 @@ static int __init rcutree_trace_init(void)
 					goto free_out;
 			}
 #endif
+
+			retval = debugfs_create_file("rcugp", 0444,
+					rspdir, rsp, &new_rcugp_fops);
+			if (!retval)
+				goto free_out;
+
 	}
 
 	retval = debugfs_create_file("rcubarrier", 0444, rcudir,

