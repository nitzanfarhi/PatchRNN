commit 64298e528d436cfc0f5ae14ddf39768f57c648e5
Author: Daniel Stenberg <daniel@haxx.se>
Date:   Tue Sep 6 10:37:57 2005 +0000

    Use SOCK_DGRAM for TFTP. Consider setting this up at one central place, we
    have this check done on far too many places by now...

diff --git a/lib/hostthre.c b/lib/hostthre.c
index 13761c587..ebd9e7dc5 100644
--- a/lib/hostthre.c
+++ b/lib/hostthre.c
@@ -804,7 +804,10 @@ Curl_addrinfo *Curl_getaddrinfo(struct connectdata *conn,
 
   memset(&hints, 0, sizeof(hints));
   hints.ai_family = pf;
-  hints.ai_socktype = SOCK_STREAM;
+  if(conn->protocol & PROT_TFTP)
+    hints.ai_socktype = SOCK_DGRAM;
+  else
+    hints.ai_socktype = SOCK_STREAM;
   hints.ai_flags = AI_CANONNAME;
   itoa(port, sbuf, 10);
 

