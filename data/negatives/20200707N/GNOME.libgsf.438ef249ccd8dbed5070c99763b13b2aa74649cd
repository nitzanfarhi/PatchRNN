commit 438ef249ccd8dbed5070c99763b13b2aa74649cd
Author: Morten Welinder <mortenw@src.gnome.org>
Date:   Wed Mar 23 03:22:21 2005 +0000

    Make it compile, even.

diff --git a/gsf/gsf-output-stdio.c b/gsf/gsf-output-stdio.c
index 702bcbe..d311176 100644
--- a/gsf/gsf-output-stdio.c
+++ b/gsf/gsf-output-stdio.c
@@ -127,7 +127,7 @@ file_is_writable (const char *filename)
 	return retval;
 #else
 	/* This should probably use eaccess if available.  */
-	return access (real_filename, W_OK) == 0;
+	return access (filename, W_OK) == 0;
 #endif
 }
 
@@ -205,10 +205,10 @@ gsf_output_stdio_new (char const *filename, GError **err)
 			if (err != NULL) {
 				char *dname = g_filename_display_name
 					(real_filename);
-				*err = g_error_new (gsf_output_error (), 0,
+				*err = g_error_new (gsf_output_error_id (), 0,
 						    "%s: Is not a regular file",
 						    dname);
-				g_free (utf8name);
+				g_free (dname);
 			}
 			goto failure;
 		}

