commit 5b17146a7cc82f7bb797f295207fa5fdf2860518
Author: castaglia <castaglia>
Date:   Wed Dec 15 02:02:55 2010 +0000

    Make sure that mod_ifsession won't remove all Protocols config_recs by
    marking it with the proper CF_MERGEDOWN_MULTI flag.

diff --git a/modules/mod_core.c b/modules/mod_core.c
index 8e78c5d4d..ba2be393b 100644
--- a/modules/mod_core.c
+++ b/modules/mod_core.c
@@ -25,7 +25,7 @@
  */
 
 /* Core FTPD module
- * $Id: mod_core.c,v 1.386 2010-12-15 00:57:04 castaglia Exp $
+ * $Id: mod_core.c,v 1.387 2010-12-15 02:02:55 castaglia Exp $
  */
 
 #include "conf.h"
@@ -1285,6 +1285,7 @@ MODRET set_protocols(cmd_rec *cmd) {
   }
 
   c->argv[0] = list;
+  c->flags |= CF_MERGEDOWN_MULTI;
 
   return PR_HANDLED(cmd);
 }

