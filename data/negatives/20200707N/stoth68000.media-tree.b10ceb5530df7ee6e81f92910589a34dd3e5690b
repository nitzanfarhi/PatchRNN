commit b10ceb5530df7ee6e81f92910589a34dd3e5690b
Author: Yinghai Lu <yinghai@kernel.org>
Date:   Mon Apr 20 18:35:40 2009 -0700

    x86/PCI: don't bother with root quirks if _CRS is used
    
    It will be overwriten later if _CRS is used, so don't bother to set it.
    
    Signed-off-by: Yinghai Lu <yinghai@kernel.org>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

diff --git a/arch/x86/pci/amd_bus.c b/arch/x86/pci/amd_bus.c
index e121ee050f7c..f893d6a6e803 100644
--- a/arch/x86/pci/amd_bus.c
+++ b/arch/x86/pci/amd_bus.c
@@ -100,6 +100,10 @@ void x86_pci_root_bus_res_quirks(struct pci_bus *b)
 	int j;
 	struct pci_root_info *info;
 
+	/* don't go for it if _CRS is used */
+	if (pci_probe & PCI_USE__CRS)
+		return;
+
 	/* if only one root bus, don't need to anything */
 	if (pci_root_num < 2)
 		return;

