commit 8f2ddaac302a8ca364cb04efb19cd3b5cd058910
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Mar 21 14:14:03 2015 +1100

    netlink: Remove netlink_compare_arg.trailer
    
    Instead of computing the offset from trailer, this patch computes
    netlink_compare_arg_len from the offset of portid and then adds 4
    to it.  This allows trailer to be removed.
    
    Reported-by: David Miller <davem@davemloft.net>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/netlink/af_netlink.c b/net/netlink/af_netlink.c
index 72c6b55af741..651792141f07 100644
--- a/net/netlink/af_netlink.c
+++ b/net/netlink/af_netlink.c
@@ -974,10 +974,11 @@ struct netlink_compare_arg
 {
 	possible_net_t pnet;
 	u32 portid;
-	char trailer[];
 };
 
-#define netlink_compare_arg_len offsetof(struct netlink_compare_arg, trailer)
+/* Doing sizeof directly may yield 4 extra bytes on 64-bit. */
+#define netlink_compare_arg_len \
+	(offsetof(struct netlink_compare_arg, portid) + sizeof(u32))
 
 static inline int netlink_compare(struct rhashtable_compare_arg *arg,
 				  const void *ptr)

