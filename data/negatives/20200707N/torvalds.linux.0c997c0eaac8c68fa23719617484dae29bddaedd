commit 0c997c0eaac8c68fa23719617484dae29bddaedd
Author: Lars-Peter Clausen <lars@metafoo.de>
Date:   Wed Jul 22 00:33:06 2009 +0200

    S3C24XX: GPIO: Fix pin range check in s3c_gpiolib_getchip
    
    In the s3c_gpiolib_getchip implementation for s3c24xx the check whether a pin is
    in the gpio banks range is reversed. Thus the function returns NULL for valid
    pins and the gpio chip if its not valid.
    
    As a result gpio states are not saved/restored properly during suspend/resume.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>

diff --git a/arch/arm/mach-s3c2410/include/mach/gpio-core.h b/arch/arm/mach-s3c2410/include/mach/gpio-core.h
index 8fe192081d3a..f8b879a7973c 100644
--- a/arch/arm/mach-s3c2410/include/mach/gpio-core.h
+++ b/arch/arm/mach-s3c2410/include/mach/gpio-core.h
@@ -28,7 +28,7 @@ static inline struct s3c_gpio_chip *s3c_gpiolib_getchip(unsigned int pin)
 		return NULL;
 
 	chip = &s3c24xx_gpios[pin/32];
-	return (S3C2410_GPIO_OFFSET(pin) > chip->chip.ngpio) ? chip : NULL;
+	return (S3C2410_GPIO_OFFSET(pin) < chip->chip.ngpio) ? chip : NULL;
 }
 
 #endif /* __ASM_ARCH_GPIO_CORE_H */

