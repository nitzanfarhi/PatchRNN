commit 8e9cbd7d10c7a7879501818b8807ffa94194c941
Author: Dave Beckett <dave@dajobe.org>
Date:   Tue Feb 11 16:43:32 2003 +0000

    (raptor_xml_parse_chunk_): Make an empty rdf/xml bytestream an
    illegal doc (like expat) and return an error.

diff --git a/src/raptor_parse.c b/src/raptor_parse.c
index 73da75b9..6dc21212 100644
--- a/src/raptor_parse.c
+++ b/src/raptor_parse.c
@@ -1585,8 +1585,13 @@ raptor_xml_parse_chunk_(raptor_parser* rdf_parser, const unsigned char *buffer,
   
 #ifdef RAPTOR_XML_LIBXML
   if(!xc) {
-    if(!len) /* no data given at all */
-      return 0;
+    if(!len) {
+      /* no data given at all - emit a similar message to expat */
+      raptor_update_document_locator(rdf_parser);
+      raptor_parser_error(rdf_parser, "XML Parsing failed - %s",
+                          "no element found");
+      return 1;
+    }
 
     xc = xmlCreatePushParserCtxt(&rdf_xml_parser->sax, rdf_parser,
                                  (char*)buffer, len, 
diff --git a/src/raptor_rdfxml.c b/src/raptor_rdfxml.c
index 73da75b9..6dc21212 100644
--- a/src/raptor_rdfxml.c
+++ b/src/raptor_rdfxml.c
@@ -1585,8 +1585,13 @@ raptor_xml_parse_chunk_(raptor_parser* rdf_parser, const unsigned char *buffer,
   
 #ifdef RAPTOR_XML_LIBXML
   if(!xc) {
-    if(!len) /* no data given at all */
-      return 0;
+    if(!len) {
+      /* no data given at all - emit a similar message to expat */
+      raptor_update_document_locator(rdf_parser);
+      raptor_parser_error(rdf_parser, "XML Parsing failed - %s",
+                          "no element found");
+      return 1;
+    }
 
     xc = xmlCreatePushParserCtxt(&rdf_xml_parser->sax, rdf_parser,
                                  (char*)buffer, len, 

