commit 618b0fe9ab5538d4b0ca1e213d7bd77684d01d4d
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Mon Sep 28 13:03:30 2009 +0200

    target-mips: log instructions start in TCG code
    
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

diff --git a/target-mips/translate.c b/target-mips/translate.c
index aabb69c2df..42a5753e27 100644
--- a/target-mips/translate.c
+++ b/target-mips/translate.c
@@ -7660,6 +7660,10 @@ static void decode_opc (CPUState *env, DisasContext *ctx)
         gen_goto_tb(ctx, 1, ctx->pc + 4);
         gen_set_label(l1);
     }
+
+    if (unlikely(qemu_loglevel_mask(CPU_LOG_TB_OP)))
+        tcg_gen_debug_insn_start(ctx->pc);
+
     op = MASK_OP_MAJOR(ctx->opcode);
     rs = (ctx->opcode >> 21) & 0x1f;
     rt = (ctx->opcode >> 16) & 0x1f;

