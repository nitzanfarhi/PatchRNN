commit 9f572b7d4b4159a5e55ad796289db6453faa28d1
Author: mskold/marty@mysql.com/linux.site <>
Date:   Mon Nov 27 11:49:43 2006 +0100

    bug#24470  MySQL Servers crashes during creating new tables with blob column: fix of error handling at resource shortage

diff --git a/storage/ndb/src/ndbapi/NdbDictionaryImpl.cpp b/storage/ndb/src/ndbapi/NdbDictionaryImpl.cpp
index 42ef7bbbaee..d626be1bd72 100644
--- a/storage/ndb/src/ndbapi/NdbDictionaryImpl.cpp
+++ b/storage/ndb/src/ndbapi/NdbDictionaryImpl.cpp
@@ -2299,7 +2299,7 @@ NdbDictionaryImpl::createTable(NdbTableImpl &t)
   // blob tables - use "t2" to get values set by kernel
   if (t2->m_noOfBlobs != 0 && createBlobTables(*t2) != 0) {
     int save_code = m_error.code;
-    (void)dropTable(*t2);
+    (void)dropTableGlobal(*t2);
     m_error.code = save_code;
     delete t2;
     DBUG_RETURN(-1);

