commit 9db3f500089b9d44153d047604d2037aa10d3e80
Author: stevesk <stevesk@openbsd.org>
Date:   Fri Feb 9 16:49:47 2007 +0000

    return on ECONNREFUSED so we don't fall through to 'result <
    BOOTP_MIN_LEN' and display discarding message.
    
    ok henning@ claudio@

diff --git a/usr.sbin/dhcrelay/dhcrelay.c b/usr.sbin/dhcrelay/dhcrelay.c
index 0b7ca9acd0c..5bc0623b264 100644
--- a/usr.sbin/dhcrelay/dhcrelay.c
+++ b/usr.sbin/dhcrelay/dhcrelay.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: dhcrelay.c,v 1.28 2006/12/18 01:08:58 stevesk Exp $ */
+/*	$OpenBSD: dhcrelay.c,v 1.29 2007/02/09 16:49:47 stevesk Exp $ */
 
 /*
  * Copyright (c) 2004 Henning Brauer <henning@cvs.openbsd.org>
@@ -321,6 +321,9 @@ got_response(struct protocol *l)
 		    inet_ntoa(sp->to.sin_addr));
 		return;
 	}
+	if (result == -1 && errno == ECONNREFUSED)
+		return;
+
 	if (result == 0)
 		return;
 

