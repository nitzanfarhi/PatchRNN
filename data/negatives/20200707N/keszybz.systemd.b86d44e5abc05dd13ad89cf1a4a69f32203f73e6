commit b86d44e5abc05dd13ad89cf1a4a69f32203f73e6
Author: Lennart Poettering <lennart@poettering.net>
Date:   Tue May 18 04:05:27 2010 +0200

    unit: don't gc units that are still in STUB state

diff --git a/src/unit.c b/src/unit.c
index 1959b1b94..374d2e133 100644
--- a/src/unit.c
+++ b/src/unit.c
@@ -213,6 +213,9 @@ int unit_set_description(Unit *u, const char *description) {
 bool unit_check_gc(Unit *u) {
         assert(u);
 
+        if (u->meta.load_state == UNIT_STUB)
+                return true;
+
         if (UNIT_VTABLE(u)->no_gc)
                 return true;
 

