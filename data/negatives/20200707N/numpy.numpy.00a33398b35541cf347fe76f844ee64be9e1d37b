commit 00a33398b35541cf347fe76f844ee64be9e1d37b
Author: Chris Kerr <cjk34@cam.ac.uk>
Date:   Thu Sep 4 20:09:19 2014 +0100

    Changed the `goto fail` to a `return PyErr_NoMemory()`

diff --git a/numpy/f2py/src/fortranobject.c b/numpy/f2py/src/fortranobject.c
index efdf4a725..0e23c4c37 100644
--- a/numpy/f2py/src/fortranobject.c
+++ b/numpy/f2py/src/fortranobject.c
@@ -125,7 +125,10 @@ fortran_doc (FortranDataDef def) {
     if (def.doc!=NULL)
         size += strlen(def.doc);
     p = (char*)malloc (size);
-    if (p==NULL) goto fail;
+    if (p==NULL) {
+        /* No need to call free() because p is NULL */
+        return PyErr_NoMemory();
+    }
     p[0] = '\0'; /* make sure that the buffer has zero length */
     if (def.rank==-1) {
         if (def.doc==NULL) {

