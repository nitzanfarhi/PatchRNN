commit 2e54a6895e3e0cada8d194ace4f5baae643a073f
Author: Ben <ben.rosenfeld@intel.com>
Date:   Thu Mar 12 09:37:34 2015 -0400

    cfg80211: Process all pending regulatory requests/hints
    
    It is possible that there are several regulatory requests
    pending, but the processing of the last one does not call
    CRDA, and thus the other requests are not handled.
    
    Fix this by rescheduling the work until all requests have
    been processed.
    
    Signed-off-by: Ben Rosenfeld <ben.rosenfeld@intel.com>
    Signed-off-by: Ilan Peer <ilan.peer@intel.com>
    Signed-off-by: Johannes Berg <johannes.berg@intel.com>

diff --git a/net/wireless/reg.c b/net/wireless/reg.c
index d8671036c264..8c6cf52b9f1d 100644
--- a/net/wireless/reg.c
+++ b/net/wireless/reg.c
@@ -2159,6 +2159,13 @@ static void reg_process_pending_hints(void)
 	}
 
 	reg_process_hint(reg_request);
+
+	lr = get_last_request();
+
+	spin_lock(&reg_requests_lock);
+	if (!list_empty(&reg_requests_list) && lr && lr->processed)
+		schedule_work(&reg_work);
+	spin_unlock(&reg_requests_lock);
 }
 
 /* Processes beacon hints -- this has nothing to do with country IEs */

