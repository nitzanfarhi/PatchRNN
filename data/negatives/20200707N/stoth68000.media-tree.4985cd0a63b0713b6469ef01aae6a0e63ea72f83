commit 4985cd0a63b0713b6469ef01aae6a0e63ea72f83
Author: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
Date:   Fri Apr 27 22:00:10 2007 -0300

    ACPI: thinkpad-acpi: do not arm fan watchdog if it would not work
    
    Do not enable/rearm the fan control safety watchdog if we would not be able
    to do anything to the fan anyway.
    
    Signed-off-by: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
    Signed-off-by: Len Brown <len.brown@intel.com>

diff --git a/drivers/misc/thinkpad_acpi.c b/drivers/misc/thinkpad_acpi.c
index 7dc3a2206195..f824259fa611 100644
--- a/drivers/misc/thinkpad_acpi.c
+++ b/drivers/misc/thinkpad_acpi.c
@@ -3197,6 +3197,9 @@ static void fan_watchdog_reset(void)
 {
 	static int fan_watchdog_active = 0;
 
+	if (fan_control_access_mode == TPACPI_FAN_WR_NONE)
+		return;
+
 	if (fan_watchdog_active)
 		cancel_delayed_work(&fan_watchdog_task);
 

