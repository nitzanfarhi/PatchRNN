commit b0ec910a9f5799aa5983ea7e33ff75bd4ddb3120
Author: Andrew Beekhof <andrew@beekhof.net>
Date:   Fri Jan 14 13:35:43 2011 +0100

    High: PE: Bug lf#2518 - Avoid spamming the logs with errors for orphan resources
    
    Mercurial revision: 3ac6ac993d6dcadf15eca4f9382eee73d76f2fb7

diff --git a/pengine/clone.c b/pengine/clone.c
index 4edb2a7e4..b45e232a5 100644
--- a/pengine/clone.c
+++ b/pengine/clone.c
@@ -1161,8 +1161,10 @@ static enum pe_graph_flags clone_update_actions_interleave(
 	    first_action = find_first_action(first_child->actions, NULL, first_task, node);
 	    then_action = find_first_action(then_child->actions, NULL, then->task, node);
 	    
-	    CRM_CHECK(first_action != NULL, crm_err("No action found for %s in %s (first)", first_task, first_child->id));
-	    CRM_CHECK(then_action != NULL, crm_err("No action found for %s in %s (then)", then->task, then_child->id));
+	    CRM_CHECK(first_action != NULL || is_set(first_child->flags, pe_rsc_orphan),
+		      crm_err("No action found for %s in %s (first)", first_task, first_child->id));
+	    CRM_CHECK(then_action != NULL || is_set(then_child->flags, pe_rsc_orphan),
+		      crm_err("No action found for %s in %s (then)", then->task, then_child->id));
 	    if(first_action == NULL || then_action == NULL) {
 		continue;
 	    }

