commit a9fa4d11029f15250c5ecd2564bc628ca29ace85
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Dec 15 17:10:33 2006 +0000

    * Added parsing of P-Preferred-Identity header (RFC 3325).
    
    
    git-svn-id: https://openser.svn.sourceforge.net/svnroot/openser/trunk@1412 689a6050-402a-0410-94f2-e92a70836424

diff --git a/modules_k/tm/sip_msg.c b/modules_k/tm/sip_msg.c
index a26373c31..145c7ed9d 100644
--- a/modules_k/tm/sip_msg.c
+++ b/modules_k/tm/sip_msg.c
@@ -355,6 +355,7 @@ struct sip_msg*  sip_msg_cloner( struct sip_msg *org_msg, int *sip_msg_len )
 			case HDR_REFER_TO_T:
 			case HDR_SESSION_EXPIRES_T:
 			case HDR_MIN_SE_T:
+			case HDR_PPI_T:
 				/* we ignore them for now even if they have something parsed*/
 				break;
 
@@ -719,6 +720,11 @@ do { \
 					new_msg->rpid = new_hdr;
 				}
 				break;
+			case HDR_PPI_T:
+				if (!HOOK_SET(ppi)) {
+					new_msg->ppi = new_hdr;
+				}
+				break;
 			case HDR_REFER_TO_T:
 				if (!HOOK_SET(refer_to)) {
 					new_msg->refer_to = new_hdr;

