commit e29378ff886b574aba7402f885d0a62a9d728091
Author: Roberto Togni <r_togni@tiscali.it>
Date:   Thu Nov 15 21:04:06 2007 +0000

    Move dnet-ac3 byte-swapping code close to audio packet read code
    Fixed version of patch in
    [FFmpeg-devel] [PATCH 5/6] rmdec.c: move around rm_ac3_swap_bytes()
    
    Originally committed as revision 11039 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/rmdec.c b/libavformat/rmdec.c
index 254620a3b..aebfead65 100644
--- a/libavformat/rmdec.c
+++ b/libavformat/rmdec.c
@@ -615,6 +615,7 @@ ff_rm_parse_packet (AVFormatContext *s, AVStream *st, int len, AVPacket *pkt,
             }
         } else
             av_get_packet(pb, pkt, len);
+            rm_ac3_swap_bytes(st, pkt);
 
     } else
         av_get_packet(pb, pkt, len);
@@ -707,6 +708,7 @@ static int rm_read_packet(AVFormatContext *s, AVPacket *pkt)
             }
             pkt->size = len;
         }
+        rm_ac3_swap_bytes(st, pkt);
     } else {
         int seq=1;
 resync:
@@ -724,7 +726,6 @@ resync:
         }
     }
 
-    rm_ac3_swap_bytes(st, pkt);
     return 0;
 }
 

