commit 1b25584432a35965d05ae6fd8a16249b9fca76df
Author: mvgr <none@none>
Date:   Wed Jul 20 15:27:31 2005 -0700

    6297929 libpcp should not check for NULL request message data when request message data length is 0

diff --git a/usr/src/lib/libpcp/common/libpcp.c b/usr/src/lib/libpcp/common/libpcp.c
index 527462d142..9e7ce7efee 100644
--- a/usr/src/lib/libpcp/common/libpcp.c
+++ b/usr/src/lib/libpcp/common/libpcp.c
@@ -327,7 +327,7 @@ pcp_send_recv(int channel_fd, pcp_msg_t *req_msg, pcp_msg_t *resp_msg,
 	else
 		glvc_timeout = 0;
 
-	if ((datap = req_msg->msg_data) == NULL)
+	if ((req_msg->msg_len != 0) && ((datap = req_msg->msg_data) == NULL))
 		return (PCPL_INVALID_ARGS);
 
 	if (req_msg_hdr == NULL) {

