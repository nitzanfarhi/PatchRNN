commit 3766ed7214411b2306908cbb623f15d952b10c13
Author: Baptiste Coudurier <baptiste.coudurier@gmail.com>
Date:   Fri May 30 01:46:57 2008 +0000

    log error when writing frame to output
    
    Originally committed as revision 13548 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/ffserver.c b/ffserver.c
index acce0b3407..eb60deb775 100644
--- a/ffserver.c
+++ b/ffserver.c
@@ -2176,8 +2176,10 @@ static int http_prepare_data(HTTPContext *c)
                         pkt.pts = av_rescale_q(pkt.pts,
                                                c->fmt_in->streams[source_index]->time_base,
                                                ctx->streams[pkt.stream_index]->time_base);
-                    if (av_write_frame(ctx, &pkt))
+                    if (av_write_frame(ctx, &pkt) < 0) {
+                        http_log("Error writing frame to output\n");
                         c->state = HTTPSTATE_SEND_DATA_TRAILER;
+                    }
 
                     len = url_close_dyn_buf(ctx->pb, &c->pb_buffer);
                     c->cur_frame_bytes = len;

