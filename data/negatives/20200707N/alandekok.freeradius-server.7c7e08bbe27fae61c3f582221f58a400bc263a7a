commit 7c7e08bbe27fae61c3f582221f58a400bc263a7a
Author: aland <aland>
Date:   Thu Mar 15 18:06:12 2001 +0000

            Patch to include function sql_destroy_socket(), from
            Bernhard Reiter <bernhard@intevation.de>

diff --git a/src/modules/rlm_sql/drivers/rlm_sql_postgresql/sql_postgresql.c b/src/modules/rlm_sql/drivers/rlm_sql_postgresql/sql_postgresql.c
index dbb41aac5..eb3c88130 100644
--- a/src/modules/rlm_sql/drivers/rlm_sql_postgresql/sql_postgresql.c
+++ b/src/modules/rlm_sql/drivers/rlm_sql_postgresql/sql_postgresql.c
@@ -66,6 +66,24 @@ int sql_init_socket(SQLSOCK *sqlsocket, SQL_CONFIG *config) {
 	return 0;
 }
 
+/*************************************************************************
+ *
+ *	Function: sql_destroy_socket
+ *
+ *	Purpose: Free socket and any private connection data
+ *
+ *************************************************************************/
+int sql_destroy_socket(SQLSOCK *sqlsocket, SQL_CONFIG *config) {
+
+	rlm_sql_postgres_sock *postgres_sock = sqlsocket->conn;
+
+	free(postgres_sock);
+	free(sqlsocket);
+
+	return 0;
+}
+
+
 /*************************************************************************
  *
  *	Function: sql_query

