commit fbf4fb25d451e55f8829f123e3082e7844aeeddc
Author: Frank Warmerdam <warmerdam@pobox.com>
Date:   Thu Feb 7 19:45:02 2008 +0000

    Added EXTENT_PRIORITY layer processing option.
    
    
    git-svn-id: http://svn.osgeo.org/mapserver/trunk@7364 7532c77e-422f-0410-93f4-f0b67bdd69e2

diff --git a/mapdrawgdal.c b/mapdrawgdal.c
index a5b51634..da23be00 100644
--- a/mapdrawgdal.c
+++ b/mapdrawgdal.c
@@ -1594,6 +1594,7 @@ int msGetGDALGeoTransform( GDALDatasetH hDS, mapObj *map, layerObj *layer,
                            double *padfGeoTransform )
 
 {
+    const char *extent_priority = NULL;
 #if defined(USE_WMS_SVR) || defined (USE_WFS_SVR)
     rectObj  rect;
 #endif
@@ -1608,6 +1609,23 @@ int msGetGDALGeoTransform( GDALDatasetH hDS, mapObj *map, layerObj *layer,
     padfGeoTransform[4] = 0.0;
     padfGeoTransform[5] = -1.0;
     
+/* -------------------------------------------------------------------- */
+/*      Do we want to override GDAL with a worldfile if one is present? */
+/* -------------------------------------------------------------------- */
+    extent_priority = CSLFetchNameValue( layer->processing, 
+                                         "EXTENT_PRIORITY" );
+
+    if( extent_priority != NULL
+        && EQUALN(extent_priority,"WORLD",5) )
+    {
+	        if( GDALGetDescription(hDS) != NULL 
+            && GDALReadWorldFile(GDALGetDescription(hDS), "wld", 
+                                 padfGeoTransform) )
+        {
+            return MS_SUCCESS;
+        }
+    }
+
 /* -------------------------------------------------------------------- */
 /*      Try GDAL.                                                       */
 /*                                                                      */

