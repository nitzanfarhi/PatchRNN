commit 28d1dfadd3ca07e7ec1c3de4f82ac2b8ece4be91
Author: David Engraf <david.engraf@netcom.eu>
Date:   Thu Mar 20 10:53:52 2008 +0100

    USB: cdc-acm tell tty layer not to split things up.
    
    It ensures that the tty level do not split
    the send buffer into 2KB blocks.
    
    
    Signed-off-by: David Engraf <david.engraf@netcom.eu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/usb/class/cdc-acm.c b/drivers/usb/class/cdc-acm.c
index 0147ea39340e..1ded83b66af0 100644
--- a/drivers/usb/class/cdc-acm.c
+++ b/drivers/usb/class/cdc-acm.c
@@ -489,6 +489,7 @@ static int acm_tty_open(struct tty_struct *tty, struct file *filp)
 	else
 		rv = 0;
 
+	set_bit(TTY_NO_WRITE_SPLIT, &tty->flags);
 	tty->driver_data = acm;
 	acm->tty = tty;
 

