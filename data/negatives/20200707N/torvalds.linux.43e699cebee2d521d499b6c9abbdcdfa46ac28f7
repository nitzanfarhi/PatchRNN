commit 43e699cebee2d521d499b6c9abbdcdfa46ac28f7
Author: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Date:   Mon Oct 14 13:06:15 2013 -0700

    Revert "usb: musb: gadget: fix otg active status flag"
    
    This reverts commit 9b0a1de3c85d99d881c86a29b3d52da7b9c7bd61.
    
    Aaro writes:
            With v3.12-rc4 I can no longer connect to N800 (OMAP2) with USB
            (peripheral, g_ether).
    
            According to git bisect this is caused by:
    
            9b0a1de3c85d99d881c86a29b3d52da7b9c7bd61 is the first bad commit
    
    So revert this patch, as Felipe says:
            It's unfortunate that tusb6010 is so messed up
    
    Reported-by: Aaro Koskinen <aaro.koskinen@iki.fi>
    Acked-by: Felipe Balbi <balbi@ti.com>
    Cc: Bin Liu <b-liu@ti.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/usb/musb/musb_gadget.c b/drivers/usb/musb/musb_gadget.c
index 07bf4dfddeaa..3671898a4535 100644
--- a/drivers/usb/musb/musb_gadget.c
+++ b/drivers/usb/musb/musb_gadget.c
@@ -1853,6 +1853,7 @@ static int musb_gadget_start(struct usb_gadget *g,
 	musb->gadget_driver = driver;
 
 	spin_lock_irqsave(&musb->lock, flags);
+	musb->is_active = 1;
 
 	otg_set_peripheral(otg, &musb->g);
 	musb->xceiv->state = OTG_STATE_B_IDLE;

