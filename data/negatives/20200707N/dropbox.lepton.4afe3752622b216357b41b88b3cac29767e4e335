commit 4afe3752622b216357b41b88b3cac29767e4e335
Author: Daniel Reiter Horn <danielrh@dropbox.com>
Date:   Thu Nov 12 16:30:34 2015 -0800

    no reason to check things beyond those we will serialize

diff --git a/src/lepton/jpgcoder.cc b/src/lepton/jpgcoder.cc
index 01d5c5b..bae8b73 100644
--- a/src/lepton/jpgcoder.cc
+++ b/src/lepton/jpgcoder.cc
@@ -2478,7 +2478,7 @@ bool check_value_range( void )
     for ( cmp = 0; cmp < cmpc; cmp++ ) {
     for ( bpos = 0; bpos < 64; bpos++ ) {
         absmax = MAX_V( cmp, bpos );
-        for ( dpos = 0; dpos < cmpnfo[cmp].bc; dpos++ ) {
+        for ( dpos = 0; dpos < cmpnfo[cmp].bc && dpos < max_dpos[cmp] ; dpos++ ) {
             if ( ( colldata.at_nosync((BlockType)cmp,bpos,dpos) > absmax ) ||
                  ( colldata.at_nosync((BlockType)cmp,bpos,dpos) < -absmax ) ) {
                 if (!early_eof_encountered) {

