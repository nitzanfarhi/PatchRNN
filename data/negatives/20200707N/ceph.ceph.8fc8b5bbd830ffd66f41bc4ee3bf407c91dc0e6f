commit 8fc8b5bbd830ffd66f41bc4ee3bf407c91dc0e6f
Author: Sage Weil <sage@newdream.net>
Date:   Mon Apr 27 13:54:10 2009 -0700

    osd: fix merge_log split point
    
    Look at full eversion, not just .version (part 2).

diff --git a/src/osd/PG.cc b/src/osd/PG.cc
index a115c03c73..3450c0dc48 100644
--- a/src/osd/PG.cc
+++ b/src/osd/PG.cc
@@ -341,7 +341,7 @@ void PG::merge_log(ObjectStore::Transaction& t,
     list<Log::Entry>::iterator p = log.log.end();
     while (p != log.log.begin()) {
       p--;
-      if (p->version.version <= log.top.version) {
+      if (p->version <= log.top) {
 	dout(10) << "merge_log split point is " << *p << dendl;
 
 	if (p->version < log.top && p->version < oldest_update) {

