commit 3968ce800f45d8795ceb6f186c1efe420c98e1b0
Author: Christof Schmitt <christof.schmitt@de.ibm.com>
Date:   Wed Jul 2 10:56:32 2008 +0200

    [SCSI] zfcp: Fix error checking for ELS ADISC requests
    
    Correctly check the status for ELS ADISC requests. 0 means success.
    
    Signed-off-by: Christof Schmitt <christof.schmitt@de.ibm.com>
    Signed-off-by: Swen Schillig <swen@vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>

diff --git a/drivers/s390/scsi/zfcp_fc.c b/drivers/s390/scsi/zfcp_fc.c
index 34c9b20ce493..5d9367d9a12d 100644
--- a/drivers/s390/scsi/zfcp_fc.c
+++ b/drivers/s390/scsi/zfcp_fc.c
@@ -263,7 +263,7 @@ static void zfcp_fc_adisc_handler(unsigned long data)
 	struct zfcp_port *port = adisc->els.port;
 	struct zfcp_ls_adisc_acc *ls_adisc = &adisc->ls_adisc_acc;
 
-	if (!adisc->els.status) {
+	if (adisc->els.status) {
 		/* request rejected or timed out */
 		zfcp_erp_port_forced_reopen(port, 0, 63, NULL);
 		goto out;

