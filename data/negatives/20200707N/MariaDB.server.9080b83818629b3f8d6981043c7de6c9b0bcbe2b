commit 9080b83818629b3f8d6981043c7de6c9b0bcbe2b
Author: unknown <hf@deer.(none)>
Date:   Tue Sep 7 17:28:26 2004 +0500

    Code cleanup
    
    
    sql/item_strfunc.cc:
      unpack_filename changed with fn_format's hint
    sql/sql_load.cc:
      unpack_filename changed with fn_format's hint

diff --git a/sql/item_strfunc.cc b/sql/item_strfunc.cc
index 5e4db6f392b..91fd3b145bc 100644
--- a/sql/item_strfunc.cc
+++ b/sql/item_strfunc.cc
@@ -2422,9 +2422,8 @@ String *Item_load_file::val_str(String *str)
       )
     goto err;
 
-  (void) fn_format(path, file_name->c_ptr(),
-		   mysql_real_data_home, "", MY_RELATIVE_PATH);
-  unpack_filename(path, path);		/* Convert to system format */
+  (void) fn_format(path, file_name->c_ptr(), mysql_real_data_home, "",
+		   MY_RELATIVE_PATH | MY_UNPACK_FILENAME);
 
   if (!my_stat(path, &stat_info, MYF(MY_WME)))
     goto err;
diff --git a/sql/sql_load.cc b/sql/sql_load.cc
index 8ffd73e7ea1..e1f0b1f9501 100644
--- a/sql/sql_load.cc
+++ b/sql/sql_load.cc
@@ -182,13 +182,13 @@ int mysql_load(THD *thd,sql_exchange *ex,TABLE_LIST *table_list,
     if (!dirname_length(ex->file_name))
     {
       strxnmov(name, FN_REFLEN, mysql_real_data_home, tdb, NullS);
-      (void) fn_format(name, ex->file_name, name, "", MY_RELATIVE_PATH);
-      unpack_filename(name,name);
+      (void) fn_format(name, ex->file_name, name, "",
+		       MY_RELATIVE_PATH | MY_UNPACK_FILENAME);
     }
     else
     {
-      (void) fn_format(name, ex->file_name, mysql_real_data_home, "", MY_RELATIVE_PATH);
-      unpack_filename(name,name);
+      (void) fn_format(name, ex->file_name, mysql_real_data_home, "",
+		       MY_RELATIVE_PATH | MY_UNPACK_FILENAME);
 #if !defined(__WIN__) && !defined(OS2) && ! defined(__NETWARE__)
       MY_STAT stat_info;
       if (!my_stat(name,&stat_info,MYF(MY_WME)))

