commit 1072c75e384878fd7d4f71edb7f72cba56e3ca46
Author: Cheng Zhao <zcbenz@gmail.com>
Date:   Wed Jan 3 19:12:16 2018 +0900

    Closing asar file should be syncronous

diff --git a/atom/common/asar/archive.cc b/atom/common/asar/archive.cc
index dadc84c8b..84f9cd8dd 100644
--- a/atom/common/asar/archive.cc
+++ b/atom/common/asar/archive.cc
@@ -138,11 +138,8 @@ Archive::~Archive() {
     file_.TakePlatformFile();
   }
 #endif
-  base::PostTaskWithTraits(
-      FROM_HERE,
-      {base::MayBlock(), base::TaskPriority::BACKGROUND,
-       base::TaskShutdownBehavior::CONTINUE_ON_SHUTDOWN},
-      base::Bind([](base::File file) { file.Close(); }, Passed(&file_)));
+  base::ThreadRestrictions::ScopedAllowIO allow_io;
+  file_.Close();
 }
 
 bool Archive::Init() {

