commit dca8111a98a4f8dc37eb44a004c5c36f76abc18f
Author: xie xingguo <xie.xingguo@zte.com.cn>
Date:   Fri Feb 5 12:07:33 2016 +0800

    os/kstore: assign nid for newly created onode
    
    Signed-off-by: xie xingguo <xie.xingguo@zte.com.cn>

diff --git a/src/os/kstore/KStore.cc b/src/os/kstore/KStore.cc
index cba793f3ca..50af01eaab 100644
--- a/src/os/kstore/KStore.cc
+++ b/src/os/kstore/KStore.cc
@@ -3595,6 +3595,7 @@ int KStore::_clone_range(TransContext *txc,
   newo = c->get_onode(new_oid, true);
   assert(newo);
   newo->exists = true;
+  _assign_nid(txc, newo);
 
   r = _do_read(oldo, srcoff, length, bl, 0);
   if (r < 0)

