commit 25bda5ae3caa6fe3f7d36ca2f8ee0d3070bf2f67
Author: Dmitry Stogov <dmitry@zend.com>
Date:   Thu Aug 14 12:01:28 2014 +0400

    Fixed assignment of reference to itself

diff --git a/Zend/zend_execute.c b/Zend/zend_execute.c
index 700ce4b090..f3e97d71d0 100644
--- a/Zend/zend_execute.c
+++ b/Zend/zend_execute.c
@@ -933,6 +933,9 @@ static inline zval* zend_assign_to_variable(zval *variable_ptr, zval *value TSRM
 						value = Z_REFVAL_P(value);
 					}
 					if (Z_REFCOUNTED_P(value)) {
+						if (UNEXPECTED(variable_ptr == value)) {
+							return variable_ptr;
+						}
 						Z_ADDREF_P(value);
 					}
 				}

