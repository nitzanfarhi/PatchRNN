commit fa3e6ce27104115644d10e3116d3135c5f94f691
Author: Nigel Stewart <nigels@users.sourceforge.net>
Date:   Thu Aug 8 22:08:00 2013 -0500

    gcc complains about _MSC_VER being an undefined macro.

diff --git a/mongoose.h b/mongoose.h
index 0e73432..5e82579 100644
--- a/mongoose.h
+++ b/mongoose.h
@@ -234,9 +234,9 @@ enum {
 
 // Macros for enabling compiler-specific checks for printf-like arguments.
 #undef PRINTF_FORMAT_STRING
-#if _MSC_VER >= 1400
+#if defined(_MSC_VER) && _MSC_VER >= 1400
 #include <sal.h>
-#if _MSC_VER > 1400
+#if defined(_MSC_VER) && _MSC_VER > 1400
 #define PRINTF_FORMAT_STRING(s) _Printf_format_string_ s
 #else
 #define PRINTF_FORMAT_STRING(s) __format_string s

