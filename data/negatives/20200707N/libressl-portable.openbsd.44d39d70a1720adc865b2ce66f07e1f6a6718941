commit 44d39d70a1720adc865b2ce66f07e1f6a6718941
Author: guenther <>
Date:   Thu Feb 12 04:26:46 2015 +0000

    qsort() compare functions MUST use memcmp() instead of bcmp() to have
    the correct return value.  Prefer memcmp() anyway for portability.
    
    ok jsing@ tedu@

diff --git a/src/usr.bin/openssl/certhash.c b/src/usr.bin/openssl/certhash.c
index a7a42d7f5..7458add90 100644
--- a/src/usr.bin/openssl/certhash.c
+++ b/src/usr.bin/openssl/certhash.c
@@ -121,7 +121,8 @@ hashinfo_compare(const void *a, const void *b)
 	rv = hia->hash - hib->hash;
 	if (rv != 0)
 		return (rv);
-	rv = bcmp(hia->fingerprint, hib->fingerprint, sizeof(hia->fingerprint));
+	rv = memcmp(hia->fingerprint, hib->fingerprint,
+	    sizeof(hia->fingerprint));
 	if (rv != 0)
 		return (rv);
 	return strcmp(hia->filename, hib->filename);
@@ -404,7 +405,8 @@ certhash_index(struct hashinfo *head, const char *name)
 	for (entry = head; entry != NULL; entry = entry->next) {
 		if (last != NULL) {
 			if (entry->hash == last->hash) {
-				if (bcmp(entry->fingerprint, last->fingerprint,
+				if (memcmp(entry->fingerprint,
+				    last->fingerprint,
 				    sizeof(entry->fingerprint)) == 0) {
 					fprintf(stderr, "WARNING: duplicate %s "
 					    "in %s (using %s), ignoring...\n",

