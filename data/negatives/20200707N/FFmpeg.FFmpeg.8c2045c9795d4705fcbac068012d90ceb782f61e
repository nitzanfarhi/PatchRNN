commit 8c2045c9795d4705fcbac068012d90ceb782f61e
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Thu Mar 29 04:11:55 2012 +0200

    avfilter: set w/h in avfilter_fill_frame_from_video_buffer_ref().
    
    This fixes issues with AVFrame w/h being wrong in some cases
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavfilter/avcodec.c b/libavfilter/avcodec.c
index 455ef9283a..e4cae9b3a6 100644
--- a/libavfilter/avcodec.c
+++ b/libavfilter/avcodec.c
@@ -84,6 +84,8 @@ int avfilter_fill_frame_from_video_buffer_ref(AVFrame *frame,
     frame->key_frame        = picref->video->key_frame;
     frame->pict_type        = picref->video->pict_type;
     frame->sample_aspect_ratio = picref->video->sample_aspect_ratio;
+    frame->width            = picref->video->w;
+    frame->height           = picref->video->h;
 
     return 0;
 }

