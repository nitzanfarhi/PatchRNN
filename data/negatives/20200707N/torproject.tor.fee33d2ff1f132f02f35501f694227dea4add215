commit fee33d2ff1f132f02f35501f694227dea4add215
Author: Nick Mathewson <nickm@torproject.org>
Date:   Tue Aug 29 21:59:20 2006 +0000

     r8682@Kushana:  nickm | 2006-08-29 17:58:59 -0400
     Fix compilation on GCC2 by disabling fun attributes unless __GNUC_MAJOR__ >= 3.
    
    
    svn:r8303

diff --git a/src/common/compat.h b/src/common/compat.h
index e4430c6a5..8511cb2cd 100644
--- a/src/common/compat.h
+++ b/src/common/compat.h
@@ -90,7 +90,7 @@ extern INLINE double U64_TO_DBL(uint64_t x) {
 #endif
 
 /* GCC has several useful attributes. */
-#ifdef __GNUC__
+#ifdef __GNUC__ && __GNUC_MAJOR__ >= 3
 #define ATTR_NORETURN __attribute__((noreturn))
 #define ATTR_PURE __attribute__((pure))
 #define ATTR_MALLOC __attribute__((malloc))

