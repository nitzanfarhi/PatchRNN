commit e1ac38f8dd04c29d2d4140f5a492cdaf25d72901
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jun 5 20:31:49 2012 -0400

    Fix inert buffer set_length() with zero
    
    Oops!

diff --git a/src/hb-buffer.cc b/src/hb-buffer.cc
index 20de022c..c27cc156 100644
--- a/src/hb-buffer.cc
+++ b/src/hb-buffer.cc
@@ -694,6 +694,9 @@ hb_bool_t
 hb_buffer_set_length (hb_buffer_t  *buffer,
 		      unsigned int  length)
 {
+  if (unlikely (hb_object_is_inert (buffer)))
+    return length == 0;
+
   if (!buffer->ensure (length))
     return FALSE;
 

