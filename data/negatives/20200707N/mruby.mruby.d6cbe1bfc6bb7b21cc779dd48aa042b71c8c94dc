commit d6cbe1bfc6bb7b21cc779dd48aa042b71c8c94dc
Author: Carlo Prelz <carlo.prelz@ispw.unibe.ch>
Date:   Fri Feb 26 09:21:33 2016 +0100

    The original code crashed when mrb->backtrace.n grew to 16.
    It looks like the logic to reallocate the backtrace was flawed,
    based on the wrong variable (loc_raw->i, which, as I have verified,
    decreases from 16 to 0 instead of increasing)
    
    I am not sure if this is the correct fix

diff --git a/src/backtrace.c b/src/backtrace.c
index 2fce6645..45a8cc2d 100644
--- a/src/backtrace.c
+++ b/src/backtrace.c
@@ -330,7 +330,7 @@ save_backtrace_i(mrb_state *mrb,
 {
   mrb_backtrace_entry *entry;
 
-  if (loc_raw->i >= mrb->backtrace.n_allocated) {
+  if (mrb->backtrace.n >= mrb->backtrace.n_allocated) {
     int new_n_allocated;
     if (mrb->backtrace.n_allocated == 0) {
       new_n_allocated = 8;

