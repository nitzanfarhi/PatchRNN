commit ba54b7451bc5727d12c6195a4197528b4191f69e
Author: Con Kolivas <kernel@kolivas.org>
Date:   Sun Mar 17 16:28:29 2013 +1100

    Update the hashmeter at most 5 times per second.
    
    Conflicts:
            miner.c

diff --git a/miner.c b/miner.c
index 2b5c52ec..ec8d0cd2 100644
--- a/miner.c
+++ b/miner.c
@@ -5834,7 +5834,8 @@ void hashmeter2(struct thr_info *thr)
 	
 	gettimeofday(&tv_now, NULL);
 	timersub(&tv_now, &thr->tv_lastupdate, &tv_elapsed);
-	if (tv_elapsed.tv_sec >= opt_log_interval) {
+	/* Update the hashmeter at most 5 times per second */
+	if (tv_elapsed.tv_sec > 0 || tv_elapsed.tv_usec > 200) {
 		hashmeter(thr->id, &tv_elapsed, thr->hashes_done);
 		thr->hashes_done = 0;
 		thr->tv_lastupdate = tv_now;

