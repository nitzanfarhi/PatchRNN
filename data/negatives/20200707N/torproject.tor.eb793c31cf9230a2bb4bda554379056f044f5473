commit eb793c31cf9230a2bb4bda554379056f044f5473
Author: Neel Chauhan <neel@neelc.org>
Date:   Thu Nov 16 13:13:31 2017 -0500

    Add error message for exit_node in hs_circ_send_introduce1()

diff --git a/src/or/hs_circuit.c b/src/or/hs_circuit.c
index 7f5bbdaaf..a232a40c8 100644
--- a/src/or/hs_circuit.c
+++ b/src/or/hs_circuit.c
@@ -1109,6 +1109,11 @@ hs_circ_send_introduce1(origin_circuit_t *intro_circ,
   /* This takes various objects in order to populate the introduce1 data
    * object which is used to build the content of the cell. */
   const node_t *exit_node = build_state_get_exit_node(rend_circ->build_state);
+  if (exit_node == NULL) {
+    log_info(LD_REND, "Unable to get rendezvous point for circuit %u. "
+             "Failing.", TO_CIRCUIT(intro_circ)->n_circ_id);
+    goto done;
+  }
   setup_introduce1_data(ip, exit_node, subcredential, &intro1_data);
   /* If we didn't get any link specifiers, it's because our node was
    * bad. */

