commit 562f5f5d9e8415cac3ca2eb768dabf068e8e0f4a
Author: Michael Walle <michael@walle.cc>
Date:   Tue Jul 31 00:04:57 2012 +0200

    lm32_uart: fix receive buffering
    
    Inform qemu-char when more input data can be received.
    
    Signed-off-by: Michael Walle <michael@walle.cc>

diff --git a/hw/lm32_uart.c b/hw/lm32_uart.c
index 02f6f89174..32bc37ac96 100644
--- a/hw/lm32_uart.c
+++ b/hw/lm32_uart.c
@@ -137,6 +137,7 @@ static uint64_t uart_read(void *opaque, hwaddr addr,
         r = s->regs[R_RXTX];
         s->regs[R_LSR] &= ~LSR_DR;
         uart_update_irq(s);
+        qemu_chr_accept_input(s->chr);
         break;
     case R_IIR:
     case R_LSR:

