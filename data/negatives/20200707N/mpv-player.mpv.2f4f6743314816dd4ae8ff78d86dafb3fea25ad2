commit 2f4f6743314816dd4ae8ff78d86dafb3fea25ad2
Author: nicodvb <nicodvb@b3059339-0415-0410-9bf9-f77b7e298cf2>
Date:   Sat Jul 7 08:56:14 2007 +0000

    10l, forgot to skip the stuffing bytes eventually prepended to vc1 packets (identified by pes_extension2 subid)
    
    git-svn-id: svn://svn.mplayerhq.hu/mplayer/trunk@23731 b3059339-0415-0410-9bf9-f77b7e298cf2

diff --git a/libmpdemux/demux_mpg.c b/libmpdemux/demux_mpg.c
index 473d7127c4..092bbefb5b 100644
--- a/libmpdemux/demux_mpg.c
+++ b/libmpdemux/demux_mpg.c
@@ -411,8 +411,10 @@ static int demux_mpg_read_packet(demuxer_t *demux,int id){
         hdrlen--;
         if(c!=0x81)  { mp_msg(MSGT_DEMUX,MSGL_V,"demux_mpg: unknown pes_extension2 format, len is > 1  \n"); return -1;}
         c=stream_read_char(demux->stream); //pes_extension2 payload === substream id
+        hdrlen--;
         if(c<0x55 || c>0x5F)   { mp_msg(MSGT_DEMUX,MSGL_V,"demux_mpg: unknown vc1 substream_id: 0x%x  \n", c); return -1;}
         pes_ext2_subid=c;
+        if(hdrlen>0) stream_skip(demux->stream, hdrlen);
       }
     }
     

