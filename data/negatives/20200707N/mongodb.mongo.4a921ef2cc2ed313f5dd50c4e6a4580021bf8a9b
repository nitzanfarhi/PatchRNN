commit 4a921ef2cc2ed313f5dd50c4e6a4580021bf8a9b
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Fri Jun 5 10:03:35 2015 -0400

    SERVER-18143 Add fasserts to geo near
    
    Closes #977
    
    Signed-off-by: Siyuan Zhou <siyuan.zhou@mongodb.com>

diff --git a/src/mongo/db/exec/geo_near.cpp b/src/mongo/db/exec/geo_near.cpp
index 96441e492a..dd284e71f0 100644
--- a/src/mongo/db/exec/geo_near.cpp
+++ b/src/mongo/db/exec/geo_near.cpp
@@ -1063,6 +1063,7 @@ namespace mongo {
         // Because the planner doesn't yet set up 2D index bounds, do it ourselves here
         const string s2Field = _nearParams->nearQuery->field;
         const int s2FieldPosition = getFieldPosition(_s2Index, s2Field);
+        fassert(28677, s2FieldPosition >= 0);
         OrderedIntervalList* coveredIntervals = &scanParams.bounds.fields[s2FieldPosition];
         coveredIntervals->intervals.clear();
 
@@ -1266,6 +1267,7 @@ namespace mongo {
         // Because the planner doesn't yet set up 2D index bounds, do it ourselves here
         const string s2Field = _nearParams.nearQuery->field;
         const int s2FieldPosition = getFieldPosition(_s2Index, s2Field);
+        fassert(28678, s2FieldPosition >= 0);
         scanParams.bounds.fields[s2FieldPosition].intervals.clear();
         OrderedIntervalList* coveredIntervals = &scanParams.bounds.fields[s2FieldPosition];
 

