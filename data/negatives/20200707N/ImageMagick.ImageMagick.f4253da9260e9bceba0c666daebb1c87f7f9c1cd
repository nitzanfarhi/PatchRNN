commit f4253da9260e9bceba0c666daebb1c87f7f9c1cd
Author: Cristy <urban-warrior@imagemagick.org>
Date:   Sun Nov 27 08:23:45 2016 -0500

    ...

diff --git a/MagickCore/enhance.c b/MagickCore/enhance.c
index 315cb24e4..b55a5fc9f 100644
--- a/MagickCore/enhance.c
+++ b/MagickCore/enhance.c
@@ -3317,6 +3317,11 @@ MagickExport MagickBooleanType ModulateImage(Image *image,const char *modulate,
         green,
         red;
 
+      if (GetPixelReadMask(image,q) == 0)
+        {
+          q+=GetPixelChannels(image);
+          continue;
+        }
       red=(double) GetPixelRed(image,q);
       green=(double) GetPixelGreen(image,q);
       blue=(double) GetPixelBlue(image,q);

