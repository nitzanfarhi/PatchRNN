commit 90ca64a970b1d10352df3b2c68099341e900abe9
Author: Paolo Bonzini <pbonzini@redhat.com>
Date:   Wed May 2 13:30:59 2012 +0200

    qdev: fix -device foo,?
    
    Since most property types do not have a parse property now, this was
    broken.  Fix it by looking at the setter instead.
    
    Reviewed-by: Anthony Liguori <aliguori@us.ibm.com>
    Acked-by: Andreas F=E4rber <afaerber@suse.de>
    Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
    Signed-off-by: Anthony Liguori <aliguori@us.ibm.com>

diff --git a/hw/qdev-monitor.c b/hw/qdev-monitor.c
index dc4e4e1b84..41b9e2c82f 100644
--- a/hw/qdev-monitor.c
+++ b/hw/qdev-monitor.c
@@ -158,7 +158,7 @@ int qdev_device_help(QemuOpts *opts)
          * for removal.  This conditional should be removed along with
          * it.
          */
-        if (!prop->info->parse) {
+        if (!prop->info->set) {
             continue;           /* no way to set it, don't show */
         }
         error_printf("%s.%s=%s\n", driver, prop->name,
@@ -166,7 +166,7 @@ int qdev_device_help(QemuOpts *opts)
     }
     if (info->bus_info) {
         for (prop = info->bus_info->props; prop && prop->name; prop++) {
-            if (!prop->info->parse) {
+            if (!prop->info->set) {
                 continue;           /* no way to set it, don't show */
             }
             error_printf("%s.%s=%s\n", driver, prop->name,

