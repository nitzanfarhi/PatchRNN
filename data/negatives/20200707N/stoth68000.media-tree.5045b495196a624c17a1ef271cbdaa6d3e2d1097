commit 5045b495196a624c17a1ef271cbdaa6d3e2d1097
Author: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Date:   Tue Jul 2 23:05:51 2013 -0300

    [media] v4l: of: Drop acquired reference to node when getting next endpoint
    
    The of_get_child_by_name() function takes a reference to the node it
    returns. Make sure to drop it when looking for the ports node in
    v4l2_of_get_next_endpoint().
    
    Signed-off-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
    Acked-by: Sylwester Nawrocki <s.nawrocki@samsung.com>
    Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>

diff --git a/drivers/media/v4l2-core/v4l2-of.c b/drivers/media/v4l2-core/v4l2-of.c
index f64d95342bf1..ed305d8c65f0 100644
--- a/drivers/media/v4l2-core/v4l2-of.c
+++ b/drivers/media/v4l2-core/v4l2-of.c
@@ -186,6 +186,7 @@ struct device_node *v4l2_of_get_next_endpoint(const struct device_node *parent,
 		if (!endpoint)
 			pr_err("%s(): no endpoint nodes specified for %s\n",
 			       __func__, parent->full_name);
+		of_node_put(node);
 	} else {
 		port = of_get_parent(prev);
 		if (!port)

