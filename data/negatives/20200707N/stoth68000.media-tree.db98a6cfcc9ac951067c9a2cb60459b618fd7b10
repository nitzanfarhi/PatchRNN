commit db98a6cfcc9ac951067c9a2cb60459b618fd7b10
Author: roel kluin <roel.kluin@gmail.com>
Date:   Mon Jan 3 12:03:44 2011 -0800

    libertas: down_interruptible() can return -EINTR, not EINTR
    
    Fix test in lbs_spi_thread().  down_interruptible() can return -EINTR, but
    not EINTR.
    
    Signed-off-by: Roel Kluin <roel.kluin@gmail.com>
    Cc: Dan Williams <dcbw@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/libertas/if_spi.c b/drivers/net/wireless/libertas/if_spi.c
index ecd4d04b2c3c..00600239a053 100644
--- a/drivers/net/wireless/libertas/if_spi.c
+++ b/drivers/net/wireless/libertas/if_spi.c
@@ -784,7 +784,7 @@ static int lbs_spi_thread(void *data)
 				up(&card->spi_thread_terminated);
 				do_exit(0);
 			}
-		} while (err == EINTR);
+		} while (err == -EINTR);
 
 		/* Read the host interrupt status register to see what we
 		 * can do. */

