commit d715c1936e96ce05d9cc4eea2fd4afab3ad02539
Author: brain <brain@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Wed Feb 15 19:10:44 2006 +0000

    Now has no strchr() at all.
    
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@3220 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/modules/m_denychans.cpp b/src/modules/m_denychans.cpp
index 709a285a0..ba66d2294 100644
--- a/src/modules/m_denychans.cpp
+++ b/src/modules/m_denychans.cpp
@@ -59,15 +59,13 @@ class ModuleDenyChannels : public Module
 
         virtual int OnUserPreJoin(userrec* user, chanrec* chan, const char* cname)
         {
-		bool isoper = strchr(user->modes,'o') ? true : false;
-
 		for (int j =0; j < Conf->Enumerate("badchan"); j++)
 		{
 			irc::string cn = Conf->ReadValue("badchan","name",j).c_str();
 			irc::string thischan = cname;
 			if (thischan == cn)
 			{
-				if ((Conf->ReadFlag("badchan","allowopers",j)) && isoper == true)
+				if ((Conf->ReadFlag("badchan","allowopers",j)) && *user->oper)
 				{
 					return 0;
 				}

