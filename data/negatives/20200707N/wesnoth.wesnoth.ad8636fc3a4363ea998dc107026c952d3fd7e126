commit ad8636fc3a4363ea998dc107026c952d3fd7e126
Author: Alexander van Gessel (AI0867) <ai0867@gmail.com>
Date:   Tue Nov 27 02:14:17 2012 +0100

    Don't try to iterate over things that are not directories

diff --git a/src/image.cpp b/src/image.cpp
index fce61c7994..fcd0240429 100644
--- a/src/image.cpp
+++ b/src/image.cpp
@@ -1026,6 +1026,9 @@ static void precache_file_existence_internal(const std::string& dir, const std::
 		return;
 	precached_dirs.insert(checked_dir);
 
+	if (!filesystem::is_directory(checked_dir))
+		return;
+
 	std::vector<std::string> files_found;
 	std::vector<std::string> dirs_found;
 	filesystem::get_files_in_dir(checked_dir, &files_found, &dirs_found,

