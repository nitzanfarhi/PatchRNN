commit 98c270f305ad4c11cdbe39a64af9670374206adb
Author: brain <brain@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Sun Aug 31 13:12:23 2008 +0000

    I guess it makes sense never to let the gecos be parsed as a mode param, even in error, in case it does something stupid
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@10365 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/modules/m_spanningtree/uid.cpp b/src/modules/m_spanningtree/uid.cpp
index abde297a2..de3b669c4 100644
--- a/src/modules/m_spanningtree/uid.cpp
+++ b/src/modules/m_spanningtree/uid.cpp
@@ -119,7 +119,7 @@ bool TreeSocket::ParseUID(const std::string &source, std::deque<std::string> &pa
 
 		if (mh)
 		{
-			if (mh->GetNumParams(true) && (paramptr < params.size()))
+			if (mh->GetNumParams(true) && (paramptr < params.size() - 1))
 				mh->OnModeChange(_new, _new, NULL, params[paramptr++], true);
 			else
 				mh->OnModeChange(_new, _new, NULL, empty, true);

