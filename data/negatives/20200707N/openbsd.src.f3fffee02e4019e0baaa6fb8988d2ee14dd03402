commit f3fffee02e4019e0baaa6fb8988d2ee14dd03402
Author: stsp <stsp@openbsd.org>
Date:   Sat Jan 28 12:45:48 2012 +0000

    Fix ar5k_rt_copy() to copy all fields of the HAL_RATE_TABLE struct.
    ok mikeb deraadt

diff --git a/sys/dev/ic/ar5xxx.c b/sys/dev/ic/ar5xxx.c
index e8ad8d82ff8..f98043d78e5 100644
--- a/sys/dev/ic/ar5xxx.c
+++ b/sys/dev/ic/ar5xxx.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: ar5xxx.c,v 1.55 2009/09/23 18:03:30 damien Exp $	*/
+/*	$OpenBSD: ar5xxx.c,v 1.56 2012/01/28 12:45:48 stsp Exp $	*/
 
 /*
  * Copyright (c) 2004, 2005, 2006, 2007 Reyk Floeter <reyk@openbsd.org>
@@ -653,6 +653,8 @@ ar5k_rt_copy(HAL_RATE_TABLE *dst, const HAL_RATE_TABLE *src)
 {
 	bzero(dst, sizeof(HAL_RATE_TABLE));
 	dst->rateCount = src->rateCount;
+	bcopy(src->rateCodeToIndex, dst->rateCodeToIndex,
+	    sizeof(dst->rateCodeToIndex));
 	bcopy(src->info, dst->info, sizeof(dst->info));
 }
 

