commit 372aa73e20197d463fc8b34524c20b089a98b1c3
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Aug 10 11:32:18 2017 +1000

    drm/nouveau/disp/nv04: avoid creation of output paths
    
    Fixes hitting WARN_ON() during initialisation of pre-NV50 GPUs, caused
    by the recent changes to support pad macro routing on GM20x.
    
    We currently don't use them here for older GPUs anyway.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/disp/base.c b/drivers/gpu/drm/nouveau/nvkm/engine/disp/base.c
index c7c84d34d97e..88582af8bd89 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/disp/base.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/disp/base.c
@@ -267,6 +267,8 @@ nvkm_disp_oneinit(struct nvkm_engine *engine)
 	/* Create output path objects for each VBIOS display path. */
 	i = -1;
 	while ((data = dcb_outp_parse(bios, ++i, &ver, &hdr, &dcbE))) {
+		if (ver < 0x40) /* No support for chipsets prior to NV50. */
+			break;
 		if (dcbE.type == DCB_OUTPUT_UNUSED)
 			continue;
 		if (dcbE.type == DCB_OUTPUT_EOL)

