commit d5db88142cbaf33d403c6a1930e9ab753bf18c67
Author: Bruce Momjian <bruce@momjian.us>
Date:   Fri Feb 5 17:47:29 1999 +0000

    Fix for returning stack pointer from selectivity, from Bernard Frankpitt.

diff --git a/src/backend/utils/adt/selfuncs.c b/src/backend/utils/adt/selfuncs.c
index c8dfc20442..372c33547d 100644
--- a/src/backend/utils/adt/selfuncs.c
+++ b/src/backend/utils/adt/selfuncs.c
@@ -12,7 +12,7 @@
  *
  *
  * IDENTIFICATION
- *	  $Header: /cvsroot/pgsql/src/backend/utils/adt/selfuncs.c,v 1.23 1998/09/01 04:32:50 momjian Exp $
+ *	  $Header: /cvsroot/pgsql/src/backend/utils/adt/selfuncs.c,v 1.24 1999/02/05 17:47:29 momjian Exp $
  *
  *-------------------------------------------------------------------------
  */
@@ -390,18 +390,16 @@ btreesel(Oid operatorObjectId,
 		 Oid indexrelid)
 {
 	float64		result;
-	float64data resultData;
 
 	if (FunctionalSelectivity(nIndexKeys, attributeNumber))
 	{
-
 		/*
 		 * Need to call the functions selectivity function here.  For now
 		 * simply assume it's 1/3 since functions don't currently have
 		 * selectivity functions
 		 */
-		resultData = 1.0 / 3.0;
-		result = &resultData;
+		result = (float64) palloc(sizeof(float64data));
+		*result = 1.0 / 3.0;
 	}
 	else
 	{

