commit b2f125bcf5eac41a6d74f75ac573b77753213b74
Author: Kevin Wells <kevin.wells@nxp.com>
Date:   Thu Nov 12 00:28:13 2009 +0100

    i2c: i2c-pnx: Limit minimum jiffie timeout to 2
    
    Limit minimum jiffie timeout to 2 to prevent early timeout on systems
    with low tick rates
    
    Signed-off-by: Kevin Wells <kevin.wells@nxp.com>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>

diff --git a/drivers/i2c/busses/i2c-pnx.c b/drivers/i2c/busses/i2c-pnx.c
index 6ff6c20f1e78..68c8233b6df0 100644
--- a/drivers/i2c/busses/i2c-pnx.c
+++ b/drivers/i2c/busses/i2c-pnx.c
@@ -54,6 +54,9 @@ static inline void i2c_pnx_arm_timer(struct i2c_adapter *adap)
 	struct timer_list *timer = &data->mif.timer;
 	int expires = I2C_PNX_TIMEOUT / (1000 / HZ);
 
+	if (expires <= 1)
+		expires = 2;
+
 	del_timer_sync(timer);
 
 	dev_dbg(&adap->dev, "Timer armed at %lu plus %u jiffies.\n",

