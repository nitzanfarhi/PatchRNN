commit 65f570b816532642b62e1865bf55e9e5124785cb
Author: Nick Tiskov <daymansmail@gmail.com>
Date:   Fri Sep 19 17:42:40 2014 +0400

    Fix large cache support on amd64 arch

diff --git a/src/preferences/preferences.cpp b/src/preferences/preferences.cpp
index bbc4d738a..b970114ab 100644
--- a/src/preferences/preferences.cpp
+++ b/src/preferences/preferences.cpp
@@ -1112,7 +1112,7 @@ uint Preferences::diskCacheSize() const {
 
   // When build as 32bit binary, set the maximum at less than 2GB to prevent crashes.
   // These macros may not be available on compilers other than MSVC and GCC
-#if !defined(_M_X64) || !defined(__amd64__)
+#if !defined(_M_X64) && !defined(__amd64__)
   //1800MiB to leave 248MiB room to the rest of program data in RAM
   if (size > 1800)
     size = 1800;
@@ -1128,7 +1128,7 @@ uint Preferences::diskCacheSize() const {
 void Preferences::setDiskCacheSize(uint size) {
   uint size0 = size;
 
-#if !defined(_M_X64) || !defined(__amd64__)
+#if !defined(_M_X64) && !defined(__amd64__)
   //1800MiB to leave 248MiB room to the rest of program data in RAM
   if (size0 > 1800)
     size0 = 1800;

