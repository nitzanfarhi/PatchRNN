commit b088e1bf1f47d2c2e928ca174de62bbc230f6114
Author: heikki@hundin.mysql.fi <>
Date:   Wed May 29 14:04:19 2002 +0300

    ha_innobase.cc:
      Fix an assertion failure in ha_innobase.cc about line 302 when a user has used user level locks and closes a connection; this was reported by Jeremy Zawodny

diff --git a/sql/ha_innobase.cc b/sql/ha_innobase.cc
index a741ffefbb5..5ce7869e3f8 100644
--- a/sql/ha_innobase.cc
+++ b/sql/ha_innobase.cc
@@ -649,6 +649,7 @@ innobase_close_connection(
 				(thd->transaction.all.innobase_tid));
 		trx_free_for_mysql((trx_t*)
 				(thd->transaction.all.innobase_tid));
+		thd->transaction.all.innobase_tid = NULL;
 	}
 
 	return(0);

