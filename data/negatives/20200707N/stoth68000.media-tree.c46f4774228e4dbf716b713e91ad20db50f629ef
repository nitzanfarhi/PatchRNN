commit c46f4774228e4dbf716b713e91ad20db50f629ef
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Aug 21 15:27:16 2006 -0700

    [SPARC64]: Fix pfn_pte() build failure.
    
    The "%uhi" needs to be "%%uhi" because we want a real
    "%" character in the assembler here, instead of an
    assembler variable expansion.
    
    Aparently older GCCs were more liberal and interpreted
    this %-letter as a literal "%" for whatever reason.
    
    Based upon a build failure report from Meelis Roos.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/asm-sparc64/pgtable.h b/include/asm-sparc64/pgtable.h
index 1ba19eb34ce3..ebfe395cfb87 100644
--- a/include/asm-sparc64/pgtable.h
+++ b/include/asm-sparc64/pgtable.h
@@ -234,7 +234,7 @@ static inline pte_t pfn_pte(unsigned long pfn, pgprot_t prot)
 	sz_bits = 0UL;
 	if (_PAGE_SZBITS_4U != 0UL || _PAGE_SZBITS_4V != 0UL) {
 		__asm__ __volatile__(
-		"\n661:	sethi		%uhi(%1), %0\n"
+		"\n661:	sethi		%%uhi(%1), %0\n"
 		"	sllx		%0, 32, %0\n"
 		"	.section	.sun4v_2insn_patch, \"ax\"\n"
 		"	.word		661b\n"

