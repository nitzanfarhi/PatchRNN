commit 946de117a24cac21cac292524fa7a71ce4e43458
Author: Aki Tuomi <cmouse@cmouse.fi>
Date:   Mon Jun 17 21:47:16 2013 +0300

    Fix bug on getTSIGKey where name did not get bound, also remove
    requirement name to match zone name.

diff --git a/modules/oraclebackend/oraclebackend.cc b/modules/oraclebackend/oraclebackend.cc
index 8e62d9ca2..e10726224 100644
--- a/modules/oraclebackend/oraclebackend.cc
+++ b/modules/oraclebackend/oraclebackend.cc
@@ -1330,14 +1330,14 @@ OracleBackend::getTSIGKey (const string& name, string* algorithm, string* conten
 {
   if(!d_dnssecQueries)
     return -1;
-  DomainInfo di;
-  if (getDomainInfo(name, di) == false) return false;
 
   sword rc;
   OCIStmt *stmt;
 
   stmt = prepare_query(pooledSvcCtx, getTSIGKeyQuerySQL, getTSIGKeyQueryKey);
   bind_str(stmt, ":name", mQueryName, sizeof(mQueryName));
+  string_to_cbuf(mQueryName, name, sizeof(mQueryName));
+
   define_output_str(stmt, 1, &mResultTypeInd, mResultType, sizeof(mResultType));
   define_output_str(stmt, 2, &mResultContentInd, mResultContent, sizeof(mResultContent));
 

