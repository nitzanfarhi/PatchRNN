commit bce8bfdae4a236fd89465d2705d6e5afab0088b0
Author: Ilia Alshanetsky <iliaa@php.net>
Date:   Tue Feb 25 23:39:57 2003 +0000

    MFH (forgot to put this fix into the 5.X tree).

diff --git a/ext/standard/url.c b/ext/standard/url.c
index 8bd2a99d00..8bbb599e5b 100644
--- a/ext/standard/url.c
+++ b/ext/standard/url.c
@@ -124,6 +124,9 @@ PHPAPI php_url *php_url_parse(char *str)
 		
 			if (*(e+2) == '/') {
 				s = e + 3;
+				if (!strncasecmp("file", ret->scheme, sizeof("file"))) {
+					goto nohost;
+				}
 			} else {
 				s = e + 1;
 				if (!strncasecmp("file", ret->scheme, sizeof("file"))) {

