commit bde027b456dc56a3673f886872a6425adc5e9aa4
Author: Gerd Hoffmann <kraxel@redhat.com>
Date:   Fri Jan 25 15:03:36 2013 +0100

    usb-uas: set max_lun and max_channel
    
    256 luns is what the sam-4 address method 0 can handle and what
    the qemu uas emulation supports.  So pick that for now.
    
    [ v2: unlike the other two max_* fields max_channel isn't max+1 ]
    
    Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/usb/storage/uas.c b/drivers/usb/storage/uas.c
index ebb99728551c..d966b59f7d7b 100644
--- a/drivers/usb/storage/uas.c
+++ b/drivers/usb/storage/uas.c
@@ -991,6 +991,8 @@ static int uas_probe(struct usb_interface *intf, const struct usb_device_id *id)
 
 	shost->max_cmd_len = 16 + 252;
 	shost->max_id = 1;
+	shost->max_lun = 256;
+	shost->max_channel = 0;
 	shost->sg_tablesize = udev->bus->sg_tablesize;
 
 	devinfo->intf = intf;

