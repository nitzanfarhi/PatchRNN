commit aa762573b554d1b00ee0ddb3c895ac035bddb47f
Author: Nibble <nibble.ds@gmail.com>
Date:   Mon Jun 14 18:52:49 2010 +0200

    * Fix r_debug build
    * More random fixes in r_anal

diff --git a/libr/anal/anal.c b/libr/anal/anal.c
index e3d29b430..995156538 100644
--- a/libr/anal/anal.c
+++ b/libr/anal/anal.c
@@ -47,11 +47,11 @@ R_API RAnal *r_anal_free(RAnal *anal) {
 	if (anal) {
 		/* TODO: Free a->anals here */
 		if (anal->bbs)
-			r_list_destroy (anal->bbs);
+			r_list_free (anal->bbs);
 		if (anal->fcns)
-			r_list_destroy (anal->fcns);
+			r_list_free (anal->fcns);
 		if (anal->vartypes)
-			r_list_destroy (anal->vartypes);
+			r_list_free (anal->vartypes);
 	}
 	free (anal);
 	return NULL;
diff --git a/libr/anal/aop.c b/libr/anal/aop.c
index 35fcb10bb..04b00aa8c 100644
--- a/libr/anal/aop.c
+++ b/libr/anal/aop.c
@@ -22,7 +22,7 @@ R_API RAnalOp *r_anal_aop_new() {
 
 R_API RList *r_anal_aop_list_new() {
 	RList *list = r_list_new ();
-	list->free = r_anal_aop_free;
+	list->free = &r_anal_aop_free;
 	return list;
 }
 
diff --git a/libr/anal/fcn.c b/libr/anal/fcn.c
index 3616d8311..2e81cac79 100644
--- a/libr/anal/fcn.c
+++ b/libr/anal/fcn.c
@@ -32,11 +32,11 @@ R_API void r_anal_fcn_free(void *fcn) {
 		if (((RAnalFcn*)fcn)->name)
 			free (((RAnalFcn*)fcn)->name);
 		if (((RAnalFcn*)fcn)->refs)
-			r_list_destroy (((RAnalFcn*)fcn)->refs);
+			r_list_free (((RAnalFcn*)fcn)->refs);
 		if (((RAnalFcn*)fcn)->xrefs)
-			r_list_destroy (((RAnalFcn*)fcn)->xrefs);
+			r_list_free (((RAnalFcn*)fcn)->xrefs);
 		if (((RAnalFcn*)fcn)->vars)
-			r_list_destroy (((RAnalFcn*)fcn)->vars);
+			r_list_free (((RAnalFcn*)fcn)->vars);
 		if (((RAnalFcn*)fcn)->fingerprint)
 			r_big_free (((RAnalFcn*)fcn)->fingerprint);
 	}
@@ -144,7 +144,7 @@ R_API int r_anal_fcn_del(RAnal *anal, ut64 addr) {
 	RListIter *iter;
 
 	if (addr == 0) {
-		r_list_destroy (anal->fcns);
+		r_list_free (anal->fcns);
 		if (!(anal->fcns = r_anal_fcn_list_new ()))
 			return R_FALSE;
 	} else r_list_foreach (anal->fcns, iter, fcni)
diff --git a/libr/anal/var.c b/libr/anal/var.c
index 18f4b7428..b30628c93 100644
--- a/libr/anal/var.c
+++ b/libr/anal/var.c
@@ -58,7 +58,7 @@ R_API void r_anal_var_free(void *var) {
 		if (((RAnalVar*)var)->vartype)
 			free (((RAnalVar*)var)->vartype);
 		if (((RAnalVar*)var)->accesses)
-			r_list_destroy (((RAnalVar*)var)->accesses);
+			r_list_free (((RAnalVar*)var)->accesses);
 	}
 	free (var);
 }
diff --git a/libr/include/r_anal.h b/libr/include/r_anal.h
index b62c92036..55a8dd1f3 100644
--- a/libr/include/r_anal.h
+++ b/libr/include/r_anal.h
@@ -283,9 +283,8 @@ R_API int r_anal_bb_del(RAnal *anal, ut64 addr);
 
 /* aop.c */
 R_API RAnalOp *r_anal_aop_new();
-R_API void r_anal_aop_free(RAnalOp *aop);
+R_API void r_anal_aop_free(void *aop);
 R_API RList *r_anal_aop_list_new();
-R_API void r_anal_aop_free(RAnalOp *aop);
 R_API int r_anal_aop(RAnal *anal, RAnalOp *aop, ut64 addr,
 		const ut8 *data, int len);
 
diff --git a/libr/include/r_debug.h b/libr/include/r_debug.h
index f07739b45..fbd4fb954 100644
--- a/libr/include/r_debug.h
+++ b/libr/include/r_debug.h
@@ -232,7 +232,7 @@ R_API int r_debug_thread_list(struct r_debug_t *dbg, int pid);
 
 R_API void r_debug_trace_reset (RDebug *dbg, int liberate);
 R_API int r_debug_trace_pc (RDebug *dbg);
-R_API int r_debug_trace_at (RDebug *dbg, const char *str);
+R_API void r_debug_trace_at (RDebug *dbg, const char *str);
 R_API RDebugTracepoint *r_debug_trace_get (RDebug *dbg, ut64 addr);
 R_API void r_debug_trace_list (RDebug *dbg, int mode);
 R_API RDebugTracepoint *r_debug_trace_add (RDebug *dbg, ut64 addr, int size);

