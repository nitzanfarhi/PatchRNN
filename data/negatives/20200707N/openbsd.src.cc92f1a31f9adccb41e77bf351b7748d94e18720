commit cc92f1a31f9adccb41e77bf351b7748d94e18720
Author: deraadt <deraadt@openbsd.org>
Date:   Wed May 1 15:14:43 1996 +0000

    (once again) allow /etc/fstab mountpoints to be used, ie "fsck /usr"

diff --git a/sbin/fsck_ffs/preen.c b/sbin/fsck_ffs/preen.c
index d347cd3f1de..ce0b18338df 100644
--- a/sbin/fsck_ffs/preen.c
+++ b/sbin/fsck_ffs/preen.c
@@ -290,6 +290,7 @@ blockcheck(origname)
 	char *origname;
 {
 	struct stat stslash, stblock, stchar;
+	struct fstab *fsp;
 	char *newname, *raw;
 	int retried = 0;
 
@@ -330,6 +331,11 @@ retry:
 	 * Not a block or character device, just return name and
 	 * let the user decide whether to use it.
 	 */
+	if ((fsp = getfsfile(origname))) {
+	    newname = fsp->fs_spec;
+	    retried++;
+	    goto retry;
+    	}
 	return (origname);
 }
 

