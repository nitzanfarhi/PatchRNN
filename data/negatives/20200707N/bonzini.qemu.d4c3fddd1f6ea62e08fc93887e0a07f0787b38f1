commit d4c3fddd1f6ea62e08fc93887e0a07f0787b38f1
Author: Jean-Christophe DUBOIS <jcd@tribudubois.net>
Date:   Thu Sep 3 00:37:00 2009 +0200

    mv from strdup to qemu_strdup in qemu-option.c
    
    one place is using strdup() instead of qemu_strdup
    
    Fix it
    
    Signed-off-by: Jean-Christophe Dubois <jcd@tribudubois.net>
    Signed-off-by: Anthony Liguori <aliguori@us.ibm.com>

diff --git a/qemu-option.c b/qemu-option.c
index 61141e0bd6..0473605c14 100644
--- a/qemu-option.c
+++ b/qemu-option.c
@@ -274,7 +274,7 @@ int set_option_parameter(QEMUOptionParameter *list, const char *name,
 
     case OPT_STRING:
         if (value != NULL) {
-            list->value.s = strdup(value);
+            list->value.s = qemu_strdup(value);
         } else {
             fprintf(stderr, "Option '%s' needs a parameter\n", name);
             return -1;
@@ -334,12 +334,12 @@ void free_option_parameters(QEMUOptionParameter *list)
 
     while (cur && cur->name) {
         if (cur->type == OPT_STRING) {
-            free(cur->value.s);
+            qemu_free(cur->value.s);
         }
         cur++;
     }
 
-    free(list);
+    qemu_free(list);
 }
 
 /*

