commit e83a90f127060487b7a6717a740a59db244b4e53
Author: Wladimir J. van der Laan <laanwj@gmail.com>
Date:   Sun Apr 14 18:50:40 2013 +0200

    qt: register metatype for bool*
    
    This allows the bool* type to be passed between threads.  Should solve issue #2402.

diff --git a/src/qt/bitcoin.cpp b/src/qt/bitcoin.cpp
index f079f3b0e..4e2dbef59 100644
--- a/src/qt/bitcoin.cpp
+++ b/src/qt/bitcoin.cpp
@@ -34,6 +34,9 @@ Q_IMPORT_PLUGIN(qkrcodecs)
 Q_IMPORT_PLUGIN(qtaccessiblewidgets)
 #endif
 
+// Declare meta types used for QMetaObject::invokeMethod
+Q_DECLARE_METATYPE(bool*)
+
 // Need a global reference for the notifications to find the GUI
 static BitcoinGUI *guiref;
 static QSplashScreen *splashref;
@@ -118,6 +121,9 @@ int main(int argc, char *argv[])
     Q_INIT_RESOURCE(bitcoin);
     QApplication app(argc, argv);
 
+    // Register meta types used for QMetaObject::invokeMethod
+    qRegisterMetaType< bool* >();
+
     // Do this early as we don't want to bother initializing if we are just calling IPC
     // ... but do it after creating app, so QCoreApplication::arguments is initialized:
     if (PaymentServer::ipcSendCommandLine())

