commit cdf6eb5a9710566be217a3f17d3d94ac4e4d2662
Author: Alessandro Ghedini <alessandro@ghedini.me>
Date:   Mon Apr 21 19:10:52 2014 +0200

    vc1: Do not return an error when skipping b frames
    
    This caused mpv (and possibly others) to fallback to software decoding after
    seeking a VC1 stream.
    
    Bug-Id: 667
    
    Signed-off-by: Luca Barbato <lu_zero@gentoo.org>

diff --git a/libavcodec/vc1dec.c b/libavcodec/vc1dec.c
index 5d3ed807b..98259242b 100644
--- a/libavcodec/vc1dec.c
+++ b/libavcodec/vc1dec.c
@@ -5941,7 +5941,7 @@ static int vc1_decode_frame(AVCodecContext *avctx, void *data,
 
     /* skip B-frames if we don't have reference frames */
     if (s->last_picture_ptr == NULL && (s->pict_type == AV_PICTURE_TYPE_B || s->droppable)) {
-        goto err;
+        goto end;
     }
     if ((avctx->skip_frame >= AVDISCARD_NONREF && s->pict_type == AV_PICTURE_TYPE_B) ||
         (avctx->skip_frame >= AVDISCARD_NONKEY && s->pict_type != AV_PICTURE_TYPE_I) ||

