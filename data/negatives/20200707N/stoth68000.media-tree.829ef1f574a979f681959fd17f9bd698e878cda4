commit 829ef1f574a979f681959fd17f9bd698e878cda4
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Aug 6 14:41:59 2007 -0400

    Revert "[PATCH] bcm43xx: Fix deviation from specifications in set_baseband_attenuation"
    
    This reverts commit 77548f58070894cf5970a110981e511ffe793369.
    
    David Woodhouse wrote:
    
    >This broke my shinybook. I seem to get absolutely _no_ outgoing packets,
    >although I can receive OK.
    
    Larry Finger wrote:
    
    >Please revert this patch.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/bcm43xx/bcm43xx_phy.c b/drivers/net/wireless/bcm43xx/bcm43xx_phy.c
index d779199c30d0..b37f1e348700 100644
--- a/drivers/net/wireless/bcm43xx/bcm43xx_phy.c
+++ b/drivers/net/wireless/bcm43xx/bcm43xx_phy.c
@@ -1638,7 +1638,7 @@ void bcm43xx_phy_set_baseband_attenuation(struct bcm43xx_private *bcm,
 		return;
 	}
 
-	if (phy->analog == 1) {
+	if (phy->analog > 1) {
 		value = bcm43xx_phy_read(bcm, 0x0060) & ~0x003C;
 		value |= (baseband_attenuation << 2) & 0x003C;
 	} else {

