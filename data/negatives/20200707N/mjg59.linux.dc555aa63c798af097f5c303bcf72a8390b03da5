commit dc555aa63c798af097f5c303bcf72a8390b03da5
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Tue Mar 28 18:32:52 2006 -0300

    V4L/DVB (3662): Don't set msp3400c-non-existent register
    
    The driver tried to set a register that is not present on msp3400c devices.
    Add the missing test.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/drivers/media/video/msp3400-driver.c b/drivers/media/video/msp3400-driver.c
index c40e8ba9a2ea..12a83ec7872c 100644
--- a/drivers/media/video/msp3400-driver.c
+++ b/drivers/media/video/msp3400-driver.c
@@ -279,7 +279,8 @@ void msp_set_scart(struct i2c_client *client, int in, int out)
 	msp_write_dsp(client, 0x13, state->acb);
 
 	/* Sets I2S speed 0 = 1.024 Mbps, 1 = 2.048 Mbps */
-	msp_write_dem(client, 0x40, state->i2s_mode);
+	if (state->has_i2s_conf)
+		msp_write_dem(client, 0x40, state->i2s_mode);
 }
 
 void msp_set_mute(struct i2c_client *client)

