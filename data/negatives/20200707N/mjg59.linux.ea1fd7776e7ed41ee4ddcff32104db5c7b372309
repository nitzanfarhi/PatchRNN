commit ea1fd7776e7ed41ee4ddcff32104db5c7b372309
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Oct 9 15:11:55 2012 -0700

    userns: Fix posix_acl_file_xattr_userns gid conversion
    
    The code needs to be from_kgid(make_kgid(...)...) not
    from_kuid(make_kgid(...)...). Doh!
    
    Reported-by: Jan Kara <jack@suse.cz>
    Signed-off-by: "Eric W. Biederman" <ebiederm@xmission.com>

diff --git a/fs/xattr_acl.c b/fs/xattr_acl.c
index 11efd830b5f5..9fbea87fdb6e 100644
--- a/fs/xattr_acl.c
+++ b/fs/xattr_acl.c
@@ -45,7 +45,7 @@ static void posix_acl_fix_xattr_userns(
 			break;
 		case ACL_GROUP:
 			gid = make_kgid(from, le32_to_cpu(entry->e_id));
-			entry->e_id = cpu_to_le32(from_kuid(to, uid));
+			entry->e_id = cpu_to_le32(from_kgid(to, gid));
 			break;
 		default:
 			break;

