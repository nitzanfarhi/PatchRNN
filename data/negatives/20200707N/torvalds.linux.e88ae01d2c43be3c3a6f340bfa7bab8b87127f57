commit e88ae01d2c43be3c3a6f340bfa7bab8b87127f57
Author: Wei Yang <weiyang@linux.vnet.ibm.com>
Date:   Wed Mar 25 16:23:43 2015 +0800

    PCI: Print PF SR-IOV resource that contains all VF(n) BAR space
    
    When we size VF BAR0, VF BAR1, etc., from the SR-IOV Capability of a PF, we
    learn the alignment requirement and amount of space consumed by a single
    VF.  But when VFs are enabled, *each* of the NumVFs consumes that amount of
    space, so the total size of the PF resource is "VF BAR size * NumVFs".
    
    Add a printk of the total space consumed by the VFs corresponding to what
    we already do for normal non-IOV BARs.
    
    No functional change; new message only.
    
    [bhelgaas: split out into its own patch]
    Signed-off-by: Wei Yang <weiyang@linux.vnet.ibm.com>
    Acked-by: Bjorn Helgaas <bhelgaas@google.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>

diff --git a/drivers/pci/iov.c b/drivers/pci/iov.c
index c4c33ead03bc..05f9d97e4175 100644
--- a/drivers/pci/iov.c
+++ b/drivers/pci/iov.c
@@ -372,6 +372,8 @@ static int sriov_init(struct pci_dev *dev, int pos)
 			goto failed;
 		}
 		res->end = res->start + resource_size(res) * total - 1;
+		dev_info(&dev->dev, "VF(n) BAR%d space: %pR (contains BAR%d for %d VFs)\n",
+			 i, res, i, total);
 		nres++;
 	}
 

