commit 22af74f3b221f1436a37554501431e51c06ee77e
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Fri Apr 6 01:40:38 2007 +0200

    Driver core: warn when userspace writes to the uevent file in a non-supported way
    
    In the future we will allow the uevent type to be written to the uevent
    file to trigger the different types of uevents.  But for now, as we only
    support the ADD event, warn if userspace tries to write anything else to
    this file.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/base/core.c b/drivers/base/core.c
index 72c6ee57471b..f69305c7269d 100644
--- a/drivers/base/core.c
+++ b/drivers/base/core.c
@@ -296,6 +296,9 @@ out:
 static ssize_t store_uevent(struct device *dev, struct device_attribute *attr,
 			    const char *buf, size_t count)
 {
+	if (memcmp(buf, "add", 3) != 0)
+		dev_err(dev, "uevent: unsupported action-string; this will "
+			"be ignored in a future kernel version");
 	kobject_uevent(&dev->kobj, KOBJ_ADD);
 	return count;
 }

