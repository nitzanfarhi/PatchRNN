commit 7c85c560ea935b28c5e8492b1a0f6d5e6fe3c14e
Author: Zoltan Varga <vargaz@gmail.com>
Date:   Fri Jun 3 12:28:52 2011 +0200

    Fix the previous change.

diff --git a/mono/mini/tramp-amd64.c b/mono/mini/tramp-amd64.c
index 5ec323e78e0..39f2ba1c509 100644
--- a/mono/mini/tramp-amd64.c
+++ b/mono/mini/tramp-amd64.c
@@ -719,7 +719,7 @@ mono_arch_create_specific_trampoline (gpointer arg1, MonoTrampolineType tramp_ty
 
 	code = buf = mono_domain_code_reserve_align (domain, size, 1);
 
-	if (((gint64)tramp - (gint64)code) >> 31 != 0) {
+	if (((gint64)tramp - (gint64)code) >> 31 != 0 && ((gint64)tramp - (gint64)code) >> 31 != -1) {
 #ifndef MONO_ARCH_NOMAP32BIT
 		g_assert_not_reached ();
 #endif

