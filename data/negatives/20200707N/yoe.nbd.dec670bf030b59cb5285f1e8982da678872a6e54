commit dec670bf030b59cb5285f1e8982da678872a6e54
Author: Michal Belczyk <belczyk@bsd.krakow.pl>
Date:   Sat May 18 09:53:47 2013 +0200

    Ignore SIGCHLD rather than blocking it
    
    Since commit 3927df64, we're blocking most signals. Blocking a signal
    implies it remains pending until we unblock the signal, at which point
    it will be handled.
    
    While that is the right choice for some signals, we're really not
    interested in SIGCHLD, so ignore that instead. This makes our zombies go
    away.

diff --git a/nbd-client.c b/nbd-client.c
index dadf95d..2b19764 100644
--- a/nbd-client.c
+++ b/nbd-client.c
@@ -444,6 +444,7 @@ int main(int argc, char *argv[]) {
 	uint32_t cflags=0;
 	uint32_t opts=0;
 	sigset_t block, old;
+	struct sigaction sa;
 	struct option long_options[] = {
 		{ "block-size", required_argument, NULL, 'b' },
 		{ "check", required_argument, NULL, 'c' },
@@ -585,6 +586,10 @@ int main(int argc, char *argv[]) {
 		if (daemon(0,0) < 0)
 			err("Cannot detach from terminal");
 	}
+
+	memset(&sa, 0, sizeof(sa));
+	sa.sa_handler = SIG_IGN;
+	sigaction(SIGCHLD, &a, NULL);
 #endif
 	do {
 #ifndef NOFORK

