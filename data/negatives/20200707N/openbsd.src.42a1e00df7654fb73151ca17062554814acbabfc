commit 42a1e00df7654fb73151ca17062554814acbabfc
Author: dlg <dlg@openbsd.org>
Date:   Mon Sep 19 08:17:13 2005 +0000

    dont use htole32 to set up values to be assigned to an 8 bit field.

diff --git a/sys/dev/ic/ami.c b/sys/dev/ic/ami.c
index b37c55308b1..6e0e1dc9d46 100644
--- a/sys/dev/ic/ami.c
+++ b/sys/dev/ic/ami.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: ami.c,v 1.76 2005/09/19 07:45:28 dlg Exp $	*/
+/*	$OpenBSD: ami.c,v 1.77 2005/09/19 08:17:13 dlg Exp $	*/
 
 /*
  * Copyright (c) 2001 Michael Shalayeff
@@ -1042,7 +1042,7 @@ ami_cmd(ccb, flags, wait)
 		if(dmap->dm_nsegs > 1) {
 			struct ami_sgent *sgl = ccb->ccb_sglist;
 
-			cmd->acc_mbox.amb_nsge = htole32(dmap->dm_nsegs);
+			cmd->acc_mbox.amb_nsge = dmap->dm_nsegs;
 			cmd->acc_mbox.amb_data = ccb->ccb_sglistpa;
 
 			for (i = 0; i < dmap->dm_nsegs; i++, sgd++) {
@@ -1053,7 +1053,7 @@ ami_cmd(ccb, flags, wait)
 					    sgd->ds_addr, sgd->ds_len));
 			}
 		} else {
-			cmd->acc_mbox.amb_nsge = htole32(0);
+			cmd->acc_mbox.amb_nsge = 0;
 			cmd->acc_mbox.amb_data = htole32(sgd->ds_addr);
 		}
 		AMI_DPRINTF(AMI_D_DMA, ("> "));
@@ -1061,7 +1061,7 @@ ami_cmd(ccb, flags, wait)
 		bus_dmamap_sync(sc->dmat, dmap, 0, dmap->dm_mapsize,
 		    BUS_DMASYNC_PREWRITE);
 	} else
-		ccb->ccb_cmd->acc_mbox.amb_nsge = htole32(0);
+		ccb->ccb_cmd->acc_mbox.amb_nsge = 0;
 	bus_dmamap_sync(sc->dmat, sc->sc_cmdmap, 0, sc->sc_cmdmap->dm_mapsize,
 	    BUS_DMASYNC_PREWRITE);
 

