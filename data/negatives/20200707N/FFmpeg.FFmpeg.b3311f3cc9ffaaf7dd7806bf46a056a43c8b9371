commit b3311f3cc9ffaaf7dd7806bf46a056a43c8b9371
Author: Lukasz Marek <lukasz.m.luki2@gmail.com>
Date:   Sat Dec 13 19:46:15 2014 +0100

    lavd/alsa-audio-common: mark default device in device list
    
    Signed-off-by: Lukasz Marek <lukasz.m.luki2@gmail.com>

diff --git a/libavdevice/alsa-audio-common.c b/libavdevice/alsa-audio-common.c
index 749897fe95..b7f53137d7 100644
--- a/libavdevice/alsa-audio-common.c
+++ b/libavdevice/alsa-audio-common.c
@@ -379,6 +379,8 @@ int ff_alsa_get_device_list(AVDeviceInfoList *device_list, snd_pcm_stream_t stre
                                               &device_list->nb_devices, new_device)) < 0) {
                 goto fail;
             }
+            if (!strcmp(new_device->device_name, "default"))
+                device_list->default_device = device_list->nb_devices - 1;
             new_device = NULL;
         }
       fail:

