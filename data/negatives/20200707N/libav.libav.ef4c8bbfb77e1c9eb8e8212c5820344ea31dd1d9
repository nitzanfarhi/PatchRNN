commit ef4c8bbfb77e1c9eb8e8212c5820344ea31dd1d9
Author: Baptiste Coudurier <baptiste.coudurier@gmail.com>
Date:   Tue Jun 13 23:13:59 2006 +0000

    check fseek return value
    
    Originally committed as revision 5474 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/mov.c b/libavformat/mov.c
index e55a6d33a..11d40da8f 100644
--- a/libavformat/mov.c
+++ b/libavformat/mov.c
@@ -1733,6 +1733,7 @@ static int mov_read_packet(AVFormatContext *s, AVPacket *pkt)
     int next_sample= -99;
     int size;
     int idx;
+    int ret;
     size = 0x0FFFFFFF;
 
     if (mov->partial) {
@@ -1858,8 +1859,9 @@ readchunk:
         return -1;
     if(size == 0)
         return -1;
-    url_fseek(&s->pb, offset, SEEK_SET);
-
+    ret = url_fseek(&s->pb, offset, SEEK_SET);
+    if (ret < 0)
+        return ret;
     av_get_packet(&s->pb, pkt, size);
     pkt->stream_index = sc->ffindex;
 

