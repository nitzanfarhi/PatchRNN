commit ae0e9eef521fa39ae306a2c64e4add61d5e8af6f
Author: Robert Boisvert <rdboisvert@gmail.com>
Date:   Wed Nov 6 14:12:10 2013 -0500

    mohqueue: remove call from queue if caller does not exist

diff --git a/modules/mohqueue/mohq_funcs.c b/modules/mohqueue/mohq_funcs.c
index fad357f7b..0db62bc5b 100644
--- a/modules/mohqueue/mohq_funcs.c
+++ b/modules/mohqueue/mohq_funcs.c
@@ -1530,8 +1530,13 @@ else
   {
   LM_ERR ("%sCall (%s) REFER error (%d)", pfncname,
     pcall->call_from, nreply);
-  pcall->call_state = CLSTA_INQUEUE;
-  update_call_rec (pcall);
+  if (nreply == 481)
+    { delete_call (pcall); }
+  else
+    {
+    pcall->call_state = CLSTA_INQUEUE;
+    update_call_rec (pcall);
+    }
   }
 return;
 }

