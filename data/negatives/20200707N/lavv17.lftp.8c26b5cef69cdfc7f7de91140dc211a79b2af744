commit 8c26b5cef69cdfc7f7de91140dc211a79b2af744
Author: Alexander V. Lukyanov <lavv17f@gmail.com>
Date:   Fri Nov 27 13:34:39 2015 +0300

    ftp: make IOReady return true in case of error status (may fix issue #175).

diff --git a/src/ftpclass.cc b/src/ftpclass.cc
index af2f2f2a..d2dbc812 100644
--- a/src/ftpclass.cc
+++ b/src/ftpclass.cc
@@ -3644,6 +3644,8 @@ bool  Ftp::IOReady()
 {
    if(copy_mode!=COPY_NONE && !copy_passive && !copy_addr_valid)
       return true;   // simulate to be ready as other fxp peer has to go
+   if(Error())
+      return true;   // report ready to propagate the error.
    return (state==DATA_OPEN_STATE || state==WAITING_STATE)
       && real_pos!=-1 && IsOpen();
 }

