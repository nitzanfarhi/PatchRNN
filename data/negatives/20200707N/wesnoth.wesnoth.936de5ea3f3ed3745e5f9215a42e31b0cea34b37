commit 936de5ea3f3ed3745e5f9215a42e31b0cea34b37
Author: Gunter Labes <soliton@wesnoth.org>
Date:   Mon Dec 10 00:40:16 2007 +0000

    also allow querying the status by ipmask

diff --git a/src/server/server.cpp b/src/server/server.cpp
index a36bc0d9aa..ba4ae5ddc4 100644
--- a/src/server/server.cpp
+++ b/src/server/server.cpp
@@ -666,7 +666,9 @@ std::string server::process_command(const std::string& query) {
 	} else if (command == "status") {
 		out << "STATUS REPORT\n";
 		for (player_map::const_iterator pl = players_.begin(); pl != players_.end(); ++pl) {
-			if (parameters == "" || utils::wildcard_string_match(pl->second.name(), parameters)) {
+			if (parameters == ""
+				|| utils::wildcard_string_match(pl->second.name(), parameters)
+				|| utils::wildcard_string_match(network::ip_address(pl->first), parameters)) {
 				const network::connection_stats& stats = network::get_connection_stats(pl->first);
 				const int time_connected = stats.time_connected/1000;
 				const int seconds = time_connected%60;
@@ -785,7 +787,7 @@ std::string server::process_command(const std::string& query) {
 	} else {
 		out << "Command '" << command << "' is not recognized.\n";
 		out << "Available commands are: (lobby)msg <message>, motd [<message>]"
-			", status [<nickmask>], metrics, (k)ban(s) [<mask>], unban <ipmask>"
+			", status [<mask>], metrics, (k)ban(s) [<mask>], unban <ipmask>"
 			", kick <mask>";
 	}
 

