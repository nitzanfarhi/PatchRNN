commit b9932de56b2bb787716369be368f5299f1fc1da0
Author: Thomas Bernard <miniupnp@free.fr>
Date:   Wed Nov 30 10:32:06 2016 +0100

    optimize GifFillBackGround()

diff --git a/ngiflib.c b/ngiflib.c
index 6375609..bf23a41 100644
--- a/ngiflib.c
+++ b/ngiflib.c
@@ -256,7 +256,7 @@ u16 GetGifWord(struct ngiflib_img * i) {
 
 /* ------------------------------------------------ */
 void FillGifBackGround(struct ngiflib_gif * g) {
-	long n = g->width*g->height;
+	long n = (long)g->width*g->height;
 	u32 bg_truecolor;
 	if((g->frbuff==NULL)||(g->palette==NULL)) return;
 #ifndef NGIFLIB_INDEXED_ONLY
@@ -264,8 +264,7 @@ void FillGifBackGround(struct ngiflib_gif * g) {
 #else
 	{
 #endif /* NGIFLIB_INDEXED_ONLY */
-		u8 * p = (u8 *)g->frbuff;
-		while(n-->0) *p++ = g->backgroundindex;
+		ngiflib_memset(g->frbuff, g->backgroundindex, n);
 #ifndef NGIFLIB_INDEXED_ONLY
 	} else {
 		u32 * p = g->frbuff;
diff --git a/ngiflib.h b/ngiflib.h
index c15cbf4..4c97a20 100644
--- a/ngiflib.h
+++ b/ngiflib.h
@@ -20,6 +20,7 @@ typedef uint32_t u32;
 #define ngiflib_free free
 #include <string.h>
 #define ngiflib_memcpy memcpy
+#define ngiflib_memset memset
 
 /* Modes pour struct ngiflib_gif.mode
  */

