commit 597f6e622bbfc0e0567e1382f27d1d44e0dba268
Author: Michihiro NAKAJIMA <ggcueroad@gmail.com>
Date:   Sun Aug 14 21:47:49 2011 -0400

    Minor improvement. Adopt the part of the changes in r3602 to increase
    extraction speed.
    
    SVN-Revision: 3603

diff --git a/libarchive/archive_read_support_format_rar.c b/libarchive/archive_read_support_format_rar.c
index bec5a2d4..54f24a39 100644
--- a/libarchive/archive_read_support_format_rar.c
+++ b/libarchive/archive_read_support_format_rar.c
@@ -569,12 +569,11 @@ lzss_emit_match(struct rar *rar, int offset, int length)
     }
     d = &(rar->lzss.window[dstoffs]);
     s = &(rar->lzss.window[srcoffs]);
-    if (l >= 8 && ((dstoffs + l < srcoffs) || (srcoffs + l < dstoffs)))
+    if ((dstoffs + l < srcoffs) || (srcoffs + l < dstoffs))
       memcpy(d, s, l);
     else {
-      li = l;
-      while (li-- > 0)
-        *d++ = *s++;
+      for (li = 0; li < l; li++)
+        d[li] = s[li];
     }
     remaining -= l;
     dstoffs = (dstoffs + l) & lzss_mask(&(rar->lzss));

