commit d1f187732c5273c773bfe5996968e9bd703fdc04
Author: Paul Wouters <paul@xelerance.com>
Date:   Mon Apr 21 13:35:25 2008 -0400

    dev_get_by_name API change in 2.6.24

diff --git a/linux/include/openswan/ipsec_kern24.h b/linux/include/openswan/ipsec_kern24.h
index 2907f02d7..6a8157722 100644
--- a/linux/include/openswan/ipsec_kern24.h
+++ b/linux/include/openswan/ipsec_kern24.h
@@ -42,8 +42,15 @@
 #define device net_device
 #endif
 #endif
-# define ipsec_dev_get dev_get_by_name
-# define __ipsec_dev_get __dev_get_by_name
+
+# if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,24)
+#  define __ipsec_dev_get(x) __dev_get_by_name(&init_net, x)
+#  define ipsec_dev_get(x) dev_get_by_name(&init_net, x)
+# else
+#  define ipsec_dev_get(x) __dev_get_by_name(x)
+#  define __ipsec_dev_get(x) __dev_get_by_name(x)
+# endif
+
 # define ipsec_dev_put(x) dev_put(x)
 # define __ipsec_dev_put(x) __dev_put(x)
 # define ipsec_dev_hold(x) dev_hold(x)

