commit 90d077832b1e37952675b85bcd24a0e948bb09d9
Author: lion@ubuntu.ubuntu-domain <lion@ubuntu.ubuntu-domain>
Date:   Fri Dec 7 08:50:35 2012 +0400

    lib-index: Fixed sequence lookup of newly created mails in transaction view.

diff --git a/src/lib-index/mail-index-transaction-view.c b/src/lib-index/mail-index-transaction-view.c
index bbfb662ef..b2bbee913 100644
--- a/src/lib-index/mail-index-transaction-view.c
+++ b/src/lib-index/mail-index-transaction-view.c
@@ -203,7 +203,7 @@ static void tview_lookup_seq_range(struct mail_index_view *view,
 			if (first_uid <= rec->uid)
 				break;
 		}
-		if (seq > tview->t->last_new_seq) {
+		if (seq > tview->t->last_new_seq || rec->uid > last_uid) {
 			/* no messages in range */
 			return;
 		}

