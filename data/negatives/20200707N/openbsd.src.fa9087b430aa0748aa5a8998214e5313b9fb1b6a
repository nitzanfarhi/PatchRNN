commit fa9087b430aa0748aa5a8998214e5313b9fb1b6a
Author: niallo <niallo@openbsd.org>
Date:   Sun Oct 9 21:17:59 2005 +0000

    if -r is not specified, we need to set newrev to file->rf_head.
    
    simpler fix than what i had in mind pointed out by joris.

diff --git a/usr.bin/rcs/ci.c b/usr.bin/rcs/ci.c
index 20248836417..366b5483026 100644
--- a/usr.bin/rcs/ci.c
+++ b/usr.bin/rcs/ci.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: ci.c,v 1.14 2005/10/09 19:29:22 joris Exp $	*/
+/*	$OpenBSD: ci.c,v 1.15 2005/10/09 21:17:59 niallo Exp $	*/
 /*
  * Copyright (c) 2005 Niall O'Higgins <niallo@openbsd.org>
  * All rights reserved.
@@ -211,7 +211,8 @@ checkin_main(int argc, char **argv)
 		 */
 		if (newrev != NULL)
 			rcs_head_set(file, newrev);
-
+		else
+			newrev = file->rf_head;
 		/*
 		 * New head revision has to contain entire file;
 		 */

