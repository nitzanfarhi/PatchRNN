commit d7740fc8f350f6332fee27299c1152ba6c5dc9d0
Author: antirez <antirez@gmail.com>
Date:   Thu Jan 3 14:22:55 2013 +0100

    Better error reporting when fd event creation fails.

diff --git a/src/networking.c b/src/networking.c
index 4365bc8e..c23939c5 100644
--- a/src/networking.c
+++ b/src/networking.c
@@ -517,7 +517,9 @@ void copyClientOutputBuffer(redisClient *dst, redisClient *src) {
 static void acceptCommonHandler(int fd, int flags) {
     redisClient *c;
     if ((c = createClient(fd)) == NULL) {
-        redisLog(REDIS_WARNING,"Error allocating resources for the client");
+        redisLog(REDIS_WARNING,
+            "Error registering fd event for the new client: %s (fd=%d)",
+            strerror(errno),fd);
         close(fd); /* May be already closed, just ignore errors */
         return;
     }
diff --git a/src/replication.c b/src/replication.c
index 36afd83c..a51e3f56 100644
--- a/src/replication.c
+++ b/src/replication.c
@@ -636,7 +636,9 @@ void syncWithMaster(aeEventLoop *el, int fd, void *privdata, int mask) {
     if (aeCreateFileEvent(server.el,fd, AE_READABLE,readSyncBulkPayload,NULL)
             == AE_ERR)
     {
-        redisLog(REDIS_WARNING,"Can't create readable event for SYNC");
+        redisLog(REDIS_WARNING,
+            "Can't create readable event for SYNC: %s (fd=%d)",
+            strerror(errno),fd);
         goto error;
     }
 

