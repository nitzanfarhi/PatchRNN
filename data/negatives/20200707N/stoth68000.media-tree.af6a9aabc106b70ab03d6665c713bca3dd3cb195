commit af6a9aabc106b70ab03d6665c713bca3dd3cb195
Author: John Rigby <jrigby@freescale.com>
Date:   Wed May 23 11:30:55 2007 -0600

    [POWERPC] 52xx: Fix mpc52xx_uart_of_assign to use correct index
    
    Use idx as index into mpc52xx_uart_nodes instead of i
    
    Signed-off-by: John Rigby <jrigby@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

diff --git a/drivers/serial/mpc52xx_uart.c b/drivers/serial/mpc52xx_uart.c
index 35f8b86cc78f..035cca028199 100644
--- a/drivers/serial/mpc52xx_uart.c
+++ b/drivers/serial/mpc52xx_uart.c
@@ -1051,7 +1051,7 @@ mpc52xx_uart_of_assign(struct device_node *np, int idx)
 	/* If the slot is already occupied, then swap slots */
 	if (mpc52xx_uart_nodes[idx] && (free_idx != -1))
 		mpc52xx_uart_nodes[free_idx] = mpc52xx_uart_nodes[idx];
-	mpc52xx_uart_nodes[i] = np;
+	mpc52xx_uart_nodes[idx] = np;
 }
 
 static void

