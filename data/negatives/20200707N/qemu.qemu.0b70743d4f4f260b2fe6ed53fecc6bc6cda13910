commit 0b70743d4f4f260b2fe6ed53fecc6bc6cda13910
Author: Eric Auger <eric.auger@linaro.org>
Date:   Thu Jun 11 09:44:40 2015 +0100

    hw/vfio/platform: replace g_malloc0_n by g_new0
    
    g_malloc0_n() is introduced since glib-2.24 while QEMU currently
    requires glib-2.22. This may cause a link error on some distributions.
    
    Signed-off-by: Eric Auger <eric.auger@linaro.org>
    Reviewed-by: Gonglei <arei.gonglei@huawei.com>
    Acked-by: Alex Williamson <alex.williamson@redhat.com>
    Signed-off-by: Peter Maydell <peter.maydell@linaro.org>

diff --git a/hw/vfio/platform.c b/hw/vfio/platform.c
index 35266a813c..9382bb7f36 100644
--- a/hw/vfio/platform.c
+++ b/hw/vfio/platform.c
@@ -346,8 +346,7 @@ static int vfio_populate_device(VFIODevice *vbasedev)
         return ret;
     }
 
-    vdev->regions = g_malloc0_n(vbasedev->num_regions,
-                                sizeof(VFIORegion *));
+    vdev->regions = g_new0(VFIORegion *, vbasedev->num_regions);
 
     for (i = 0; i < vbasedev->num_regions; i++) {
         struct vfio_region_info reg_info = { .argsz = sizeof(reg_info) };

