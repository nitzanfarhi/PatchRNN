commit 65dbfb2f0b8e442935354ccaf5ce7398c55f738c
Author: Zardosht Kasheff <zardosht@tokutek.com>
Date:   Wed Apr 17 00:01:51 2013 -0400

    addresses #1723
    small change
    
    git-svn-id: file:///svn/mysql/tokudb-engine/src@11524 c7de825b-a66e-492c-adef-691d508d4ae1

diff --git a/storage/tokudb/ha_tokudb.cc b/storage/tokudb/ha_tokudb.cc
index 92052f31727..17a348fda49 100644
--- a/storage/tokudb/ha_tokudb.cc
+++ b/storage/tokudb/ha_tokudb.cc
@@ -2837,7 +2837,10 @@ void ha_tokudb::set_query_columns(uint keynr) {
 }
 
 void ha_tokudb::column_bitmaps_signal() {
-    if (active_index != MAX_KEY) {
+    //
+    // if we have max number of indexes, then MAX_KEY == primary_key
+    //
+    if (active_index != MAX_KEY || active_index == primary_key) {
         set_query_columns(active_index);
     }
 }

