commit d3f3690b485e1d240fec4f204aef54e07853a244
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Sep 21 16:41:43 2011 -0400

    hb-shape: In --no-glyph-names, output glyph number directly
    
    Ie. write "86" instead of "gid86".

diff --git a/util/options.cc b/util/options.cc
index 4429e854..29e0b4fb 100644
--- a/util/options.cc
+++ b/util/options.cc
@@ -646,10 +646,13 @@ format_options_t::serialize (hb_buffer_t *buffer,
       g_string_append_c (gs, '|');
 
     char glyph_name[30];
-    if (show_glyph_names && !FT_Get_Glyph_Name (ft_face, info->codepoint, glyph_name, sizeof (glyph_name)))
-      g_string_append_printf (gs, "%s", glyph_name);
-    else
-      g_string_append_printf (gs, "gid%d", info->codepoint);
+    if (show_glyph_names) {
+      if (!FT_Get_Glyph_Name (ft_face, info->codepoint, glyph_name, sizeof (glyph_name)))
+	g_string_append_printf (gs, "%s", glyph_name);
+      else
+	g_string_append_printf (gs, "gid%d", info->codepoint);
+    } else
+      g_string_append_printf (gs, "%d", info->codepoint);
 
     if (show_clusters)
       g_string_append_printf (gs, "=%d", info->cluster);

