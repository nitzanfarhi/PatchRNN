commit 92be608302973ebae0ec55ea726567fd9b042b05
Author: Kamil Dudka <kdudka@redhat.com>
Date:   Tue Aug 31 17:19:57 2010 +0200

    FileTransfer.cpp: add forgotten open error test
    
    Signed-off-by: Kamil Dudka <kdudka@redhat.com>
    Signed-off-by: Denys Vlasenko <dvlasenk@redhat.com>

diff --git a/lib/plugins/FileTransfer.cpp b/lib/plugins/FileTransfer.cpp
index 05820d05..41874d2e 100644
--- a/lib/plugins/FileTransfer.cpp
+++ b/lib/plugins/FileTransfer.cpp
@@ -232,6 +232,10 @@ void CFileTransfer::Run(const char *pActionDir, const char *pArgs, int force)
     {
         /* Remember pActiveDir for later sending */
         FILE *dirlist = fopen(FILETRANSFER_DIRLIST, "a");
+        if (!dirlist)
+        {
+            throw CABRTException(EXCEP_PLUGIN, "Can't open "FILETRANSFER_DIRLIST);
+        }
         fprintf(dirlist, "%s\n", pActionDir);
         fclose(dirlist);
         VERB3 log("Remembered '%s' for future file transfer", pActionDir);

