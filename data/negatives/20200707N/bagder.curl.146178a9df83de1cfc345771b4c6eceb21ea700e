commit 146178a9df83de1cfc345771b4c6eceb21ea700e
Author: Daniel Stenberg <daniel@haxx.se>
Date:   Fri Jun 22 00:13:29 2018 +0200

    ConnectionExists: make sure conn->data is set when "taking" a connection
    
    Follow-up to 2c15693.
    
    Bug #2674
    Closes #2675

diff --git a/lib/url.c b/lib/url.c
index 0cab0a303..f1a6e8db4 100644
--- a/lib/url.c
+++ b/lib/url.c
@@ -1465,6 +1465,7 @@ ConnectionExists(struct Curl_easy *data,
   if(chosen) {
     /* mark it as used before releasing the lock */
     chosen->inuse = TRUE;
+    chosen->data = data; /* own it! */
     Curl_conncache_unlock(needle);
     *usethis = chosen;
     return TRUE; /* yes, we found one to use! */

