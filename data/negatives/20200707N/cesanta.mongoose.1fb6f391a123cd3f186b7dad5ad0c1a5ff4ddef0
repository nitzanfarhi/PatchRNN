commit 1fb6f391a123cd3f186b7dad5ad0c1a5ff4ddef0
Author: Sergey Lyubka <valenok@gmail.com>
Date:   Sun Jan 13 10:55:42 2013 +0000

    In mg_upload(), use fopen() with "wb" mode instead of "wbx", cause "x" is not understood by Mac and Windows.

diff --git a/mongoose.c b/mongoose.c
index 9a23b32..b34d772 100644
--- a/mongoose.c
+++ b/mongoose.c
@@ -4141,9 +4141,9 @@ int mg_upload(struct mg_connection *conn, const char *destination_dir) {
     if ((s = strrchr(fname, '/')) == NULL) {
       s = fname;
     }
-    // Open file in binary mode with exclusive lock set
+    // Open file in binary mode. TODO: set an exclusive lock.
     snprintf(path, sizeof(path), "%s/%s", destination_dir, s);
-    if ((fp = fopen(path, "wbx")) == NULL) {
+    if ((fp = fopen(path, "wb")) == NULL) {
       break;
     }
 

