commit 429bfd0e09fcf332bbbedc6baf3c088a7491fdd3
Author: claudio <claudio@openbsd.org>
Date:   Wed Apr 27 18:59:01 2011 +0000

    Add log_verbose() like all the other log.c users.

diff --git a/usr.sbin/iscsid/log.c b/usr.sbin/iscsid/log.c
index 3ed9a49e56c..24d2e6d57ec 100644
--- a/usr.sbin/iscsid/log.c
+++ b/usr.sbin/iscsid/log.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: log.c,v 1.3 2011/01/04 10:36:31 claudio Exp $ */
+/*	$OpenBSD: log.c,v 1.4 2011/04/27 18:59:01 claudio Exp $ */
 
 /*
  * Copyright (c) 2009 Claudio Jeker <claudio@openbsd.org>
@@ -37,6 +37,7 @@
 #include "log.h"
 
 int	debug;
+int	verbose;
 
 void	 logit(int, const char *, ...);
 
@@ -46,6 +47,7 @@ log_init(int n_debug)
 	extern char	*__progname;
 
 	debug = n_debug;
+	verbose = n_debug;
 
 	if (!debug)
 		openlog(__progname, LOG_PID | LOG_NDELAY, LOG_DAEMON);
@@ -53,6 +55,12 @@ log_init(int n_debug)
 	tzset();
 }
 
+void
+log_verbose(int v)
+{
+	verbose = v;
+}
+
 void
 logit(int pri, const char *fmt, ...)
 {
@@ -131,7 +139,7 @@ log_debug(const char *emsg, ...)
 {
 	va_list	 ap;
 
-	if (debug) {
+	if (verbose) {
 		va_start(ap, emsg);
 		vlog(LOG_DEBUG, emsg, ap);
 		va_end(ap);
diff --git a/usr.sbin/iscsid/log.h b/usr.sbin/iscsid/log.h
index a8658ea2223..01bbeb3b092 100644
--- a/usr.sbin/iscsid/log.h
+++ b/usr.sbin/iscsid/log.h
@@ -1,4 +1,4 @@
-/*	$OpenBSD: log.h,v 1.1 2010/09/24 09:43:19 claudio Exp $ */
+/*	$OpenBSD: log.h,v 1.2 2011/04/27 18:59:01 claudio Exp $ */
 
 /*
  * Copyright (c) 2003, 2004 Henning Brauer <henning@openbsd.org>
@@ -22,6 +22,7 @@
 #include <stdarg.h>
 
 void	log_init(int);
+void	log_verbose(int);
 void	vlog(int, const char *, va_list);
 void	log_warn(const char *, ...);
 void	log_warnx(const char *, ...);

