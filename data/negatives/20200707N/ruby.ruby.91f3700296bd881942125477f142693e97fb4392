commit 91f3700296bd881942125477f142693e97fb4392
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   Fri Oct 27 06:01:21 2017 +0000

    should use `th`.
    
    * signal.c (check_stack_overflow): ruby_stack_overflowed_p()
      should accept `th`.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@60475 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

diff --git a/signal.c b/signal.c
index a9d68e47a5..5a8ccf5771 100644
--- a/signal.c
+++ b/signal.c
@@ -856,10 +856,10 @@ static void
 check_stack_overflow(int sig, const void *addr)
 {
     int ruby_stack_overflowed_p(const rb_thread_t *, const void *);
-    rb_execution_context_t *ec = GET_EC();
-    if (ruby_stack_overflowed_p(ec, addr)) {
+    rb_thread_t *th = GET_THREAD();
+    if (ruby_stack_overflowed_p(th, addr)) {
 	reset_sigmask(sig);
-	rb_ec_stack_overflow(ec, FALSE);
+	rb_ec_stack_overflow(th->ec, FALSE);
     }
 }
 # endif

