commit 5ede859b00af261c78b3848a362253c76652e035
Author: chandan <chandan@linux.vnet.ibm.com>
Date:   Mon Oct 14 18:44:39 2013 +0530

    Btrfs: btrfs_add_ordered_operation: Fix last modified transaction comparison.
    
    Comparison of an inode's last modified transaction with the last committed
    transaction is incorrect. Fix it.
    
    Signed-off-by: chandan <chandan@linux.vnet.ibm.com>
    Signed-off-by: Josef Bacik <jbacik@fusionio.com>
    Signed-off-by: Chris Mason <chris.mason@fusionio.com>

diff --git a/fs/btrfs/ordered-data.c b/fs/btrfs/ordered-data.c
index c702cb62f78a..1a36a0c3ee27 100644
--- a/fs/btrfs/ordered-data.c
+++ b/fs/btrfs/ordered-data.c
@@ -1076,7 +1076,7 @@ void btrfs_add_ordered_operation(struct btrfs_trans_handle *trans,
 	 * if this file hasn't been changed since the last transaction
 	 * commit, we can safely return without doing anything
 	 */
-	if (last_mod < root->fs_info->last_trans_committed)
+	if (last_mod <= root->fs_info->last_trans_committed)
 		return;
 
 	spin_lock(&root->fs_info->ordered_root_lock);

