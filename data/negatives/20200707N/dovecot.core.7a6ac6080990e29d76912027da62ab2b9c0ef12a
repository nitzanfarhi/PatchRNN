commit 7a6ac6080990e29d76912027da62ab2b9c0ef12a
Author: Timo Sirainen <tss@iki.fi>
Date:   Tue May 22 02:17:17 2007 +0300

    Complain about missing pop3_uidl_format if pop3 is enabled.
    
    --HG--
    branch : HEAD

diff --git a/src/master/master-settings.c b/src/master/master-settings.c
index 7f6c0ab0d..c712152c4 100644
--- a/src/master/master-settings.c
+++ b/src/master/master-settings.c
@@ -626,6 +626,12 @@ static bool settings_verify(struct settings *set)
 	if (!get_login_uid(set))
 		return FALSE;
 
+	if (set->protocol == MAIL_PROTOCOL_POP3 &&
+	    *set->pop3_uidl_format == '\0') {
+		i_error("POP3 enabled but pop3_uidl_format not set");
+		return FALSE;
+	}
+
 	if (access(t_strcut(set->mail_executable, ' '), X_OK) < 0) {
 		i_error("Can't use mail executable %s: %m",
 			t_strcut(set->mail_executable, ' '));

