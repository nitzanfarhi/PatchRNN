commit 61f6122074475e53befde67424397b05f74a540f
Author: Steven Dake <sdake@redhat.com>
Date:   Wed Jul 13 20:10:56 2005 +0000

    defect 713
    if active replica not set in section delete, return error
    
    
    git-svn-id: http://svn.fedorahosted.org/svn/corosync/trunk@751 fd59a12c-fef9-0310-b244-a6a79926bd2f

diff --git a/exec/ckpt.c b/exec/ckpt.c
index 636dcc32..8e63964a 100644
--- a/exec/ckpt.c
+++ b/exec/ckpt.c
@@ -2209,6 +2209,12 @@ static int message_handler_req_exec_ckpt_sectiondelete (void *message, struct in
 		goto error_exit;
 	}
 
+	if (ckptCheckpoint->active_replica_set == 0) {
+		log_printf (LOG_LEVEL_NOTICE, "sectiondelete: no active replica, returning error.\n");
+		error = SA_AIS_ERR_NOT_EXIST;
+		goto error_exit;
+	}
+
 	/*
 	 * Determine if the user is trying to delete the default section
 	 */

