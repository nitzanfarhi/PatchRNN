commit 781fdebbb6137a7491dd66b2f35dd6ca0fd4bc3e
Author: Poul-Henning Kamp <phk@phk.freebsd.dk>
Date:   Sun Aug 20 14:53:26 2006 +0000

    pid -1 is not our child
    
    
    git-svn-id: http://www.varnish-cache.org/svn/trunk/varnish-cache@849 d4fa192b-c00b-0410-8231-f00ffab90ce4

diff --git a/bin/varnishd/mgt_child.c b/bin/varnishd/mgt_child.c
index 2857f2584..564f05df8 100644
--- a/bin/varnishd/mgt_child.c
+++ b/bin/varnishd/mgt_child.c
@@ -217,7 +217,7 @@ mgt_sigchld(struct ev *e, int what)
 	ev_poker = NULL;
 
 	r = wait4(-1, &status, WNOHANG, NULL);
-	if (r != child_pid) {
+	if (r != child_pid || r == -1) {
 		fprintf(stderr, "Unknown child died pid=%d status=0x%x\n",
 		    r, status);
 		return (0);

