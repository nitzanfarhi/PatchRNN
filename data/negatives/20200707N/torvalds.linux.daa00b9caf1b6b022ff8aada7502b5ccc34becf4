commit daa00b9caf1b6b022ff8aada7502b5ccc34becf4
Author: Jesper Nilsson <jesper.nilsson@axis.com>
Date:   Mon Jan 28 16:40:21 2008 +0100

    CRIS: Add sched_clock to kernel/time.c
    
    Also, clean up some whitespace errors.

diff --git a/arch/cris/kernel/time.c b/arch/cris/kernel/time.c
index 7a2cc7efbcf8..b7ad10e3e46c 100644
--- a/arch/cris/kernel/time.c
+++ b/arch/cris/kernel/time.c
@@ -1,5 +1,4 @@
-/* $Id: time.c,v 1.18 2005/03/04 08:16:17 starvik Exp $
- *
+/*
  *  linux/arch/cris/kernel/time.c
  *
  *  Copyright (C) 1991, 1992, 1995  Linus Torvalds
@@ -18,7 +17,7 @@
  * Linux/CRIS specific code:
  *
  * Authors:    Bjorn Wesen
- *             Johan Adolfsson  
+ *             Johan Adolfsson
  *
  */
 
@@ -208,10 +207,16 @@ cris_do_profile(struct pt_regs* regs)
 #endif
 
 #ifdef CONFIG_PROFILING
-        profile_tick(CPU_PROFILING);
+	profile_tick(CPU_PROFILING, regs);
 #endif
 }
 
+unsigned long long sched_clock(void)
+{
+	return (unsigned long long)jiffies * (1000000000 / HZ) +
+		get_ns_in_jiffie();
+}
+
 static int
 __init init_udelay(void)
 {

