commit 51888c85d4c196bffa1a02907d7dcd98d538b889
Author: Vishwanath Dixit <vdixit@akamai.com>
Date:   Wed Apr 11 12:30:29 2018 +0530

    avformat/dashenc: writing average segment duration for @duration in template mode

diff --git a/libavformat/dashenc.c b/libavformat/dashenc.c
index ad52730b6d..4c2e63c936 100644
--- a/libavformat/dashenc.c
+++ b/libavformat/dashenc.c
@@ -347,7 +347,7 @@ static void output_segment_list(OutputStream *os, AVIOContext *out, AVFormatCont
         int timescale = c->use_timeline ? os->ctx->streams[0]->time_base.den : AV_TIME_BASE;
         avio_printf(out, "\t\t\t\t<SegmentTemplate timescale=\"%d\" ", timescale);
         if (!c->use_timeline)
-            avio_printf(out, "duration=\"%"PRId64"\" ", c->last_duration);
+            avio_printf(out, "duration=\"%"PRId64"\" ", c->seg_duration);
         avio_printf(out, "initialization=\"%s\" media=\"%s\" startNumber=\"%d\">\n", c->init_seg_name, c->media_seg_name, c->use_timeline ? start_number : 1);
         if (c->use_timeline) {
             int64_t cur_time = 0;

