commit 273759e2c3bd69efe74799c446df69d9ea5ca418
Author: Mat Martineau <mathewm@codeaurora.org>
Date:   Thu May 17 20:53:53 2012 -0700

    Bluetooth: Set txwin values for streaming mode
    
    The transmit window values must be configured for streaming mode, even
    though streaming mode does not have a window.  This enables use of
    extended headers when the transmit window socket option is set to 64
    or larger.
    
    Signed-off-by: Mat Martineau <mathewm@codeaurora.org>
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>

diff --git a/net/bluetooth/l2cap_core.c b/net/bluetooth/l2cap_core.c
index 288c8e660377..db59b259297f 100644
--- a/net/bluetooth/l2cap_core.c
+++ b/net/bluetooth/l2cap_core.c
@@ -2941,6 +2941,7 @@ done:
 		break;
 
 	case L2CAP_MODE_STREAMING:
+		l2cap_txwin_setup(chan);
 		rfc.mode            = L2CAP_MODE_STREAMING;
 		rfc.txwin_size      = 0;
 		rfc.max_transmit    = 0;

