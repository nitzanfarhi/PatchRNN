commit 42536b9f9ce38b07ac213c5f4550301f9a0d251d
Author: Philippe Retornaz <philippe.retornaz@epfl.ch>
Date:   Mon Oct 14 09:45:17 2013 +0100

    ARM: 7857/1: dma: imx-sdma: setup dma mask
    
    The dma mask is not configured in the current code.
    This was triggered by soc-dmaengine-pcm which allocate the dma
    buffers with the imx-sdma as device.
    This commit fix audio on imx31.
    
    Signed-off-by: Philippe RÃ©tornaz <philippe.retornaz@epfl.ch>
    Acked-by: Sascha Hauer <s.hauer@pengutronix.de>
    Acked-by: Vinod Koul <vinod.koul@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/drivers/dma/imx-sdma.c b/drivers/dma/imx-sdma.c
index fc43603cf0bb..c1fd504cae28 100644
--- a/drivers/dma/imx-sdma.c
+++ b/drivers/dma/imx-sdma.c
@@ -1432,6 +1432,10 @@ static int __init sdma_probe(struct platform_device *pdev)
 		return -EINVAL;
 	}
 
+	ret = dma_coerce_mask_and_coherent(&pdev->dev, DMA_BIT_MASK(32));
+	if (ret)
+		return ret;
+
 	sdma = kzalloc(sizeof(*sdma), GFP_KERNEL);
 	if (!sdma)
 		return -ENOMEM;

