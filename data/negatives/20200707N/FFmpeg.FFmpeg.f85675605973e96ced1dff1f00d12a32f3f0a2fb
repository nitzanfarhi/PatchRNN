commit f85675605973e96ced1dff1f00d12a32f3f0a2fb
Author: Baptiste Coudurier <baptiste.coudurier@gmail.com>
Date:   Wed Nov 22 13:24:58 2006 +0000

    fix sigfpe with intra only encoding
    
    Originally committed as revision 7156 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/svq1.c b/libavcodec/svq1.c
index a167ac9c8f..957176e386 100644
--- a/libavcodec/svq1.c
+++ b/libavcodec/svq1.c
@@ -1355,7 +1355,7 @@ static int svq1_encode_frame(AVCodecContext *avctx, unsigned char *buf,
     init_put_bits(&s->pb, buf, buf_size);
 
     *p = *pict;
-    p->pict_type = avctx->frame_number % avctx->gop_size ? P_TYPE : I_TYPE;
+    p->pict_type = avctx->gop_size && avctx->frame_number % avctx->gop_size ? P_TYPE : I_TYPE;
     p->key_frame = p->pict_type == I_TYPE;
 
     svq1_write_header(s, p->pict_type);

