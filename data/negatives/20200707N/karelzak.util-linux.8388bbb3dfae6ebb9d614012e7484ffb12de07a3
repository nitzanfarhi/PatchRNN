commit 8388bbb3dfae6ebb9d614012e7484ffb12de07a3
Author: Karel Zak <kzak@redhat.com>
Date:   Wed Jun 13 13:55:49 2012 +0200

    eject: don't try to use non-device path
    
    Signed-off-by: Karel Zak <kzak@redhat.com>

diff --git a/sys-utils/eject.c b/sys-utils/eject.c
index 240e27e74..402152204 100644
--- a/sys-utils/eject.c
+++ b/sys-utils/eject.c
@@ -983,8 +983,15 @@ int main(int argc, char **argv)
 		free(device);
 		device = disk;
 		disk = NULL;
-	} else
+	} else {
+		struct stat st;
+
+		if (stat(device, &st) != 0 || !S_ISBLK(st.st_mode))
+			errx(EXIT_FAILURE, _("%s: not found mountpoint or device "
+					"with the given name"), device);
+
 		verbose(_("%s: is whole-disk device"), device);
+	}
 
 	if (F_option == 0 && is_hotpluggable(device) == 0)
 		errx(EXIT_FAILURE, _("%s: is not hot-pluggable device"), device);

