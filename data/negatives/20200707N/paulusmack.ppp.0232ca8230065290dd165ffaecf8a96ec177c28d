commit 0232ca8230065290dd165ffaecf8a96ec177c28d
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Mar 22 00:42:33 2001 +0000

    prevent ipv6 stuff from complaining about no addresses in demand mode
    if ipv6 is not enabled

diff --git a/pppd/ipv6cp.c b/pppd/ipv6cp.c
index cf7fed8..3a370a0 100644
--- a/pppd/ipv6cp.c
+++ b/pppd/ipv6cp.c
@@ -90,10 +90,10 @@
  * IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
  * WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
  *
- * $Id: ipv6cp.c,v 1.14 2001/03/08 05:29:28 paulus Exp $ 
+ * $Id: ipv6cp.c,v 1.15 2001/03/22 00:42:33 paulus Exp $ 
  */
 
-#define RCSID	"$Id: ipv6cp.c,v 1.14 2001/03/08 05:29:28 paulus Exp $"
+#define RCSID	"$Id: ipv6cp.c,v 1.15 2001/03/22 00:42:33 paulus Exp $"
 
 /*
  * TODO: 
@@ -1024,6 +1024,9 @@ ipv6_check_options()
 {
     ipv6cp_options *wo = &ipv6cp_wantoptions[0];
 
+    if (!ipv6cp_protent.enabled_flag)
+	return;
+
 #if defined(SOL2)
     /*
      * Persistent link-local id is only used when user has not explicitly

