commit a85c8e17587e81e1c82f6f341a81e4c778fa65f6
Author: roel kluin <roel.kluin@gmail.com>
Date:   Tue May 19 14:58:56 2009 +0000

    tape: beyond ARRAY_SIZE of viocd_diskinfo
    
    Do not go beyond ARRAY_SIZE of tape_device and viotape_unitinfo
    
    Signed-off-by: Roel Kluin <roel.kluin@gmail.com>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>

diff --git a/drivers/char/viotape.c b/drivers/char/viotape.c
index ffc9254f7e02..042c8149a6d1 100644
--- a/drivers/char/viotape.c
+++ b/drivers/char/viotape.c
@@ -867,7 +867,7 @@ static int viotape_probe(struct vio_dev *vdev, const struct vio_device_id *id)
 	int j;
 	struct device_node *node = vdev->dev.archdata.of_node;
 
-	if (i > VIOTAPE_MAX_TAPE)
+	if (i >= VIOTAPE_MAX_TAPE)
 		return -ENODEV;
 	if (!node)
 		return -ENODEV;

