commit c48da0d68b8312bea48e9d43984be2150124d605
Author: w00t <w00t@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Thu Aug 21 13:49:40 2008 +0000

    Don't even touch remote joins.
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@10202 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/modules/m_restrictchans.cpp b/src/modules/m_restrictchans.cpp
index 587ba24c1..9d17d59b1 100644
--- a/src/modules/m_restrictchans.cpp
+++ b/src/modules/m_restrictchans.cpp
@@ -54,6 +54,9 @@ class ModuleRestrictChans : public Module
 	virtual int OnUserPreJoin(User* user, Channel* chan, const char* cname, std::string &privs, const std::string &keygiven)
 	{
 		irc::string x = cname;
+		if (!IS_LOCAL(user))
+			return;
+
 		// user is not an oper and its not in the allow list
 		if ((!IS_OPER(user)) && (allowchans.find(x) == allowchans.end()))
 		{

