commit 5cf6900cf911bae1b87016610bb0174a2ee9987e
Author: pancake <pancake@nopcode.org>
Date:   Sat Oct 4 17:43:27 2014 +0200

    Fix symbol list on some MACH0 files

diff --git a/libr/bin/format/mach0/mach0.c b/libr/bin/format/mach0/mach0.c
index b0141087e..cdec63484 100644
--- a/libr/bin/format/mach0/mach0.c
+++ b/libr/bin/format/mach0/mach0.c
@@ -643,12 +643,21 @@ struct r_bin_mach0_symbol_t* MACH0_(r_bin_mach0_get_symbols)(struct MACH0_(r_bin
 	if (!(symbols = malloc (symbols_size)))
 		return NULL;
 	for (s = j = 0; s < 2; s++) {
-		if (s == 0) {
+		switch (s) {
+		case 0:
 			from = bin->dysymtab.iextdefsym;
 			to = from + bin->dysymtab.nextdefsym;
-		} else {
+			break;
+		case 1:
 			from = bin->dysymtab.ilocalsym;
 			to = from + bin->dysymtab.nlocalsym;
+			break;
+#if NOT_USED
+		case 2:
+			from = bin->dysymtab.iundefsym;
+			to = from + bin->dysymtab.nundefsym;
+			break;
+#endif
 		}
 		from = R_MIN (R_MAX (0, from), symbols_size/sizeof(struct r_bin_mach0_symbol_t));
 		to = R_MIN (to , symbols_size/sizeof(struct r_bin_mach0_symbol_t));
@@ -658,7 +667,6 @@ struct r_bin_mach0_symbol_t* MACH0_(r_bin_mach0_get_symbols)(struct MACH0_(r_bin
 			free (symbols);
 			return NULL;
 		}
-		j = 0;
 		for (i = from; i < to; i++, j++) {
 			symbols[j].offset = MACH0_(r_bin_mach0_addr_to_offset)(bin, bin->symtab[i].n_value);
 			symbols[j].addr = bin->symtab[i].n_value;

