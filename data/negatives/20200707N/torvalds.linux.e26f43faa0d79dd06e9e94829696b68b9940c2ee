commit e26f43faa0d79dd06e9e94829696b68b9940c2ee
Author: Vlad Yasevich <vyasevich@gmail.com>
Date:   Wed Jun 21 07:59:16 2017 -0400

    macvlan: Do not return error when setting the same mac address
    
    The user currently gets an EBUSY error when attempting to set
    the mac address on a macvlan device to the same value.
    
    This should really be a no-op as nothing changes.  Catch
    the condition and return early.
    
    Signed-off-by: Vladislav Yasevich <vyasevic@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/macvlan.c b/drivers/net/macvlan.c
index 67bf7ebae5c6..de214fbda173 100644
--- a/drivers/net/macvlan.c
+++ b/drivers/net/macvlan.c
@@ -703,6 +703,10 @@ static int macvlan_set_mac_address(struct net_device *dev, void *p)
 	if (!is_valid_ether_addr(addr->sa_data))
 		return -EADDRNOTAVAIL;
 
+	/* If the addresses are the same, this is a no-op */
+	if (ether_addr_equal(dev->dev_addr, addr->sa_data))
+		return 0;
+
 	if (vlan->mode == MACVLAN_MODE_PASSTHRU) {
 		dev_set_mac_address(vlan->lowerdev, addr);
 		return 0;

