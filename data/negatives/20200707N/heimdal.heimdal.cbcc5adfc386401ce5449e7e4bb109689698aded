commit cbcc5adfc386401ce5449e7e4bb109689698aded
Author: Love Hörnquist Åstrand <lha@kth.se>
Date:   Mon Nov 27 12:14:07 2006 +0000

    (hx509_crypto_available): let alg pass if its keyless
    
    
    git-svn-id: svn://svn.h5l.se/heimdal/trunk/heimdal@19153 ec53bebd-3082-4978-b11e-865c3cabbd6b

diff --git a/lib/hx509/crypto.c b/lib/hx509/crypto.c
index d61f0537f..0ca487ec8 100644
--- a/lib/hx509/crypto.c
+++ b/lib/hx509/crypto.c
@@ -2207,7 +2207,8 @@ hx509_crypto_available(hx509_context context,
 	    continue;
 	if (sig_algs[i]->sig_alg == NULL)
 	    continue;
-	if (keytype && der_heim_oid_cmp((*sig_algs[i]->key_oid)(), keytype))
+	if (keytype && sig_algs[i]->key_oid && 
+	    der_heim_oid_cmp((*sig_algs[i]->key_oid)(), keytype))
 	    continue;
 
 	ptr = realloc(*val, sizeof(**val) * (len + 1));

