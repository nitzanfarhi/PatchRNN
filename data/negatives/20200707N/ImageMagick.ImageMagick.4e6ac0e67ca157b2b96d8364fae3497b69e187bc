commit 4e6ac0e67ca157b2b96d8364fae3497b69e187bc
Author: Dirk Lemstra <dirk@git.imagemagick.org>
Date:   Mon May 15 21:24:18 2017 +0200

    Fixed incorrect call to DestroyImage reported in #491.

diff --git a/MagickCore/image.c b/MagickCore/image.c
index 9936fe17c..ce60390fb 100644
--- a/MagickCore/image.c
+++ b/MagickCore/image.c
@@ -853,7 +853,7 @@ MagickExport Image *CloneImage(const Image *image,const size_t columns,
         sizeof(*clone_image->colormap));
       if (clone_image->colormap == (PixelInfo *) NULL)
         {
-          clone_image=DestroyImage(clone_image);
+          image=(Image *) RelinquishMagickMemory(image);
           ThrowImageException(ResourceLimitError,"MemoryAllocationFailed");
         }
       (void) CopyMagickMemory(clone_image->colormap,image->colormap,length*

