commit 6e80ba1b02f6af9f2866cf36b40e1265cfe18ce9
Author: post <klauspost@gmail.com>
Date:   Wed Apr 25 14:08:06 2012 +0000

    Add safeguards for recieving empty size responses.

diff --git a/plugins/rotate/rotate.c b/plugins/rotate/rotate.c
index 05394c82..08a7d279 100644
--- a/plugins/rotate/rotate.c
+++ b/plugins/rotate/rotate.c
@@ -358,6 +358,9 @@ get_size(RSFilter *filter, const RSFilterRequest *request)
 	RSRotate *rotate = RS_ROTATE(filter);
 	RSFilterResponse *previous_response = rs_filter_get_size(filter->previous, request);
 
+	if (!previous_response)
+		return NULL;
+
 	recalculate(rotate, request);
 
 	RSFilterResponse *response = rs_filter_response_clone(previous_response);
@@ -496,6 +499,8 @@ recalculate(RSRotate *rotate, const RSFilterRequest *request)
 {
 	RSFilter *previous = RS_FILTER(rotate)->previous;
 	RSFilterResponse *response = rs_filter_get_size(previous, request);
+	if (!response)
+		return;
 	gint previous_width = rs_filter_response_get_width(response);
 	gint previous_height = rs_filter_response_get_height(response);
 	g_object_unref(response);

