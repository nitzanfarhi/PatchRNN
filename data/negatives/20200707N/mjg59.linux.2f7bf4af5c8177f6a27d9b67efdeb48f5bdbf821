commit 2f7bf4af5c8177f6a27d9b67efdeb48f5bdbf821
Author: Heiko St√ºbner <heiko@sntech.de>
Date:   Tue Feb 24 11:39:25 2015 +0100

    clk: divider: return real rate instead of divider value
    
    Commit bca9690b9426 ("clk: divider: Make generic for usage elsewhere")
    returned only the divider value for read-only dividers instead of the
    actual rate.
    
    Fixes: bca9690b9426 ("clk: divider: Make generic for usage elsewhere")
    Signed-off-by: Heiko Stuebner <heiko@sntech.de>
    Reviewed-by: James Hogan <james.hogan@imgtec.com>
    Tested-by: James Hogan <james.hogan@imgtec.com>
    Acked-by: Stephen Boyd <sboyd@codeaurora.org>
    Signed-off-by: Michael Turquette <mturquette@linaro.org>

diff --git a/drivers/clk/clk-divider.c b/drivers/clk/clk-divider.c
index db7f8bce7467..eff8a862eb08 100644
--- a/drivers/clk/clk-divider.c
+++ b/drivers/clk/clk-divider.c
@@ -353,7 +353,7 @@ static long clk_divider_round_rate(struct clk_hw *hw, unsigned long rate,
 		bestdiv = readl(divider->reg) >> divider->shift;
 		bestdiv &= div_mask(divider->width);
 		bestdiv = _get_div(divider->table, bestdiv, divider->flags);
-		return bestdiv;
+		return DIV_ROUND_UP(*prate, bestdiv);
 	}
 
 	return divider_round_rate(hw, rate, prate, divider->table,

