commit abc08d4d08006fa19dec645859f81af9f227339e
Author: Thomas Hindoe Paaboel Andersen <phomes@gmail.com>
Date:   Fri Dec 12 19:51:41 2014 +0100

    wrap a few *_FOREACH macros in curly braces
    
    cppcheck would give up with "syntax error" without them. This led
    to reports of syntax errors in unrelated locations and potentially
    hid other errors

diff --git a/src/core/load-fragment.c b/src/core/load-fragment.c
index 3fbe680cf..8e5be8731 100644
--- a/src/core/load-fragment.c
+++ b/src/core/load-fragment.c
@@ -3586,7 +3586,7 @@ int unit_load_fragment(Unit *u) {
                 return r;
 
         /* Try to find an alias we can load this with */
-        if (u->load_state == UNIT_STUB)
+        if (u->load_state == UNIT_STUB) {
                 SET_FOREACH(t, u->names, i) {
 
                         if (t == u->id)
@@ -3599,6 +3599,7 @@ int unit_load_fragment(Unit *u) {
                         if (u->load_state != UNIT_STUB)
                                 break;
                 }
+        }
 
         /* And now, try looking for it under the suggested (originally linked) path */
         if (u->load_state == UNIT_STUB && u->fragment_path) {
@@ -3628,7 +3629,7 @@ int unit_load_fragment(Unit *u) {
                 if (r < 0)
                         return r;
 
-                if (u->load_state == UNIT_STUB)
+                if (u->load_state == UNIT_STUB) {
                         SET_FOREACH(t, u->names, i) {
                                 _cleanup_free_ char *z = NULL;
 
@@ -3646,6 +3647,7 @@ int unit_load_fragment(Unit *u) {
                                 if (u->load_state != UNIT_STUB)
                                         break;
                         }
+                }
         }
 
         return 0;
diff --git a/src/journal-remote/journal-remote.c b/src/journal-remote/journal-remote.c
index 6ec5ad2e7..5050616d8 100644
--- a/src/journal-remote/journal-remote.c
+++ b/src/journal-remote/journal-remote.c
@@ -1469,13 +1469,13 @@ static int setup_gnutls_logger(char **categories) {
 
                 gnutls_global_set_log_function(log_func_gnutls);
 
-                if (categories)
+                if (categories) {
                         STRV_FOREACH(cat, categories) {
                                 r = log_enable_gnutls_category(*cat);
                                 if (r < 0)
                                         return r;
                         }
-                else
+                } else
                         log_reset_gnutls_level();
         }
 #endif

