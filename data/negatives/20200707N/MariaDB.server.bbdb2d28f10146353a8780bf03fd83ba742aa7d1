commit bbdb2d28f10146353a8780bf03fd83ba742aa7d1
Author: unknown <gluh@gluh.mysql.r18.ru>
Date:   Mon Dec 6 11:55:57 2004 +0300

    Fix for bugs #6955 SHOW PROCEDURE STATUS crashes the server,
    #6950 mysql-nt.exe error when click on sql or database on mysql control center

diff --git a/sql/sql_show.cc b/sql/sql_show.cc
index eb9ca43b56a..d443ec96a01 100644
--- a/sql/sql_show.cc
+++ b/sql/sql_show.cc
@@ -2942,10 +2942,12 @@ TABLE *create_schema_table(THD *thd, TABLE_LIST *table_list)
       }
       break;
     default:
-      if (!(item= new Item_string("", fields_info->field_length, cs)))
+      /* this should be changed when Item_empty_string is fixed(in 4.1) */
+      if (!(item= new Item_empty_string("", 0, cs)))
       {
         DBUG_RETURN(0);
       }
+      item->max_length= fields_info->field_length * cs->mbmaxlen;
       item->set_name(fields_info->field_name,
                      strlen(fields_info->field_name), cs);
       break;

