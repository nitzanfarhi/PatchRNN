commit f4690a9f5eb71b9dd34522e90a6219daef06f1b8
Author: bdaw <bdaw@8f940c70-5916-0410-ac46-d1fa2fa6ea29>
Date:   Wed Nov 28 18:27:50 2012 +0000

    Switched the order to satisfy the coverity error. Should probably refactor the way this is done.

diff --git a/src/resmom/mom_job_func.c b/src/resmom/mom_job_func.c
index 506cc6c27..fc708a65a 100644
--- a/src/resmom/mom_job_func.c
+++ b/src/resmom/mom_job_func.c
@@ -229,9 +229,9 @@ void tasks_free(
       {
       if (is_present(freed_chans, tp->ti_chan) == FALSE)
         {
+        insert_thing(freed_chans, tp->ti_chan);
         close_conn(tp->ti_chan->sock, FALSE);
         DIS_tcp_cleanup(tp->ti_chan);
-        insert_thing(freed_chans, tp->ti_chan);
         }
         
       tp->ti_chan = NULL;

