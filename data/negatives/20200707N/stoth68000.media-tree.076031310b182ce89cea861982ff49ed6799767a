commit 076031310b182ce89cea861982ff49ed6799767a
Author: Steven Toth <stoth@kernellabs.com>
Date:   Sat Jul 31 14:50:46 2010 -0300

    [media] saa7164: generate a fixed kernel warning if the irq is 'late'
    
    Now we start to see a number of patches applied that are related
    to debugging the driver. This patch is removed in the coming patches
    as you start to see the irq handler evolve as I worked through the
    DMA data corruption issues.
    
    Signed-off-by: Steven Toth <stoth@kernellabs.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/saa7164/saa7164-core.c b/drivers/media/video/saa7164/saa7164-core.c
index 591a3c101c0f..20257664b40b 100644
--- a/drivers/media/video/saa7164/saa7164-core.c
+++ b/drivers/media/video/saa7164/saa7164-core.c
@@ -267,7 +267,12 @@ static irqreturn_t saa7164_irq_encoder(struct saa7164_port *port)
 		return 0;
 	}
 
-	/* Sore old time */
+	if (rp != ((port->last_irq_rp + 1) % 8)) {
+		printk(KERN_ERR "%s() Multiple bufs on interrupt, port %p\n",
+			__func__, port);
+	}
+
+	/* Store old time */
 	port->last_irq_msecs_diff = port->last_irq_msecs;
 
 	/* Collect new stats */

