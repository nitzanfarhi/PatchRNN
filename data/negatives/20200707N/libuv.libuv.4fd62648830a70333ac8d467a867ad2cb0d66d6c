commit 4fd62648830a70333ac8d467a867ad2cb0d66d6c
Author: Ben Noordhuis <info@bnoordhuis.nl>
Date:   Sat Apr 21 05:56:43 2012 +0200

    unix: handle EWOULDBLOCK in uv__write()

diff --git a/src/unix/stream.c b/src/unix/stream.c
index e88722ce..cc6c5fab 100644
--- a/src/unix/stream.c
+++ b/src/unix/stream.c
@@ -428,7 +428,7 @@ start:
   }
 
   if (n < 0) {
-    if (errno != EAGAIN) {
+    if (errno != EAGAIN && errno != EWOULDBLOCK) {
       /* Error */
       req->error = errno;
       stream->write_queue_size -= uv__write_req_size(req);

