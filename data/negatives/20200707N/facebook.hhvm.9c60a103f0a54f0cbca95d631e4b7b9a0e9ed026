commit 9c60a103f0a54f0cbca95d631e4b7b9a0e9ed026
Author: iproctor <iproctor@facebook.com>
Date:   Tue Sep 21 18:57:12 2010 -0700

    [Fix] Simplexmlelement should throw an exception rather than fatal
    
    Summary:
    When given bad xml, simplexmlelement should throw an exception,
      not fatal, so it can be caught.
    
    Test Plan:
    <?php
    try {
      $y = new Simplexmlelement("<blarb>euloehunth");
    } catch (Exception $e) {
        var_dump($e->getmessage());
          }
    
    DiffCamp Revision: 160717
    Reviewed By: hzhao
    CC: hzhao, hphp-diffs@lists
    Revert Plan:
    OK

diff --git a/src/runtime/ext/ext_simplexml.cpp b/src/runtime/ext/ext_simplexml.cpp
index 25dd1541f1..4167ed3922 100644
--- a/src/runtime/ext/ext_simplexml.cpp
+++ b/src/runtime/ext/ext_simplexml.cpp
@@ -296,7 +296,8 @@ void c_SimpleXMLElement::t___construct(CStrRef data, int64 options /* = 0 */,
       m_attributes = collect_attributes(m_node, ns, is_prefix);
     }
   } else {
-    raise_error("String could not be parsed as XML");
+    throw (Object)p_Exception(NEW(c_Exception)())->create(
+        "String could not be parsed as XML");
   }
 }
 

