commit d888ea03a0a8798e5a7632d0808cd69f577b75c5
Author: Steven Toth <stoth@kernellabs.com>
Date:   Mon May 11 22:16:05 2009 -0300

    V4L/DVB (12929): SAA7164: OOPS avoidance during interrupt handling
    
    Signed-off-by: Steven Toth <stoth@kernellabs.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/saa7164/saa7164-core.c b/drivers/media/video/saa7164/saa7164-core.c
index 968ecd4ad495..15ea90731ba7 100644
--- a/drivers/media/video/saa7164/saa7164-core.c
+++ b/drivers/media/video/saa7164/saa7164-core.c
@@ -123,6 +123,12 @@ static irqreturn_t saa7164_irq(int irq, void *dev_id)
 	u32 intstat[INT_SIZE/4];
 	int i, handled = 0, bit;
 
+	if (dev == 0) {
+		printk(KERN_ERR "%s() No device specified\n", __func__);
+		handled = 0;
+		goto out;
+	}
+
 	/* Check that the hardware is accessable. If the status bytes are
 	 * 0xFF then the device is not accessable, the the IRQ belongs
 	 * to another driver.

