commit 66f7b4862fe9fd1828a6729df5d04a499af227db
Author: Luca Barbato <lu_zero@gentoo.org>
Date:   Mon Dec 24 00:08:35 2012 +0100

    hlsenc: use the basename to generate the list entries
    
    The segment path is desumed from the playlist path, recording a
    relative path in the playlist while serving the file could lead
    to misleading results.

diff --git a/libavformat/hlsenc.c b/libavformat/hlsenc.c
index eade740f0..418c87d2c 100644
--- a/libavformat/hlsenc.c
+++ b/libavformat/hlsenc.c
@@ -85,7 +85,8 @@ static int append_entry(HLSContext *hls, uint64_t duration)
     if (!en)
         return AVERROR(ENOMEM);
 
-    av_get_frame_filename(en->name, sizeof(en->name), hls->basename,
+    av_get_frame_filename(en->name, sizeof(en->name),
+                          av_basename(hls->basename),
                           hls->number -1);
 
     en->duration = duration;

