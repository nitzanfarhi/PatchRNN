commit a58a393940249f5aff980755fa0a8cf94457e389
Author: Frank DENIS <github@pureftpd.org>
Date:   Fri May 6 10:41:24 2016 +0200

    Skip hashed passwords that don't start with $
    
    Sorry for people still using passwords hashed with DES.

diff --git a/src/pure-pwconvert.c b/src/pure-pwconvert.c
index a2b8077..1b86fc9 100644
--- a/src/pure-pwconvert.c
+++ b/src/pure-pwconvert.c
@@ -56,15 +56,11 @@ int main(void)
         pw = pwd->pw_passwd;
 #ifdef USE_SHADOW
         if (pwd->pw_passwd != NULL && pwd->pw_name != NULL &&
-            (((pwd->pw_passwd)[0] == 'x' && (pwd->pw_passwd)[1] == 0) ||
-             (strcmp(pwd->pw_passwd, "********") == 0) ||
-             ((pwd->pw_passwd)[0] == '#' && (pwd->pw_passwd)[1] == '#' &&
-              strcmp(pwd->pw_passwd + 2, pwd->pw_name) == 0)) &&
             (spw = getspnam(pwd->pw_name)) != NULL && spw->sp_pwdp != NULL) {
-            pw = spw->sp_pwdp[0] == '@' ? "*" : spw->sp_pwdp;
+            pw = spw->sp_pwdp;
         }
 #endif
-        if (pw == NULL || *pw == 0) {
+        if (pw == NULL || *pw != '$') {
             pw = "*";
         }
         {

