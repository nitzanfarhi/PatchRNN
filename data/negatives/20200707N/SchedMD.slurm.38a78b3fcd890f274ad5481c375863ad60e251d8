commit 38a78b3fcd890f274ad5481c375863ad60e251d8
Author: Morris Jette <jette@schedmd.com>
Date:   Tue May 27 13:31:29 2014 -0700

    Missing batch job given exit code of 1
    
    If a batch job is discovered to be missing from it's head node, set its exit code to 1 rather than leaving it as zero.
    Bug 833

diff --git a/src/slurmctld/job_mgr.c b/src/slurmctld/job_mgr.c
index 8b9eb962c5..a3d14d2cf7 100644
--- a/src/slurmctld/job_mgr.c
+++ b/src/slurmctld/job_mgr.c
@@ -9629,6 +9629,7 @@ static void _purge_missing_jobs(int node_inx, time_t now)
 				requeue = true;
 			info("Batch JobId=%u missing from node 0",
 			     job_ptr->job_id);
+			job_ptr->exit_code = 1;
 			job_complete(job_ptr->job_id, 0, requeue, true, NO_VAL);
 		} else {
 			_notify_srun_missing_step(job_ptr, node_inx,

