commit 729dd25c639d07bd7cb8a85466d8d1dc9af10d0c
Author: Wayne Ihde <Wayne.Ihde@Sun.COM>
Date:   Wed Jun 24 13:36:16 2009 -0600

    6829059 COMSTAR FC target is not able to be discovered in MPIO plugin on 2008

diff --git a/usr/src/uts/common/io/comstar/stmf/stmf.c b/usr/src/uts/common/io/comstar/stmf/stmf.c
index 1cf628f887..fc72065a77 100644
--- a/usr/src/uts/common/io/comstar/stmf/stmf.c
+++ b/usr/src/uts/common/io/comstar/stmf/stmf.c
@@ -4521,7 +4521,11 @@ stmf_scsilib_handle_report_tpgs(scsi_task_t *task, stmf_data_buf_t *dbuf)
 		    task->task_cmd_xfer_length;
 	}
 
-	if (task->task_cmd_xfer_length < 16) {
+	if (task->task_cmd_xfer_length == 0) {
+		stmf_scsilib_send_status(task, STATUS_GOOD, 0);
+		return;
+	}
+	if (task->task_cmd_xfer_length < 4) {
 		stmf_scsilib_send_status(task, STATUS_CHECK,
 		    STMF_SAA_INVALID_FIELD_IN_CDB);
 		return;

