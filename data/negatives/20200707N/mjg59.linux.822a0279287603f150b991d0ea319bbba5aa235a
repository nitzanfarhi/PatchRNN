commit 822a0279287603f150b991d0ea319bbba5aa235a
Author: Ard Biesheuvel <ard.biesheuvel@linaro.org>
Date:   Tue Jan 13 12:28:53 2015 +0000

    efi: rtc-efi: Mark UIE as unsupported
    
    Tools like hwclock attempt to enable the RTC update interrupt (UIE) to
    maximize the accuracy of the reported time value. The EFI rtc does not
    have interrupt capability so this is a pointless exercise to begin with,
    but the generic RTC framework ends up issuing a SetWakeupTime() Runtime
    Services call before drawing that conclusion on its own.
    
    Instead, we can mark UIE as unsupported at driver probe time. The net
    result is the same, but without the spurious SetWakeupTime() call.
    
    Signed-off-by: Ard Biesheuvel <ard.biesheuvel@linaro.org>
    Signed-off-by: Matt Fleming <matt.fleming@intel.com>

diff --git a/drivers/rtc/rtc-efi.c b/drivers/rtc/rtc-efi.c
index 53b589dc34eb..d30fb65fbffa 100644
--- a/drivers/rtc/rtc-efi.c
+++ b/drivers/rtc/rtc-efi.c
@@ -218,6 +218,7 @@ static int __init efi_rtc_probe(struct platform_device *dev)
 	if (IS_ERR(rtc))
 		return PTR_ERR(rtc);
 
+	rtc->uie_unsupported = 1;
 	platform_set_drvdata(dev, rtc);
 
 	return 0;

