commit cc60042ef4a635c32f6b2805f6970958682aaaa5
Author: pancake <pancake@nopcode.org>
Date:   Sun May 6 16:10:43 2018 +0200

    Another capstone-m68k workaround to make r2 happy

diff --git a/libr/asm/p/asm_m68k_cs.c b/libr/asm/p/asm_m68k_cs.c
index 011d116a2..ba47119dd 100644
--- a/libr/asm/p/asm_m68k_cs.c
+++ b/libr/asm/p/asm_m68k_cs.c
@@ -1,4 +1,4 @@
-/* radare2 - LGPL - Copyright 2015-2016 - pancake */
+/* radare2 - LGPL - Copyright 2015-2018 - pancake */
 
 #include <r_asm.h>
 #include <r_lib.h>
@@ -66,9 +66,11 @@ static int disassemble(RAsm *a, RAsmOp *op, const ut8 *buf, int len) {
 	if (!buf) {
 		goto beach;
 	}
-	n = cs_disasm (cd, buf, R_MIN (8, len),
-		a->pc, 1, &insn);
-	if (n<1) {
+	ut8 mybuf[8] = {0};
+	int mylen = R_MIN (8, len);
+	memcpy (mybuf, buf, R_MIN (8, len));
+	n = cs_disasm (cd, mybuf, mylen, a->pc, 1, &insn);
+	if (n < 1) {
 		ret = -1;
 		goto beach;
 	}

