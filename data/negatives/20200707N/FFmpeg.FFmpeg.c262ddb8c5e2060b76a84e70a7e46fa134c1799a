commit c262ddb8c5e2060b76a84e70a7e46fa134c1799a
Author: Nicolas George <nicolas.george@normalesup.org>
Date:   Thu Sep 13 17:13:10 2012 +0200

    lavfi: set sample_rate in the default allocator.

diff --git a/libavfilter/audio.c b/libavfilter/audio.c
index e7306b134b..ae78ed8a5e 100644
--- a/libavfilter/audio.c
+++ b/libavfilter/audio.c
@@ -59,6 +59,8 @@ AVFilterBufferRef *ff_default_get_audio_buffer(AVFilterLink *link, int perms,
     if (!samplesref)
         goto fail;
 
+    samplesref->audio->sample_rate = link->sample_rate;
+
     av_freep(&data);
 
 fail:

