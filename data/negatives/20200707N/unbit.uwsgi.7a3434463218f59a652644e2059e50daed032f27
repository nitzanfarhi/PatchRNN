commit 7a3434463218f59a652644e2059e50daed032f27
Author: roberto@precise64 <roberto@precise64>
Date:   Mon Feb 27 20:21:55 2012 +0100

    fixed a bug in setrlimit

diff --git a/uwsgi.c b/uwsgi.c
index e6b0b4ac..fe8ed118 100644
--- a/uwsgi.c
+++ b/uwsgi.c
@@ -1775,6 +1775,7 @@ int uwsgi_start(void *v_argv) {
 #ifndef __OpenBSD__
 
 	if (uwsgi.rl.rlim_max > 0) {
+		uwsgi.rl.rlim_cur = uwsgi.rl.rlim_max;
 		uwsgi_log("limiting address space of processes...\n");
 		if (setrlimit(RLIMIT_AS, &uwsgi.rl)) {
 			uwsgi_error("setrlimit()");

