commit e966cdb334356ad96aeccb19481a85f46f6a4b55
Author: oy <Tom_Adams@web.de>
Date:   Mon Aug 16 04:09:21 2010 +0200

    fixed that Collision::IntersectLine gets stuck in a loop forever. Closes #6

diff --git a/src/game/collision.cpp b/src/game/collision.cpp
index 0dee57c8..f114fd06 100644
--- a/src/game/collision.cpp
+++ b/src/game/collision.cpp
@@ -67,11 +67,12 @@ bool CCollision::IsTileSolid(int x, int y)
 int CCollision::IntersectLine(vec2 Pos0, vec2 Pos1, vec2 *pOutCollision, vec2 *pOutBeforeCollision)
 {
 	float d = distance(Pos0, Pos1);
+	int End(d+1);
 	vec2 Last = Pos0;
 	
-	for(float f = 0; f < d; f++)
+	for(int i = 0; i < End; i++)
 	{
-		float a = f/d;
+		float a = i/d;
 		vec2 Pos = mix(Pos0, Pos1, a);
 		if(CheckPoint(Pos.x, Pos.y))
 		{

