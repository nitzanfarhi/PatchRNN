commit 55de89e25d1ae1a86d792e1ebecebcad702980f6
Author: chinshou <chinshou1976@gmail.com>
Date:   Fri Jul 20 16:42:29 2012 +0200

    cmdutils/alloc_buffer: fix typo
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/cmdutils.c b/cmdutils.c
index 295d95608e..edeab93ed3 100644
--- a/cmdutils.c
+++ b/cmdutils.c
@@ -1227,7 +1227,7 @@ static int alloc_buffer(FrameBuffer **pool, AVCodecContext *s, FrameBuffer **pbu
     for (i = 0; i < FF_ARRAY_ELEMS(buf->data); i++) {
         const int h_shift = i==0 ? 0 : h_chroma_shift;
         const int v_shift = i==0 ? 0 : v_chroma_shift;
-        if ((s->flags & CODEC_FLAG_EMU_EDGE) || !buf->linesize[1] || !buf->base[i])
+        if ((s->flags & CODEC_FLAG_EMU_EDGE) || !buf->linesize[i] || !buf->base[i])
             buf->data[i] = buf->base[i];
         else
             buf->data[i] = buf->base[i] +

