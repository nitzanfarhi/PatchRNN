commit ab47b7fe8fc18f4fee1ca39c4473486a4b6df3b5
Author: mpi <mpi@openbsd.org>
Date:   Thu Aug 1 08:27:43 2013 +0000

    Do not use a static variable to perform a lookup.  While this
    is perfectly ok for the moment because there might be at most
    one caller at a time, it wont be so as soon as this part of
    the network stack is run in parallel.
    
    ok henning@, mikeb@

diff --git a/sys/netinet/if_ether.c b/sys/netinet/if_ether.c
index 971c50844bc..3f65e5b3ff7 100644
--- a/sys/netinet/if_ether.c
+++ b/sys/netinet/if_ether.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: if_ether.c,v 1.102 2013/07/04 08:22:19 mpi Exp $	*/
+/*	$OpenBSD: if_ether.c,v 1.103 2013/08/01 08:27:43 mpi Exp $	*/
 /*	$NetBSD: if_ether.c,v 1.31 1996/05/11 12:59:58 mycroft Exp $	*/
 
 /*
@@ -822,8 +822,9 @@ struct llinfo_arp *
 arplookup(u_int32_t addr, int create, int proxy, u_int tableid)
 {
 	struct rtentry *rt;
-	static struct sockaddr_inarp sin;
+	struct sockaddr_inarp sin;
 
+	bzero(&sin, sizeof(sin));
 	sin.sin_len = sizeof(sin);
 	sin.sin_family = AF_INET;
 	sin.sin_addr.s_addr = addr;

