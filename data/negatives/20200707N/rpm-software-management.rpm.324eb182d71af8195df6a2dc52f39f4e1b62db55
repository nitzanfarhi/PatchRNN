commit 324eb182d71af8195df6a2dc52f39f4e1b62db55
Author: Jindrich Novy <jnovy@redhat.com>
Date:   Mon Apr 28 12:38:32 2008 +0200

    Remove alloca() from build()

diff --git a/build.c b/build.c
index daad151c9..bdbdfef14 100644
--- a/build.c
+++ b/build.c
@@ -299,7 +299,7 @@ int build(rpmts ts, const char * arg, BTA_t ba, const char * rcfile)
 	char *target;
 	if ((te = strchr(t, ',')) == NULL)
 	    te = t + strlen(t);
-	target = alloca(te-t+1);
+	target = xmalloc(te-t+1);
 	strncpy(target, t, (te-t));
 	target[te-t] = '\0';
 	if (*te != '\0')
@@ -313,6 +313,7 @@ int build(rpmts ts, const char * arg, BTA_t ba, const char * rcfile)
 	rpmFreeMacros(NULL);
 	rpmFreeRpmrc();
 	(void) rpmReadConfigFiles(rcfile, target);
+	free(target);
 	rc = buildForTarget(ts, arg, ba);
 	if (rc)
 	    break;

