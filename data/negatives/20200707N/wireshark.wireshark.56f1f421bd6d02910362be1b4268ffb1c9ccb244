commit 56f1f421bd6d02910362be1b4268ffb1c9ccb244
Author: Ulf Lamping <ulf.lamping@web.de>
Date:   Mon Dec 5 02:30:04 2005 +0000

    I've forgot to put one line under _WIN32, should fix the unix build
    
    svn path=/trunk/; revision=16679

diff --git a/capture_loop.c b/capture_loop.c
index c38265ca78..8463a8f3df 100644
--- a/capture_loop.c
+++ b/capture_loop.c
@@ -1202,7 +1202,11 @@ capture_loop_start(capture_options *capture_opts, gboolean *stats_known, struct
   /* We haven't yet gotten the capture statistics. */
   *stats_known      = FALSE;
 
-#ifndef _WIN32
+#ifdef _WIN32
+  /* get the initial state of the signal pipe */
+  /* (if it's already stopped here, ignore it later) */
+  signal_pipe_enabled = !signal_pipe_stopped();
+#else
   /*
    * Catch SIGUSR1, so that we exit cleanly if the parent process
    * kills us with it due to the user selecting "Capture->Stop".
@@ -1210,10 +1214,6 @@ capture_loop_start(capture_options *capture_opts, gboolean *stats_known, struct
     signal(SIGUSR1, capture_loop_stop_signal_handler);
 #endif
 
-  /* get the initial state of the signal pipe */
-  /* (if it's already stopped here, ignore it later) */
-  signal_pipe_enabled = !signal_pipe_stopped();
-
   g_log(LOG_DOMAIN_CAPTURE_CHILD, G_LOG_LEVEL_INFO, "Capture child starting ...");
   capture_opts_log(LOG_DOMAIN_CAPTURE_CHILD, G_LOG_LEVEL_DEBUG, capture_opts);
 

