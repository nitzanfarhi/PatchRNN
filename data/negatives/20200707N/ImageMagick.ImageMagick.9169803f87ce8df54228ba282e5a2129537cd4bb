commit 9169803f87ce8df54228ba282e5a2129537cd4bb
Author: cristy <urban-warrior@git.imagemagick.org>
Date:   Fri Apr 6 17:02:52 2012 +0000

diff --git a/MagickCore/profile.c b/MagickCore/profile.c
index 3a3444dad..faf3d70d7 100644
--- a/MagickCore/profile.c
+++ b/MagickCore/profile.c
@@ -6733,12 +6733,22 @@ MagickPrivate MagickBooleanType SyncImageProfiles(Image *image)
         }
         case 0x0112:
         {
+          if (number_bytes == 4)
+            {
+              (void) WriteProfileLong(endian,(size_t) image->orientation,p);
+              break;
+            }
           (void) WriteProfileShort(endian,(unsigned short) image->orientation,
             p);
           break;
         }
         case 0x0128:
         {
+          if (number_bytes == 4)
+            {
+              (void) WriteProfileLong(endian,(size_t) (image->units+1),p);
+              break;
+            }
           (void) WriteProfileShort(endian,(unsigned short) (image->units+1),p);
           break;
         }

