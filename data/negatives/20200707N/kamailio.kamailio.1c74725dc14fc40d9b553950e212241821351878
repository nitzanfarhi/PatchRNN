commit 1c74725dc14fc40d9b553950e212241821351878
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 1 23:18:07 2013 +0200

    core: don't attempt srv lookup for proto ws or wss

diff --git a/dns_cache.c b/dns_cache.c
index 917b43e19..2d7278c91 100644
--- a/dns_cache.c
+++ b/dns_cache.c
@@ -2670,6 +2670,10 @@ struct hostent* dns_srv_sip_resolvehost(str* name, unsigned short* port,
 	}else{
 		srv_proto=PROTO_UDP;
 	}
+	if(srv_proto==PROTO_WS || srv_proto==PROTO_WS) {
+		/* no srv records for web sockets */
+		return 0;
+	}
 	/* try SRV if no port specified (draft-ietf-sip-srv-06) */
 	if ((port)&&(*port==0)){
 		*port=(srv_proto==PROTO_TLS)?SIPS_PORT:SIP_PORT; /* just in case we

