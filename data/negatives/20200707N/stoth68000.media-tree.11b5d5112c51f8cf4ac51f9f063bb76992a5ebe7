commit 11b5d5112c51f8cf4ac51f9f063bb76992a5ebe7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 29 15:31:26 2014 +0200

    drm/i915: Correctly reject invalid flags for wait_ioctl
    
    Not having checks for this isn't good.
    
    I've checked igt and libdrm and they all already clear flags properly.
    So we're lucky and should be able to sneak this ABI clarification in.
    
    Testcase: igt/gem_wait/invalid-flags
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=85280
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

diff --git a/drivers/gpu/drm/i915/i915_gem.c b/drivers/gpu/drm/i915/i915_gem.c
index 895f9881f0aa..827edb589883 100644
--- a/drivers/gpu/drm/i915/i915_gem.c
+++ b/drivers/gpu/drm/i915/i915_gem.c
@@ -2810,6 +2810,9 @@ i915_gem_wait_ioctl(struct drm_device *dev, void *data, struct drm_file *file)
 	u32 seqno = 0;
 	int ret = 0;
 
+	if (args->flags != 0)
+		return -EINVAL;
+
 	ret = i915_mutex_lock_interruptible(dev);
 	if (ret)
 		return ret;

