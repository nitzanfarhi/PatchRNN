commit 88d9ee1d01b1c7835c1c83959c89d2153a56454d
Author: Samuel Just <sam.just@inktank.com>
Date:   Fri Apr 19 10:54:11 2013 -0700

    ReplicatedPG::_finish_mark_all_unfound_lost: only requeue if !deleting
    
    Signed-off-by: Samuel Just <sam.just@inktank.com>

diff --git a/src/osd/ReplicatedPG.cc b/src/osd/ReplicatedPG.cc
index 6afc4998e6..90f6bf5c18 100644
--- a/src/osd/ReplicatedPG.cc
+++ b/src/osd/ReplicatedPG.cc
@@ -6180,7 +6180,8 @@ void ReplicatedPG::_finish_mark_all_unfound_lost(list<ObjectContext*>& obcs)
   lock();
   dout(10) << "_finish_mark_all_unfound_lost " << dendl;
 
-  requeue_ops(waiting_for_all_missing);
+  if (!deleting)
+    requeue_ops(waiting_for_all_missing);
   waiting_for_all_missing.clear();
 
   while (!obcs.empty()) {

