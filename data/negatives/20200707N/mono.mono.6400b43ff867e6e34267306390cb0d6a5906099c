commit 6400b43ff867e6e34267306390cb0d6a5906099c
Author: Zoltan Varga <vargaz@gmail.com>
Date:   Mon Oct 26 14:58:11 2015 -0400

    [llvmonly] Avoid disabling llvm for methods with pinvoke signatures in llvmonly mode.

diff --git a/mono/mini/mini-llvm.c b/mono/mini/mini-llvm.c
index 731214d7ea3..3c734477752 100644
--- a/mono/mini/mini-llvm.c
+++ b/mono/mini/mini-llvm.c
@@ -6069,7 +6069,7 @@ mono_llvm_emit_method (MonoCompile *cfg)
 	if (cfg->method->save_lmf && !cfg->llvm_only)
 		LLVM_FAILURE (ctx, "lmf");
 
-	if (sig->pinvoke && cfg->method->wrapper_type != MONO_WRAPPER_RUNTIME_INVOKE)
+	if (sig->pinvoke && cfg->method->wrapper_type != MONO_WRAPPER_RUNTIME_INVOKE && !cfg->llvm_only)
 		LLVM_FAILURE (ctx, "pinvoke signature");
 
 	header = cfg->header;

