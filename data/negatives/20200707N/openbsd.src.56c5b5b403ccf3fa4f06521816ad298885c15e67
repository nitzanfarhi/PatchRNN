commit 56c5b5b403ccf3fa4f06521816ad298885c15e67
Author: eric <eric@openbsd.org>
Date:   Tue Jul 8 10:22:15 2014 +0000

    no need to send a stat update message when {inc,dec}rementing by 0.

diff --git a/usr.sbin/smtpd/stat_backend.c b/usr.sbin/smtpd/stat_backend.c
index d145b10c33e..33d1fa573ae 100644
--- a/usr.sbin/smtpd/stat_backend.c
+++ b/usr.sbin/smtpd/stat_backend.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: stat_backend.c,v 1.8 2013/05/24 17:03:14 eric Exp $	*/
+/*	$OpenBSD: stat_backend.c,v 1.9 2014/07/08 10:22:15 eric Exp $	*/
 
 /*
  * Copyright (c) 2012 Gilles Chehade <gilles@poolp.org>
@@ -49,6 +49,9 @@ stat_increment(const char *key, size_t count)
 {
 	struct stat_value	*value;
 
+	if (count == 0)
+		return;
+
 	value = stat_counter(count);
 
 	m_create(p_control, IMSG_STAT_INCREMENT, 0, 0, -1);
@@ -62,6 +65,9 @@ stat_decrement(const char *key, size_t count)
 {
 	struct stat_value	*value;
 
+	if (count == 0)
+		return;
+
 	value = stat_counter(count);
 
 	m_create(p_control, IMSG_STAT_DECREMENT, 0, 0, -1);

