commit e71c81d1003489d75b970c7d0a3a33772608b3ab
Author: Jesse Butler <Jesse.Butler@Sun.COM>
Date:   Thu Mar 11 16:51:23 2010 -0700

    6925533 coredump in pmcs phy_walk_s() mdb walker

diff --git a/usr/src/cmd/mdb/common/modules/pmcs/pmcs.c b/usr/src/cmd/mdb/common/modules/pmcs/pmcs.c
index 044c271666..c6f6614bf2 100644
--- a/usr/src/cmd/mdb/common/modules/pmcs/pmcs.c
+++ b/usr/src/cmd/mdb/common/modules/pmcs/pmcs.c
@@ -2109,6 +2109,14 @@ pmcs_next_sibling(pmcs_phy_t *phyp)
 			break;
 		}
 
+		/*
+		 * If this PHY's sibling is NULL and it's a root phy,
+		 * we're done.
+		 */
+		if (parent.level == 0) {
+			return (NULL);
+		}
+
 		phyp = phyp->parent;
 	}
 

