commit 553d53fcee8f8551e88d20da177263380355054e
Author: Con Kolivas <kernel@kolivas.org>
Date:   Thu Feb 23 17:58:06 2012 +1100

    Reset all hash counters at the same time as resetting start times to get accurate hashrates on exiting which is mandatory for benchmarking.

diff --git a/cgminer.c b/cgminer.c
index ac1af076..786eb6d9 100644
--- a/cgminer.c
+++ b/cgminer.c
@@ -4611,6 +4611,13 @@ int main (int argc, char *argv[])
 		start_longpoll();
 
 begin_bench:
+	total_mhashes_done = 0;
+	for (i = 0; i < total_devices; i++) {
+		struct cgpu_info *cgpu = devices[i];
+
+		cgpu->rolling = cgpu->total_mhashes = 0;
+	}
+	
 	gettimeofday(&total_tv_start, NULL);
 	gettimeofday(&total_tv_end, NULL);
 	get_datestamp(datestamp, &total_tv_start);

