commit 0f05b02b72390c6eb39f9a3a4679f53db166057e
Author: bert hubert <bert.hubert@powerdns.com>
Date:   Tue Feb 21 13:19:08 2017 +0100

    With this commit, the recursor authoritative server can deal with CNAME wildcards. This closes #2818.

diff --git a/pdns/syncres.cc b/pdns/syncres.cc
index bdd157d7a..528244658 100644
--- a/pdns/syncres.cc
+++ b/pdns/syncres.cc
@@ -245,7 +245,8 @@ bool SyncRes::doOOBResolve(const DNSName &qname, const QType &qtype, vector<DNSR
 
     for(ziter=range.first; ziter!=range.second; ++ziter) {
       DNSRecord dr=*ziter;
-      if(dr.d_type == qtype.getCode() || qtype.getCode() == QType::ANY) {
+      // if we hit a CNAME, just answer that - rest of recursor will do the needful & follow
+      if(dr.d_type == qtype.getCode() || qtype.getCode() == QType::ANY || dr.d_type == QType::CNAME) {
         dr.d_name = qname;
         dr.d_place=DNSResourceRecord::ANSWER;
         ret.push_back(dr);

