commit 153ceefb4a3dfc234df30bf1770c2c085d39eb2f
Author: Avi Kivity <avi@redhat.com>
Date:   Tue Feb 23 10:16:53 2010 +0100

    Fix qemu_eventfd compile when !CONFIG_EVENTFD
    
    Signed-off-by: Avi Kivity <avi@redhat.com>
    Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
    Signed-off-by: Blue Swirl <blauwirbel@gmail.com>

diff --git a/osdep.c b/osdep.c
index 9e4b17bd48..5bf3c00fd1 100644
--- a/osdep.c
+++ b/osdep.c
@@ -289,9 +289,9 @@ ssize_t qemu_write_full(int fd, const void *buf, size_t count)
  */
 int qemu_eventfd(int fds[2])
 {
+#ifdef CONFIG_EVENTFD
     int ret;
 
-#ifdef CONFIG_EVENTFD
     ret = eventfd(0, 0);
     if (ret >= 0) {
         fds[0] = ret;

