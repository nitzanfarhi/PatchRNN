commit 5904d039ce785e0b9b28f8664c6fc493c60f6e8d
Author: Donny Yang <work@kota.moe>
Date:   Sat Mar 28 15:14:21 2015 +0000

    png: Use av_freep() instead of av_free()
    
    Signed-off-by: Donny Yang <work@kota.moe>
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/pngenc.c b/libavcodec/pngenc.c
index 9bdefc45d3..0231bf7c3b 100644
--- a/libavcodec/pngenc.c
+++ b/libavcodec/pngenc.c
@@ -512,9 +512,9 @@ static int encode_frame(AVCodecContext *avctx, AVPacket *pkt,
     ret         = 0;
 
 the_end:
-    av_free(crow_base);
-    av_free(progressive_buf);
-    av_free(top_buf);
+    av_freep(&crow_base);
+    av_freep(&progressive_buf);
+    av_freep(&top_buf);
     deflateEnd(&s->zstream);
     return ret;
 fail:

