commit ccc7aad04c95c33407444b1387e42162925e5216
Author: Vinod Koul <vinod.koul@intel.com>
Date:   Thu Mar 6 12:24:08 2014 +0530

    dmaengine: at_hdmac: use tasklet_kill in teardown
    
    As discussed in [1] the tasklet_disable is not a proper function for teardown.
    We need to ensure irq is disabled, followed by ensuring that don't schedule any
    more tasklets and then its safe to use tasklet_kill().
    
    Here in at_hdmac driver we use free_irq() before tasklet_kill(). The free_irq()
    will ensure that the irq is disabled and also wait till all scheduled interrupts
    are executed by invoking synchronize_irq(). So we need to only do tasklet_kill()
    after invoking free_irq()
    
    [1]: http://lwn.net/Articles/588457/
    
    Reported-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Reviewed-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Vinod Koul <vinod.koul@intel.com>

diff --git a/drivers/dma/at_hdmac.c b/drivers/dma/at_hdmac.c
index e2c04dc81e2a..c13a3bb0f594 100644
--- a/drivers/dma/at_hdmac.c
+++ b/drivers/dma/at_hdmac.c
@@ -1569,7 +1569,6 @@ static int at_dma_remove(struct platform_device *pdev)
 
 		/* Disable interrupts */
 		atc_disable_chan_irq(atdma, chan->chan_id);
-		tasklet_disable(&atchan->tasklet);
 
 		tasklet_kill(&atchan->tasklet);
 		list_del(&chan->device_node);

