commit 862455dde95641a666d7200ea4216a30f5c0bcd1
Author: Danny Auble <da@llnl.gov>
Date:   Fri Jan 7 21:31:29 2011 +0000

    more fixes

diff --git a/src/plugins/select/bluegene/block_allocator/bridge_linker.h b/src/plugins/select/bluegene/block_allocator/bridge_linker.h
index 236b2739e4..51936a7dd4 100644
--- a/src/plugins/select/bluegene/block_allocator/bridge_linker.h
+++ b/src/plugins/select/bluegene/block_allocator/bridge_linker.h
@@ -65,7 +65,7 @@
 #  include <pthread.h>
 #endif				/* WITH_PTHREADS */
 
-#ifdef HAVE_BG_FILES
+#if defined HAVE_BG_FILES && defined HAVE_BG_L_P
 extern bool have_db2;
 extern int bridge_init();
 extern int bridge_fini();
diff --git a/src/plugins/select/bluegene/plugin/bluegene.h b/src/plugins/select/bluegene/plugin/bluegene.h
index 9b21b061bc..3c45ee5666 100644
--- a/src/plugins/select/bluegene/plugin/bluegene.h
+++ b/src/plugins/select/bluegene/plugin/bluegene.h
@@ -170,7 +170,7 @@ extern int validate_current_blocks(char *dir);
 
 /* block_sys.c */
 /*****************************************************/
-#ifdef HAVE_BG_FILES
+#if defined HAVE_BG_FILES && defined HAVE_BG_L_P
 #ifdef HAVE_BGL
 extern int find_nodecard_num(rm_partition_t *block_ptr, rm_nodecard_t *ncard,
 			     int *nc_id);
diff --git a/src/srun/debugger.h b/src/srun/debugger.h
index f44ef511a1..28af000831 100644
--- a/src/srun/debugger.h
+++ b/src/srun/debugger.h
@@ -48,7 +48,7 @@
  * them, and will be confused if you change them.
  */
 
-#ifdef HAVE_BG_FILES
+#if defined HAVE_BG_FILES && defined HAVE_BG_L_P
 /* On bluegene systems the below structure is defined here.  So as to
  * not confict with allocate.c including this file we will just use the
  * definition there instead of defining it here.

