commit a7c0ea6e954635c7c9c60a197320e2fd72a42078
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jan 21 08:12:10 2009 -0800

    Staging: sxg: fix build warnings in sxg_ethtool
    
    This fixes some build problems with the ethtool support recently added
    for the sxg driver.
    
    This is a very good example of why you need to check the build for
    warnings and then fix them...
    
    Cc: Mithlesh Thukral <mithlesh@linsyssoft.com>
    Cc: LinSysSoft Sahara Team <saharaproj@linsyssoft.com>
    Cc: Christopher Harrer <charrer@alacritech.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/sxg/sxg_ethtool.c b/drivers/staging/sxg/sxg_ethtool.c
index a0632072a553..000c4d66e6fe 100644
--- a/drivers/staging/sxg/sxg_ethtool.c
+++ b/drivers/staging/sxg/sxg_ethtool.c
@@ -161,14 +161,14 @@ static int sxg_nic_set_settings(struct net_device *netdev,
 	return -EOPNOTSUPP;
 }
 
-static int
+static void
 sxg_nic_get_strings(struct net_device *netdev, u32 stringset, u8 * data)
 {
 	int index;
 
 	switch(stringset) {
-		case ETH_SS_TEST:
-			return -EOPNOTSUPP;
+	case ETH_SS_TEST:
+		/* return -EOPNOTSUPP; */
 		break;
 	case ETH_SS_STATS:
 		for (index = 0; index < SXG_NIC_STATS_LEN; index++) {
@@ -228,7 +228,7 @@ static int sxg_nic_get_settings(struct net_device *netdev,
 	return 0;
 }
 
-static int sxg_nic_get_rx_csum(struct net_device *netdev)
+static u32 sxg_nic_get_rx_csum(struct net_device *netdev)
 {
 	struct adapter_t *adapter = netdev_priv(netdev);
 	return ((adapter->flags & SXG_RCV_IP_CSUM_ENABLED) ||
@@ -266,11 +266,12 @@ static void sxg_nic_get_regs(struct net_device *netdev,
 	memcpy((buff+sizeof(struct sxg_hw_regs)), UcodeRegs, sizeof(struct sxg_ucode_regs));
 }
 
-static int sxg_nic_get_wol(struct net_device *netdev,
-				struct ethtool_wolinfo *wol)
+static void sxg_nic_get_wol(struct net_device *netdev,
+			    struct ethtool_wolinfo *wol)
 {
 	/* We dont support wake-on-lan */
-	return -EOPNOTSUPP;
+	wol->supported = 0;
+	memset(&wol->sopass, 0, sizeof(wol->sopass));
 }
 
 static int sxg_nic_get_eeprom_len(struct net_device *netdev)

