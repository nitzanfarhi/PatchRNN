commit d22f88cb1960f5b7b498ca162fd6afc35bacac8b
Author: David Conrad <lessen42@gmail.com>
Date:   Wed Sep 5 00:23:34 2007 +0000

    Use av_get_bits_per_sample
    
    Originally committed as revision 10323 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/matroskaenc.c b/libavformat/matroskaenc.c
index 3b5634fdb..074f1b7b4 100644
--- a/libavformat/matroskaenc.c
+++ b/libavformat/matroskaenc.c
@@ -366,7 +366,7 @@ static int mkv_write_tracks(AVFormatContext *s)
         AVCodecContext *codec = st->codec;
         offset_t subinfo, track;
         int native_id = 0;
-        int bit_depth = 0;
+        int bit_depth = av_get_bits_per_sample(codec->codec_id);
 
         track = start_ebml_master(pb, MATROSKA_ID_TRACKENTRY);
         put_ebml_uint (pb, MATROSKA_ID_TRACKNUMBER     , i + 1);
@@ -385,19 +385,6 @@ static int mkv_write_tracks(AVFormatContext *s)
             }
         }
 
-        switch (codec->codec_id) {
-            case CODEC_ID_PCM_S16LE:
-            case CODEC_ID_PCM_S16BE:
-            case CODEC_ID_PCM_U16LE:
-            case CODEC_ID_PCM_U16BE:
-                bit_depth = 16;
-                break;
-            case CODEC_ID_PCM_S8:
-            case CODEC_ID_PCM_U8:
-                bit_depth = 8;
-                break;
-        }
-
         // XXX: CodecPrivate for vorbis, theora, aac, native mpeg4, ...
         if (native_id) {
             if (codec->codec_id == CODEC_ID_VORBIS || codec->codec_id == CODEC_ID_THEORA) {

