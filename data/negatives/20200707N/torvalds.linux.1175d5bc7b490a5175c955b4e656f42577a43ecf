commit 1175d5bc7b490a5175c955b4e656f42577a43ecf
Author: Krzysztof Kozlowski <k.kozlowski@samsung.com>
Date:   Fri Apr 4 00:51:20 2014 -0700

    leds: 88pm860x: Fix missing refcount decrement for parent of_node
    
    The driver obtained the reference to parent->of_node but immediately it
    was overwritten by reference to child node 'leds'. The of_node_put at
    the end of DT parsing function decremented only the child 'leds' so
    effectively the reference to parent of_node leaked.
    
    Getting reference to parent->of_node is not needed at all so get rid of
    it to fix the reference count.
    
    Signed-off-by: Krzysztof Kozlowski <k.kozlowski@samsung.com>
    Signed-off-by: Bryan Wu <cooloney@gmail.com>

diff --git a/drivers/leds/leds-88pm860x.c b/drivers/leds/leds-88pm860x.c
index c3d58e6478ac..c2def5551ce1 100644
--- a/drivers/leds/leds-88pm860x.c
+++ b/drivers/leds/leds-88pm860x.c
@@ -130,10 +130,9 @@ static int pm860x_led_dt_init(struct platform_device *pdev,
 	struct device_node *nproot, *np;
 	int iset = 0;
 
-	nproot = of_node_get(pdev->dev.parent->of_node);
-	if (!nproot)
+	if (!pdev->dev.parent->of_node)
 		return -ENODEV;
-	nproot = of_get_child_by_name(nproot, "leds");
+	nproot = of_get_child_by_name(pdev->dev.parent->of_node, "leds");
 	if (!nproot) {
 		dev_err(&pdev->dev, "failed to find leds node\n");
 		return -ENODEV;

