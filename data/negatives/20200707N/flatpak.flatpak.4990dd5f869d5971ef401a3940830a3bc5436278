commit 4990dd5f869d5971ef401a3940830a3bc5436278
Author: Alexander Larsson <alexl@redhat.com>
Date:   Wed Jun 8 11:11:24 2016 +0200

    builder: Manually zero mtime of cache checkout
    
    This works around an ostree bug where this didn't happen in the
    mismatched mode (regular checkout, user repo) we're using.

diff --git a/builder/builder-cache.c b/builder/builder-cache.c
index d32a6af2..a34565db 100644
--- a/builder/builder-cache.c
+++ b/builder/builder-cache.c
@@ -300,6 +300,13 @@ builder_cache_checkout (BuilderCache *self, const char *commit)
                                   NULL, NULL))
     return FALSE;
 
+  /* There is a bug in ostree (https://github.com/ostreedev/ostree/issues/326) that
+     causes it to not reset mtime to zero in this case (mismatching modes). So
+     we do that manually */
+  if (!flatpak_zero_mtime (AT_FDCWD, gs_file_get_path_cached (self->app_dir),
+                           NULL, NULL))
+    return FALSE;
+
   return TRUE;
 }
 

