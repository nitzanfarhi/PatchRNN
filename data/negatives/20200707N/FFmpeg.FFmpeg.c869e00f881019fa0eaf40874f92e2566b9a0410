commit c869e00f881019fa0eaf40874f92e2566b9a0410
Author: Michael Niedermayer <michael@niedermayer.cc>
Date:   Thu Dec 15 20:09:48 2016 +0100

    avcodec/smvjpegdec: return the packet size instead of 0
    
    Most decoders return the amount of data used.
    This is more consistent
    
    Reviewed-by: Paul B Mahol <onemda@gmail.com>
    Signed-off-by: Michael Niedermayer <michael@niedermayer.cc>

diff --git a/libavcodec/smvjpegdec.c b/libavcodec/smvjpegdec.c
index e319e5781b..018e135b30 100644
--- a/libavcodec/smvjpegdec.c
+++ b/libavcodec/smvjpegdec.c
@@ -200,9 +200,11 @@ static int smvjpeg_decode_frame(AVCodecContext *avctx, void *data, int *data_siz
             s->picture[1]->linesize[i] = mjpeg_data->linesize[i];
 
         ret = av_frame_ref(data, s->picture[1]);
+        if (ret < 0)
+            return ret;
     }
 
-    return ret;
+    return avpkt->size;
 }
 
 static const AVClass smvjpegdec_class = {

