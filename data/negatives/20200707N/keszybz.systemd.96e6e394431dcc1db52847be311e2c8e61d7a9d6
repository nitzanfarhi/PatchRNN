commit 96e6e394431dcc1db52847be311e2c8e61d7a9d6
Author: Lennart Poettering <lennart@poettering.net>
Date:   Tue Aug 12 19:33:09 2014 +0200

    resolved: return exit code of event loop

diff --git a/src/resolve/resolved.c b/src/resolve/resolved.c
index 892bb5138..823555858 100644
--- a/src/resolve/resolved.c
+++ b/src/resolve/resolved.c
@@ -97,6 +97,8 @@ int main(int argc, char *argv[]) {
                 goto finish;
         }
 
+        sd_event_get_exit_code(m->event, &r);
+
 finish:
         sd_notify(false, "STATUS=Shutting down...");
 

