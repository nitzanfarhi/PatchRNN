commit eccb6638569ae80eb4cb198640baac229fde4ff0
Author: Axel Lin <axel.lin@ingics.com>
Date:   Sun Oct 7 20:54:23 2012 -0700

    leds: lm3642: Return proper error in lm3642_[torch|strobe]_pin_store error paths
    
    Signed-off-by: Axel Lin <axel.lin@ingics.com>
    Acked-by: G.Shark Jeong <gshark.jeong@gmail.com>
    Signed-off-by: Bryan Wu <cooloney@gmail.com>

diff --git a/drivers/leds/leds-lm3642.c b/drivers/leds/leds-lm3642.c
index 3285006e9888..b69acac6d711 100644
--- a/drivers/leds/leds-lm3642.c
+++ b/drivers/leds/leds-lm3642.c
@@ -201,10 +201,10 @@ static ssize_t lm3642_torch_pin_store(struct device *dev,
 	return size;
 out:
 	dev_err(chip->dev, "%s:i2c access fail to register\n", __func__);
-	return size;
+	return ret;
 out_strtoint:
 	dev_err(chip->dev, "%s: fail to change str to int\n", __func__);
-	return size;
+	return ret;
 }
 
 static DEVICE_ATTR(torch_pin, 0666, NULL, lm3642_torch_pin_store);
@@ -258,10 +258,10 @@ static ssize_t lm3642_strobe_pin_store(struct device *dev,
 	return size;
 out:
 	dev_err(chip->dev, "%s:i2c access fail to register\n", __func__);
-	return size;
+	return ret;
 out_strtoint:
 	dev_err(chip->dev, "%s: fail to change str to int\n", __func__);
-	return size;
+	return ret;
 }
 
 static DEVICE_ATTR(strobe_pin, 0666, NULL, lm3642_strobe_pin_store);

