commit c60cf138bd82cf80a2b239cf5f48fbf9ff0a125c
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Mon Apr 1 17:40:42 2002 +0000

    fixing MVs in hq mode
    
    Originally committed as revision 372 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/motion_est.c b/libavcodec/motion_est.c
index e806868a0..3779afe0f 100644
--- a/libavcodec/motion_est.c
+++ b/libavcodec/motion_est.c
@@ -1009,6 +1009,9 @@ void estimate_motion(MpegEncContext * s,
         if (varc*2 + 200 > vard){
             mb_type|= MB_TYPE_INTER;
             halfpel_motion_search(s, &mx, &my, dmin, xmin, ymin, xmax, ymax, pred_x, pred_y);
+        }else{
+            mx = mx*2 - mb_x*32;
+            my = my*2 - mb_y*32;
         }
     }else{
         if (vard <= 64 || vard < varc) {

