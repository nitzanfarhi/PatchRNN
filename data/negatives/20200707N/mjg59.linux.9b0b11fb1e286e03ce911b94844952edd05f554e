commit 9b0b11fb1e286e03ce911b94844952edd05f554e
Author: Nishant Sarmukadam <nishants@marvell.com>
Date:   Tue Jan 8 10:16:05 2013 +0530

    mwl8k: Disable tx_wait completion
    
    Whenever TX ring is drained, priv->tx_wait still points
    to a valid completion. Making sure that it points to
    NULL before returning from the  mwl8k_tx_wait_empty
    check.
    
    Signed-off-by: Nishant Sarmukadam <nishants@marvell.com>
    Signed-off-by: Yogesh Ashok Powar <yogeshp@marvell.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/mwl8k.c b/drivers/net/wireless/mwl8k.c
index c4d287b48e64..04442c6290a6 100644
--- a/drivers/net/wireless/mwl8k.c
+++ b/drivers/net/wireless/mwl8k.c
@@ -1588,6 +1588,7 @@ static int mwl8k_tx_wait_empty(struct ieee80211_hw *hw)
 
 		rc = -ETIMEDOUT;
 	}
+	priv->tx_wait = NULL;
 	spin_unlock_bh(&priv->tx_lock);
 
 	return rc;

