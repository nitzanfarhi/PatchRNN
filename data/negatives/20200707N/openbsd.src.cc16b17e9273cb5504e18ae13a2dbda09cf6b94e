commit cc16b17e9273cb5504e18ae13a2dbda09cf6b94e
Author: deraadt <deraadt@openbsd.org>
Date:   Wed Jul 8 21:39:08 1998 +0000

    close(fileno()) inside vfork(); cgd

diff --git a/usr.bin/vacation/vacation.c b/usr.bin/vacation/vacation.c
index 4b7cbd34c75..7c58f4f7d4b 100644
--- a/usr.bin/vacation/vacation.c
+++ b/usr.bin/vacation/vacation.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: vacation.c,v 1.9 1998/02/07 02:47:21 millert Exp $	*/
+/*	$OpenBSD: vacation.c,v 1.10 1998/07/08 21:39:08 deraadt Exp $	*/
 /*	$NetBSD: vacation.c,v 1.7 1995/04/29 05:58:27 cgd Exp $	*/
 
 /*
@@ -44,7 +44,7 @@ static char copyright[] =
 #if 0
 static char sccsid[] = "@(#)vacation.c	8.2 (Berkeley) 1/26/94";
 #endif
-static char rcsid[] = "$OpenBSD: vacation.c,v 1.9 1998/02/07 02:47:21 millert Exp $";
+static char rcsid[] = "$OpenBSD: vacation.c,v 1.10 1998/07/08 21:39:08 deraadt Exp $";
 #endif /* not lint */
 
 /*
@@ -426,7 +426,7 @@ sendmessage(myname)
 		dup2(pvect[0], 0);
 		close(pvect[0]);
 		close(pvect[1]);
-		fclose(mfp);
+		close(fileno(mfp));
 		execl(_PATH_SENDMAIL, "sendmail", "-f", myname, "--",
 		    from, NULL);
 		syslog(LOG_ERR, "vacation: can't exec %s: %m", _PATH_SENDMAIL);

