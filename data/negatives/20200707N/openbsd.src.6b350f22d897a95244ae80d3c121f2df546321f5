commit 6b350f22d897a95244ae80d3c121f2df546321f5
Author: claudio <claudio@openbsd.org>
Date:   Wed Nov 2 13:21:06 2005 +0000

    Use the new rde_filter_equal() with dir = DIR_OUT to check if a soft-
    reconfigure out run is needed or not. If the output filters did not change
    no table walk is needed.

diff --git a/usr.sbin/bgpd/rde.c b/usr.sbin/bgpd/rde.c
index 14eda22d516..82e118fbddf 100644
--- a/usr.sbin/bgpd/rde.c
+++ b/usr.sbin/bgpd/rde.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: rde.c,v 1.177 2005/11/01 15:21:54 claudio Exp $ */
+/*	$OpenBSD: rde.c,v 1.178 2005/11/02 13:21:06 claudio Exp $ */
 
 /*
  * Copyright (c) 2003, 2004 Henning Brauer <henning@openbsd.org>
@@ -522,7 +522,8 @@ rde_dispatch_imsg_parent(struct imsgbuf *ibuf)
 			parent_set = NULL;
 			prefix_network_clean(&peerself, reloadtime);
 			
-			pt_dump(rde_softreconfig_out, NULL, AF_UNSPEC);
+			if (!rde_filter_equal(rules_l, newrules, DIR_OUT))
+				pt_dump(rde_softreconfig_out, NULL, AF_UNSPEC);
 			while ((r = TAILQ_FIRST(rules_l)) != NULL) {
 				TAILQ_REMOVE(rules_l, r, entry);
 				filterset_free(&r->set);

