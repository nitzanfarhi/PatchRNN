commit f0f7eccc2375d07b16a61ddc79fe5d1fc3ee4fc2
Author: unknown <heikki@hundin.mysql.fi>
Date:   Tue Jul 8 20:51:45 2003 +0300

    ha_innodb.cc:
      Prevent the user from creating InnoDB tables with > 1000 columns
    
    
    sql/ha_innodb.cc:
      Prevent the user from creating InnoDB tables with > 1000 columns

diff --git a/sql/ha_innodb.cc b/sql/ha_innodb.cc
index 9857628ccc8..09119a4eb54 100644
--- a/sql/ha_innodb.cc
+++ b/sql/ha_innodb.cc
@@ -3396,6 +3396,13 @@ ha_innobase::create(
 
 	DBUG_ASSERT(thd != NULL);
 
+	if (form->fields > 1000) {
+		/* The limit probably should be REC_MAX_N_FIELDS - 3 = 1020,
+		but we play safe here */
+
+	        return(HA_ERR_TO_BIG_ROW);
+	} 
+
 	/* Get the transaction associated with the current thd, or create one
 	if not yet created */
 	

