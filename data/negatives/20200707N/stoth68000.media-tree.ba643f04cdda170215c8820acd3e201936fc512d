commit ba643f04cdda170215c8820acd3e201936fc512d
Author: Eric Paris <eparis@redhat.com>
Date:   Thu Dec 17 21:24:27 2009 -0500

    fsnotify: clear marks to 0 in fsnotify_init_mark
    
    Currently fsnotify_init_mark sets some fields to 0/NULL.  Some users
    already used some sorts of zalloc, some didn't.  This patch uses memset to
    explicitly zero everything in the fsnotify_mark when it is initialized so we
    don't have to be careful if fields are later added to marks.
    
    Signed-off-by: Eric Paris <eparis@redhat.com>

diff --git a/fs/notify/mark.c b/fs/notify/mark.c
index e56e8768d676..57bb1d74a2b6 100644
--- a/fs/notify/mark.c
+++ b/fs/notify/mark.c
@@ -284,11 +284,8 @@ void fsnotify_duplicate_mark(struct fsnotify_mark *new, struct fsnotify_mark *ol
 void fsnotify_init_mark(struct fsnotify_mark *mark,
 			void (*free_mark)(struct fsnotify_mark *mark))
 {
+	memset(mark, 0, sizeof(*mark));
 	spin_lock_init(&mark->lock);
 	atomic_set(&mark->refcnt, 1);
-	INIT_HLIST_NODE(&mark->i.i_list);
-	mark->group = NULL;
-	mark->mask = 0;
-	mark->i.inode = NULL;
 	mark->free_mark = free_mark;
 }

