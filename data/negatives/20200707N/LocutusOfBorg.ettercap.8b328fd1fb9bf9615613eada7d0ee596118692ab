commit 8b328fd1fb9bf9615613eada7d0ee596118692ab
Author: Emilio Escobar <emescobar@users.sourceforge.net>
Date:   Fri Nov 4 13:59:07 2011 -0400

    Changed thread library to detach a thread that calls ec_thread_exit, when this happens, no other thread does a pthread_join on it. The thread is removed from the thread_list so when kill_all is executed, this thread will not be on the list to be cancelled.
    
    Setting it to detach state will force the thread to release ALL of its resources back to the system instead of waiting for a thread to call pthread_join on the thread that's calling pthread_exit

diff --git a/src/ec_threads.c b/src/ec_threads.c
index 817ea418..0ceb5679 100644
--- a/src/ec_threads.c
+++ b/src/ec_threads.c
@@ -358,6 +358,14 @@ void ec_thread_exit(void)
    LIST_FOREACH_SAFE(current, &thread_list_head, next, old) {
       /* delete our entry */
       if (pthread_equal(current->t.id, id)) {
+
+      /* thread is attempting to shut down on its own, check and see if the thread is detached,
+         if not set is as a detached thread since when a thread calls this method, there is no thread
+         that will do the pthread_join to force it to release all of its resources */
+         if (!current->t.detached) {
+            pthread_setdetach(id);
+         }
+
          SAFE_FREE(current->t.name);
          SAFE_FREE(current->t.description);
          LIST_REMOVE(current, next);

