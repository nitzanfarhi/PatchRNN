commit 694be29f13622c6b38c747c3bb14c93c95435c4d
Author: Sebastien Zwickert <dilaroga@gmail.com>
Date:   Tue Aug 14 11:47:39 2012 +0200

    vda: better frame allocation
    
    Signed-off-by: Diego Biurrun <diego@biurrun.de>

diff --git a/libavcodec/vda_h264.c b/libavcodec/vda_h264.c
index 2d2d228745..5c8f5679f9 100644
--- a/libavcodec/vda_h264.c
+++ b/libavcodec/vda_h264.c
@@ -144,7 +144,7 @@ static void vda_decoder_callback(void *vda_hw_ctx,
         vda_frame *new_frame;
         vda_frame *queue_walker;
 
-        if (!(new_frame = av_mallocz(sizeof(vda_frame))))
+        if (!(new_frame = av_mallocz(sizeof(*new_frame))))
             return;
         new_frame->next_frame = NULL;
         new_frame->cv_buffer  = CVPixelBufferRetain(image_buffer);

