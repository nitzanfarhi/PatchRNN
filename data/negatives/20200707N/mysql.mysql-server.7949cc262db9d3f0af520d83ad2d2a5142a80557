commit 7949cc262db9d3f0af520d83ad2d2a5142a80557
Author: Martin Skold <Martin.Skold@mysql.com>
Date:   Tue Dec 1 09:56:39 2009 +0100

    Bug#48005 ndb backup / restore does not restore the auto_increment: Post review changes

diff --git a/storage/ndb/tools/restore/Restore.cpp b/storage/ndb/tools/restore/Restore.cpp
index b8b18d56b31..fa0c32c1f06 100644
--- a/storage/ndb/tools/restore/Restore.cpp
+++ b/storage/ndb/tools/restore/Restore.cpp
@@ -1139,17 +1139,17 @@ TableS::get_auto_data(const TupleS & tuple, Uint32 * syskey, Uint64 * nextid) co
     value in the sequence (note though that sequences of
     values can have been fetched and that are cached in NdbAPI).
     SYSTAB_0 can contain other data so we need to check that
-    the found SYSKEY value is a valid table_id (< 0x1000000).
+    the found SYSKEY value is a valid table_id (< 0x10000000).
    */
   AttributeData * attr_data = tuple.getData(0);
   const AttributeDesc * attr_desc = tuple.getDesc(0);
   const AttributeS attr1 = {attr_desc, *attr_data};
-  *syskey = *(attr1.Data.u_int32_value);
+  memcpy(syskey ,attr1.Data.u_int32_value, sizeof(Uint32));
   attr_data = tuple.getData(1);
   attr_desc = tuple.getDesc(1);
   const AttributeS attr2 = {attr_desc, *attr_data};
-  *nextid = *(attr2.Data.u_int64_value);
-  if (*syskey < 0x1000000)
+  memcpy(nextid, attr2.Data.u_int64_value, sizeof(Uint64));
+  if (*syskey < 0x10000000)
   {
     return true;
   }

