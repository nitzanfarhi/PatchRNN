commit 99a94133798eb8d3d812420246d0a97df4354df1
Author: matt dannenberg <matt.dannenberg@10gen.com>
Date:   Thu May 28 08:37:43 2015 -0400

    SERVER-18695 do not call getValue on non-OK StatusWith in ElectionWinnerDeclarer::Algorithm::processResponse()

diff --git a/src/mongo/db/repl/election_winner_declarer.cpp b/src/mongo/db/repl/election_winner_declarer.cpp
index 1db7f8fb14..04175335cb 100644
--- a/src/mongo/db/repl/election_winner_declarer.cpp
+++ b/src/mongo/db/repl/election_winner_declarer.cpp
@@ -77,16 +77,18 @@ namespace repl {
             const RemoteCommandRequest& request,
             const ResponseStatus& response) {
         _responsesProcessed++;
-        Status cmdResponseStatus = getStatusFromCommandResult(response.getValue().data);
         if (!response.isOK()) { // failed response
             log() << "ElectionWinnerDeclarer: Got failed response from " << request.target
                   << ": " << response.getStatus();
+            return;
         }
-        else if (!cmdResponseStatus.isOK()) { // disagreement response
+
+        Status cmdResponseStatus = getStatusFromCommandResult(response.getValue().data);
+        if (!cmdResponseStatus.isOK()) { // disagreement response
             _failed = true;
             _status = cmdResponseStatus;
             log() << "ElectionWinnerDeclarer: Got error response from " << request.target
-                  << " with term: " << response.getValue().data["term"].Number() 
+                  << " with term: " << response.getValue().data["term"].Number()
                   << " and error: " << cmdResponseStatus;
         }
     }

