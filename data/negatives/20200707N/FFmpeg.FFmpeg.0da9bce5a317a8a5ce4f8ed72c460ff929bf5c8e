commit 0da9bce5a317a8a5ce4f8ed72c460ff929bf5c8e
Author: Stefano Sabatini <stefasab@gmail.com>
Date:   Fri Jun 1 11:05:44 2012 +0200

    lavfi: move avfilter_copy_frame_props() definition from buffer.c to avcodec.c
    
    The new location is more suited, as it is where the lavfi/lavc glue is
    defined.

diff --git a/libavfilter/avcodec.c b/libavfilter/avcodec.c
index 0d87808e6c..6d3aa59a80 100644
--- a/libavfilter/avcodec.c
+++ b/libavfilter/avcodec.c
@@ -26,6 +26,33 @@
 #include "avcodec.h"
 #include "libavutil/opt.h"
 
+int avfilter_copy_frame_props(AVFilterBufferRef *dst, const AVFrame *src)
+{
+    dst->pts    = src->pts;
+    dst->pos    = av_frame_get_pkt_pos(src);
+    dst->format = src->format;
+
+    switch (dst->type) {
+    case AVMEDIA_TYPE_VIDEO:
+        dst->video->w                   = src->width;
+        dst->video->h                   = src->height;
+        dst->video->sample_aspect_ratio = src->sample_aspect_ratio;
+        dst->video->interlaced          = src->interlaced_frame;
+        dst->video->top_field_first     = src->top_field_first;
+        dst->video->key_frame           = src->key_frame;
+        dst->video->pict_type           = src->pict_type;
+        break;
+    case AVMEDIA_TYPE_AUDIO:
+        dst->audio->sample_rate         = src->sample_rate;
+        dst->audio->channel_layout      = src->channel_layout;
+        break;
+    default:
+        return AVERROR(EINVAL);
+    }
+
+    return 0;
+}
+
 AVFilterBufferRef *avfilter_get_video_buffer_ref_from_frame(const AVFrame *frame,
                                                             int perms)
 {
diff --git a/libavfilter/buffer.c b/libavfilter/buffer.c
index 9600f6dddd..ef8238c528 100644
--- a/libavfilter/buffer.c
+++ b/libavfilter/buffer.c
@@ -163,33 +163,6 @@ void avfilter_unref_bufferp(AVFilterBufferRef **ref)
     *ref = NULL;
 }
 
-int avfilter_copy_frame_props(AVFilterBufferRef *dst, const AVFrame *src)
-{
-    dst->pts    = src->pts;
-    dst->pos    = av_frame_get_pkt_pos(src);
-    dst->format = src->format;
-
-    switch (dst->type) {
-    case AVMEDIA_TYPE_VIDEO:
-        dst->video->w                   = src->width;
-        dst->video->h                   = src->height;
-        dst->video->sample_aspect_ratio = src->sample_aspect_ratio;
-        dst->video->interlaced          = src->interlaced_frame;
-        dst->video->top_field_first     = src->top_field_first;
-        dst->video->key_frame           = src->key_frame;
-        dst->video->pict_type           = src->pict_type;
-        break;
-    case AVMEDIA_TYPE_AUDIO:
-        dst->audio->sample_rate         = src->sample_rate;
-        dst->audio->channel_layout      = src->channel_layout;
-        break;
-    default:
-        return AVERROR(EINVAL);
-    }
-
-    return 0;
-}
-
 int avfilter_copy_buf_props(AVFrame *dst, const AVFilterBufferRef *src)
 {
     int planes, nb_channels;

