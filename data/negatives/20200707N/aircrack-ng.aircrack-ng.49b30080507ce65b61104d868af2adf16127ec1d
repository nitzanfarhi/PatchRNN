commit 49b30080507ce65b61104d868af2adf16127ec1d
Author: Adam CÃ©cile <gandalf@aircrack-ng.org>
Date:   Sat Jan 20 20:22:20 2007 +0000

    Hardcode cpus number to 1 if sysconf call fails.
    
    git-svn-id: http://svn.aircrack-ng.org/trunk@118 28c6078b-6c39-48e3-add9-af49d547ecab

diff --git a/src/aircrack-ng.c b/src/aircrack-ng.c
index 3081431b..be8b319a 100644
--- a/src/aircrack-ng.c
+++ b/src/aircrack-ng.c
@@ -2783,6 +2783,9 @@ int main( int argc, char *argv[] )
 	#ifdef _SC_NPROCESSORS_ONLN
 
 	max_cpu   = sysconf(_SC_NPROCESSORS_ONLN);
+	/* Fails on some archs */
+	if ( max_cpu < 1 )
+		max_cpu = 1;
 	opt.nbcpu = max_cpu;
 
 	#else

