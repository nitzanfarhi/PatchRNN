commit 8fe1667711a9563a439afa5c8d6ee24482542a0e
Author: Moe Jette <jette1@llnl.gov>
Date:   Tue Jul 1 18:37:09 2003 +0000

    Don't advance end-time for already completed job on reconfig.

diff --git a/src/slurmctld/read_config.c b/src/slurmctld/read_config.c
index a2c0ab4a36..48fe65fece 100644
--- a/src/slurmctld/read_config.c
+++ b/src/slurmctld/read_config.c
@@ -912,8 +912,9 @@ static int _sync_nodes_to_active_job(struct job_record *job_ptr)
 		base_state = node_record_table_ptr[i].node_state & 
 			     (~NODE_STATE_NO_RESPOND);
 		if (base_state == NODE_STATE_DOWN) {
+			time_t now = time(NULL);
 			job_ptr->job_state = JOB_NODE_FAIL | JOB_COMPLETING;
-			job_ptr->end_time = time(NULL);
+			job_ptr->end_time = MIN(job_ptr->end_time, now);
 			delete_all_step_records(job_ptr);
 		} else {
 	 		node_record_table_ptr[i].run_job_cnt++; /* NOTE:

