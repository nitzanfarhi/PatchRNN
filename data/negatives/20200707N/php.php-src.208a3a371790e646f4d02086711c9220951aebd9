commit 208a3a371790e646f4d02086711c9220951aebd9
Author: Georg Richter <georg@php.net>
Date:   Sat Nov 16 16:07:54 2002 +0000

    forgot to decrement result_allocated :(

diff --git a/ext/mysql/php_mysql.c b/ext/mysql/php_mysql.c
index 361ffe5166..1ef4ec6b31 100644
--- a/ext/mysql/php_mysql.c
+++ b/ext/mysql/php_mysql.c
@@ -231,6 +231,7 @@ static void _free_mysql_result(zend_rsrc_list_entry *rsrc TSRMLS_DC)
 	MYSQL_RES *mysql_result = (MYSQL_RES *)rsrc->ptr;
 
 	mysql_free_result(mysql_result);
+	MySG(result_allocated)--;
 }
 /* }}} */
 

