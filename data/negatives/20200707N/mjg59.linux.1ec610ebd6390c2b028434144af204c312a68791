commit 1ec610ebd6390c2b028434144af204c312a68791
Author: Gery Kahn <gery.kahn@gmail.com>
Date:   Tue Feb 1 03:03:08 2011 -0600

    wl12xx: update PLT initialization for new firmware
    
    In revision > 6.1.3.0.0 the firmware expects memory configuration command
    as part of boot. This was missing if driver boots in PLT mode.
    The patch adds the memory configuration command, which fixes PLT commands
    tx continuous and rx statistics.
    
    Signed-off-by: Gery Kahn <geryk@ti.com>
    Signed-off-by: Luciano Coelho <coelho@ti.com>

diff --git a/drivers/net/wireless/wl12xx/main.c b/drivers/net/wireless/wl12xx/main.c
index 61dea73f5fdc..cf8b3cebe9d6 100644
--- a/drivers/net/wireless/wl12xx/main.c
+++ b/drivers/net/wireless/wl12xx/main.c
@@ -482,6 +482,10 @@ static int wl1271_plt_init(struct wl1271 *wl)
 	if (ret < 0)
 		goto out_free_memmap;
 
+	ret = wl1271_acx_sta_mem_cfg(wl);
+	if (ret < 0)
+		goto out_free_memmap;
+
 	/* Default fragmentation threshold */
 	ret = wl1271_acx_frag_threshold(wl, wl->conf.tx.frag_threshold);
 	if (ret < 0)

