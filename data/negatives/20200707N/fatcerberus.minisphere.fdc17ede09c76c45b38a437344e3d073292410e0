commit fdc17ede09c76c45b38a437344e3d073292410e0
Author: Bruce Pascoe <fatcerberus@icloud.com>
Date:   Mon Jun 1 12:14:18 2015 -0400

    Fix occasional crash when calling ExecuteGame()
    
    I thought this was Allegro crashing, but turns out, no, it was my fault.
    I left the game path pointer dangling on shutdown, so when restarting
    the engine, trying to access it caused a crash.

diff --git a/src/main.c b/src/main.c
index 9141a986..4da63b34 100644
--- a/src/main.c
+++ b/src/main.c
@@ -781,11 +781,13 @@ shutdown_engine(void)
 	shutdown_sound();
 	
 	console_log(0, "Shutting down Allegro\n");
-	al_destroy_display(g_display);
-	al_destroy_event_queue(g_events);
-	al_destroy_config(g_game_conf);
-	al_destroy_path(g_game_path);
-	if (g_sys_conf != NULL) al_destroy_config(g_sys_conf);
+	al_destroy_display(g_display); g_display = NULL;
+	al_destroy_event_queue(g_events); g_events = NULL;
+	al_destroy_config(g_game_conf); g_game_conf = NULL;
+	al_destroy_path(g_game_path); g_game_path = NULL;
+	if (g_sys_conf != NULL)
+		al_destroy_config(g_sys_conf);
+	g_sys_conf = NULL;
 	al_uninstall_system();
 }
 

