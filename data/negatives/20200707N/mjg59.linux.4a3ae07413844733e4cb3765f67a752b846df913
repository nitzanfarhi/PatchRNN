commit 4a3ae07413844733e4cb3765f67a752b846df913
Author: Xiubo Li <Li.Xiubo@freescale.com>
Date:   Wed Apr 23 10:11:59 2014 +0800

    clocksource: Fix type confusion for clocksource_mmio_readX_Y
    
    The types' definations are:
       o  cycle_t       -> u64
       o  readl_relaxed -> u32
       o  readw_relaxed -> u16
    
    So let clocksource_mmio_readX_Ys return a cast to cycle_t, though
    this maybe look reduntant sometimes, it make sense and they will be
    more readable and less confusion...
    
    This patch clarifies the functions type and fix it.
    
    Signed-off-by: Xiubo Li <Li.Xiubo@freescale.com>
    Cc: Daniel Lezcano <daniel.lezcano@linaro.org>
    Signed-off-by: Daniel Lezcano <daniel.lezcano@linaro.org>

diff --git a/drivers/clocksource/mmio.c b/drivers/clocksource/mmio.c
index c0e25125a55e..19a6b3f4d9cf 100644
--- a/drivers/clocksource/mmio.c
+++ b/drivers/clocksource/mmio.c
@@ -22,22 +22,22 @@ static inline struct clocksource_mmio *to_mmio_clksrc(struct clocksource *c)
 
 cycle_t clocksource_mmio_readl_up(struct clocksource *c)
 {
-	return readl_relaxed(to_mmio_clksrc(c)->reg);
+	return (cycle_t)readl_relaxed(to_mmio_clksrc(c)->reg);
 }
 
 cycle_t clocksource_mmio_readl_down(struct clocksource *c)
 {
-	return ~readl_relaxed(to_mmio_clksrc(c)->reg);
+	return ~(cycle_t)readl_relaxed(to_mmio_clksrc(c)->reg);
 }
 
 cycle_t clocksource_mmio_readw_up(struct clocksource *c)
 {
-	return readw_relaxed(to_mmio_clksrc(c)->reg);
+	return (cycle_t)readw_relaxed(to_mmio_clksrc(c)->reg);
 }
 
 cycle_t clocksource_mmio_readw_down(struct clocksource *c)
 {
-	return ~(unsigned)readw_relaxed(to_mmio_clksrc(c)->reg);
+	return ~(cycle_t)readw_relaxed(to_mmio_clksrc(c)->reg);
 }
 
 /**

