commit acb97a77a80b983a677f8452c373d6b7cccf9ed1
Author: Patrick Parker <patrick_x99@hotmail.com>
Date:   Fri Aug 10 00:08:05 2007 +0000

    locations not on the map should instantly fail to location filter

diff --git a/src/terrain_filter.cpp b/src/terrain_filter.cpp
index 10d23e9af5..b476a8f1e9 100644
--- a/src/terrain_filter.cpp
+++ b/src/terrain_filter.cpp
@@ -179,7 +179,9 @@ namespace {
 bool terrain_matches_filter(const gamemap& map, const gamemap::location& loc, const vconfig& cfg, 
 		const gamestatus& game_status, const unit_map& units, const bool flat_tod,
 		const size_t max_loop)
-{
+{
+	if(!map.on_board(loc)) return false;
+
 	//handle radius
 	const size_t radius = minimum<size_t>(max_loop,
 		lexical_cast_default<size_t>(cfg["radius"], 0));

