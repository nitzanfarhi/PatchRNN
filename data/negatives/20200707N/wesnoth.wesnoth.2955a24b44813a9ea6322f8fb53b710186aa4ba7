commit 2955a24b44813a9ea6322f8fb53b710186aa4ba7
Author: loonycyborg <loonycyborg@gmail.com>
Date:   Mon Jul 4 12:08:47 2016 +0300

    Properly shut down in response to fifo command

diff --git a/src/campaign_server/campaign_server.cpp b/src/campaign_server/campaign_server.cpp
index 5d3ceae36b..eecb3bd19a 100644
--- a/src/campaign_server/campaign_server.cpp
+++ b/src/campaign_server/campaign_server.cpp
@@ -247,6 +247,7 @@ void server::handle_read_from_fifo(const boost::system::error_code& error, std::
 
 	if(ctl == "shut_down") {
 		LOG_CS << "Shut down requested by admin, shutting down...\n";
+		throw server_shutdown("Shut down via fifo command");
 	} else if(ctl == "readonly") {
 		if(ctl.args_count()) {
 			cfg_["read_only"] = read_only_ = utils::string_bool(ctl[1], true);

