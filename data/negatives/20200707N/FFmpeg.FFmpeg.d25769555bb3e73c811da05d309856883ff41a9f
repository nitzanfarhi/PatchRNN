commit d25769555bb3e73c811da05d309856883ff41a9f
Author: Marton Balint <cus@passwd.hu>
Date:   Mon Jan 30 01:33:18 2017 +0100

    avutil/frame: fix av_frame_copy for unknown layouts
    
    I wonder how unknown layouts ever worked without this?
    
    Reviewed-by: Nicolas George <george@nsup.org>
    Reviewed-by: Hendrik Leppkes <h.leppkes@gmail.com>
    Reviewed-by: Paul B Mahol <onemda@gmail.com>
    Signed-off-by: Marton Balint <cus@passwd.hu>

diff --git a/libavutil/frame.c b/libavutil/frame.c
index c2f55098c8..a08e0c539d 100644
--- a/libavutil/frame.c
+++ b/libavutil/frame.c
@@ -725,7 +725,7 @@ int av_frame_copy(AVFrame *dst, const AVFrame *src)
 
     if (dst->width > 0 && dst->height > 0)
         return frame_copy_video(dst, src);
-    else if (dst->nb_samples > 0 && dst->channel_layout)
+    else if (dst->nb_samples > 0 && dst->channels > 0)
         return frame_copy_audio(dst, src);
 
     return AVERROR(EINVAL);

