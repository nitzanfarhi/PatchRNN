commit 7933210f7c48b638a71f51834336a0b610e6c363
Author: Rainer Gerhards <rgerhards@adiscon.com>
Date:   Sat Oct 28 12:58:04 2017 +0200

    cosmetic: ensure strmOpenFile() has opened file when returning RS_RET_OK
    
    this tries to fix a potential false positive in Coverity scan. If this does
    not work out, we need to explicitely set it to false positive.
    
    CID 185330

diff --git a/runtime/stream.c b/runtime/stream.c
index 3f7aa0d6d..3e5616cfd 100644
--- a/runtime/stream.c
+++ b/runtime/stream.c
@@ -379,7 +379,9 @@ static rsRetVal strmOpenFile(strm_t *pThis)
 		  (pThis->tOperationsMode == STREAMMODE_READ) ? "READ" : "WRITE", pThis->fd);
 
 finalize_it:
-	if(iRet != RS_RET_OK) {
+	if(iRet == RS_RET_OK) {
+		assert(pThis->fd != -1);
+	} else {
 		if(pThis->pszCurrFName != NULL) {
 			free(pThis->pszCurrFName);
 			pThis->pszCurrFName = NULL; /* just to prevent mis-adressing down the road... */

