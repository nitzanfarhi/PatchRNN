commit ec975a74ad71993d8163fa39f0120ae693d2d3ee
Author: ZyX <kp-pav@yandex.ru>
Date:   Wed Jan 4 16:42:43 2017 +0300

    shada: Fix offset saving

diff --git a/src/nvim/shada.c b/src/nvim/shada.c
index e9a216763..8d9e8a679 100644
--- a/src/nvim/shada.c
+++ b/src/nvim/shada.c
@@ -2411,8 +2411,8 @@ static inline void add_search_pattern(PossiblyFreedShadaEntry *const ret_pse,
                 ? defaults.data.search_pattern.place_cursor_at_end
                 : pat.off.end),
             .offset = (is_substitute_pattern
-                       ? pat.off.off
-                       : defaults.data.search_pattern.offset),
+                       ? defaults.data.search_pattern.offset
+                       : pat.off.off),
             .is_last_used = (is_substitute_pattern ^ search_last_used),
             .is_substitute_pattern = is_substitute_pattern,
             .highlighted = ((is_substitute_pattern ^ search_last_used)

