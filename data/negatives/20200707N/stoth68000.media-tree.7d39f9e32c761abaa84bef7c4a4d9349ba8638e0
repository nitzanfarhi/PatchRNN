commit 7d39f9e32c761abaa84bef7c4a4d9349ba8638e0
Author: wanghaibin <wanghaibin.wang@huawei.com>
Date:   Mon Nov 17 09:27:37 2014 +0000

    KVM: ARM: VGIC: Optimize the vGIC vgic_update_irq_pending function.
    
    When vgic_update_irq_pending with level-sensitive false, it is need to
    deactivates an interrupt, and, it can go to out directly.
    Here return a false value, because it will be not need to kick.
    
    Signed-off-by: wanghaibin <wanghaibin.wang@huawei.com>
    Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>

diff --git a/virt/kvm/arm/vgic.c b/virt/kvm/arm/vgic.c
index 3aaca49de325..5acf2c93f616 100644
--- a/virt/kvm/arm/vgic.c
+++ b/virt/kvm/arm/vgic.c
@@ -1646,6 +1646,9 @@ static bool vgic_update_irq_pending(struct kvm *kvm, int cpuid,
 		} else {
 			vgic_dist_irq_clear_pending(vcpu, irq_num);
 		}
+
+		ret = false;
+		goto out;
 	}
 
 	enabled = vgic_irq_is_enabled(vcpu, irq_num);

