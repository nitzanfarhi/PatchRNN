commit 4b744dfabebd10bf0f13b64060f44b1bd6c82704
Author: Zbigniew JÄ™drzejewski-Szmek <zbyszek@in.waw.pl>
Date:   Tue Jun 25 12:15:07 2013 -0400

    systemd: log failed conditions
    
    ConditionPathExists=/tmp/nosuchpath failed for nosuchpath.service.

diff --git a/src/core/condition.c b/src/core/condition.c
index 427aa080a..2fbc5ad0e 100644
--- a/src/core/condition.c
+++ b/src/core/condition.c
@@ -37,6 +37,7 @@
 #include "virt.h"
 #include "path-util.h"
 #include "fileio.h"
+#include "unit.h"
 
 Condition* condition_new(ConditionType type, const char *parameter, bool trigger, bool negate) {
         Condition *c;
@@ -333,7 +334,7 @@ bool condition_test(Condition *c) {
         }
 }
 
-bool condition_test_list(Condition *first) {
+bool condition_test_list(const char *unit, Condition *first) {
         Condition *c;
         int triggered = -1;
 
@@ -348,6 +349,15 @@ bool condition_test_list(Condition *first) {
                 bool b;
 
                 b = condition_test(c);
+                if (unit)
+                        log_debug_unit(unit,
+                                       "%s=%s%s%s %s for %s.",
+                                       condition_type_to_string(c->type),
+                                       c->trigger ? "|" : "",
+                                       c->negate ? "!" : "",
+                                       c->parameter,
+                                       b ? "succeeded" : "failed",
+                                       unit);
 
                 if (!c->trigger && !b)
                         return false;
diff --git a/src/core/condition.h b/src/core/condition.h
index 50ed955af..2ad77876e 100644
--- a/src/core/condition.h
+++ b/src/core/condition.h
@@ -61,7 +61,7 @@ void condition_free(Condition *c);
 void condition_free_list(Condition *c);
 
 bool condition_test(Condition *c);
-bool condition_test_list(Condition *c);
+bool condition_test_list(const char *unit, Condition *c);
 
 void condition_dump(Condition *c, FILE *f, const char *prefix);
 void condition_dump_list(Condition *c, FILE *f, const char *prefix);
diff --git a/src/core/unit.c b/src/core/unit.c
index f4f92f0fc..a201fa404 100644
--- a/src/core/unit.c
+++ b/src/core/unit.c
@@ -996,7 +996,7 @@ bool unit_condition_test(Unit *u) {
         assert(u);
 
         dual_timestamp_get(&u->condition_timestamp);
-        u->condition_result = condition_test_list(u->conditions);
+        u->condition_result = condition_test_list(u->id, u->conditions);
 
         return u->condition_result;
 }

