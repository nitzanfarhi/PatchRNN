commit 49be9aa7eabb9ae7991491087f69b10e113c7360
Author: Assefa Yewondwossen <assefa@dmsolutions.ca>
Date:   Mon Mar 7 14:55:37 2005 +0000

    Correct problems when building on Windows.
    
    
    git-svn-id: http://svn.osgeo.org/mapserver/trunk@4470 7532c77e-422f-0410-93f4-f0b67bdd69e2

diff --git a/mappostgis.c b/mappostgis.c
index e4c41596..edfb9325 100644
--- a/mappostgis.c
+++ b/mappostgis.c
@@ -27,6 +27,9 @@
  ******************************************************************************
  *
  * $Log$
+ * Revision 1.50  2005/03/07 14:55:37  assefa
+ * Correct problems when building on Windows.
+ *
  * Revision 1.49  2005/03/04 21:54:21  pramsey
  * Provided masking of passwords in the error reporting (bug 703).
  *
@@ -1601,8 +1604,9 @@ int msPOSTGISLayerRetrievePGVersion(layerObj *layer, int debug, int *major, int
     query_result = PQexec(layerinfo->conn, sql);
     if(!(query_result) || PQresultStatus(query_result) != PGRES_TUPLES_OK) {
         char tmp1[63]; 
+        char *tmp2 = NULL;
         strcat(tmp1, "Error executing POSTGIS statement (msPOSTGISLayerRetrievePGVersion():");
-        char tmp2[strlen(tmp1) + strlen(sql)];
+        tmp2 = (char *)malloc(sizeof(char)*(strlen(tmp1) + strlen(sql)));
         strcat(tmp2, tmp1);
         strcat(tmp2, sql);
         msSetError(MS_QUERYERR, tmp2, "msPOSTGISLayerRetrievePGVersion()");
@@ -1711,8 +1715,9 @@ int msPOSTGISLayerRetrievePK(layerObj *layer, char **urid_name, char* table_name
     if(!(query_result) || PQresultStatus(query_result) != PGRES_TUPLES_OK) 
     {
       char tmp1[63]; 
+      char *tmp2 = NULL;
       strcat(tmp1, "Error executing POSTGIS statement (msPOSTGISLayerRetrievePK():");
-      char tmp2[strlen(tmp1) + strlen(sql)];
+      tmp2 = (char *)malloc(sizeof(char)*(strlen(tmp1) + strlen(sql)));
       strcat(tmp2, tmp1);
       strcat(tmp2, sql);
       msSetError(MS_QUERYERR, tmp2, "msPOSTGISLayerRetrievePK()");

