commit b948ab8132e24d215072120e210139dc456d4997
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Wed Jan 15 23:06:30 2014 +0100

    avformat/jvdec: clear packet padding after downsize
    
    Fixes: use of uninitialized memeory
    Fixes: msan_uninit-mem_7fbf26b5fefe_5981_intro.jv
    Found-by: Mateusz "j00ru" Jurczyk and Gynvael Coldwind
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavformat/jvdec.c b/libavformat/jvdec.c
index 03ac43d10e..27ec7ad317 100644
--- a/libavformat/jvdec.c
+++ b/libavformat/jvdec.c
@@ -190,6 +190,7 @@ static int read_packet(AVFormatContext *s, AVPacket *pkt)
                 pkt->data[4]      = jvf->video_type;
                 if ((size = avio_read(pb, pkt->data + JV_PREAMBLE_SIZE, size)) < 0)
                     return AVERROR(EIO);
+                memset(pkt->data + JV_PREAMBLE_SIZE + size, 0, FF_INPUT_BUFFER_PADDING_SIZE);
 
                 pkt->size         = size + JV_PREAMBLE_SIZE;
                 pkt->stream_index = 1;

