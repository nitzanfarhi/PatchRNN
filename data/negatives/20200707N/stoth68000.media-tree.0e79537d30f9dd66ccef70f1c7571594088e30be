commit 0e79537d30f9dd66ccef70f1c7571594088e30be
Author: Cong Ding <dinggnu@gmail.com>
Date:   Fri Feb 1 22:33:21 2013 -0500

    ext4: reduce one "if" comparison in ext4_dirhash()
    
    It is unnecessary to check i<4 after the loop; just do it before the
    break.
    
    Signed-off-by: Cong Ding <dinggnu@gmail.com>
    Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>

diff --git a/fs/ext4/hash.c b/fs/ext4/hash.c
index fa8e4911d354..3d586f02883e 100644
--- a/fs/ext4/hash.c
+++ b/fs/ext4/hash.c
@@ -155,11 +155,11 @@ int ext4fs_dirhash(const char *name, int len, struct dx_hash_info *hinfo)
 	/* Check to see if the seed is all zero's */
 	if (hinfo->seed) {
 		for (i = 0; i < 4; i++) {
-			if (hinfo->seed[i])
+			if (hinfo->seed[i]) {
+				memcpy(buf, hinfo->seed, sizeof(buf));
 				break;
+			}
 		}
-		if (i < 4)
-			memcpy(buf, hinfo->seed, sizeof(buf));
 	}
 
 	switch (hinfo->hash_version) {

