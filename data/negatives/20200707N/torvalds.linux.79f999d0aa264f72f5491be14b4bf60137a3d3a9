commit 79f999d0aa264f72f5491be14b4bf60137a3d3a9
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon May 12 12:29:25 2008 +0100

    strip: Fix termios assumption
    
    Strip assumes that the tty drivers always have a set_termios method which
    may not be true. Check this when binding to the tty so that we don't oops
    later.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/net/wireless/strip.c b/drivers/net/wireless/strip.c
index 5dd23c93497d..883af891ebfb 100644
--- a/drivers/net/wireless/strip.c
+++ b/drivers/net/wireless/strip.c
@@ -2611,7 +2611,7 @@ static int strip_open(struct tty_struct *tty)
 	 * We need a write method.
 	 */
 
-	if (tty->ops->write == NULL)
+	if (tty->ops->write == NULL || tty->ops->set_termios == NULL)
 		return -EOPNOTSUPP;
 
 	/*

