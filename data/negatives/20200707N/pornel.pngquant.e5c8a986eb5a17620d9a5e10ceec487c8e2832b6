commit e5c8a986eb5a17620d9a5e10ceec487c8e2832b6
Author: Kornel Lesiński <kornel@geekhood.net>
Date:   Sun Oct 13 21:54:35 2013 +0100

    Preserve order of unused colors

diff --git a/lib/viter.c b/lib/viter.c
index 109a165..5a95fe7 100644
--- a/lib/viter.c
+++ b/lib/viter.c
@@ -54,6 +54,8 @@ LIQ_PRIVATE void viter_finalize(colormap *map, const unsigned int max_threads, c
                 .g = g / total,
                 .b = b / total,
             };
+        } else {
+            total = i/1024.0;
         }
         map->palette[i].popularity = total;
     }

