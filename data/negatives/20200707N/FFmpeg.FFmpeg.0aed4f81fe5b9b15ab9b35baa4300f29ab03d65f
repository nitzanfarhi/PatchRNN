commit 0aed4f81fe5b9b15ab9b35baa4300f29ab03d65f
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sat Jun 18 21:59:11 2011 +0200

    w32threads: with only 1 thread there cant be a active threading mode.
    
    Fixes ticket284
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/w32thread.c b/libavcodec/w32thread.c
index 7c4c760e6c..501f0cebf3 100644
--- a/libavcodec/w32thread.c
+++ b/libavcodec/w32thread.c
@@ -135,11 +135,11 @@ int ff_thread_init(AVCodecContext *s){
         return 0;
     }
 
-    s->active_thread_type= FF_THREAD_SLICE;
-
     if (s->thread_count <= 1)
         return 0;
 
+    s->active_thread_type= FF_THREAD_SLICE;
+
     assert(!s->thread_opaque);
     c= av_mallocz(sizeof(ThreadContext)*s->thread_count);
     s->thread_opaque= c;

