commit 4b4447d879cc3ecac57f90f8f06865d0df4d5208
Author: Jan Kundr√°t <jkt@gentoo.org>
Date:   Thu May 14 00:35:30 2009 +0200

    Show mailboxes with unread messages in bold

diff --git a/Gui/MailboxTreeWidget.cpp b/Gui/MailboxTreeWidget.cpp
index 2f988a93..ef650f21 100644
--- a/Gui/MailboxTreeWidget.cpp
+++ b/Gui/MailboxTreeWidget.cpp
@@ -18,7 +18,11 @@ int MailboxTreeWidget::sizeHintForColumn( int column ) const
             return 150;
         case Imap::Mailbox::MailboxModel::TOTAL_MESSAGE_COUNT:
         case Imap::Mailbox::MailboxModel::UNREAD_MESSAGE_COUNT:
-            return fontMetrics().size( Qt::TextSingleLine, QLatin1String("88888") ).width();
+            {
+                QFont currentFont = font();
+                currentFont.setBold( true );
+                return QFontMetrics( currentFont ).size( Qt::TextSingleLine, QLatin1String("88888") ).width();
+            }
         default:
             return QTreeView::sizeHintForColumn( column );
     }
diff --git a/Imap/Model/MailboxModel.cpp b/Imap/Model/MailboxModel.cpp
index 3306490b..279df6be 100644
--- a/Imap/Model/MailboxModel.cpp
+++ b/Imap/Model/MailboxModel.cpp
@@ -22,6 +22,7 @@
 #include "iconloader/qticonloader.h"
 
 #include <QDebug>
+#include <QFont>
 
 namespace Imap {
 namespace Mailbox {
@@ -181,6 +182,14 @@ QVariant MailboxModel::data( const QModelIndex& proxyIndex, int role ) const
                 default:
                     return QVariant();
             }
+        case Qt::FontRole:
+            if ( list->numbersFetched() && list->unreadMessageCount(
+                                    static_cast<Imap::Mailbox::Model*>( sourceModel() ) ) > 0 ) {
+                QFont font;
+                font.setBold( true );
+                return font;
+            } else
+                return QVariant();
         case Qt::TextAlignmentRole:
             switch ( proxyIndex.column() ) {
                 case TOTAL_MESSAGE_COUNT:

