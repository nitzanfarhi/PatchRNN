commit 03e42df2e7c2f6f3feea6e5cc3ce698d2e1ac070
Author: ataufer <ataufer@8f940c70-5916-0410-ac46-d1fa2fa6ea29>
Date:   Thu Dec 11 23:49:57 2008 +0000

    b - allow qdel all to try to delete Completed and Exiting jobs if -p was specified

diff --git a/src/cmds/qdel.c b/src/cmds/qdel.c
index 04dd87058..2b3633c94 100644
--- a/src/cmds/qdel.c
+++ b/src/cmds/qdel.c
@@ -355,9 +355,13 @@ void qdel_all(
       a = a->next;
       }
 
-    /* Don't bother deleting jobs that are 'C'omplete or 'E'xiting */
-
-    if ((*state != 'E') && (*state != 'C'))
+    /* 
+     * Don't bother deleting jobs that are 'C'omplete or 'E'xiting
+     * Unless we are Purging, then try these jobs as well
+     */
+    
+    if ((strstr(extend,DELPURGE) != NULL) ||
+        ((*state != 'E') && (*state != 'C')))
       {
       retries = 0;
 

