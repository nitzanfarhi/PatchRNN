commit 6ed6e4f9fa7cbeb113475805e8bed99e689de2e8
Author: Keith Rarick <kr@xph.us>
Date:   Sat Nov 8 22:28:22 2008 -0800

    Don't try to open a binlog if -b was not given.

diff --git a/binlog.c b/binlog.c
index 2eed77d..e0ecfae 100644
--- a/binlog.c
+++ b/binlog.c
@@ -212,6 +212,7 @@ binlog_open()
     binlog b;
     int fd;
 
+    if (!binlog_dir) return -1;
     sprintf(path, "%s/binlog.%d", binlog_dir, ++binlog_index);
 
     if (!add_binlog(path)) return -1;

