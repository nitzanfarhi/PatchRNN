commit 3f104c38259dcb3e5443c246f0805bc04d887cc3
Author: Georg Hofmann <georg@hofmannsweb.com>
Date:   Thu Mar 14 06:54:09 2013 +0000

    net: fec: fix missing napi_disable call
    
    Commit dc975382d2ef36be7e78fac3717927de1a5abcd8 introduces napi support
    but never calls napi_disable. This will generate a kernel oops
    (kernel BUG at include/linux/netdevice.h:473!) every time, when
    ndo_stop is called followed by ndo_start.
    Add the missing napi_diable call.
    
    Signed-off-by: Georg Hofmann <georg@hofmannsweb.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/ethernet/freescale/fec.c b/drivers/net/ethernet/freescale/fec.c
index 61d2e6202bf3..e3f39372ce25 100644
--- a/drivers/net/ethernet/freescale/fec.c
+++ b/drivers/net/ethernet/freescale/fec.c
@@ -1441,6 +1441,7 @@ fec_enet_close(struct net_device *ndev)
 	struct fec_enet_private *fep = netdev_priv(ndev);
 
 	/* Don't know what to do yet. */
+	napi_disable(&fep->napi);
 	fep->opened = 0;
 	netif_stop_queue(ndev);
 	fec_stop(ndev);

