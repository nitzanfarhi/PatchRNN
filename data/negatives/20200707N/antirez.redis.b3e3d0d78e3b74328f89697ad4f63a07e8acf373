commit b3e3d0d78e3b74328f89697ad4f63a07e8acf373
Author: antirez <antirez@gmail.com>
Date:   Mon Jan 11 12:54:29 2010 -0500

    removed a bug introduced with non blocking VM

diff --git a/redis.c b/redis.c
index 733bc17d..f489072e 100644
--- a/redis.c
+++ b/redis.c
@@ -1649,7 +1649,6 @@ static void freeClient(redisClient *c) {
     aeDeleteFileEvent(server.el,c->fd,AE_READABLE);
     aeDeleteFileEvent(server.el,c->fd,AE_WRITABLE);
     listRelease(c->reply);
-    listRelease(c->io_keys);
     freeClientArgv(c);
     close(c->fd);
     /* Remove from the list of clients */
@@ -1662,6 +1661,7 @@ static void freeClient(redisClient *c) {
         if (ln) listDelNode(server.io_clients,ln);
         listRelease(c->io_keys);
     }
+    listRelease(c->io_keys);
     /* Other cleanup */
     if (c->flags & REDIS_SLAVE) {
         if (c->replstate == REDIS_REPL_SEND_BULK && c->repldbfd != -1)

