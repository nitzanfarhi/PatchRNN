commit 77e628abad3a1bc2c00e925a991ff992e347eeec
Author: Anders Brander <anders@brander.dk>
Date:   Wed Feb 18 13:28:25 2015 +0100

    Fixed Sony decryption for newer compilers.

diff --git a/plugins/meta-tiff/tiff-meta.c b/plugins/meta-tiff/tiff-meta.c
index 985ee589..a81a27d3 100644
--- a/plugins/meta-tiff/tiff-meta.c
+++ b/plugins/meta-tiff/tiff-meta.c
@@ -1331,8 +1331,8 @@ makernote_sony(RAWFILE *rawfile, guint offset, RSMetadata *meta)
 static void
 sony_decrypt(SonyMeta *sony, guint *data, gint len)
 {
-	while (len--)
-		*data++ ^= sony->pad[sony->p++ & 127] = sony->pad[(sony->p+1) & 127] ^ sony->pad[(sony->p+65) & 127];
+	while (len-- && sony->p++)
+		*data++ ^= sony->pad[(sony->p-1) & 127] = sony->pad[sony->p & 127] ^ sony->pad[(sony->p+64) & 127];
 }
 
 static gboolean

