commit 876bb331e26b970c2d8caea2c1d1209fdae953d0
Author: Borislav Petkov <borislav.petkov@amd.com>
Date:   Mon Sep 10 15:52:27 2012 +0200

    EDAC: Respect operational state in edac_pci.c
    
    Currently, we unconditionally enable PCI polling and we don't look at
    the edac_op_state module parameter. Make this dependent on the parameter
    setting supplied on the command line.
    
    Signed-off-by: Borislav Petkov <borislav.petkov@amd.com>

diff --git a/drivers/edac/edac_pci.c b/drivers/edac/edac_pci.c
index ee87ef972ead..dd370f92ace3 100644
--- a/drivers/edac/edac_pci.c
+++ b/drivers/edac/edac_pci.c
@@ -470,7 +470,8 @@ struct edac_pci_ctl_info *edac_pci_create_generic_ctl(struct device *dev,
 
 	pci->mod_name = mod_name;
 	pci->ctl_name = EDAC_PCI_GENCTL_NAME;
-	pci->edac_check = edac_pci_generic_check;
+	if (edac_op_state == EDAC_OPSTATE_POLL)
+		pci->edac_check = edac_pci_generic_check;
 
 	pdata->edac_idx = edac_pci_idx++;
 

