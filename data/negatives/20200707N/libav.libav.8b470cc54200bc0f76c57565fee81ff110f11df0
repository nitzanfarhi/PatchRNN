commit 8b470cc54200bc0f76c57565fee81ff110f11df0
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Mon Jun 16 23:20:11 2008 +0000

    Print sane error message for channels != 1.
    
    Originally committed as revision 13786 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/g726.c b/libavcodec/g726.c
index 13dce4f59..385d6fde9 100644
--- a/libavcodec/g726.c
+++ b/libavcodec/g726.c
@@ -324,7 +324,7 @@ static av_cold int g726_init(AVCodecContext * avctx)
     AVG726Context* c = (AVG726Context*)avctx->priv_data;
     unsigned int index= (avctx->bit_rate + avctx->sample_rate/2) / avctx->sample_rate - 2;
 
-    if (avctx->channels != 1 ||
+    if (
         (avctx->bit_rate != 16000 && avctx->bit_rate != 24000 &&
          avctx->bit_rate != 32000 && avctx->bit_rate != 40000)) {
         av_log(avctx, AV_LOG_ERROR, "G726: unsupported audio format\n");
@@ -334,6 +334,10 @@ static av_cold int g726_init(AVCodecContext * avctx)
         av_log(avctx, AV_LOG_ERROR, "G726: unsupported audio format\n");
         return -1;
     }
+    if(avctx->channels != 1){
+        av_log(avctx, AV_LOG_ERROR, "Only mono is supported\n");
+        return -1;
+    }
     if(index>3){
         av_log(avctx, AV_LOG_ERROR, "Unsupported number of bits %d\n", index+2);
         return -1;

