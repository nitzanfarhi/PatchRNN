commit fddd7eafc746e5ad6ea0f980e85a3fdc87091e81
Author: Bryan O'Donoghue <bryan.odonoghue@linaro.org>
Date:   Fri Jul 15 18:01:49 2016 +0100

    greybus: timesync/pm: Make synchronous call to restore FrameTime
    
    When we discussed and agreed a serialized way to-do PM runtime
    suspend/resume we omitted the necessity to restore the FrameTime on resume.
    This patch restores the FrameTime synchronously such that when an Interface
    PM resume callback completes we have either successfully restored the
    FrameTime including the new Interface or we've produced a result code to
    indicate what went wrong when trying.
    
    Suggested-by: Johan Hovold <johan@hovoldconsulting.com>
    Signed-off-by: Bryan O'Donoghue <bryan.odonoghue@linaro.org>
    Reviewed-by: Johan Hovold <johan@hovoldconsulting.com>
    Tested-by: David Lin <dtwlin@google.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@google.com>

diff --git a/drivers/staging/greybus/interface.c b/drivers/staging/greybus/interface.c
index 16e268f1b109..b3bd96e43128 100644
--- a/drivers/staging/greybus/interface.c
+++ b/drivers/staging/greybus/interface.c
@@ -579,6 +579,12 @@ static int gb_interface_resume(struct device *dev)
 		return ret;
 	}
 
+	ret = gb_timesync_schedule_synchronous(intf);
+	if (ret) {
+		dev_err(dev, "failed to synchronize FrameTime: %d\n", ret);
+		return ret;
+	}
+
 	return 0;
 }
 

