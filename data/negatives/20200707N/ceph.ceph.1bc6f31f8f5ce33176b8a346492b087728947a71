commit 1bc6f31f8f5ce33176b8a346492b087728947a71
Author: Jason Dillaman <dillaman@redhat.com>
Date:   Wed Apr 25 13:23:00 2018 -0400

    osdc/Objecter: prevent double-invocation of linger op callback
    
    Fixes: http://tracker.ceph.com/issues/23872
    Signed-off-by: Jason Dillaman <dillaman@redhat.com>

diff --git a/src/osdc/Objecter.cc b/src/osdc/Objecter.cc
index 90de55e756..ba5a4e3dbf 100644
--- a/src/osdc/Objecter.cc
+++ b/src/osdc/Objecter.cc
@@ -1652,6 +1652,7 @@ void Objecter::_check_linger_pool_dne(LingerOp *op, bool *need_unregister)
     if (osdmap->get_epoch() >= op->map_dne_bound) {
       if (op->on_reg_commit) {
 	op->on_reg_commit->complete(-ENOENT);
+	op->on_reg_commit = nullptr;
       }
       *need_unregister = true;
     }

