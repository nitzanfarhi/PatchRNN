commit 995013ebc847f9c7bdc5fd8dc1df53c9ad4a7066
Author: Stefano Sabatini <stefano.sabatini-lala@poste.it>
Date:   Fri May 13 01:49:15 2011 +0200

    tiffenc: fix bpp value for monow/monob formats

diff --git a/libavcodec/tiffenc.c b/libavcodec/tiffenc.c
index dd55072026..d0614f5faf 100644
--- a/libavcodec/tiffenc.c
+++ b/libavcodec/tiffenc.c
@@ -282,7 +282,7 @@ static int encode_frame(AVCodecContext * avctx, unsigned char *buf,
         return -1;
     }
     if (!is_yuv)
-        s->bpp_tab_size = (s->bpp >> 3);
+        s->bpp_tab_size = ((s->bpp + 7) >> 3);
 
     if (s->compr == TIFF_DEFLATE || s->compr == TIFF_ADOBE_DEFLATE || s->compr == TIFF_LZW)
         //best choose for DEFLATE

