commit 225bc2c6ab609978541ac3e806e2e9e05caa8ad6
Author: Jilles Tjoelker <jilles@stack.nl>
Date:   Sun Aug 26 18:57:31 2012 +0200

    nickserv: Do not send "spam" notice if chanserv does not exist.
    
    The notice includes chanserv's nick; sending it without a valid chanserv
    would cause a crash.
    
    Having nickserv but not chanserv is not really an expected configuration
    so fix it as simply as possible.

diff --git a/modules/nickserv/main.c b/modules/nickserv/main.c
index 3a11585b4..caf4c8308 100644
--- a/modules/nickserv/main.c
+++ b/modules/nickserv/main.c
@@ -58,7 +58,7 @@ static void nickserv_handle_nickchange(user_t *u)
 		if (!nicksvs.spam)
 			return;
 
-		if (!(u->flags & UF_SEENINFO))
+		if (!(u->flags & UF_SEENINFO) && chansvs.me != NULL)
 		{
 			notice(nicksvs.nick, u->nick, "Welcome to %s, %s! Here on %s, we provide services to enable the "
 			       "registration of nicknames and channels! For details, type \2/%s%s help\2 and \2/%s%s help\2.",

