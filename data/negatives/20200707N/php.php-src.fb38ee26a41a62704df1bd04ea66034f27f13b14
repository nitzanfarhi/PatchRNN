commit fb38ee26a41a62704df1bd04ea66034f27f13b14
Author: Marcus Boerger <helly@php.net>
Date:   Thu Jan 8 19:30:37 2004 +0000

    Cannot use shared SPL

diff --git a/ext/simplexml/simplexml.c b/ext/simplexml/simplexml.c
index fb72206692..f7daddbeed 100644
--- a/ext/simplexml/simplexml.c
+++ b/ext/simplexml/simplexml.c
@@ -31,7 +31,7 @@
 #include "ext/standard/php_string.h"
 #include "php_simplexml.h"
 
-#if HAVE_SPL
+#if HAVE_SPL && !defined(COMPILE_DL_SPL)
 #include "ext/spl/spl_iterators.h"
 #endif
 
@@ -1613,7 +1613,7 @@ PHP_MINIT_FUNCTION(simplexml)
 	INIT_CLASS_ENTRY(sxe, "simplexml_element", sxe_functions);
 	sxe.create_object = sxe_object_new;
 	sxe_class_entry = zend_register_internal_class(&sxe TSRMLS_CC);
-#if HAVE_SPL
+#if HAVE_SPL && !defined(COMPILE_DL_SPL)
 	zend_class_implements(sxe_class_entry TSRMLS_CC, 1, spl_ce_RecursiveIterator);
 #endif
 	sxe_class_entry->get_iterator = php_sxe_get_iterator;

