commit ef5d72e5af4c9e66b4711f9c3b950b7383f81463
Author: Benjamin Gilbert <bgilbert@cs.cmu.edu>
Date:   Sun Nov 27 21:32:15 2011 -0500

    use VIPS_ARRAY()

diff --git a/libvips/format/openslide.c b/libvips/format/openslide.c
index 62cdaaed..464cdc67 100644
--- a/libvips/format/openslide.c
+++ b/libvips/format/openslide.c
@@ -12,6 +12,7 @@
  *	- add OpenSlide properties to image metadata
  *	- consolidate setup into one function
  *	- support reading arbitrary layers
+ *	- use VIPS_ARRAY()
  */
 
 /*
@@ -150,8 +151,8 @@ fill_region( VipsRegion *out, void *seq, void *_rslide, void *unused,
 	uint8_t a;
 	int x, y;
 
-	buf = vips_malloc( NULL, out->valid.width * out->valid.height *
-		sizeof( *buf ));
+	buf = VIPS_ARRAY( NULL, out->valid.width * out->valid.height,
+		uint32_t );
 	openslide_read_region( rslide->osr, buf,
 		out->valid.left * rslide->downsample,
 		out->valid.top * rslide->downsample, rslide->layer,

