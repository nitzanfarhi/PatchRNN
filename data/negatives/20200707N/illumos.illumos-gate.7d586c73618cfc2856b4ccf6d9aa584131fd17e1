commit 7d586c73618cfc2856b4ccf6d9aa584131fd17e1
Author: Surya Prakki <Surya.Prakki@Sun.COM>
Date:   Tue Dec 16 22:53:34 2008 -0500

    6726793 AMD Opteron (family f, revision e (or greater)) still susceptible to 6391605

diff --git a/usr/src/uts/intel/io/mc-amd/mcamd_drv.c b/usr/src/uts/intel/io/mc-amd/mcamd_drv.c
index 17db79af11..fee2fa17b5 100644
--- a/usr/src/uts/intel/io/mc-amd/mcamd_drv.c
+++ b/usr/src/uts/intel/io/mc-amd/mcamd_drv.c
@@ -1417,13 +1417,15 @@ mc_scrubber_enable(mc_t *mc)
 #ifdef	OPTERON_ERRATUM_99
 	/*
 	 * This erratum applies on revisions D and earlier.
+	 * This erratum also applies on revisions E and later,
+	 * if BIOS uses chip-select hoisting instead of DRAM hole
+	 * mapping.
 	 *
-	 * Do not enable the dram scrubber is the chip-select ranges
+	 * Do not enable the dram scrubber if the chip-select ranges
 	 * for the node are not contiguous.
 	 */
 	if (mc_scrub_rate_dram != AMD_NB_SCRUBCTL_RATE_NONE &&
-	    mc->mc_csdiscontig &&
-	    !X86_CHIPREV_ATLEAST(rev, X86_CHIPREV_AMD_F_REV_E)) {
+	    mc->mc_csdiscontig)
 		cmn_err(CE_CONT, "?Opteron DRAM scrubber disabled on revision "
 		    "%s chip %d because DRAM hole is present on this node",
 		    mc->mc_revname, chipid);

