commit 1b04b739f4c1d053bebb29657fb69bf03f180a97
Author: Eyal Shapira <eyal@wizery.com>
Date:   Wed Dec 7 12:37:04 2011 +0200

    wl12xx: minor fix in sched_scan_ssid_list
    
    The user can pass broadcast SSID (ssid="") in the list of SSIDs for active scan.
    In this case the loop was attempting to match SSIDs in the filter
    list to this empty entry and marking them as HIDDEN (sending probe
    request) by mistake
    
    Signed-off-by: Eyal Shapira <eyal@wizery.com>
    Signed-off-by: Luciano Coelho <coelho@ti.com>

diff --git a/drivers/net/wireless/wl12xx/scan.c b/drivers/net/wireless/wl12xx/scan.c
index 330d6788a916..8599dab1fe2a 100644
--- a/drivers/net/wireless/wl12xx/scan.c
+++ b/drivers/net/wireless/wl12xx/scan.c
@@ -572,6 +572,9 @@ wl12xx_scan_sched_scan_ssid_list(struct wl1271 *wl,
 			 * so they're used in probe requests.
 			 */
 			for (i = 0; i < req->n_ssids; i++) {
+				if (!req->ssids[i].ssid_len)
+					continue;
+
 				for (j = 0; j < cmd->n_ssids; j++)
 					if (!memcmp(req->ssids[i].ssid,
 						   cmd->ssids[j].ssid,

