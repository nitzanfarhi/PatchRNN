commit 64ee7ab46211307cea338f35694c802f7abc313f
Author: Lennart Poettering <lennart@poettering.net>
Date:   Sat Jul 11 14:19:36 2015 -0300

    util: make sure we don't clobber errno in error path

diff --git a/src/basic/util.c b/src/basic/util.c
index c88cd1d38..13a67e9ab 100644
--- a/src/basic/util.c
+++ b/src/basic/util.c
@@ -2533,7 +2533,7 @@ int fopen_temporary(const char *path, FILE **_f, char **_temp_path) {
 
         f = fdopen(fd, "we");
         if (!f) {
-                unlink(t);
+                unlink_noerrno(t);
                 free(t);
                 safe_close(fd);
                 return -errno;

