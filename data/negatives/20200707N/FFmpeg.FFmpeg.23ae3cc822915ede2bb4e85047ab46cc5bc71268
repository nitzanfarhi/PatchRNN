commit 23ae3cc822915ede2bb4e85047ab46cc5bc71268
Author: Michael Niedermayer <michael@niedermayer.cc>
Date:   Sat Apr 1 19:18:35 2017 +0200

    avformat/oggparsedaala: Do not leave an invalid value in gpshift
    
    Fixes: undefined behavior
    Fixes: 702974
    
    Found-by: Thomas Guilbert <tguilbert@google.com>
    Reviewed-by: Rostislav Pehlivanov <atomnuker@gmail.com>
    Signed-off-by: Michael Niedermayer <michael@niedermayer.cc>

diff --git a/libavformat/oggparsedaala.c b/libavformat/oggparsedaala.c
index ce65b2bd7a..a373b41b4c 100644
--- a/libavformat/oggparsedaala.c
+++ b/libavformat/oggparsedaala.c
@@ -126,6 +126,7 @@ static int daala_header(AVFormatContext *s, int idx)
         if (hdr->gpshift >= 32) {
             av_log(s, AV_LOG_ERROR, "Too large gpshift %d (>= 32).\n",
                    hdr->gpshift);
+            hdr->gpshift = 0;
             return AVERROR_INVALIDDATA;
         }
         hdr->gpmask  = (1U << hdr->gpshift) - 1;

