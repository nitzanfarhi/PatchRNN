commit 42738093ff659799ebac21bf110d0fb1879496f1
Author: Sage Weil <sage@newdream.net>
Date:   Wed Jun 9 12:29:03 2010 -0700

    osd: refine SnapContext::is_valid()

diff --git a/src/include/types.h b/src/include/types.h
index ae62acb1cb..09b48ccfa3 100644
--- a/src/include/types.h
+++ b/src/include/types.h
@@ -382,10 +382,10 @@ struct SnapContext {
       // seq >= snaps[0]
       if (snaps[0] > seq)
 	return false;
-      // snaps is descending
+      // snaps[] is descending
       snapid_t t = snaps[0];
       for (unsigned i=1; i<snaps.size(); i++) {
-	if (snaps[i] >= t)
+	if (snaps[i] >= t || t == 0)
 	  return false;
 	t = snaps[i];
       }

