commit afdb06f84920c4949da904b045cdd105caf2579c
Author: Jan Kiszka <jan.kiszka@siemens.com>
Date:   Fri Oct 7 09:19:42 2011 +0200

    i8259: Do not update IRQ output after spurious pic_poll_read
    
    If pic_poll_read finds no pending IRQ and return a spurious one instead,
    no PIC state is changed, thus we do not need to call pic_update_irq.
    
    Signed-off-by: Jan Kiszka <jan.kiszka@siemens.com>
    Signed-off-by: Blue Swirl <blauwirbel@gmail.com>

diff --git a/hw/i8259.c b/hw/i8259.c
index 65123bd2dc..cddd3c769e 100644
--- a/hw/i8259.c
+++ b/hw/i8259.c
@@ -393,7 +393,6 @@ static uint32_t pic_poll_read(PicState *s)
             pic_update_irq(s->pics_state);
     } else {
         ret = 0x07;
-        pic_update_irq(s->pics_state);
     }
 
     return ret;

