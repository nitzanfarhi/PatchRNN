commit e5febfa6d085dd01f1fa21bbcd6e6c4e33efbf21
Author: jakubv <jakubv@fb.com>
Date:   Wed Nov 28 17:42:30 2012 -0800

    Don't add 1900 to years above 100 in mktime()
    
    It differs from PHP implementation: http://git.php.net/?p=php-src.git;a=blob;f=ext/date/php_date.c;hb=d23f9194b171443cc0ff40e34915df3e73f1c486#l1414
    I also see no reason for it.

diff --git a/src/runtime/base/time/datetime.cpp b/src/runtime/base/time/datetime.cpp
index a7aeaa8e15..6a63a06617 100644
--- a/src/runtime/base/time/datetime.cpp
+++ b/src/runtime/base/time/datetime.cpp
@@ -336,7 +336,7 @@ void DateTime::set(int hou, int min, int sec, int mon, int day, int yea) {
   if (yea != INT_MAX) {
     if (yea < 70) {
       yea += 2000;
-    } else if (yea >= 70 && yea <= 110) {
+    } else if (yea >= 70 && yea <= 100) {
       yea += 1900;
     }
     m_time->y = yea;
diff --git a/src/test/test_ext_datetime.cpp b/src/test/test_ext_datetime.cpp
index b69606dded..e52cd2f788 100644
--- a/src/test/test_ext_datetime.cpp
+++ b/src/test/test_ext_datetime.cpp
@@ -183,7 +183,7 @@ bool TestExtDatetime::test_date_interval_create_from_date_string() {
 bool TestExtDatetime::test_date_interval_format() {
   // Covered by test_date_interval_create_from_string, above
   return Count(true);
-} 
+}
 
 bool TestExtDatetime::test_date_isodate_set() {
   Object dt = f_date_create("2008-08-08 00:00:00");
@@ -510,6 +510,7 @@ bool TestExtDatetime::test_mktime() {
   VS(f_date("M-d-Y", f_mktime(0, 0, 0, 1, 1, 98)),     "Jan-01-1998");
   VS(f_date("M-d-Y", f_mktime(0, 0, 0, 1, 1, 1900)),   "Jan-01-1900");
   VS(f_date("M-d-Y", f_mktime(0, 0, 0, 1, 1, 2100)),   "Jan-01-2100");
+  VS(f_date("M-d-Y", f_mktime(0, 0, 0, 1, 1, 110)),    "Jan-01-0110");
 
   VS(f_mktime(), time(NULL));
 

