commit cebcd282320427de82d392b4b665b07d8cec72bb
Author: unknown <mskold@mysql.com>
Date:   Fri Mar 24 10:45:00 2006 +0100

    If doing write, then peeking is not needed

diff --git a/sql/ha_ndbcluster.cc b/sql/ha_ndbcluster.cc
index 2008250e35d..692d62574f3 100644
--- a/sql/ha_ndbcluster.cc
+++ b/sql/ha_ndbcluster.cc
@@ -2076,7 +2076,7 @@ int ha_ndbcluster::write_row(byte *record)
   /*
    * If IGNORE the ignore constraint violations on primary and unique keys
    */
-  if (m_ignore_dup_key)
+  if (!m_use_write && m_ignore_dup_key)
   {
     int peek_res= peek_indexed_rows(record);
     

