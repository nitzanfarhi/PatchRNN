commit b90d2f908465c800388714180217620c4a5b2fe4
Author: Mark Brown <broonie@opensource.wolfsonmicro.com>
Date:   Mon Oct 10 13:38:06 2011 +0100

    ASoC: Instantiate card widgets immediately
    
    This ensures they are available prior to the card late_probe().
    
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/sound/soc/soc-core.c b/sound/soc/soc-core.c
index 8dc9aba3526d..d6af52bd97df 100644
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@ -1430,6 +1430,8 @@ static void snd_soc_instantiate_card(struct snd_soc_card *card)
 		snd_soc_dapm_add_routes(&card->dapm, card->dapm_routes,
 					card->num_dapm_routes);
 
+	snd_soc_dapm_new_widgets(&card->dapm);
+
 	for (i = 0; i < card->num_links; i++) {
 		dai_link = &card->dai_link[i];
 

