commit ee7aa9f821b27674f36fc09413914b68f7ad97ca
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Fri Aug 22 16:41:03 2008 -0300

    V4L/DVB (8750): V4L: check inval in video_register_device_index()
    
    Better check the video_device pointer before using it.
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/v4l2-dev.c b/drivers/media/video/v4l2-dev.c
index 6b9f3cb0de98..8903e41628eb 100644
--- a/drivers/media/video/v4l2-dev.c
+++ b/drivers/media/video/v4l2-dev.c
@@ -254,6 +254,9 @@ int video_register_device_index(struct video_device *vfd, int type, int nr,
 	int ret;
 	char *name_base;
 
+	if (vfd == NULL)
+		return -EINVAL;
+
 	if (vfd == NULL)
 		return -EINVAL;
 

