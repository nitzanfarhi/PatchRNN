commit fce62c4eb3582a914b0c1a1d070b5924436b107b
Author: j_mayer <j_mayer@c046a42c-6fe2-441c-8c8c-71466251a162>
Date:   Sun Oct 21 15:53:01 2007 +0000

    Bugfix: now PCI NICs really work on PowerPC PreP platform.
    
    
    git-svn-id: svn://svn.savannah.nongnu.org/qemu/trunk@3424 c046a42c-6fe2-441c-8c8c-71466251a162

diff --git a/hw/ppc_prep.c b/hw/ppc_prep.c
index cafe88dc8e..7cb92c77fb 100644
--- a/hw/ppc_prep.c
+++ b/hw/ppc_prep.c
@@ -633,8 +633,8 @@ static void ppc_prep_init (int ram_size, int vga_ram_size, int boot_device,
     if (nb_nics1 > NE2000_NB_MAX)
         nb_nics1 = NE2000_NB_MAX;
     for(i = 0; i < nb_nics1; i++) {
-        if (nd_table[0].model == NULL
-            || strcmp(nd_table[0].model, "ne2k_isa") == 0) {
+        if (nd_table[i].model == NULL
+            || strcmp(nd_table[i].model, "ne2k_isa") == 0) {
             isa_ne2000_init(ne2000_io[i], i8259[ne2000_irq[i]], &nd_table[i]);
         } else {
             pci_nic_init(pci_bus, &nd_table[i], -1);

