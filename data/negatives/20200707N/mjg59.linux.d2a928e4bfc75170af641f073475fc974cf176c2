commit d2a928e4bfc75170af641f073475fc974cf176c2
Author: roel kluin <roel.kluin@gmail.com>
Date:   Sun Dec 27 04:10:59 2009 +0000

    niu: timeout ignored in tcam_wait_bit()
    
    With `while (--limit > 0)' i reaches 0 after the loop, so upon timeout the
    error was not returned.
    
    Signed-off-by: Roel Kluin <roel.kluin@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/niu.c b/drivers/net/niu.c
index 8ce58c4c7dd3..2aed2b382c40 100644
--- a/drivers/net/niu.c
+++ b/drivers/net/niu.c
@@ -2844,7 +2844,7 @@ static int tcam_wait_bit(struct niu *np, u64 bit)
 			break;
 		udelay(1);
 	}
-	if (limit < 0)
+	if (limit <= 0)
 		return -ENODEV;
 
 	return 0;

