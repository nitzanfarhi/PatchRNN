commit b7b16ffa496b34a69b7e810efaeb2e558fcfb96b
Author: Vladimir Glazounov <vg@openoffice.org>
Date:   Tue Apr 1 13:14:29 2003 +0000

    INTEGRATION: CWS sb3 (1.15.72); FILE MERGED
    2003/03/03 15:52:57 sb 1.15.72.1: #107718# Moved code to convert between Windows code pages and rtl_TextEncoding to rtl/tencinfo.h.

diff --git a/sal/osl/w32/thread.c b/sal/osl/w32/thread.c
index 06e24a61c27f..b28d9a829bed 100644
--- a/sal/osl/w32/thread.c
+++ b/sal/osl/w32/thread.c
@@ -2,9 +2,9 @@
  *
  *  $RCSfile: thread.c,v $
  *
- *  $Revision: 1.15 $
+ *  $Revision: 1.16 $
  *
- *  last change: $Author: obr $ $Date: 2001-06-14 14:02:18 $
+ *  last change: $Author: vg $ $Date: 2003-04-01 14:14:29 $
  *
  *  The Contents of this file are made available subject to the terms of
  *  either of the following licenses
@@ -66,6 +66,7 @@
 #include <rtl/alloc.h>
 #include <osl/time.h>
 #include <osl/interlck.h>
+#include <rtl/tencinfo.h>
 
 /*
     Thread-data structure hidden behind oslThread:
@@ -90,9 +91,6 @@ typedef HRESULT (WINAPI *CoInitializeEx_PROC)(LPVOID pvReserved, DWORD dwCoInit)
 
 CoInitializeEx_PROC _CoInitializeEx = osl_CoInitializeEx;
 
-/* implemented in nlsupport.c */
-rtl_TextEncoding GetTextEncodingFromCodePage( UINT );
-
 /*****************************************************************************/
 /* oslWorkerWrapperFunction */
 /*****************************************************************************/
@@ -619,7 +617,7 @@ rtl_TextEncoding SAL_CALL osl_getThreadTextEncoding()
         if ( NULL != (pszEncoding = getenv( "SOLAR_USER_RTL_TEXTENCODING" )) )
             _encoding = atoi(pszEncoding);
         else
-            _encoding = GetTextEncodingFromCodePage( GetACP() );
+            _encoding = rtl_getTextEncodingFromWindowsCodePage( GetACP() );
 
         TlsSetValue( g_dwTLSTextEncodingIndex, (LPVOID)MAKELONG( _encoding, TRUE ) );
     }

