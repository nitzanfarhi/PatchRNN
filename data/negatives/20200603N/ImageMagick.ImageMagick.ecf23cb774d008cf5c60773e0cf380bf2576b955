commit ecf23cb774d008cf5c60773e0cf380bf2576b955
Author: Cristy <urban-warrior@imagemagick.org>
Date:   Sat Jan 20 18:41:57 2018 -0500

    ...

diff --git a/coders/mat.c b/coders/mat.c
index 47b9fe61b..1fe03e5d8 100644
--- a/coders/mat.c
+++ b/coders/mat.c
@@ -777,18 +777,18 @@ static Image *ReadMATImageV4(const ImageInfo *image_info,Image *image,
       }
     if (quantum_info != (QuantumInfo *) NULL)
       quantum_info=DestroyQuantumInfo(quantum_info);
-    rotate_image=RotateImage(image,90.0,exception);
-    if (rotate_image != (Image *) NULL)
-      {
-        image=DestroyImage(image);
-        image=rotate_image;
-      }
     if (EOFBlob(image) != MagickFalse)
       {
         ThrowFileException(exception,CorruptImageError,"UnexpectedEndOfFile",
           image->filename);
         break;
       }
+    rotate_image=RotateImage(image,90.0,exception);
+    if (rotate_image != (Image *) NULL)
+      {
+        image=DestroyImage(image);
+        image=rotate_image;
+      }
     /*
       Proceed to next image.
     */

