commit c64695fdbe5c6bd87837b4b82819f757b5fdea4b
Author: deraadt <deraadt@openbsd.org>
Date:   Wed May 22 11:28:01 1996 +0000

    check for path in fstab

diff --git a/sbin/fsck_ffs/preen.c b/sbin/fsck_ffs/preen.c
index ce0b18338df..91ffee36ae5 100644
--- a/sbin/fsck_ffs/preen.c
+++ b/sbin/fsck_ffs/preen.c
@@ -1,4 +1,4 @@
-/*	$NetBSD: preen.c,v 1.11 1995/03/18 14:55:59 cgd Exp $	*/
+/*	$NetBSD: preen.c,v 1.12 1996/05/11 14:27:50 mycroft Exp $	*/
 
 /*
  * Copyright (c) 1990, 1993
@@ -37,7 +37,7 @@
 #if 0
 static char sccsid[] = "@(#)preen.c	8.3 (Berkeley) 12/6/94";
 #else
-static char rcsid[] = "$NetBSD: preen.c,v 1.11 1995/03/18 14:55:59 cgd Exp $";
+static char rcsid[] = "$NetBSD: preen.c,v 1.12 1996/05/11 14:27:50 mycroft Exp $";
 #endif
 #endif /* not lint */
 
@@ -326,6 +326,10 @@ retry:
 		newname = unrawname(newname);
 		retried++;
 		goto retry;
+	} else if ((fsp = getfsfile(newname)) != 0 && !retried) {
+		newname = fsp->fs_spec;
+		retried++;
+		goto retry;
 	}
 	/*
 	 * Not a block or character device, just return name and

