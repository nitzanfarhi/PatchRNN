commit e39ea8a2def1fcb203ed0183317124348962e351
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Dec 1 13:13:56 2008 -0800

    spi: fix spi_s3c24xx_gpio device handle lookup
    
    The spidev_to_sg() call in spi_s3c24xx_gpio.c was using the wrong method
    to convert the spi device into the private data for the driver.  Fix this
    by using spi_master_get_devdata.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/spi/spi_s3c24xx_gpio.c b/drivers/spi/spi_s3c24xx_gpio.c
index cc1f647f579b..8bb2b4ee3e50 100644
--- a/drivers/spi/spi_s3c24xx_gpio.c
+++ b/drivers/spi/spi_s3c24xx_gpio.c
@@ -34,7 +34,7 @@ struct s3c2410_spigpio {
 
 static inline struct s3c2410_spigpio *spidev_to_sg(struct spi_device *spi)
 {
-	return spi->controller_data;
+	return spi_master_get_devdata(spi->master);
 }
 
 static inline void setsck(struct spi_device *dev, int on)

