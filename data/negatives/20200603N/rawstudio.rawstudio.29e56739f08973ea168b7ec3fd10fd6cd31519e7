commit 29e56739f08973ea168b7ec3fd10fd6cd31519e7
Author: Anders Brander <anders@brander.dk>
Date:   Sat Jul 22 20:35:53 2006 +0000

    ljpeg_diff() optimized.

diff --git a/src/dcraw.c b/src/dcraw.c
index e63cbfd0..b3faf39c 100644
--- a/src/dcraw.c
+++ b/src/dcraw.c
@@ -817,7 +817,7 @@ int CLASS ljpeg_diff (struct decode *dindex)
   while (dindex->branch[0])
     dindex = dindex->branch[getbit()];
   len = dindex->leaf;
-  if (len == 16 && (!dng_version || dng_version >= 0x1010000))
+  if ((!dng_version || dng_version >= 0x1010000) && len == 16)
     return -32768;
   diff = getbits(len);
   if ((diff & (1 << (len-1))) == 0)

