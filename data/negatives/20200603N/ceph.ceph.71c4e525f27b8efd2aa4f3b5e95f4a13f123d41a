commit 71c4e525f27b8efd2aa4f3b5e95f4a13f123d41a
Author: Adam Kupczyk <akupczyk@mirantis.com>
Date:   Wed Mar 2 12:31:01 2016 +0100

    [MON] Fixed calculation of %USED. Now it is shows (space used by all replicas)/(raw space available on OSDs). Before it was (size of pool)/(raw space available on OSDs).
    
    Signed-off-by: Adam Kupczyk akupczyk@mirantis.com

diff --git a/src/mon/PGMonitor.cc b/src/mon/PGMonitor.cc
index 99e2287cf3..4f0ad0c196 100644
--- a/src/mon/PGMonitor.cc
+++ b/src/mon/PGMonitor.cc
@@ -1359,7 +1359,7 @@ void PGMonitor::dump_object_stat_sum(TextTable &tbl, Formatter *f,
     int64_t kb_used = SHIFT_ROUND_UP(sum.num_bytes, 10);
     float used = 0.0;
     if (pg_map.osd_sum.kb > 0)
-      used = (float)kb_used / pg_map.osd_sum.kb;
+      used = (float)kb_used * raw_used_rate * curr_object_copies_rate / pg_map.osd_sum.kb;
     tbl << percentify(used*100);
     tbl << si_t(avail);
     tbl << sum.num_objects;

