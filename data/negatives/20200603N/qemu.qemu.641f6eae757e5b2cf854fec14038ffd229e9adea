commit 641f6eae757e5b2cf854fec14038ffd229e9adea
Author: Peter Maydell <peter.maydell@linaro.org>
Date:   Fri May 20 16:50:00 2011 +0100

    net: Don't warn about the default network setup
    
    Don't warn about the default network setup that you get if no command line
    -net options are specified.  There are two cases that we would otherwise
    complain about:
    
    (1) board doesn't support a NIC but the implicit "-net nic" requested one
    (2) CONFIG_SLIRP not set, so the implicit "-net nic" sets up a nic that
    isn't connected to anything
    
    Signed-off-by: Peter Maydell <peter.maydell@linaro.org>
    Signed-off-by: Anthony Liguori <aliguori@us.ibm.com>

diff --git a/net.c b/net.c
index 1b521a95c2..68c2840621 100644
--- a/net.c
+++ b/net.c
@@ -1305,6 +1305,18 @@ void net_check_clients(void)
     VLANState *vlan;
     VLANClientState *vc;
 
+    /* Don't warn about the default network setup that you get if
+     * no command line -net or -netdev options are specified. There
+     * are two cases that we would otherwise complain about:
+     * (1) board doesn't support a NIC but the implicit "-net nic"
+     * requested one
+     * (2) CONFIG_SLIRP not set, in which case the implicit "-net nic"
+     * sets up a nic that isn't connected to anything.
+     */
+    if (default_net) {
+        return;
+    }
+
     QTAILQ_FOREACH(vlan, &vlans, next) {
         int has_nic = 0, has_host_dev = 0;
 

