commit 5e1109adde6acd0f3424886da09402ac22ed244b
Author: Wei Yongjun <yongjun_wei@trendmicro.com.cn>
Date:   Thu Oct 31 15:51:18 2013 +0800

    pinctrl: imx1: fix return value check in imx1_pinctrl_core_probe()
    
    In case of error, the function devm_ioremap_nocache() returns NULL
    pointer not ERR_PTR(). The IS_ERR() test in the return value check
    should be replaced with NULL test.
    
    Signed-off-by: Wei Yongjun <yongjun_wei@trendmicro.com.cn>
    Signed-off-by: Linus Walleij <linus.walleij@linaro.org>

diff --git a/drivers/pinctrl/pinctrl-imx1-core.c b/drivers/pinctrl/pinctrl-imx1-core.c
index 4d5a9e74dc8f..f77914ac081a 100644
--- a/drivers/pinctrl/pinctrl-imx1-core.c
+++ b/drivers/pinctrl/pinctrl-imx1-core.c
@@ -615,8 +615,8 @@ int imx1_pinctrl_core_probe(struct platform_device *pdev,
 
 	ipctl->base = devm_ioremap_nocache(&pdev->dev, res->start,
 			resource_size(res));
-	if (IS_ERR(ipctl->base))
-		return PTR_ERR(ipctl->base);
+	if (!ipctl->base)
+		return -ENOMEM;
 
 	pctl_desc = &imx1_pinctrl_desc;
 	pctl_desc->name = dev_name(&pdev->dev);

