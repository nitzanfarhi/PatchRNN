commit 4c82bf8e5689b1dddd9bcec70efc3b70edef1670
Author: Pavel Roskin <proski@gnu.org>
Date:   Sat Jan 30 19:55:09 2010 -0500

    mac80211: reduce stack usage in sta_ht_capa_read()
    
    The maximal size of the "ht_capa" file is 430 bytes.  In most cases,
    it's much shorter.  Use a 512 byte long buffer.  1024 bytes is too much
    and causes a warning with CONFIG_FRAME_WARN=1024.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/net/mac80211/debugfs_sta.c b/net/mac80211/debugfs_sta.c
index 0d4a759ba72c..84865e7ef13b 100644
--- a/net/mac80211/debugfs_sta.c
+++ b/net/mac80211/debugfs_sta.c
@@ -165,7 +165,7 @@ static ssize_t sta_ht_capa_read(struct file *file, char __user *userbuf,
 	if (_cond) \
 			p += scnprintf(p, sizeof(buf)+buf-p, "\t" _str "\n"); \
 	} while (0)
-	char buf[1024], *p = buf;
+	char buf[512], *p = buf;
 	int i;
 	struct sta_info *sta = file->private_data;
 	struct ieee80211_sta_ht_cap *htc = &sta->sta.ht_cap;

