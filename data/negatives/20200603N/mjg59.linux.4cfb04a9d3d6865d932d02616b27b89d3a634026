commit 4cfb04a9d3d6865d932d02616b27b89d3a634026
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Thu Aug 31 21:27:54 2006 -0700

    [PATCH] manage-jbd-its-own-slab fix
    
    Missed a place where I forgot to convert kfree() to kmem_cache_free() as
    part of jbd-manage-its-own-slab changes.
    
    Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/fs/jbd/transaction.c b/fs/jbd/transaction.c
index de2e4cbbf79a..f5169a96260e 100644
--- a/fs/jbd/transaction.c
+++ b/fs/jbd/transaction.c
@@ -727,7 +727,7 @@ done:
 
 out:
 	if (unlikely(frozen_buffer))	/* It's usually NULL */
-		kfree(frozen_buffer);
+		jbd_slab_free(frozen_buffer, bh->b_size);
 
 	JBUFFER_TRACE(jh, "exit");
 	return error;

