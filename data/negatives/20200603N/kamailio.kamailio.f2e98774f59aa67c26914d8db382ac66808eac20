commit f2e98774f59aa67c26914d8db382ac66808eac20
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 5 08:48:18 2007 +0000

    - added free fixup function
    
    
    git-svn-id: https://openser.svn.sourceforge.net/svnroot/openser/trunk@2857 689a6050-402a-0410-94f2-e92a70836424

diff --git a/modules_k/acc/acc_mod.c b/modules_k/acc/acc_mod.c
index b9bb52ae3..46f02a63a 100644
--- a/modules_k/acc/acc_mod.c
+++ b/modules_k/acc/acc_mod.c
@@ -159,21 +159,22 @@ char* acc_time_col       = "time";
 
 /* ------------- fixup function --------------- */
 static int acc_fixup(void** param, int param_no);
+static int free_acc_fixup(void** param, int param_no);
 
 
 static cmd_export_t cmds[] = {
-	{"acc_log_request", w_acc_log_request, 1, acc_fixup, 0,
+	{"acc_log_request", w_acc_log_request, 1, acc_fixup, free_acc_fixup,
 			REQUEST_ROUTE|FAILURE_ROUTE},
 #ifdef SQL_ACC
-	{"acc_db_request",  w_acc_db_request,  2, acc_fixup, 0,
+	{"acc_db_request",  w_acc_db_request,  2, acc_fixup, free_acc_fixup,
 			REQUEST_ROUTE|FAILURE_ROUTE},
 #endif
 #ifdef RAD_ACC
-	{"acc_rad_request", w_acc_rad_request, 1, acc_fixup, 0,
+	{"acc_rad_request", w_acc_rad_request, 1, acc_fixup, free_acc_fixup,
 			REQUEST_ROUTE|FAILURE_ROUTE},
 #endif
 #ifdef DIAM_ACC
-	{"acc_diam_request",w_acc_diam_request,1, acc_fixup, 0,
+	{"acc_diam_request",w_acc_diam_request,1, acc_fixup, free_acc_fixup,
 			REQUEST_ROUTE|FAILURE_ROUTE},
 #endif
 	{0, 0, 0, 0, 0, 0}
@@ -291,6 +292,16 @@ static int acc_fixup(void** param, int param_no)
 	return 0;
 }
 
+static int free_acc_fixup(void** param, int param_no)
+{
+	if(*param)
+	{
+		pkg_free(*param);
+		*param = 0;
+	}
+	return 0;
+}
+
 
 
 /************************** INTERFACE functions ****************************/

