commit d1afd3e1d6e43f4d37ae147091f270124ac48e04
Author: Vittorio Giovara <vittorio.giovara@gmail.com>
Date:   Sat Oct 18 16:10:35 2014 +0100

    vf_format: check input validity
    
    CC: libav-stable@libav.org

diff --git a/libavfilter/vf_format.c b/libavfilter/vf_format.c
index d37f870537..914089deab 100644
--- a/libavfilter/vf_format.c
+++ b/libavfilter/vf_format.c
@@ -59,6 +59,11 @@ static av_cold int init(AVFilterContext *ctx)
     int nb_formats = 1;
     int i;
 
+    if (!s->pix_fmts) {
+        av_log(ctx, AV_LOG_ERROR, "Empty output format string.\n");
+        return AVERROR(EINVAL);
+    }
+
     /* count the formats */
     cur = s->pix_fmts;
     while ((cur = strchr(cur, '|'))) {

