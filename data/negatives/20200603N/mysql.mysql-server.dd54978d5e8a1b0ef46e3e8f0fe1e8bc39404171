commit dd54978d5e8a1b0ef46e3e8f0fe1e8bc39404171
Author: Shaohua Wang <shaohua.wang@oracle.com>
Date:   Wed Jul 10 16:55:17 2013 +0800

    Fix query root is NULL error when fts_enable_diag_print is enabled.

diff --git a/storage/innobase/fts/fts0que.cc b/storage/innobase/fts/fts0que.cc
index 98a2c53f0da..e65bb0ee730 100644
--- a/storage/innobase/fts/fts0que.cc
+++ b/storage/innobase/fts/fts0que.cc
@@ -3913,7 +3913,7 @@ fts_query_parse(
 	} else {
 		query->root = state.root;
 
-		if (fts_enable_diag_print) {
+		if (fts_enable_diag_print && query->root != NULL) {
 			fts_ast_node_print(query->root);
 		}
 	}

