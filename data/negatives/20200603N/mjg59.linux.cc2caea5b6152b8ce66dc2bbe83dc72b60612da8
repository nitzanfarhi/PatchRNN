commit cc2caea5b6152b8ce66dc2bbe83dc72b60612da8
Author: Marek Szyprowski <m.szyprowski@samsung.com>
Date:   Fri Jul 6 12:02:04 2012 +0200

    mm: cma: fix condition check when setting global cma area
    
    dev_set_cma_area incorrectly assigned cma to global area on first call
    due to incorrect check. This patch fixes this issue.
    
    Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com>

diff --git a/include/asm-generic/dma-contiguous.h b/include/asm-generic/dma-contiguous.h
index c544356b374b..294b1e755ab2 100644
--- a/include/asm-generic/dma-contiguous.h
+++ b/include/asm-generic/dma-contiguous.h
@@ -18,7 +18,7 @@ static inline void dev_set_cma_area(struct device *dev, struct cma *cma)
 {
 	if (dev)
 		dev->cma_area = cma;
-	if (!dev || !dma_contiguous_default_area)
+	if (!dev && !dma_contiguous_default_area)
 		dma_contiguous_default_area = cma;
 }
 

