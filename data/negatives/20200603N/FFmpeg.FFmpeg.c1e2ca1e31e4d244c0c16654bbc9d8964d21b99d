commit c1e2ca1e31e4d244c0c16654bbc9d8964d21b99d
Author: Carl Eugen Hoyos <cehoyos@ag.or.at>
Date:   Wed Dec 7 02:32:59 2011 +0100

    Allow auto-detection of ljpg images.

diff --git a/libavformat/img2.c b/libavformat/img2.c
index 18dde559c4..00c5013015 100644
--- a/libavformat/img2.c
+++ b/libavformat/img2.c
@@ -284,6 +284,8 @@ static int read_header(AVFormatContext *s1, AVFormatParameters *ap)
         s->split_planes = str && !av_strcasecmp(str + 1, "y");
         st->codec->codec_type = AVMEDIA_TYPE_VIDEO;
         st->codec->codec_id = av_str2id(img_tags, s->path);
+        if (st->codec->codec_id = CODEC_ID_LJPEG)
+            st->codec->codec_id = CODEC_ID_MJPEG;
     }
     if(st->codec->codec_type == AVMEDIA_TYPE_VIDEO && pix_fmt != PIX_FMT_NONE)
         st->codec->pix_fmt = pix_fmt;

