commit 349b65eee2fd5590b7e511c915dcd2d3aef3960e
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Fri Jun 8 14:41:23 2012 +0200

    ffplay: check return code of avcodec_decode_video2()
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>
    Signed-off-by: Marton Balint <cus@passwd.hu>

diff --git a/ffplay.c b/ffplay.c
index cb62614f36..01a010e0c1 100644
--- a/ffplay.c
+++ b/ffplay.c
@@ -1504,7 +1504,8 @@ static int get_video_frame(VideoState *is, AVFrame *frame, int64_t *pts, AVPacke
         return 0;
     }
 
-    avcodec_decode_video2(is->video_st->codec, frame, &got_picture, pkt);
+    if(avcodec_decode_video2(is->video_st->codec, frame, &got_picture, pkt) < 0)
+        return -1;
 
     if (got_picture) {
         int ret = 1;

