commit 4516e75176036338f2d165eae3097c9a8d25f6c3
Author: brain <brain@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Tue Feb 5 23:34:57 2008 +0000

    This makes more sense
    
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@8837 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/modules/m_spanningtree/uid.cpp b/src/modules/m_spanningtree/uid.cpp
index 4e81bf2af..73648fb9d 100644
--- a/src/modules/m_spanningtree/uid.cpp
+++ b/src/modules/m_spanningtree/uid.cpp
@@ -113,7 +113,7 @@ bool TreeSocket::ParseUID(const std::string &source, std::deque<std::string> &pa
 	strlcpy(_new->host, params[3].c_str(),64);
 	strlcpy(_new->dhost, params[4].c_str(),64);
 	_new->server = this->Instance->FindServerNamePtr(remoteserver->GetName().c_str());
-	strlcpy(_new->ident, params[5].c_str(),IDENTMAX);
+	strlcpy(_new->ident, params[5].c_str(),IDENTMAX + 1);
 	strlcpy(_new->fullname, params[9].c_str(),MAXGECOS);
 	_new->registered = REG_ALL;
 	_new->signon = signon;
diff --git a/src/users.cpp b/src/users.cpp
index edcc54be5..be51cc46a 100644
--- a/src/users.cpp
+++ b/src/users.cpp
@@ -1444,7 +1444,7 @@ bool User::ChangeIdent(const char* newident)
 	if (this->ServerInstance->Config->CycleHosts)
 		this->WriteCommonExcept("%s","QUIT :Changing ident");
 
-	strlcpy(this->ident, newident, IDENTMAX+2);
+	strlcpy(this->ident, newident, IDENTMAX+1);
 
 	this->InvalidateCache();
 

