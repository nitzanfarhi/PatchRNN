commit 94f48d4d4f153a9cb7f20e5c677b68ef947679f3
Author: Dmitry Frank <mail@dmitryfrank.com>
Date:   Tue Jun 27 16:06:21 2017 +0100

    Don't define fileno stub in C++
    
    PUBLISHED_FROM=98fb6c78d20a98dfba07ba6671bd51a394bbc4ca

diff --git a/common/platforms/platform_esp8266.h b/common/platforms/platform_esp8266.h
index 1c84807b..6a4d5476 100644
--- a/common/platforms/platform_esp8266.h
+++ b/common/platforms/platform_esp8266.h
@@ -29,7 +29,7 @@ typedef struct stat cs_stat_t;
 #define __cdecl
 #define _FILE_OFFSET_BITS 32
 
-#ifndef RTOS_SDK
+#if !defined(RTOS_SDK) && !defined(__cplusplus)
 #define fileno(x) -1
 #endif
 
diff --git a/mongoose/mongoose.h b/mongoose/mongoose.h
index 64a9250b..1067ed3b 100644
--- a/mongoose/mongoose.h
+++ b/mongoose/mongoose.h
@@ -548,7 +548,7 @@ typedef struct stat cs_stat_t;
 #define __cdecl
 #define _FILE_OFFSET_BITS 32
 
-#ifndef RTOS_SDK
+#if !defined(RTOS_SDK) && !defined(__cplusplus)
 #define fileno(x) -1
 #endif
 

