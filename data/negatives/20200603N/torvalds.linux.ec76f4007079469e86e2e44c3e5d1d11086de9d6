commit ec76f4007079469e86e2e44c3e5d1d11086de9d6
Author: Alexey Kardashevskiy <aik@ozlabs.ru>
Date:   Thu Mar 12 14:43:12 2015 +1100

    vfio-pci: Add missing break to enable VFIO_PCI_ERR_IRQ_INDEX
    
    This adds a missing break statement to VFIO_DEVICE_SET_IRQS handler
    without which vfio_pci_set_err_trigger() would never be called.
    
    While we are here, add another "break" to VFIO_PCI_REQ_IRQ_INDEX case
    so if we add more indexes later, we won't miss it.
    
    Fixes: 6140a8f56238 ("vfio-pci: Add device request interface")
    Signed-off-by: Alexey Kardashevskiy <aik@ozlabs.ru>
    Signed-off-by: Alex Williamson <alex.williamson@redhat.com>

diff --git a/drivers/vfio/pci/vfio_pci_intrs.c b/drivers/vfio/pci/vfio_pci_intrs.c
index f88bfdf5b6a0..2027a27546ef 100644
--- a/drivers/vfio/pci/vfio_pci_intrs.c
+++ b/drivers/vfio/pci/vfio_pci_intrs.c
@@ -868,12 +868,14 @@ int vfio_pci_set_irqs_ioctl(struct vfio_pci_device *vdev, uint32_t flags,
 				func = vfio_pci_set_err_trigger;
 			break;
 		}
+		break;
 	case VFIO_PCI_REQ_IRQ_INDEX:
 		switch (flags & VFIO_IRQ_SET_ACTION_TYPE_MASK) {
 		case VFIO_IRQ_SET_ACTION_TRIGGER:
 			func = vfio_pci_set_req_trigger;
 			break;
 		}
+		break;
 	}
 
 	if (!func)

