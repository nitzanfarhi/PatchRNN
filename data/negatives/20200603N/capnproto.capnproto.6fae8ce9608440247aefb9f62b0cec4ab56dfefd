commit 6fae8ce9608440247aefb9f62b0cec4ab56dfefd
Author: Kenton Varda <kenton@sandstorm.io>
Date:   Wed Jan 21 21:16:57 2015 -0800

    Work around incompatibility between various C++ standard libs in C++14 mode on some Linux distros, including Ubuntu 14.04.

diff --git a/c++/src/kj/common.h b/c++/src/kj/common.h
index 43df5cb6..988ff53b 100644
--- a/c++/src/kj/common.h
+++ b/c++/src/kj/common.h
@@ -77,6 +77,14 @@
 #include <stddef.h>
 #include <initializer_list>
 
+#if __linux__ && __cplusplus > 201200L
+// Hack around stdlib bug with C++14 that exists on some Linux systems.
+// Apparently in this mode the C library decides not to define gets() but the C++ library still
+// tries to import it into the std namespace. This bug has been fixed at the source but is still
+// widely present in the wild e.g. on Ubuntu 14.04.
+#undef _GLIBCXX_HAVE_GETS
+#endif
+
 // =======================================================================================
 
 namespace kj {

