commit 7d294b61edc6bd1be15739a11dce1414080dbb9b
Author: ths <ths@c046a42c-6fe2-441c-8c8c-71466251a162>
Date:   Fri Oct 26 17:21:58 2007 +0000

    Fix Windows build failure, by Stefan Weil.
    
    
    git-svn-id: svn://svn.savannah.nongnu.org/qemu/trunk@3450 c046a42c-6fe2-441c-8c8c-71466251a162

diff --git a/vl.c b/vl.c
index 2f3d8d04ed..094afb3196 100644
--- a/vl.c
+++ b/vl.c
@@ -8478,12 +8478,12 @@ int main(int argc, char **argv)
     main_loop();
     quit_timers();
 
+#if !defined(_WIN32)
     /* close network clients */
     for(vlan = first_vlan; vlan != NULL; vlan = vlan->next) {
         VLANClientState *vc;
 
-        for(vc = vlan->first_client; vc != NULL; vc = vc->next)
-#if !defined(_WIN32)
+        for(vc = vlan->first_client; vc != NULL; vc = vc->next) {
             if (vc->fd_read == tap_receive) {
                 char ifname[64];
                 TAPState *s = vc->opaque;
@@ -8492,7 +8492,8 @@ int main(int argc, char **argv)
                     s->down_script[0])
                     launch_script(s->down_script, ifname, s->fd);
             }
-#endif
     }
+    }
+#endif
     return 0;
 }

