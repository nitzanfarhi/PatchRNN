commit 0df7095205cbf6ea1cdfe6254e0d6a3b823caa3b
Author: Russell King <rmk+kernel@arm.linux.org.uk>
Date:   Thu Dec 2 19:16:56 2010 +0000

    ARM: SMP: remove IRQ-disabling for smp_cross_call()
    
    As we've now removed the spinlock and bitmask, we have nothing left
    which requires interrupts to be disabled when sending an IPI.  All
    current IPI-sending implementations use the GIC, which also does not
    require interrupts disabled when calling gic_raise_softirq().
    
    Remove the now unnecessary IRQ disable.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/kernel/smp.c b/arch/arm/kernel/smp.c
index 78d55c681a4f..4878e51561f9 100644
--- a/arch/arm/kernel/smp.c
+++ b/arch/arm/kernel/smp.c
@@ -383,16 +383,10 @@ void __init smp_prepare_boot_cpu(void)
 
 static void send_ipi_message(const struct cpumask *mask, enum ipi_msg_type msg)
 {
-	unsigned long flags;
-
-	local_irq_save(flags);
-
 	/*
 	 * Call the platform specific cross-CPU call function.
 	 */
 	smp_cross_call(mask, msg);
-
-	local_irq_restore(flags);
 }
 
 void arch_send_call_function_ipi_mask(const struct cpumask *mask)

