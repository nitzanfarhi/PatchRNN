commit 01fa74adb95666cb23e7f6f8175eeab889ee21d9
Author: Reimar DÃ¶ffinger <Reimar.Doeffinger@gmx.de>
Date:   Sun Jun 24 07:38:26 2007 +0000

    DV muxer should not only fail for more that 3 streams altogether
    but also if two of them are video or all three are audio.
    
    Originally committed as revision 9403 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/dvenc.c b/libavformat/dvenc.c
index 98faf06fb7..cd22e97684 100644
--- a/libavformat/dvenc.c
+++ b/libavformat/dvenc.c
@@ -300,9 +300,11 @@ DVMuxContext* dv_init_mux(AVFormatContext* s)
     for (i=0; i<s->nb_streams; i++) {
          switch (s->streams[i]->codec->codec_type) {
          case CODEC_TYPE_VIDEO:
+               if (vst) return NULL;
                vst = s->streams[i];
                break;
          case CODEC_TYPE_AUDIO:
+             if (c->n_ast > 1) return NULL;
              c->ast[c->n_ast++] = s->streams[i];
              break;
          default:

