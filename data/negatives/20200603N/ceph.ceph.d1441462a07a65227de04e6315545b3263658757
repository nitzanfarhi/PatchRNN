commit d1441462a07a65227de04e6315545b3263658757
Author: Sage Weil <sage@newdream.net>
Date:   Thu Apr 29 11:56:49 2010 -0700

    config: post-process default config options too
    
    Previously we were only doing the ones we read out of the .conf.

diff --git a/src/config.cc b/src/config.cc
index 3cb17f8b1b..51e8e11bfb 100644
--- a/src/config.cc
+++ b/src/config.cc
@@ -1038,6 +1038,17 @@ void parse_startup_config_options(std::vector<const char*>& args, bool isdaemon,
     cf = NULL;
   }
 
+  // do post_process substitutions
+  int len = sizeof(config_optionsp)/sizeof(config_option);
+  for (int i = 0; i<len; i++) {
+    config_option *opt = &config_optionsp[i];
+    if (opt->type == OPT_STR && opt->val_ptr) {
+      if (*(char**)opt->val_ptr) {
+	*(char **)opt->val_ptr = conf_post_process_val(*(char **)opt->val_ptr);
+      }
+    }
+  }
+
   // open new conf
   string fn = g_conf.conf;
   list<string> ls;

