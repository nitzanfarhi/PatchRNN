commit 1bd58aaff44485ec9e3640af350f6ba1b33e2bec
Author: Weston Andros Adamson <dros@netapp.com>
Date:   Tue Oct 23 10:43:38 2012 -0400

    SUNRPC: remove BUG_ON from svc_pool_map_set_cpumask
    
    Replace BUG_ON() with a WARN() and early return.
    
    Signed-off-by: Weston Andros Adamson <dros@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

diff --git a/net/sunrpc/svc.c b/net/sunrpc/svc.c
index 3ee7461926d8..664979bee1d2 100644
--- a/net/sunrpc/svc.c
+++ b/net/sunrpc/svc.c
@@ -324,7 +324,9 @@ svc_pool_map_set_cpumask(struct task_struct *task, unsigned int pidx)
 	 * The caller checks for sv_nrpools > 1, which
 	 * implies that we've been initialized.
 	 */
-	BUG_ON(m->count == 0);
+	WARN_ON_ONCE(m->count == 0);
+	if (m->count == 0)
+		return;
 
 	switch (m->mode) {
 	case SVC_POOL_PERCPU:

