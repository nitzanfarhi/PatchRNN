commit b7b87e37e4d5418cec71d8cab2dc14ec845da5c2
Author: Danny Auble <da@schedmd.com>
Date:   Tue Jan 23 13:43:06 2018 -0700

    Fix to only get last tres when not running the slurmdbd.

diff --git a/src/common/assoc_mgr.c b/src/common/assoc_mgr.c
index c6e8a2a718..c1455770af 100644
--- a/src/common/assoc_mgr.c
+++ b/src/common/assoc_mgr.c
@@ -1959,7 +1959,8 @@ extern int assoc_mgr_init(void *db_conn, assoc_init_args_t *args,
 		 * it from there.  This second check can be removed 2 versions
 		 * after 18.08.
 		 */
-		if (load_assoc_mgr_last_tres() != SLURM_SUCCESS)
+		if (!slurmdbd_conf &&
+		    (load_assoc_mgr_last_tres() != SLURM_SUCCESS))
 			/* We don't care about the error here.  It should only
 			 * happen if we can't find the file.  If that is the
 			 * case then we don't need to worry about old state.

