commit c73681e77b40697d16ada777adf2c6dc4db05917
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Aug 5 22:02:48 2005 +1000

    drm: copy the right data back to userspace for getreserved contexts ioctl
    
    This fixes the information copied back to userspace by the get reserved
    contexts ioctl.
    
    From: Egbert Eich <eich@suse.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

diff --git a/drivers/char/drm/drm_context.c b/drivers/char/drm/drm_context.c
index a7cfabd1ca2e..5af46c9830ec 100644
--- a/drivers/char/drm/drm_context.c
+++ b/drivers/char/drm/drm_context.c
@@ -369,7 +369,7 @@ int drm_resctx( struct inode *inode, struct file *filp,
 		for ( i = 0 ; i < DRM_RESERVED_CONTEXTS ; i++ ) {
 			ctx.handle = i;
 			if ( copy_to_user( &res.contexts[i],
-					   &i, sizeof(i) ) )
+					   &ctx, sizeof(ctx) ) )
 				return -EFAULT;
 		}
 	}

