commit 0c279cc26253650dafe3a04806e425ac142d8cec
Author: Fred Emmott <fredemmott@fb.com>
Date:   Fri Oct 10 08:25:52 2014 -0700

    Only call exsltRegisterAll() once
    
    Summary: The extension list in libxslt looks global, and mutex-guarded. There's no reason to call this once per thread.
    
    ~ 64% performance boost for hello world
    
    Reviewed By: @oyamauchi
    
    Differential Revision: D1608475

diff --git a/hphp/runtime/ext/xsl/ext_xsl.cpp b/hphp/runtime/ext/xsl/ext_xsl.cpp
index 4218ab6a37..da11b1d74f 100644
--- a/hphp/runtime/ext/xsl/ext_xsl.cpp
+++ b/hphp/runtime/ext/xsl/ext_xsl.cpp
@@ -694,12 +694,9 @@ class XSLExtension : public Extension {
   public:
     XSLExtension() : Extension("xsl", "0.1") {};
 
-    virtual void threadInit() override {
+    virtual void moduleInit() {
       xsltSetGenericErrorFunc(nullptr, xslt_ext_error_handler);
       exsltRegisterAll();
-    }
-
-    virtual void moduleInit() {
       Native::registerConstant<KindOfInt64>(
         s_XSL_SECPREF_NONE.get(), k_XSL_SECPREF_NONE
       );

