commit 0f380a881725c64f05844ef2dfe7d2976593b201
Author: Vic Lee <llyzs@163.com>
Date:   Thu Aug 25 16:52:49 2011 +0800

    libfreerdp-rfx: encoder must increase frameIdx or mstsc would crash.

diff --git a/libfreerdp-rfx/librfx.c b/libfreerdp-rfx/librfx.c
index 024ee9320..8304a3f9e 100644
--- a/libfreerdp-rfx/librfx.c
+++ b/libfreerdp-rfx/librfx.c
@@ -645,6 +645,8 @@ static void rfx_compose_message_frame_begin(RFX_CONTEXT* context, STREAM* data_o
 	stream_write_uint8(data_out, 0); /* CodecChannelT.channelId */
 	stream_write_uint32(data_out, context->frame_idx); /* frameIdx */
 	stream_write_uint16(data_out, 1); /* numRegions */
+
+	context->frame_idx++;
 }
 
 static void rfx_compose_message_region(RFX_CONTEXT* context, STREAM* data_out,

