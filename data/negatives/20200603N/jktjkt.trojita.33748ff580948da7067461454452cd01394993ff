commit 33748ff580948da7067461454452cd01394993ff
Author: Jan Kundr√°t <jkt@gentoo.org>
Date:   Fri May 14 11:01:39 2010 +0200

    Inform about the CAPABILITY command being in progress

diff --git a/src/Imap/Model/UnauthenticatedHandler.cpp b/src/Imap/Model/UnauthenticatedHandler.cpp
index c1d5d804..7dca2b9c 100644
--- a/src/Imap/Model/UnauthenticatedHandler.cpp
+++ b/src/Imap/Model/UnauthenticatedHandler.cpp
@@ -57,6 +57,7 @@ void UnauthenticatedHandler::handleState( Imap::Parser* ptr, const Imap::Respons
             if ( ! m->_parsers[ ptr ].capabilitiesFresh ) {
                 CommandHandle cmd = ptr->capability();
                 m->_parsers[ ptr ].commandMap[ cmd ] = Model::Task( Model::Task::CAPABILITY, 0 );
+                emit m->activityHappening( true );
             }
             //CommandHandle cmd = ptr->namespaceCommand();
             //m->_parsers[ ptr ].commandMap[ cmd ] = Model::Task( Model::Task::NAMESPACE, 0 );
@@ -69,6 +70,7 @@ void UnauthenticatedHandler::handleState( Imap::Parser* ptr, const Imap::Respons
             } else {
                 // The STARTTLS surely has not been issued yet
                 if ( ! m->_parsers[ ptr ].capabilitiesFresh ) {
+
                     // FIXME: We have no idea if we are free to login :(
                     qDebug() << "Dunno if we can login already :(";
                 }

