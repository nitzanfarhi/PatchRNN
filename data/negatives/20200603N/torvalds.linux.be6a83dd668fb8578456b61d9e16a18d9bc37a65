commit be6a83dd668fb8578456b61d9e16a18d9bc37a65
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Tue Jul 25 16:15:07 2006 +0200

    [ALSA] aoa: platform function gpio: ignore errors from functions that don't exist
    
    Sometimes we simply want to turn off or on everything, and when recently a
    warning was added when a certain platform function can't be called, this
    triggered all the time in those cases. This patch shows the warning only if
    the error was different from the function not existing.
    The alternative would be to not even try calling the function when it
    doesn't exist by first checking which exist and then only calling those that
    do, but that adds complexity that isn't necessary.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

diff --git a/sound/aoa/core/snd-aoa-gpio-pmf.c b/sound/aoa/core/snd-aoa-gpio-pmf.c
index 3d57fd1aec4b..2836c3218391 100644
--- a/sound/aoa/core/snd-aoa-gpio-pmf.c
+++ b/sound/aoa/core/snd-aoa-gpio-pmf.c
@@ -18,7 +18,7 @@ static void pmf_gpio_set_##name(struct gpio_runtime *rt, int on)\
 							\
 	if (unlikely(!rt)) return;				\
 	rc = pmf_call_function(rt->node, #name "-mute", &args);	\
-	if (rc)							\
+	if (rc && rc != -ENODEV)				\
 		printk(KERN_WARNING "pmf_gpio_set_" #name	\
 		" failed, rc: %d\n", rc);			\
 	rt->implementation_private &= ~(1<<bit);		\

