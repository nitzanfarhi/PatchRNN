commit 0946100f566d04cc93e86654f3ba588ee94b3f4c
Author: Hendrik Brueckner <brueckner@linux.vnet.ibm.com>
Date:   Thu Dec 25 13:39:29 2008 +0100

    [S390] s390/setup: set default preferred console device "ttyS"
    
    This patch sets the default console device for s390.
    
    The console= kernel parameter can be still used to switch the preferred
    console to some other device. In that case, console messages are also
    printed on the default console device (ttyS0).
    
    Signed-off-by: Hendrik Brueckner <brueckner@linux.vnet.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

diff --git a/arch/s390/kernel/setup.c b/arch/s390/kernel/setup.c
index 323dedecdf54..bed9dcb34fda 100644
--- a/arch/s390/kernel/setup.c
+++ b/arch/s390/kernel/setup.c
@@ -740,6 +740,9 @@ static void __init setup_hwcaps(void)
 void __init
 setup_arch(char **cmdline_p)
 {
+	/* set up preferred console */
+	add_preferred_console("ttyS", 0, NULL);
+
         /*
          * print what head.S has found out about the machine
          */

