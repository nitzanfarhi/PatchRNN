commit e726b1bd64b0b8945c171d2d4bf749fba9fc0800
Author: Christian Borntraeger <borntraeger@de.ibm.com>
Date:   Wed May 2 10:50:38 2012 +0200

    KVM: s390: implement KVM_CAP_NR/MAX_VCPUS
    
    Let userspace know the number of max and supported cpus for kvm on s390.
    Return KVM_MAX_VCPUS (currently 64) for both values.
    
    Signed-off-by: Christian Borntraeger <borntraeger@de.ibm.com>
    Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com>

diff --git a/arch/s390/kvm/kvm-s390.c b/arch/s390/kvm/kvm-s390.c
index fd98914a36f1..e5e3800b0125 100644
--- a/arch/s390/kvm/kvm-s390.c
+++ b/arch/s390/kvm/kvm-s390.c
@@ -136,6 +136,10 @@ int kvm_dev_ioctl_check_extension(long ext)
 	case KVM_CAP_SYNC_REGS:
 		r = 1;
 		break;
+	case KVM_CAP_NR_VCPUS:
+	case KVM_CAP_MAX_VCPUS:
+		r = KVM_MAX_VCPUS;
+		break;
 	default:
 		r = 0;
 	}

