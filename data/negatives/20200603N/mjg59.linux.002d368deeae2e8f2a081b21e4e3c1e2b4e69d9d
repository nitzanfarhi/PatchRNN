commit 002d368deeae2e8f2a081b21e4e3c1e2b4e69d9d
Author: Tomi Valkeinen <tomi.valkeinen@ti.com>
Date:   Wed Feb 13 12:17:43 2013 +0200

    OMAPDSS: HDMI: init output earlier
    
    Move hdmi driver's output initialization a bit earlier, so that it
    happens before hdmi panel init. In the future the hdmi panel will depend
    on the output being ready.
    
    Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
    Reviewed-by: Archit Taneja <archit@ti.com>

diff --git a/drivers/video/omap2/dss/hdmi.c b/drivers/video/omap2/dss/hdmi.c
index b53de043c03f..04edf325429b 100644
--- a/drivers/video/omap2/dss/hdmi.c
+++ b/drivers/video/omap2/dss/hdmi.c
@@ -1092,6 +1092,8 @@ static int __init omapdss_hdmihw_probe(struct platform_device *pdev)
 	hdmi.ip_data.pll_offset = HDMI_PLLCTRL;
 	hdmi.ip_data.phy_offset = HDMI_PHY;
 
+	hdmi_init_output(pdev);
+
 	r = hdmi_panel_init();
 	if (r) {
 		DSSERR("can't init panel\n");
@@ -1100,8 +1102,6 @@ static int __init omapdss_hdmihw_probe(struct platform_device *pdev)
 
 	dss_debugfs_create_file("hdmi", hdmi_dump_regs);
 
-	hdmi_init_output(pdev);
-
 	hdmi_probe_pdata(pdev);
 
 	return 0;

