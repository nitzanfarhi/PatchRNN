commit e71bb8d701ea4c81e7fbf3951f5f24e4671ed34a
Author: pancake <pancake@nopcode.org>
Date:   Tue Apr 16 04:11:32 2013 +0200

    Rename and fix scr.{stride,cols} as hex.{stride,cols}

diff --git a/libr/core/config.c b/libr/core/config.c
index de2cf8526..196bd5a57 100644
--- a/libr/core/config.c
+++ b/libr/core/config.c
@@ -16,11 +16,18 @@ static int config_scrnkey_callback(void *user, void *data) {
 	return R_TRUE;
 }
 
-static int config_scrcols_callback(void *user, void *data) {
+static int config_hexstride_callback(void *user, void *data) {
+	RConfigNode *node = (RConfigNode*) data;
+	((RCore *)user)->print->stride = node->i_value;
+	return R_TRUE;
+}
+
+static int config_hexcols_callback(void *user, void *data) {
 	int c = R_MIN (128, R_MAX (((RConfigNode*)data)->i_value, 0));
 	((RCore *)user)->print->cols = c & ~1;
 	return R_TRUE;
 }
+
 static int config_widthfix_callback(void *user, void *data) {
 	RConfigNode *node = (RConfigNode *) data;
 	r_cons_singleton ()->widthfix = node->i_value;
@@ -349,13 +356,6 @@ static int config_scrprompt_callback(void *user, void *data) {
 	return R_TRUE;
 }
 
-static int config_scrstride_callback(void *user, void *data) {
-	RConfigNode *node = (RConfigNode *) data;
-	RCore *core = (RCore *) user;
-	core->print->stride = node->i_value;
-	return R_TRUE;
-}
-
 static int config_scrsparse_callback(void *user, void *data) {
 	RConfigNode *node = (RConfigNode *) data;
 	RCore *core = (RCore *) user;
@@ -721,8 +721,6 @@ r_config_set (cfg, "asm.arch", R_SYS_ARCH);
 
 	r_config_set (cfg, "graph.font", "Courier");
 	r_config_desc (cfg, "graph.font", "font to be used by the dot graphs");
-	r_config_set_i_cb (cfg, "scr.stride", 0, config_scrstride_callback);
-	r_config_desc (cfg, "scr.stride", "select row stride for hexdump (px)");
 	r_config_set_cb (cfg, "scr.sparse", "false", config_scrsparse_callback);
 	r_config_set_cb (cfg, "scr.interactive", "true", config_scrint_callback);
 	r_config_set_cb (cfg, "scr.tee", "", config_teefile_callback);
@@ -742,8 +740,10 @@ r_config_set (cfg, "asm.arch", R_SYS_ARCH);
 	r_config_set (cfg, "scr.seek", "");
 	r_config_set_i(cfg, "scr.colpos", 80);
 	r_config_desc (cfg, "scr.colpos", "Column position of cmd.cprompt in visual");
-	r_config_set_i_cb (cfg, "scr.cols", 16, &config_scrcols_callback);
-	r_config_desc (cfg, "scr.cols", "Configure the number of columns to print");
+	r_config_set_i_cb (cfg, "hex.stride", 0, &config_hexstride_callback);
+	r_config_desc (cfg, "hex.stride", "Define the line stride in hexdump (default is 0)");
+	r_config_set_i_cb (cfg, "hex.cols", 16, &config_hexcols_callback);
+	r_config_desc (cfg, "hex.cols", "Configure the number of columns in hexdump");
 	r_config_set_cb (cfg, "scr.html", "false", &config_scrhtml_callback);
 	r_config_desc (cfg, "scr.html", "If enabled disassembly use HTML syntax");
 	r_config_set_cb (cfg, "scr.widthfix", "false", &config_widthfix_callback);
diff --git a/libr/util/print.c b/libr/util/print.c
index afe230fce..dcf40b0d0 100644
--- a/libr/util/print.c
+++ b/libr/util/print.c
@@ -349,7 +349,7 @@ R_API void r_print_hexdump(RPrint *p, ut64 addr, const ut8 *buf, int len, int ba
 	}
 
 	p->interrupt = 0;
-	for (i=j=0; !p->interrupt && i<len; i+=(p->stride?p->stride:inc)) {
+	for (i=j=0; !p->interrupt && i<len; i+=(p->stride?p->stride:inc), j+=(p->stride?p->stride:0)) {
 		if (use_sparse) {
 			if (check_sparse (buf+i, inc, sparse_char)) {
 				if (i+inc>=len || check_sparse (buf+i+inc, inc, sparse_char)) {

