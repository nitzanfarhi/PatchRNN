commit 1d3ae4c0b97994b145ba1157d29776b4d32e176f
Author: deraadt <deraadt@openbsd.org>
Date:   Thu Jul 9 06:33:03 1998 +0000

    do not gethostname with len-1

diff --git a/usr.sbin/ypserv/makedbm/makedbm.c b/usr.sbin/ypserv/makedbm/makedbm.c
index 4085e7b9eb0..ca8c2009d4c 100644
--- a/usr.sbin/ypserv/makedbm/makedbm.c
+++ b/usr.sbin/ypserv/makedbm/makedbm.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: makedbm.c,v 1.10 1998/03/12 08:22:27 deraadt Exp $ */
+/*	$OpenBSD: makedbm.c,v 1.11 1998/07/09 06:33:03 deraadt Exp $ */
 
 /*
  * Copyright (c) 1994-97 Mats O Jansson <moj@stacken.kth.se>
@@ -32,7 +32,7 @@
  */
 
 #ifndef LINT
-static char rcsid[] = "$OpenBSD: makedbm.c,v 1.10 1998/03/12 08:22:27 deraadt Exp $";
+static char rcsid[] = "$OpenBSD: makedbm.c,v 1.11 1998/07/09 06:33:03 deraadt Exp $";
 #endif
 
 #include <stdio.h>
@@ -303,7 +303,7 @@ fail:
 	if (yp_master_name) {
 		add_record(new_db, YP_MASTER_KEY, yp_master_name, FALSE);
 	} else {
-		gethostname(myname, sizeof(myname) - 1);
+		gethostname(myname, sizeof(myname));
 		add_record(new_db, YP_MASTER_KEY, myname, FALSE);
 	}
 	
diff --git a/usr.sbin/ypserv/mkalias/mkalias.c b/usr.sbin/ypserv/mkalias/mkalias.c
index e430db8c2cd..3ff9de4d1f9 100644
--- a/usr.sbin/ypserv/mkalias/mkalias.c
+++ b/usr.sbin/ypserv/mkalias/mkalias.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: mkalias.c,v 1.4 1998/03/12 08:22:28 deraadt Exp $ */
+/*	$OpenBSD: mkalias.c,v 1.5 1998/07/09 06:33:04 deraadt Exp $ */
 
 /*
  * Copyright (c) 1997 Mats O Jansson <moj@stacken.kth.se>
@@ -32,7 +32,7 @@
  */
 
 #ifndef LINT
-static char rcsid[] = "$OpenBSD: mkalias.c,v 1.4 1998/03/12 08:22:28 deraadt Exp $";
+static char rcsid[] = "$OpenBSD: mkalias.c,v 1.5 1998/07/09 06:33:04 deraadt Exp $";
 #endif
 
 #include <ctype.h>
@@ -340,7 +340,7 @@ fail:
 	}
 
 	if (new_db != NULL) {
-	  	gethostname(myname, sizeof(myname) - 1);
+	  	gethostname(myname, sizeof(myname));
 		key.dptr = YP_MASTER_KEY;
 		key.dsize = strlen(YP_MASTER_KEY);
 		val.dptr = myname;

