commit 7986e34db075df9b02d277d15b596e0341cbf19a
Author: Stefano Sabatini <stefano.sabatini-lala@poste.it>
Date:   Sat Jan 15 19:58:29 2011 +0000

    Make ff_dprintf_link() print meaningful information for audio links.
    
    Originally committed as revision 26378 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavfilter/avfilter.c b/libavfilter/avfilter.c
index 5a0ab8ef3..b99bcbb8a 100644
--- a/libavfilter/avfilter.c
+++ b/libavfilter/avfilter.c
@@ -246,6 +246,7 @@ void ff_dprintf_ref(void *ctx, AVFilterBufferRef *ref, int end)
 
 void ff_dprintf_link(void *ctx, AVFilterLink *link, int end)
 {
+    if (link->type == AVMEDIA_TYPE_VIDEO) {
     dprintf(ctx,
             "link[%p s:%dx%d fmt:%-16s %-16s->%-16s]%s",
             link, link->w, link->h,
@@ -253,6 +254,18 @@ void ff_dprintf_link(void *ctx, AVFilterLink *link, int end)
             link->src ? link->src->filter->name : "",
             link->dst ? link->dst->filter->name : "",
             end ? "\n" : "");
+    } else {
+        char buf[128];
+        av_get_channel_layout_string(buf, sizeof(buf), -1, link->channel_layout);
+
+        dprintf(ctx,
+                "link[%p r:%"PRId64" cl:%s fmt:%-16s %-16s->%-16s]%s",
+                link, link->sample_rate, buf,
+                av_get_sample_fmt_name(link->format),
+                link->src ? link->src->filter->name : "",
+                link->dst ? link->dst->filter->name : "",
+                end ? "\n" : "");
+    }
 }
 
 AVFilterBufferRef *avfilter_get_video_buffer(AVFilterLink *link, int perms, int w, int h)

