commit 6cc813fa4a03c103924abbaa46c6b1793ae990be
Author: gjelinek <none@none>
Date:   Mon Oct 23 10:15:52 2006 -0700

    6454140 zoneadm fails to mount fs in mini-root

diff --git a/usr/src/cmd/zoneadm/zoneadm.c b/usr/src/cmd/zoneadm/zoneadm.c
index 3dcf6ab563..f777eb9e7c 100644
--- a/usr/src/cmd/zoneadm/zoneadm.c
+++ b/usr/src/cmd/zoneadm/zoneadm.c
@@ -2279,6 +2279,14 @@ verify_fs_special(struct zone_fstab *fstab)
 {
 	struct stat st;
 
+	/*
+	 * This validation is really intended for standard zone administration.
+	 * If we are in a mini-root or some other upgrade situation where
+	 * we are using the scratch zone, just by-pass this.
+	 */
+	if (zonecfg_in_alt_root())
+		return (Z_OK);
+
 	if (strcmp(fstab->zone_fs_type, MNTTYPE_ZFS) == 0)
 		return (verify_fs_zfs(fstab));
 

