commit 05e3f2f351d3c6f19a81ff7eb0a661ffcd4b19b7
Author: Alexander Aring <alex.aring@gmail.com>
Date:   Wed Nov 5 20:51:27 2014 +0100

    at86rf230: add force slotted operation bit
    
    This patch adds a force setting of slotted operation bit. The atben
    chips sometimes set these bit. The reason is unknown. Nevertheless we
    don't support slotted operation so we set this bit now force while
    probing.
    
    Signed-off-by: Alexander Aring <alex.aring@gmail.com>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

diff --git a/drivers/net/ieee802154/at86rf230.c b/drivers/net/ieee802154/at86rf230.c
index a6db76806715..a3cc7d9f28ab 100644
--- a/drivers/net/ieee802154/at86rf230.c
+++ b/drivers/net/ieee802154/at86rf230.c
@@ -1358,6 +1358,14 @@ static int at86rf230_hw_init(struct at86rf230_local *lp)
 		return -EINVAL;
 	}
 
+	/* Force setting slotted operation bit to 0. Sometimes the atben
+	 * sets this bit and I don't know why. We set this always force
+	 * to zero while probing.
+	 */
+	rc = at86rf230_write_subreg(lp, SR_SLOTTED_OPERATION, 0);
+	if (rc)
+		return rc;
+
 	return 0;
 }
 

