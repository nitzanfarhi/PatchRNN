commit 2594d960793f13582c0730a99c5396cded7cf9d9
Author: Rolf Stefan Wilke <stefan.wilke@uni-ulm.de>
Date:   Tue Feb 6 19:18:14 2007 +0100

    [ALSA] emu10k1 - Fix STAC9758 front channel
    
    For some time now, some users of STAC9758 (emu10k1) would have no sound on
    their front channels. This can be fixed (at least for me) by unmuting  head
    phone volume and setting it to 0dB before removing the 'Front Playback'
    control. For details, cf.
    https://bugtrack.alsa-project.org/alsa-bug/view.php?id=2308
    Find the appropriate patch attached.
    Credits to: Raymond
    
    Signed-off-by: Rolf Stefan Wilke <stefan.wilke@uni-ulm.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

diff --git a/sound/pci/emu10k1/emumixer.c b/sound/pci/emu10k1/emumixer.c
index 0981af842b76..4db6e1ca1665 100644
--- a/sound/pci/emu10k1/emumixer.c
+++ b/sound/pci/emu10k1/emumixer.c
@@ -1582,6 +1582,7 @@ int __devinit snd_emu10k1_mixer(struct snd_emu10k1 *emu,
 			if (emu->ac97->id == AC97_ID_STAC9758) {
 				emu->rear_ac97 = 1;
 				snd_emu10k1_ptr_write(emu, AC97SLOT, 0, AC97SLOT_CNTR|AC97SLOT_LFE|AC97SLOT_REAR_LEFT|AC97SLOT_REAR_RIGHT);
+				snd_ac97_write_cache(emu->ac97, AC97_HEADPHONE, 0x0202);
 			}
 			/* remove unused AC97 controls */
 			snd_ac97_write_cache(emu->ac97, AC97_SURROUND_MASTER, 0x0202);

