commit 9fb31c3a1d9f42e10e541ee0e2be8d1f27115141
Author: Rafa³ Bilski <rafalbilski@interia.pl>
Date:   Thu Jul 13 19:26:10 2006 +0200

    [CPUFREQ] Longhaul - Fix power state test to do something more useful
    
    This is changing "always true" test to something usefull.
    
    Signed-off-by: Rafa³ Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

diff --git a/arch/i386/kernel/cpu/cpufreq/longhaul.c b/arch/i386/kernel/cpu/cpufreq/longhaul.c
index fdf8a6424f25..ccd1f2c39e18 100644
--- a/arch/i386/kernel/cpu/cpufreq/longhaul.c
+++ b/arch/i386/kernel/cpu/cpufreq/longhaul.c
@@ -550,7 +550,7 @@ static int __init longhaul_cpu_init(struct cpufreq_policy *policy)
 	if (pr == NULL) goto err_acpi;
 
 	cx = &pr->power.states[ACPI_STATE_C3];
-	if (cx == NULL || cx->latency > 1000) goto err_acpi;
+	if (cx->address == 0 || cx->latency > 1000) goto err_acpi;
 
 	/* Now check what we have on this motherboard */
 	switch (c->x86_model) {

