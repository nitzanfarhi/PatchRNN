commit eaac2c876ecce420d24ff5d5b6d6a51390446798
Author: Sven Eckelmann <sven@narfation.org>
Date:   Sun Jul 17 21:04:01 2016 +0200

    batman-adv: Count all non-success TX packets as dropped
    
    A failure during the submission also causes dropped packets.
    batadv_interface_tx should therefore also increase the DROPPED counter for
    these returns.
    
    Signed-off-by: Sven Eckelmann <sven@narfation.org>
    Signed-off-by: Simon Wunderlich <sw@simonwunderlich.de>

diff --git a/net/batman-adv/soft-interface.c b/net/batman-adv/soft-interface.c
index 2f0304ec459c..7b3494ae6ad9 100644
--- a/net/batman-adv/soft-interface.c
+++ b/net/batman-adv/soft-interface.c
@@ -386,7 +386,7 @@ static int batadv_interface_tx(struct sk_buff *skb,
 			ret = batadv_send_skb_via_tt(bat_priv, skb, dst_hint,
 						     vid);
 		}
-		if (ret == NET_XMIT_DROP)
+		if (ret != NET_XMIT_SUCCESS)
 			goto dropped_freed;
 	}
 

