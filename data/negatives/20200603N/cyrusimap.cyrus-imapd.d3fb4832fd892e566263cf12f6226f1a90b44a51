commit d3fb4832fd892e566263cf12f6226f1a90b44a51
Author: Larry Greenfield <leg@andrew.cmu.edu>
Date:   Fri Oct 1 03:09:57 1999 +0000

    won't always prompt for username

diff --git a/installsieve/installscript.c b/installsieve/installscript.c
index 42a478ed4..a28b0d2ce 100644
--- a/installsieve/installscript.c
+++ b/installsieve/installscript.c
@@ -87,9 +87,12 @@ void interaction (int id, const char *prompt,
 	*tresult=strdup(getpass(""));
 	*tlen=strlen(*tresult);
 	return;
-    } else if (((id==SASL_CB_USER) || 
-		(id==SASL_CB_AUTHNAME)) && (authname!=NULL)) {
-	strcpy(result, authname);
+    } else if ((id==SASL_CB_USER) || (id==SASL_CB_AUTHNAME)) {
+	if (authname) {
+	    strcpy(result, authname);
+	} else {
+	    strcpy(result, getpwuid(getuid())->pw_name);
+	}
 #ifdef SASL_CB_GETREALM
     } else if ((id==SASL_CB_GETREALM) && (realm!=NULL)) {
       strcpy(result, realm);

