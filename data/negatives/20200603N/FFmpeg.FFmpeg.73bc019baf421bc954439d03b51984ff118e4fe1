commit 73bc019baf421bc954439d03b51984ff118e4fe1
Author: Nicolas George <nicolas.george@normalesup.org>
Date:   Sat Apr 21 12:05:23 2012 +0200

    lavf: print a warning if probesize seems not enough.

diff --git a/libavformat/utils.c b/libavformat/utils.c
index 1bf5ac5dd4..de0cb5432e 100644
--- a/libavformat/utils.c
+++ b/libavformat/utils.c
@@ -2522,6 +2522,12 @@ int avformat_find_stream_info(AVFormatContext *ic, AVDictionary **options)
         if (read_size >= ic->probesize) {
             ret = count;
             av_log(ic, AV_LOG_DEBUG, "Probe buffer size limit %d reached\n", ic->probesize);
+            for (i = 0; i < ic->nb_streams; i++)
+                if (!ic->streams[i]->r_frame_rate.num &&
+                    ic->streams[i]->info->duration_count <= 1)
+                    av_log(ic, AV_LOG_WARNING,
+                           "Stream #%d: not enough frames to estimate rate; "
+                           "consider increasing probesize\n", i);
             break;
         }
 

