commit 538aae051cc57b5ad9365733cd43c9b2a93fccba
Author: Tim Kientzle <kientzle@gmail.com>
Date:   Sat Jun 14 10:01:08 2008 -0400

    If Zip entry has already been read, don't try to read it again.
    
    SVN-Revision: 111

diff --git a/libarchive/archive_read_support_format_zip.c b/libarchive/archive_read_support_format_zip.c
index 4cdde5ed..d6fe8808 100644
--- a/libarchive/archive_read_support_format_zip.c
+++ b/libarchive/archive_read_support_format_zip.c
@@ -747,6 +747,10 @@ archive_read_format_zip_read_data_skip(struct archive_read *a)
 
 	zip = (struct zip *)(a->format->data);
 
+	/* If we've already read to end of data, we're done. */
+	if (zip->end_of_entry_cleanup)
+		return (ARCHIVE_OK);
+
 	/*
 	 * If the length is at the end, we have no choice but
 	 * to decompress all the data to find the end marker.

