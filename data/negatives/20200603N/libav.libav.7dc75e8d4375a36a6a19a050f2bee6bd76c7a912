commit 7dc75e8d4375a36a6a19a050f2bee6bd76c7a912
Author: Allan Sandfeld Jensen <kde@carewolf.com>
Date:   Tue Dec 25 09:37:49 2007 +0000

    Revert r6124, the change was just wrong, other formats than MPEG-PS can be
    stored in CDXA as well. And the need for a CDXA specific check is questionable.
    Also ive ok-ed that patch instead of mans ...
    fixes issue287 (psxstr misdetection as MPEG-PS)
    
    Original commit message:
    add support for information in CDXA format
    patch by Allan Sandfeld Jensen % kde A carewolf P com %
    Original thread:
    Date: Aug 18, 2006 6:33 PM
    Subject: [Ffmpeg-devel] CDXA in libavformat [patch]
    
    Originally committed as revision 11314 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/mpeg.c b/libavformat/mpeg.c
index b3c2e3ed4..47b459ee6 100644
--- a/libavformat/mpeg.c
+++ b/libavformat/mpeg.c
@@ -32,18 +32,6 @@
 
 #define MAX_SYNC_SIZE 100000
 
-static int cdxa_probe(AVProbeData *p)
-{
-    /* check file header */
-    if (p->buf[0] == 'R' && p->buf[1] == 'I' &&
-        p->buf[2] == 'F' && p->buf[3] == 'F' &&
-        p->buf[8] == 'C' && p->buf[9] == 'D' &&
-        p->buf[10] == 'X' && p->buf[11] == 'A')
-        return AVPROBE_SCORE_MAX;
-    else
-        return 0;
-}
-
 static int check_pes(uint8_t *p, uint8_t *end){
     int pes1;
     int pes2=      (p[3] & 0xC0) == 0x80
@@ -71,10 +59,6 @@ static int mpegps_probe(AVProbeData *p)
     int i;
     int score=0;
 
-    score = cdxa_probe(p);
-    if (score > 0) return score;
-
-    /* Search for MPEG stream */
     for(i=0; i<p->buf_size; i++){
         code = (code<<8) + p->buf[i];
         if ((code & 0xffffff00) == 0x100) {

