commit b47d4934e71d918814aee4a1d0211f81329b767e
Author: Bjorn Helgaas <bhelgaas@google.com>
Date:   Thu May 30 11:45:39 2013 -0600

    parisc/PCI: Set type for LBA bus_num resource
    
    The non-PAT resource probing code failed to set the type of the LBA bus_num
    resource (30aa80da43 "parisc/PCI: register busn_res for root buses" did
    the corresponding thing for the PAT case).
    
    This causes incorrect resource assignments and a non-working stifb
    framebuffer on most parisc machines.
    
    Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
    Signed-off-by: Helge Deller <deller@gmx.de>

diff --git a/drivers/parisc/lba_pci.c b/drivers/parisc/lba_pci.c
index 2ef7103270bb..5d25038ef4b0 100644
--- a/drivers/parisc/lba_pci.c
+++ b/drivers/parisc/lba_pci.c
@@ -1096,6 +1096,7 @@ lba_legacy_resources(struct parisc_device *pa_dev, struct lba_device *lba_dev)
 	r->name = "LBA PCI Busses";
 	r->start = lba_num & 0xff;
 	r->end = (lba_num>>8) & 0xff;
+	r->flags = IORESOURCE_BUS;
 
 	/* Set up local PCI Bus resources - we don't need them for
 	** Legacy boxes but it's nice to see in /proc/iomem.

