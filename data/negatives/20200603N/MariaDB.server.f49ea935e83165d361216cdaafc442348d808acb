commit f49ea935e83165d361216cdaafc442348d808acb
Author: Sergey Petrunya <psergey@askmonty.org>
Date:   Wed Jun 9 15:55:02 2010 +0400

    Fix BB failure, crash in join_nested.test

diff --git a/sql/sql_select.cc b/sql/sql_select.cc
index a96e0538636..9a3e11972b7 100644
--- a/sql/sql_select.cc
+++ b/sql/sql_select.cc
@@ -7146,7 +7146,9 @@ make_join_select(JOIN *join,SQL_SELECT *select,COND *cond)
             cond_tab->select_cond->quick_fix_field();
             if (cond_tab->select)
               cond_tab->select->cond= cond_tab->select_cond;
-          }              
+          }
+          if (tab == last_tab)
+            break;
         }
         first_inner_tab= first_inner_tab->first_upper;       
       }

