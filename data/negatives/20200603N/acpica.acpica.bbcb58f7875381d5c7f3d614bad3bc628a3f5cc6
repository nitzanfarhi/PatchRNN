commit bbcb58f7875381d5c7f3d614bad3bc628a3f5cc6
Author: Lv Zheng <lv.zheng@intel.com>
Date:   Tue Sep 20 13:19:55 2016 +0800

    MacOSX: Fix wrong sem_destroy definition
    
    The following build errors can be seen for MacOSX builds:
    .../osunixxf.c:882:9: error: 'sem_close' is deprecated [-Werror,-Wdeprecated-declarations]
    .../acmacosx.h:122:29: note: expanded from macro 'sem_destroy'
    #define sem_destroy         sem_close
    
    sem_destroy() issue is caused by the wrong order of the following lines:
      #define #sem_destroy        sem_close
      #include <semaphore.h>
    This patch fixes it by removing the buggy re-definitiion. Lv Zheng.
    
    Signed-off-by: Lv Zheng <lv.zheng@intel.com>

diff --git a/source/include/platform/acmacosx.h b/source/include/platform/acmacosx.h
index f5d2ce30f..89a23fe22 100644
--- a/source/include/platform/acmacosx.h
+++ b/source/include/platform/acmacosx.h
@@ -119,7 +119,6 @@
 #include "aclinux.h"
 
 #ifdef __APPLE__
-#define sem_destroy         sem_close
 #define ACPI_USE_ALTERNATE_TIMEOUT
 #endif /* __APPLE__ */
 
diff --git a/source/os_specific/service_layers/osunixxf.c b/source/os_specific/service_layers/osunixxf.c
index 03f62bdce..cf7931bad 100644
--- a/source/os_specific/service_layers/osunixxf.c
+++ b/source/os_specific/service_layers/osunixxf.c
@@ -879,10 +879,17 @@ AcpiOsDeleteSemaphore (
         return (AE_BAD_PARAMETER);
     }
 
+#ifdef __APPLE__
+    if (sem_close (Sem) == -1)
+    {
+        return (AE_BAD_PARAMETER);
+    }
+#else
     if (sem_destroy (Sem) == -1)
     {
         return (AE_BAD_PARAMETER);
     }
+#endif
 
     return (AE_OK);
 }

