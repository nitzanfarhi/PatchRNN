commit 4970e8dfcb18c1353e44b82e4ec836d165b7de82
Author: Timo Sirainen <tss@iki.fi>
Date:   Fri Sep 4 12:38:00 2009 -0400

    lib-master: Execute doveconf with -f service=, not -p parameter.
    
    --HG--
    branch : HEAD

diff --git a/src/lib-master/master-service-settings.c b/src/lib-master/master-service-settings.c
index 71541ee16..388a2f643 100644
--- a/src/lib-master/master-service-settings.c
+++ b/src/lib-master/master-service-settings.c
@@ -84,8 +84,8 @@ master_service_exec_config(struct master_service *service, bool preserve_home)
 	/* @UNSAFE */
 	conf_argv = t_new(const char *, 6 + (service->argc + 1) + 1);
 	conf_argv[0] = DOVECOT_CONFIG_BIN_PATH;
-	conf_argv[1] = "-p";
-	conf_argv[2] = service->name;
+	conf_argv[1] = "-f";
+	conf_argv[2] = t_strconcat("service=", service->name, NULL);
 	conf_argv[3] = "-c";
 	conf_argv[4] = service->config_path;
 	conf_argv[5] = "-e";

