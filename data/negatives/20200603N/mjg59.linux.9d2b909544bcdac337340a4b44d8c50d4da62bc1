commit 9d2b909544bcdac337340a4b44d8c50d4da62bc1
Author: Jean-François Moine <moinejf@free.fr>
Date:   Sun May 22 04:56:32 2011 -0300

    [media] gspca - ov519: Fix a regression for ovfx2 webcams
    
    By git commit c42cedbb658b, the bulk transfer size was changed to a lower
    value for resolutions != 1600x1200, but the image extraction routine still
    worked with the previous value, giving bad truncated images.
    
    Signed-off-by: Jean-François Moine <moinejf@free.fr>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/gspca/ov519.c b/drivers/media/video/gspca/ov519.c
index 36a46fc78734..5ac2f3c53710 100644
--- a/drivers/media/video/gspca/ov519.c
+++ b/drivers/media/video/gspca/ov519.c
@@ -4478,7 +4478,7 @@ static void ovfx2_pkt_scan(struct gspca_dev *gspca_dev,
 	gspca_frame_add(gspca_dev, INTER_PACKET, data, len);
 
 	/* A short read signals EOF */
-	if (len < OVFX2_BULK_SIZE) {
+	if (len < gspca_dev->cam.bulk_size) {
 		/* If the frame is short, and it is one of the first ones
 		   the sensor and bridge are still syncing, so drop it. */
 		if (sd->first_frame) {

