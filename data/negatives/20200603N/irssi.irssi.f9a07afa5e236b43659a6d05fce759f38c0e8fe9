commit f9a07afa5e236b43659a6d05fce759f38c0e8fe9
Author: Timo Sirainen <cras@irssi.org>
Date:   Sat Oct 14 02:10:22 2000 +0000

    match_nick_flags() didn't check that the nick actually began with a flag.
    
    
    git-svn-id: http://svn.irssi.org/repos/irssi/trunk@748 dbcabf3a-b0e7-0310-adc4-f8d773084564

diff --git a/src/core/channels.c b/src/core/channels.c
index 583280af..2d487d3e 100644
--- a/src/core/channels.c
+++ b/src/core/channels.c
@@ -157,7 +157,8 @@ static int match_nick_flags(SERVER_REC *server, NICK_REC *nick, char flag)
 {
 	const char *flags = server->get_nick_flags();
 
-	return (flag == flags[0] && nick->op) ||
+	return strchr(flags, flag) == NULL ||
+		(flag == flags[0] && nick->op) ||
 		(flag == flags[1] && (nick->voice || nick->halfop ||
 				      nick->op)) ||
 		(flag == flags[2] && (nick->halfop || nick->op));

