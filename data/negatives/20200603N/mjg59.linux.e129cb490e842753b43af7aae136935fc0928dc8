commit e129cb490e842753b43af7aae136935fc0928dc8
Author: Alexey Starikovskiy <astarikovskiy@suse.de>
Date:   Tue Mar 11 22:55:42 2008 +0300

    x86: move mp_bus_id_to_local to numa.c
    
    Signed-off-by: Alexey Starikovskiy <astarikovskiy@suse.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>

diff --git a/arch/x86/kernel/mpparse_32.c b/arch/x86/kernel/mpparse_32.c
index 8795122db9bc..ae385b427841 100644
--- a/arch/x86/kernel/mpparse_32.c
+++ b/arch/x86/kernel/mpparse_32.c
@@ -47,7 +47,6 @@ int mp_bus_id_to_type [MAX_MP_BUSSES];
 #endif
 DECLARE_BITMAP(mp_bus_not_pci, MAX_MP_BUSSES);
 int mp_bus_id_to_node [MAX_MP_BUSSES];
-int mp_bus_id_to_local [MAX_MP_BUSSES];
 int mp_bus_id_to_pci_bus [MAX_MP_BUSSES] = { [0 ... MAX_MP_BUSSES-1] = -1 };
 static int mp_current_pci_id;
 
diff --git a/arch/x86/pci/numa.c b/arch/x86/pci/numa.c
index 3248d3ee388f..e765558f7e1b 100644
--- a/arch/x86/pci/numa.c
+++ b/arch/x86/pci/numa.c
@@ -12,6 +12,8 @@
 #define XQUAD_PORTIO_QUAD 0x40000  /* 256k per quad. */
 
 #define BUS2QUAD(global) (mp_bus_id_to_node[global])
+
+int mp_bus_id_to_local[MAX_MP_BUSSES];
 #define BUS2LOCAL(global) (mp_bus_id_to_local[global])
 
 int quad_local_to_mp_bus_id [NR_CPUS/4][4];
diff --git a/include/asm-x86/mach-numaq/mach_mpparse.h b/include/asm-x86/mach-numaq/mach_mpparse.h
index cd21f289e6b7..0917b95c42ac 100644
--- a/include/asm-x86/mach-numaq/mach_mpparse.h
+++ b/include/asm-x86/mach-numaq/mach_mpparse.h
@@ -1,6 +1,8 @@
 #ifndef __ASM_MACH_MPPARSE_H
 #define __ASM_MACH_MPPARSE_H
 
+extern int mp_bus_id_to_local[MAX_MP_BUSSES];
+
 static inline void mpc_oem_bus_info(struct mpc_config_bus *m, char *name, 
 				struct mpc_config_translation *translation)
 {
diff --git a/include/asm-x86/mpspec.h b/include/asm-x86/mpspec.h
index 5fa8b8bb7d00..1c52bd8711f6 100644
--- a/include/asm-x86/mpspec.h
+++ b/include/asm-x86/mpspec.h
@@ -7,7 +7,6 @@
 #include <mach_mpspec.h>
 
 extern int mp_bus_id_to_node[MAX_MP_BUSSES];
-extern int mp_bus_id_to_local[MAX_MP_BUSSES];
 
 extern unsigned int def_to_bigsmp;
 extern int apic_version[MAX_APICS];

