commit a0a75c21f57f76e7bbfe4aadabff9945f0040b49
Author: Deomid Ryabkov <rojer@cesanta.com>
Date:   Tue May 31 17:08:37 2016 +0100

    Allow clubby.reconnect_timeout_max to be 0
    
    This is a one-shot mode, no reconnect.
    
    PUBLISHED_FROM=1b2813c0dee8871013c4886bec3dcd742299c092

diff --git a/fw/src/sj_clubby.c b/fw/src/sj_clubby.c
index 3ac3332d..9e87d423 100644
--- a/fw/src/sj_clubby.c
+++ b/fw/src/sj_clubby.c
@@ -132,7 +132,9 @@ static void schedule_reconnect(struct clubby *clubby) {
     clubby->reconnect_timeout = clubby->cfg.reconnect_timeout_max;
   }
   LOG(LL_DEBUG, ("Reconnect timeout: %d", clubby->reconnect_timeout));
-  sj_set_c_timer(clubby->reconnect_timeout * 1000, 0, reconnect_cb, clubby);
+  if (clubby->reconnect_timeout > 0) {
+    sj_set_c_timer(clubby->reconnect_timeout * 1000, 0, reconnect_cb, clubby);
+  }
 }
 
 int sj_clubby_register_callback(struct clubby *clubby, const char *id,

