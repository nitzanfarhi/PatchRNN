commit d4020e10fe80aaf8a4066e123c60dcc6bb8b7cca
Author: art <art@openbsd.org>
Date:   Fri Dec 7 15:29:44 2001 +0000

    Since amiga now has correct pmap_k* and uses them for mapping
    the buffer cache, it's a good idea to use them in pagemove too.

diff --git a/sys/arch/amiga/amiga/vm_machdep.c b/sys/arch/amiga/amiga/vm_machdep.c
index 007291f885c..7f29f66c40e 100644
--- a/sys/arch/amiga/amiga/vm_machdep.c
+++ b/sys/arch/amiga/amiga/vm_machdep.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: vm_machdep.c,v 1.28 2001/12/07 00:59:13 miod Exp $	*/
+/*	$OpenBSD: vm_machdep.c,v 1.29 2001/12/07 15:29:44 art Exp $	*/
 /*	$NetBSD: vm_machdep.c,v 1.30 1997/05/19 10:14:50 veego Exp $	*/
 
 /*
@@ -158,11 +158,8 @@ pagemove(from, to, size)
 			panic("pagemove 3");
 #endif
 #endif
-		pmap_remove(pmap_kernel(), (vm_offset_t)from,
-		    (vm_offset_t)from + PAGE_SIZE);
-		pmap_enter(pmap_kernel(),  (vm_offset_t)to, pa,
-		    VM_PROT_READ|VM_PROT_WRITE,
-		    VM_PROT_READ|VM_PROT_WRITE|PMAP_WIRED);
+		pmap_kremove((vaddr_t)from, PAGE_SIZE);
+		pmap_kenter_pa((vaddr_t)to, pa, VM_PROT_READ|VM_PROT_WRITE);
 		from += PAGE_SIZE;
 		to += PAGE_SIZE;
 		size -= PAGE_SIZE;

