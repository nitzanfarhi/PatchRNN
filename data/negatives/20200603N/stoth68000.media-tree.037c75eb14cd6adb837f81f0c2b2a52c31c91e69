commit 037c75eb14cd6adb837f81f0c2b2a52c31c91e69
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Mar 28 08:18:37 2010 -0300

    V4L/DVB: v4l videobuf: rename .vmalloc to .vaddr
    
    Rename the .vmalloc op in struct videobuf_qtype_ops to .vaddr. This op returns
    the virtual kernel address of a buffer. vaddr is a lot less confusing than
    vmalloc since this callback does do any allocations.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/videobuf-core.c b/drivers/media/video/videobuf-core.c
index 7b69f6b00a3d..26241a833894 100644
--- a/drivers/media/video/videobuf-core.c
+++ b/drivers/media/video/videobuf-core.c
@@ -108,8 +108,8 @@ EXPORT_SYMBOL_GPL(videobuf_iolock);
 void *videobuf_queue_to_vmalloc(struct videobuf_queue *q,
 				struct videobuf_buffer *buf)
 {
-	if (q->int_ops->vmalloc)
-		return q->int_ops->vmalloc(buf);
+	if (q->int_ops->vaddr)
+		return q->int_ops->vaddr(buf);
 	else
 		return NULL;
 }
diff --git a/drivers/media/video/videobuf-dma-contig.c b/drivers/media/video/videobuf-dma-contig.c
index 76e158feca61..7226ca47cbf5 100644
--- a/drivers/media/video/videobuf-dma-contig.c
+++ b/drivers/media/video/videobuf-dma-contig.c
@@ -204,7 +204,7 @@ static struct videobuf_buffer *__videobuf_alloc(size_t size)
 	return vb;
 }
 
-static void *__videobuf_to_vmalloc(struct videobuf_buffer *buf)
+static void *__videobuf_to_vaddr(struct videobuf_buffer *buf)
 {
 	struct videobuf_dma_contig_memory *mem = buf->priv;
 
@@ -414,7 +414,7 @@ static struct videobuf_qtype_ops qops = {
 	.mmap_mapper  = __videobuf_mmap_mapper,
 	.video_copy_to_user = __videobuf_copy_to_user,
 	.copy_stream  = __videobuf_copy_stream,
-	.vmalloc      = __videobuf_to_vmalloc,
+	.vaddr        = __videobuf_to_vaddr,
 };
 
 void videobuf_queue_dma_contig_init(struct videobuf_queue *q,
diff --git a/drivers/media/video/videobuf-dma-sg.c b/drivers/media/video/videobuf-dma-sg.c
index 014eb63c0960..43e78ee24a10 100644
--- a/drivers/media/video/videobuf-dma-sg.c
+++ b/drivers/media/video/videobuf-dma-sg.c
@@ -460,7 +460,7 @@ static struct videobuf_buffer *__videobuf_alloc(size_t size)
 	return vb;
 }
 
-static void *__videobuf_to_vmalloc(struct videobuf_buffer *buf)
+static void *__videobuf_to_vaddr(struct videobuf_buffer *buf)
 {
 	struct videobuf_dma_sg_memory *mem = buf->priv;
 	BUG_ON(!mem);
@@ -700,7 +700,7 @@ static struct videobuf_qtype_ops sg_ops = {
 	.mmap_mapper  = __videobuf_mmap_mapper,
 	.video_copy_to_user = __videobuf_copy_to_user,
 	.copy_stream  = __videobuf_copy_stream,
-	.vmalloc      = __videobuf_to_vmalloc,
+	.vaddr        = __videobuf_to_vaddr,
 };
 
 void *videobuf_sg_alloc(size_t size)
diff --git a/drivers/media/video/videobuf-vmalloc.c b/drivers/media/video/videobuf-vmalloc.c
index 000a60fc456e..6db412abeacd 100644
--- a/drivers/media/video/videobuf-vmalloc.c
+++ b/drivers/media/video/videobuf-vmalloc.c
@@ -373,7 +373,7 @@ static struct videobuf_qtype_ops qops = {
 	.mmap_mapper  = __videobuf_mmap_mapper,
 	.video_copy_to_user = __videobuf_copy_to_user,
 	.copy_stream  = __videobuf_copy_stream,
-	.vmalloc      = videobuf_to_vmalloc,
+	.vaddr        = videobuf_to_vmalloc,
 };
 
 void videobuf_queue_vmalloc_init(struct videobuf_queue *q,
diff --git a/include/media/videobuf-core.h b/include/media/videobuf-core.h
index 4497e23c9d29..8fe3254ed952 100644
--- a/include/media/videobuf-core.h
+++ b/include/media/videobuf-core.h
@@ -128,7 +128,7 @@ struct videobuf_qtype_ops {
 	u32                     magic;
 
 	struct videobuf_buffer *(*alloc)(size_t size);
-	void *(*vmalloc)	(struct videobuf_buffer *buf);
+	void *(*vaddr)		(struct videobuf_buffer *buf);
 	int (*iolock)		(struct videobuf_queue *q,
 				 struct videobuf_buffer *vb,
 				 struct v4l2_framebuffer *fbuf);

