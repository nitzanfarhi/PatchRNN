commit 25061baa5b115e230677aa4943e1a0ad3b682e29
Author: Steven Dake <sdake@redhat.com>
Date:   Mon Jan 2 06:49:37 2006 +0000

    defect 1006
    on 64 bit platforms, the timer is not properly cleared resulting in segfaults
    
    
    git-svn-id: http://svn.fedorahosted.org/svn/corosync/trunk@876 fd59a12c-fef9-0310-b244-a6a79926bd2f

diff --git a/exec/tlist.c b/exec/tlist.c
index 6c9fe095..e39f82ac 100644
--- a/exec/tlist.c
+++ b/exec/tlist.c
@@ -35,6 +35,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <errno.h>
+#include <string.h>
 
 #include "../include/list.h"
 #include "tlist.h"
@@ -133,7 +134,7 @@ void timerlist_del (struct timerlist *timerlist, timer_handle timer_handle)
 {
 	struct timer *timer = (struct timer *)timer_handle;
 
-	*((unsigned int *)timer->handle_addr) = 0;
+	memset (timer->handle_addr, 0, sizeof (struct timer *));
 	/*
 	 * If the next timer after the currently expiring timer because
 	 * timerlist_del is called from a timer handler, get to the enxt
@@ -162,7 +163,7 @@ static void timerlist_pre_dispatch (struct timerlist *timerlist, timer_handle ti
 {
 	struct timer *timer = (struct timer *)timer_handle;
 
-	*((unsigned int *)timer->handle_addr) = 0;
+	memset (timer->handle_addr, 0, sizeof (struct timer *));
 	list_del (&timer->list);
 	list_init (&timer->list);
 	timers_inuse--;

