commit b01280bda48225a17023f3defae107e0e7b51e56
Author: Timo Sirainen <tss@iki.fi>
Date:   Tue Nov 22 11:29:17 2011 +0200

    imapc: Added assert to make sure callback is never NULL.

diff --git a/src/lib-imap-client/imapc-connection.c b/src/lib-imap-client/imapc-connection.c
index 9545db3b4..7b5328861 100644
--- a/src/lib-imap-client/imapc-connection.c
+++ b/src/lib-imap-client/imapc-connection.c
@@ -1394,6 +1394,8 @@ imapc_command_begin(imapc_command_callback_t *callback, void *context)
 	struct imapc_command *cmd;
 	pool_t pool;
 
+	i_assert(callback != NULL);
+
 	pool = pool_alloconly_create("imapc command", 2048);
 	cmd = p_new(pool, struct imapc_command, 1);
 	cmd->pool = pool;

