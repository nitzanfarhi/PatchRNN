commit 5d80c04f5b65ceac09ae263c892293655a9889fc
Author: unknown <heikki@hundin.mysql.fi>
Date:   Fri Apr 25 21:12:44 2003 +0300

    ut0dbg.h:
      Print the failing assertion if it fails; helps to analyze bug reports
    
    
    innobase/include/ut0dbg.h:
      Print the failing assertion if it fails; helps to analyze bug reports

diff --git a/innobase/include/ut0dbg.h b/innobase/include/ut0dbg.h
index 3407483696c..e99dc8c09d6 100644
--- a/innobase/include/ut0dbg.h
+++ b/innobase/include/ut0dbg.h
@@ -20,7 +20,6 @@ extern ibool	ut_dbg_stop_threads;
 
 extern ulint*	ut_dbg_null_ptr;
 
-				
 #define ut_a(EXPR)\
 {\
 	ulint	dbg_i;\
@@ -31,8 +30,10 @@ extern ulint*	ut_dbg_null_ptr;
        "  InnoDB: Assertion failure in thread %lu in file %s line %lu\n",\
 		os_thread_pf(os_thread_get_curr_id()), IB__FILE__,\
                 (ulint)__LINE__);\
+		fprintf(stderr,\
+       "InnoDB: Failing assertion: " #EXPR);\
 	   	fprintf(stderr,\
-       "InnoDB: We intentionally generate a memory trap.\n");\
+       "\nInnoDB: We intentionally generate a memory trap.\n");\
                 fprintf(stderr,\
        "InnoDB: Send a detailed bug report to mysql@lists.mysql.com\n");\
 		ut_dbg_stop_threads = TRUE;\

