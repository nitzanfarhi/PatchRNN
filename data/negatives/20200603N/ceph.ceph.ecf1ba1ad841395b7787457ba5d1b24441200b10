commit ecf1ba1ad841395b7787457ba5d1b24441200b10
Author: Sage Weil <sage@newdream.net>
Date:   Thu Sep 18 13:44:29 2008 -0700

    set bl length in buffer::read_file

diff --git a/src/config.cc b/src/config.cc
index 8699474d06..c17b5f6c30 100644
--- a/src/config.cc
+++ b/src/config.cc
@@ -44,6 +44,7 @@ int buffer::list::read_file(const char *fn)
   ::fstat(fd, &st);
   int s = ROUND_UP_TO(st.st_size, PAGE_SIZE);
   bufferptr bp = buffer::create_page_aligned(s);
+  bp.set_length(st.st_size);
   append(bp);
   ::read(fd, (void*)c_str(), length());
   ::close(fd);

