commit 2c6be944111a873ce96865f1a6033056bdf0d0e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 3 13:33:49 2010 -0700

    drm/i915: mark display port DPMS state as 'ON' when enabling output
    
    The display port DPMS state is tracked internally in the display port
    driver so that when a hotplug event comes along, the driver can know
    whether to try retraining the link. This doesn't work well if the
    driver never sets the DPMS state to ON when the output is enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

diff --git a/drivers/gpu/drm/i915/intel_dp.c b/drivers/gpu/drm/i915/intel_dp.c
index 9e8fe122b0af..152d94507b79 100644
--- a/drivers/gpu/drm/i915/intel_dp.c
+++ b/drivers/gpu/drm/i915/intel_dp.c
@@ -933,6 +933,7 @@ static void intel_dp_commit(struct drm_encoder *encoder)
 
 	if (IS_eDP(intel_dp) || IS_PCH_eDP(intel_dp))
 		ironlake_edp_backlight_on(dev);
+	intel_dp->dpms_mode = DRM_MODE_DPMS_ON;
 }
 
 static void

