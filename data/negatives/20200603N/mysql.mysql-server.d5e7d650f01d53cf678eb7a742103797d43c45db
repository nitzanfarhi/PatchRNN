commit d5e7d650f01d53cf678eb7a742103797d43c45db
Author: tomas@poseidon.ndb.mysql.com <>
Date:   Thu Jun 2 23:11:54 2005 +0200

    CommandInterpreter.cpp:
      Bug #11050    ndb_mgm "show" prints incorrectly after master data node fails

diff --git a/storage/ndb/src/mgmclient/CommandInterpreter.cpp b/storage/ndb/src/mgmclient/CommandInterpreter.cpp
index 389fc08b97c..3b57e6d4860 100644
--- a/storage/ndb/src/mgmclient/CommandInterpreter.cpp
+++ b/storage/ndb/src/mgmclient/CommandInterpreter.cpp
@@ -1190,7 +1190,8 @@ CommandInterpreter::executeShow(char* parameters)
 	api_nodes++;
 	break;
       case NDB_MGM_NODE_TYPE_NDB:
-	if (state->node_states[i].dynamic_id < master_id)
+	if (state->node_states[i].dynamic_id &&
+	    state->node_states[i].dynamic_id < master_id)
 	  master_id= state->node_states[i].dynamic_id;
 	ndb_nodes++;
 	break;

