commit 51883b5e60796cce556370dbc368fd22c60c0e3e
Author: Aegis Lin <aegislin@gmail.com>
Date:   Fri Feb 1 17:35:13 2008 +0100

    [SCSI] ps3rom: sector size should be 512 bytes
    
    It should be desired that 64 KiB is available for ATAPI transferrring.
    (Historically) in SCSI/block layer sector size is defined as 512 during
    sector-byte calculation.
    Originally in ps3rom.c CD_FRAMESIZE (2048) was used, which limited
    /sys/block/sr0/queue/max_sectors_kb to 16 KiB (32 sectors).
    
    Signed-off-by: Aegis Lin <aegislin@gmail.com>
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>

diff --git a/drivers/scsi/ps3rom.c b/drivers/scsi/ps3rom.c
index 17b4a7c4618c..0cd614a0fa73 100644
--- a/drivers/scsi/ps3rom.c
+++ b/drivers/scsi/ps3rom.c
@@ -35,7 +35,7 @@
 
 #define BOUNCE_SIZE			(64*1024)
 
-#define PS3ROM_MAX_SECTORS		(BOUNCE_SIZE / CD_FRAMESIZE)
+#define PS3ROM_MAX_SECTORS		(BOUNCE_SIZE >> 9)
 
 
 struct ps3rom_private {

