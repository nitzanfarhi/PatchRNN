commit 35e95a4733eea977015ee0fd3d710ef1fec5951a
Author: Ken Murchison <murch@andrew.cmu.edu>
Date:   Tue Oct 20 13:20:30 2015 -0400

    lmtpd.c: don't try local delivery if mlookup() fails
    
    ***  This was changed as part of https://git.cyrus.foundation/rI69bfaea35be52d0da7a672b514cd2881b91b2c50 and I don't know why

diff --git a/imap/lmtpd.c b/imap/lmtpd.c
index 7a73f2dbc..8a9c24c8b 100644
--- a/imap/lmtpd.c
+++ b/imap/lmtpd.c
@@ -855,7 +855,7 @@ int deliver(message_data_t *msgdata, char *authuser,
             proxy_adddest(&dlist, recip, n, mbentry->server, authuser);
             status[n] = nosieve;
         }
-        else {
+        else if (!r) {
             /* local mailbox */
             mydata.cur_rcpt = n;
 #ifdef USE_SIEVE

