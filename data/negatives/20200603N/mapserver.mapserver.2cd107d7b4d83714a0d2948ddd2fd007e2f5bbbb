commit 2cd107d7b4d83714a0d2948ddd2fd007e2f5bbbb
Author: Tom Kralidis <tomkralidis@hotmail.com>
Date:   Fri Aug 10 13:13:27 2007 +0000

    msWMSDescribeLayer: replace hardcoded version on XML output with passed parameter
    
    
    git-svn-id: http://svn.osgeo.org/mapserver/trunk@6552 7532c77e-422f-0410-93f4-f0b67bdd69e2

diff --git a/mapwms.c b/mapwms.c
index 5a246493..8a65fd16 100644
--- a/mapwms.c
+++ b/mapwms.c
@@ -2376,12 +2376,15 @@ int msWMSDescribeLayer(mapObj *map, int nVersion, char **names,
   const char *pszOnlineResMapWCS = NULL, *pszOnlineResLyrWCS = NULL;
   char *pszOnlineResEncoded=NULL, *pszLayerName=NULL;
   char *schemalocation = NULL;
+  char *version = NULL;
 
    for(i=0; map && i<numentries; i++) {
      if(strcasecmp(names[i], "LAYERS") == 0) {
-
       layers = msStringSplit(values[i], ',', &numlayers);
      }
+     if(strcasecmp(names[i], "VERSION") == 0) {
+      version = values[i];
+     }
    }
 
    msOWSPrintEncodeMetadata(stdout, &(map->web.metadata),
@@ -2392,7 +2395,7 @@ int msWMSDescribeLayer(mapObj *map, int nVersion, char **names,
    msIO_printf("<!DOCTYPE WMS_DescribeLayerResponse SYSTEM \"%s/wms/1.1.1/WMS_DescribeLayerResponse.dtd\">\n", schemalocation);
    free(schemalocation);
 
-   msIO_printf("<WMS_DescribeLayerResponse version=\"1.1.0\" >\n");
+   msIO_printf("<WMS_DescribeLayerResponse version=\"%s\" >\n", version);
 
    /* check if map-level metadata wfs(wcs)_onlineresource is available */
    pszOnlineResMapWFS = msOWSLookupMetadata(&(map->web.metadata), "FO", "onlineresource");

