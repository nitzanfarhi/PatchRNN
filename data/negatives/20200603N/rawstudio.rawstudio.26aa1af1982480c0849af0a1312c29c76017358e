commit 26aa1af1982480c0849af0a1312c29c76017358e
Author: akv <anders@kvistmail.dk>
Date:   Wed Jul 5 23:50:58 2006 +0000

    Not destroying file chooser dialog before we have finished using it

diff --git a/src/gtk-interface.c b/src/gtk-interface.c
index f945fc18..fe6f3443 100644
--- a/src/gtk-interface.c
+++ b/src/gtk-interface.c
@@ -1126,7 +1126,6 @@ gui_save_file_callback(gpointer callback_data, guint callback_action, GtkWidget
 		RS_IMAGE16 *rsi;
 
 		filename = gtk_file_chooser_get_filename (GTK_FILE_CHOOSER (fc));
-		gtk_widget_destroy(fc);
 		if (rs->photo->orientation)
 		{
 			rsi = rs_image16_copy(rs->photo->input);
@@ -1143,6 +1142,7 @@ gui_save_file_callback(gpointer callback_data, guint callback_action, GtkWidget
 		n = gtk_combo_box_get_active(GTK_COMBO_BOX(filetype));
 		savers[n].func(pixbuf, filename);
 
+		gtk_widget_destroy(fc);
 		if (rs->photo->orientation)
 			rs_image16_free(rsi);
 		g_object_unref(pixbuf);

