commit cda39e482a75ef428550b371eae33ef35851e151
Author: deraadt <deraadt@openbsd.org>
Date:   Sat Apr 9 04:33:40 2011 +0000

    use unique wait channels

diff --git a/sys/dev/pci/amdiic.c b/sys/dev/pci/amdiic.c
index 5aa4c269ceb..51a64ce8fe8 100644
--- a/sys/dev/pci/amdiic.c
+++ b/sys/dev/pci/amdiic.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: amdiic.c,v 1.8 2010/04/08 00:23:53 tedu Exp $	*/
+/*	$OpenBSD: amdiic.c,v 1.9 2011/04/09 04:33:40 deraadt Exp $	*/
 
 /*
  * Copyright (c) 2005 Alexander Yurchenko <grange@openbsd.org>
@@ -346,7 +346,7 @@ amdiic_i2c_exec(void *cookie, i2c_op_t op, i2c_addr_t addr,
 		amdiic_intr(sc);
 	} else {
 		/* Wait for interrupt */
-		if (tsleep(sc, PRIBIO, "iicexec", AMDIIC_TIMEOUT * hz))
+		if (tsleep(sc, PRIBIO, "amdiic", AMDIIC_TIMEOUT * hz))
 			return (1);
 	}	
 
diff --git a/sys/dev/pci/amdpm.c b/sys/dev/pci/amdpm.c
index c9ec865b2f5..85cf4b9d04b 100644
--- a/sys/dev/pci/amdpm.c
+++ b/sys/dev/pci/amdpm.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: amdpm.c,v 1.25 2010/08/08 04:49:25 deraadt Exp $	*/
+/*	$OpenBSD: amdpm.c,v 1.26 2011/04/09 04:33:40 deraadt Exp $	*/
 
 /*
  * Copyright (c) 2006 Alexander Yurchenko <grange@openbsd.org>
@@ -486,7 +486,7 @@ amdpm_i2c_exec(void *cookie, i2c_op_t op, i2c_addr_t addr,
 		amdpm_intr(sc);
 	} else {
 		/* Wait for interrupt */
-		if (tsleep(sc, PRIBIO, "iicexec", AMDPM_SMBUS_TIMEOUT * hz))
+		if (tsleep(sc, PRIBIO, "amdpm", AMDPM_SMBUS_TIMEOUT * hz))
 			goto timeout;
 	}
 
diff --git a/sys/dev/pci/ichiic.c b/sys/dev/pci/ichiic.c
index b732aba3ca3..c81d210e588 100644
--- a/sys/dev/pci/ichiic.c
+++ b/sys/dev/pci/ichiic.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: ichiic.c,v 1.24 2010/04/08 00:23:53 tedu Exp $	*/
+/*	$OpenBSD: ichiic.c,v 1.25 2011/04/09 04:33:40 deraadt Exp $	*/
 
 /*
  * Copyright (c) 2005, 2006 Alexander Yurchenko <grange@openbsd.org>
@@ -284,7 +284,7 @@ ichiic_i2c_exec(void *cookie, i2c_op_t op, i2c_addr_t addr,
 		ichiic_intr(sc);
 	} else {
 		/* Wait for interrupt */
-		if (tsleep(sc, PRIBIO, "iicexec", ICHIIC_TIMEOUT * hz))
+		if (tsleep(sc, PRIBIO, "ichiic", ICHIIC_TIMEOUT * hz))
 			goto timeout;
 	}
 
diff --git a/sys/dev/pci/piixpm.c b/sys/dev/pci/piixpm.c
index b9105c0f3bb..ba3c758fac3 100644
--- a/sys/dev/pci/piixpm.c
+++ b/sys/dev/pci/piixpm.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: piixpm.c,v 1.34 2010/04/08 00:23:53 tedu Exp $	*/
+/*	$OpenBSD: piixpm.c,v 1.35 2011/04/09 04:33:40 deraadt Exp $	*/
 
 /*
  * Copyright (c) 2005, 2006 Alexander Yurchenko <grange@openbsd.org>
@@ -288,7 +288,7 @@ piixpm_i2c_exec(void *cookie, i2c_op_t op, i2c_addr_t addr,
 		piixpm_intr(sc);
 	} else {
 		/* Wait for interrupt */
-		if (tsleep(sc, PRIBIO, "iicexec", PIIXPM_TIMEOUT * hz))
+		if (tsleep(sc, PRIBIO, "piixpm", PIIXPM_TIMEOUT * hz))
 			goto timeout;
 	}
 

