commit 8f0923c17d34ac838b7f57709f87fe33f76ee219
Author: Devendra Naga <devendra.aaru@gmail.com>
Date:   Fri Mar 29 23:03:22 2013 +0000

    cdc_ncm: return -ENOMEM if kzalloc fails
    
    return -ENOMEM instead if kzalloc of cdc_ncm_ctx structure is failed.
    
    and also remove the comparision of ctx structure with NULL and make
    it as !ctx.
    
    Signed-off-by: Devendra Naga <devendra.aaru@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/usb/cdc_ncm.c b/drivers/net/usb/cdc_ncm.c
index 4709fa3497cf..44a989cd9fb2 100644
--- a/drivers/net/usb/cdc_ncm.c
+++ b/drivers/net/usb/cdc_ncm.c
@@ -362,8 +362,8 @@ int cdc_ncm_bind_common(struct usbnet *dev, struct usb_interface *intf, u8 data_
 	u8 iface_no;
 
 	ctx = kzalloc(sizeof(*ctx), GFP_KERNEL);
-	if (ctx == NULL)
-		return -ENODEV;
+	if (!ctx)
+		return -ENOMEM;
 
 	hrtimer_init(&ctx->tx_timer, CLOCK_MONOTONIC, HRTIMER_MODE_REL);
 	ctx->tx_timer.function = &cdc_ncm_tx_timer_cb;

