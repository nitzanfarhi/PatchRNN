commit 9c2ada8b48b5dbc2955686b1e0c8284ae2346afa
Author: Johannes Schultz <saga-games@users.sourceforge.net>
Date:   Wed Dec 23 19:56:16 2009 +0000

    [Fix] XM Compatibility: Perfect emulation of buggy Rxy behaviour. Thanks to Ian Luck for helping me with this.
    [Imp] Pattern Editor: When using Find&Replace, "follow song" will be disabled, because it's pointless and unusable with "follow song" on.
    
    git-svn-id: https://source.openmpt.org/svn/openmpt/trunk/OpenMPT@449 56274372-70c3-4bfc-bfc3-4c3a0b034d27

diff --git a/mptrack/View_pat.cpp b/mptrack/View_pat.cpp
index d1a72112b..6864edeab 100644
--- a/mptrack/View_pat.cpp
+++ b/mptrack/View_pat.cpp
@@ -1817,6 +1817,10 @@ void CViewPattern::OnEditFindNext()
 				nFound++;
 				if (bUpdPos)
 				{
+					// turn off "follow song"
+					m_dwStatus &= ~PATSTATUS_FOLLOWSONG;
+					SendCtrlMessage(CTRLMSG_PAT_FOLLOWSONG, 0);
+					// go to place of finding
 					SetCurrentPattern(nPat);
 					SetCurrentRow(n / pSndFile->m_nChannels);
 				}
diff --git a/soundlib/Snd_fx.cpp b/soundlib/Snd_fx.cpp
index 40afede4f..9ab09c845 100644
--- a/soundlib/Snd_fx.cpp
+++ b/soundlib/Snd_fx.cpp
@@ -3165,8 +3165,8 @@ void CSoundFile::RetrigNote(UINT nChn, int param, UINT offset)	//rewbs.VolOffset
 		if(m_dwSongFlags & SONG_FIRSTTICK)
 		{
 			// here are some really stupid things FT2 does
+			if(pChn->nRowVolCmd == VOLCMD_VOLUME) return;
 			if(pChn->nRowInstr > 0 && pChn->nRowNote == NOTE_NONE) nRetrigCount = 1;
-			if(pChn->nRowVolCmd == VOLCMD_VOLUME) nRetrigCount = -1;	// not correct yet
 			if(pChn->nRowNote != NOTE_NONE && pChn->nRowNote <= GetModSpecifications().noteMax) nRetrigCount++;
 		}
 		if (nRetrigCount >= nRetrigSpeed)

