commit 3ccbe53cfdef08413bdd36789a6f96f7ef55c289
Author: Thorvald Natvig <slicer@users.sourceforge.net>
Date:   Wed Feb 16 06:40:32 2011 +0100

    Experiment with immediate overlay delete

diff --git a/src/mumble/Overlay.cpp b/src/mumble/Overlay.cpp
index 1e37a916..c3b6e3a2 100644
--- a/src/mumble/Overlay.cpp
+++ b/src/mumble/Overlay.cpp
@@ -133,11 +133,10 @@ void Overlay::disconnected() {
 	foreach(OverlayClient *oc, qlClients) {
 		if (oc->qlsSocket == qls) {
 			qlClients.removeAll(oc);
-			oc->deleteLater();
+			delete oc;
 			return;
 		}
 	}
-	qls->deleteLater();
 }
 
 void Overlay::error(QLocalSocket::LocalSocketError) {
diff --git a/src/mumble/OverlayClient.cpp b/src/mumble/OverlayClient.cpp
index ab2379ca..7765f3b9 100644
--- a/src/mumble/OverlayClient.cpp
+++ b/src/mumble/OverlayClient.cpp
@@ -44,6 +44,7 @@ OverlayClient::OverlayClient(QLocalSocket *socket, QObject *p) :
 		QObject(p),
 		ougUsers(&g.s.os) {
 	qlsSocket = socket;
+	qlsSocket->setParent(this);
 	connect(qlsSocket, SIGNAL(readyRead()), this, SLOT(readyRead()));
 
 	omMsg.omh.iLength = -1;

