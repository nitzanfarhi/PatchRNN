commit 3bd89007ab4243b36bc30f5fc4aa8b4f75ff8fc2
Author: Lai Jiangshan <laijs@cn.fujitsu.com>
Date:   Wed Jun 2 17:01:23 2010 +0800

    KVM: cleanup "*new.rmap" type
    
    The type of '*new.rmap' is not 'struct page *', fix it
    
    Signed-off-by: Lai Jiangshan <laijs@cn.fujitsu.com>
    Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com>

diff --git a/virt/kvm/kvm_main.c b/virt/kvm/kvm_main.c
index 4a71faa96dfd..78ed71ad6aa1 100644
--- a/virt/kvm/kvm_main.c
+++ b/virt/kvm/kvm_main.c
@@ -600,7 +600,7 @@ int __kvm_set_memory_region(struct kvm *kvm,
 	/* Allocate if a slot is being created */
 #ifndef CONFIG_S390
 	if (npages && !new.rmap) {
-		new.rmap = vmalloc(npages * sizeof(struct page *));
+		new.rmap = vmalloc(npages * sizeof(*new.rmap));
 
 		if (!new.rmap)
 			goto out_free;

