commit 898d8f9e41042e298613230bb0286e2df96ed019
Author: matyhtf <mikan.tenny@gmail.com>
Date:   Wed Dec 31 13:28:17 2014 +0800

    check the ssl_cert_file config.

diff --git a/src/network/Server.c b/src/network/Server.c
index da5888b2..561510b3 100644
--- a/src/network/Server.c
+++ b/src/network/Server.c
@@ -661,7 +661,6 @@ int swServer_free(swServer *serv)
         free(serv->ssl_cert_file);
         free(serv->ssl_key_file);
     }
-    swNotice("[Shutdown] Free SSL.");
 #endif
 
     //connection_list释放
@@ -939,6 +938,20 @@ int swServer_listen(swServer *serv, swReactor *reactor)
 			continue;
 		}
 
+		if (listen_host->ssl)
+		{
+		    if (!serv->ssl_cert_file)
+		    {
+		        swWarn("need to configure [server->ssl_cert_file].");
+		        return SW_ERR;
+		    }
+		    if (!serv->ssl_key_file)
+		    {
+		        swWarn("need to configure [server->ssl_key_file].");
+		        return SW_ERR;
+		    }
+		}
+
 		//TCP
 		sock = swSocket_listen(listen_host->type, listen_host->host, listen_host->port, serv->backlog);
 		if (sock < 0)
diff --git a/swoole_server.c b/swoole_server.c
index 6782b385..fcc8e279 100644
--- a/swoole_server.c
+++ b/swoole_server.c
@@ -962,7 +962,6 @@ PHP_FUNCTION(swoole_server_create)
     zval_ptr_dtor(&zres);
 }
 
-
 PHP_FUNCTION(swoole_server_set)
 {
     zval *zset = NULL;

