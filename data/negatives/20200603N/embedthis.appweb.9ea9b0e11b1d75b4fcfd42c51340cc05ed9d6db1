commit 9ea9b0e11b1d75b4fcfd42c51340cc05ed9d6db1
Author: Embedthis Software <dev@embedthis.com>
Date:   Fri Jun 21 11:14:20 2013 -0700

    Cleanup

diff --git a/src/modules/cgiHandler.c b/src/modules/cgiHandler.c
index 0457028d5..9dbf0dce6 100644
--- a/src/modules/cgiHandler.c
+++ b/src/modules/cgiHandler.c
@@ -111,13 +111,14 @@ static void closeCgi(HttpQueue *q)
     MprCmd  *cmd;
 
     mprTrace(5, "CGI: close");
-    cgi = q->queueData;
-    cmd = cgi->cmd;
-    if (cmd) {
-        mprSetCmdCallback(cmd, NULL, NULL);
-        mprDestroyCmd(cmd);
+    if ((cgi = q->queueData) != 0) {
+        cmd = cgi->cmd;
+        if (cmd) {
+            mprSetCmdCallback(cmd, NULL, NULL);
+            mprDestroyCmd(cmd);
+        }
+        httpMonitorEvent(q->conn, HTTP_COUNTER_ACTIVE_PROCESSES, -1);
     }
-    httpMonitorEvent(q->conn, HTTP_COUNTER_ACTIVE_PROCESSES, -1);
 }
 
 

