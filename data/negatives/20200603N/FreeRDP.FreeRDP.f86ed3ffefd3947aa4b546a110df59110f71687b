commit f86ed3ffefd3947aa4b546a110df59110f71687b
Author: Armin Novak <armin.novak@thincast.com>
Date:   Thu Jan 15 16:01:57 2015 +0100

    Fixed windows command line
    
    freerdp_detect_windows_style_command_line_syntax returns negative values
    in error but also in help and version case... oh boy

diff --git a/client/common/cmdline.c b/client/common/cmdline.c
index c1d24176c..58cb7782f 100644
--- a/client/common/cmdline.c
+++ b/client/common/cmdline.c
@@ -1081,8 +1081,9 @@ BOOL freerdp_client_detect_command_line(int argc, char** argv, DWORD* flags)
 		return compatibility;
 
 	/* Check, if this may be windows style syntax... */
-	if (windows_cli_count && (windows_cli_count >= posix_cli_count))
+	if (windows_cli_count && (windows_cli_count >= posix_cli_count) || (windows_cli_status <= COMMAND_LINE_STATUS_PRINT))
 	{
+		windows_cli_count = 1;
 		*flags = COMMAND_LINE_SEPARATOR_COLON;
 		*flags |= COMMAND_LINE_SIGIL_SLASH | COMMAND_LINE_SIGIL_PLUS_MINUS;
 	}

