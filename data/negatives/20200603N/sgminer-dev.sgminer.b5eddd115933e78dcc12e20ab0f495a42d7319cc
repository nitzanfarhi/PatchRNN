commit b5eddd115933e78dcc12e20ab0f495a42d7319cc
Author: Con Kolivas <kernel@kolivas.org>
Date:   Fri Nov 15 23:46:41 2013 +1100

    Don't run device restart code if the device is not enabled.

diff --git a/cgminer.c b/cgminer.c
index ca83be69..178c04b3 100644
--- a/cgminer.c
+++ b/cgminer.c
@@ -3689,6 +3689,8 @@ static void restart_threads(void)
 		cgpu = mining_thr[i]->cgpu;
 		if (unlikely(!cgpu))
 			continue;
+		if (cgpu->deven != DEV_ENABLED)
+			continue;
 		mining_thr[i]->work_restart = true;
 		flush_queue(cgpu);
 		cgpu->drv->flush_work(cgpu);

