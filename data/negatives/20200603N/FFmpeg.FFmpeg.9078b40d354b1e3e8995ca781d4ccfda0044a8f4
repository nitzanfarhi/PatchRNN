commit 9078b40d354b1e3e8995ca781d4ccfda0044a8f4
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Mon Sep 16 22:44:15 2013 +0200

    swresample: replace 2 av_free() by av_freep()
    
    avoids leaving stale pointers in memory
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libswresample/resample.c b/libswresample/resample.c
index fb9da7c354..8b1b6ca9af 100644
--- a/libswresample/resample.c
+++ b/libswresample/resample.c
@@ -256,7 +256,7 @@ static ResampleContext *resample_init(ResampleContext *c, int out_rate, int in_r
 
     return c;
 error:
-    av_free(c->filter_bank);
+    av_freep(&c->filter_bank);
     av_free(c);
     return NULL;
 }
diff --git a/libswresample/swresample.c b/libswresample/swresample.c
index cdfe5bfee5..b9a3c3d90e 100644
--- a/libswresample/swresample.c
+++ b/libswresample/swresample.c
@@ -468,7 +468,7 @@ int swri_realloc_audio(AudioData *a, int count){
         if(a->planar) memcpy(a->ch[i], old.ch[i], a->count*a->bps);
     }
     if(!a->planar) memcpy(a->ch[0], old.ch[0], a->count*a->ch_count*a->bps);
-    av_free(old.data);
+    av_freep(&old.data);
     a->count= count;
 
     return 1;

