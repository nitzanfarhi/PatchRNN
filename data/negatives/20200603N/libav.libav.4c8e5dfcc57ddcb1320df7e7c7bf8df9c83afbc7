commit 4c8e5dfcc57ddcb1320df7e7c7bf8df9c83afbc7
Author: Joakim Plate <elupus@ecce.se>
Date:   Fri Jul 25 04:10:32 2008 +0000

    Fix handling of old nuv files where an aspect of 1 actually means 4/3
    Patch by elupus (elupus ecce se)
    
    Originally committed as revision 14382 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/nuv.c b/libavformat/nuv.c
index c692cacf7..b76fe0cd6 100644
--- a/libavformat/nuv.c
+++ b/libavformat/nuv.c
@@ -137,6 +137,8 @@ static int nuv_header(AVFormatContext *s, AVFormatParameters *ap) {
     get_byte(pb); // 'P' == progressive, 'I' == interlaced
     url_fskip(pb, 3); // padding
     aspect = av_int2dbl(get_le64(pb));
+    if (aspect > 0.9999 && aspect < 1.0001)
+        aspect = 4.0 / 3.0;
     fps = av_int2dbl(get_le64(pb));
 
     // number of packets per stream type, -1 means unknown, e.g. streaming

