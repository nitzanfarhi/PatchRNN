commit f1640860f87b6580d937d4903cb2ad4fe9c6ecca
Author: Fabian MÃ¼ller <fabianmueller5@gmx.de>
Date:   Sun Sep 23 09:38:27 2012 +0000

    Fix the gui1 menu displaying the wrong help when the list got sorted.
    
    Avoid drawing the help when the menu is hidden.

diff --git a/src/widgets/menu.cpp b/src/widgets/menu.cpp
index 6655f63922..24e694bf0b 100644
--- a/src/widgets/menu.cpp
+++ b/src/widgets/menu.cpp
@@ -1181,6 +1181,8 @@ size_t menu::get_item_height(int) const
 
 void menu::process_help_string(int mousex, int mousey)
 {
+	if (hidden()) return;
+
 	const std::pair<int,int> loc(hit(mousex,mousey), hit_column(mousex));
 	if(loc == cur_help_) {
 		return;
@@ -1193,7 +1195,7 @@ void menu::process_help_string(int mousex, int mousey)
 			help_string_ = -1;
 		}
 		if(size_t(loc.first) < items_.size()) {
-			const std::vector<std::string>& row = items_[loc.first].help;
+			const std::vector<std::string>& row = items_[item_pos_[loc.first]].help;
 			if(size_t(loc.second) < row.size()) {
 				const std::string& help = row[loc.second];
 				if(help.empty() == false) {

