commit c208f7d5f5c45a9f296cdd75d00c0623e6414365
Author: Bogdan-Andrei Iancu <bogdan@voice-system.ro>
Date:   Mon Dec 19 20:00:54 2005 +0000

    - the Route headers paramter's string checked by check_route_param() include
     also the leading ";" -> ";param1=val1;param2=val2" instead of
     "param1=val1;param2=val2" - all parameter names as consistent as format
     and can be much easier checked via regexp - credits go to Juha Heinanen
     for tracing the issue
    
    
    git-svn-id: https://openser.svn.sourceforge.net/svnroot/openser/trunk@482 689a6050-402a-0410-94f2-e92a70836424

diff --git a/modules_k/rr/loose.c b/modules_k/rr/loose.c
index 8202665f6..d0bf702e8 100644
--- a/modules_k/rr/loose.c
+++ b/modules_k/rr/loose.c
@@ -559,6 +559,9 @@ static inline int after_strict(struct sip_msg* _m)
 	/* set the hooks for the params -bogdan */
 	routed_msg_id = _m->id;
 	routed_params = puri.params;
+	/* include also the first ';' */
+	routed_params.s--;
+	routed_params.len++;
 	/* run RR callbacks -bogdan */
 	run_rr_callbacks( _m, &routed_params );
 
@@ -687,6 +690,9 @@ static inline int after_loose(struct sip_msg* _m, int preloaded)
 		/* set the hooks for the params -bogdan */
 		routed_msg_id = _m->id;
 		routed_params = puri.params;
+		/* include also the first ';' */
+		routed_params.s--;
+		routed_params.len++;
 		/* run RR callbacks -bogdan */
 		run_rr_callbacks( _m, &routed_params );
 

