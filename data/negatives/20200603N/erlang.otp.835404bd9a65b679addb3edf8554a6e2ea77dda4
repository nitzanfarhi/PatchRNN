commit 835404bd9a65b679addb3edf8554a6e2ea77dda4
Author: Rickard Green <rickard@erlang.org>
Date:   Mon Nov 19 18:00:47 2012 +0100

    Fix bad assert

diff --git a/erts/emulator/beam/erl_port_task.c b/erts/emulator/beam/erl_port_task.c
index 2c26e1fd45..b6bc59a1c3 100644
--- a/erts/emulator/beam/erl_port_task.c
+++ b/erts/emulator/beam/erl_port_task.c
@@ -541,7 +541,8 @@ erts_port_task_schedule(Eterm id,
 #endif
     }
 
-    ASSERT(!enq_port || !(runq->flags & ERTS_RUNQ_FLG_SUSPENDED));
+    ASSERT(!enq_port
+	   || !(ERTS_RUNQ_FLGS_GET_NOB(runq) & ERTS_RUNQ_FLG_SUSPENDED));
 
     if (!pp->sched.taskq)
 	pp->sched.taskq = port_taskq_init(port_taskq_alloc(), pp);

