commit 258ac46f3a24fbc811eb8cab63a91f445b65acbb
Author: Alberto Lerner <alerner@10gen.com>
Date:   Fri Jun 4 11:34:44 2010 -0400

    SERVER-950 if there's a maximum size for the shard, pick it up

diff --git a/s/shard.cpp b/s/shard.cpp
index 456c078586..0af4f0f401 100644
--- a/s/shard.cpp
+++ b/s/shard.cpp
@@ -110,6 +110,7 @@ namespace mongo {
         uassert( 13128 , (string)"can't find shard for: " + ident , s.ok() );
         _name = s._name;
         _addr = s._addr;
+        _maxSize = s._maxSize;
     }
     
     void Shard::getAllShards( vector<Shard>& all ){
diff --git a/s/shard.h b/s/shard.h
index 3f075c21fb..fb087bf4c5 100644
--- a/s/shard.h
+++ b/s/shard.h
@@ -29,10 +29,10 @@ namespace mongo {
     class Shard {
     public:
         Shard()
-            : _name(""),_addr(""){
+            : _name(""), _addr(""), _maxSize(0){
         }
-        Shard( const string& name , const string& addr )
-            : _name(name), _addr( addr ){
+        Shard( const string& name , const string& addr, unsigned long maxSize = 0)
+            : _name(name), _addr( addr ), _maxSize( maxSize ){
         }
 
         Shard( const string& ident ){
@@ -40,11 +40,11 @@ namespace mongo {
         }
 
         Shard( const Shard& other )
-            : _name( other._name ) , _addr( other._addr ){
+            : _name( other._name ) , _addr( other._addr ), _maxSize( other._maxSize ){
         }
 
         Shard( const Shard* other )
-            : _name( other->_name ) ,_addr( other->_addr ){
+            : _name( other->_name ) ,_addr( other->_addr ), _maxSize( other->_maxSize ){
         }
         
         static Shard make( const string& ident ){
@@ -70,6 +70,10 @@ namespace mongo {
             return _addr;
         }
 
+        unsigned long getMaxSize() const {
+            return _maxSize;
+        }
+
         string toString() const {
             return _name + ":" + _addr;
         }
@@ -128,8 +132,9 @@ namespace mongo {
         static Shard EMPTY;
 
     private:
-        string _name;
-        string _addr;
+        string        _name;
+        string        _addr;
+        unsigned long _maxSize;  // in MBytes, 0 is unlimited 
     };
 
     class ShardStatus {

