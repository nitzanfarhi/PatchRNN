commit 08e14cdc26e1fd565e2b5b11c89cca489b55a41c
Author: sledgehammer999 <hammered999@gmail.com>
Date:   Mon Jul 14 22:00:40 2014 +0300

    Fix possible crashes. Closes #1814.

diff --git a/src/addnewtorrentdialog.cpp b/src/addnewtorrentdialog.cpp
index d98a9d375..b198dfda5 100644
--- a/src/addnewtorrentdialog.cpp
+++ b/src/addnewtorrentdialog.cpp
@@ -46,7 +46,6 @@
 #include <QFile>
 #include <QUrl>
 #include <QMenu>
-#include <QTimer>
 #include <QFileDialog>
 #include <libtorrent/version.hpp>
 
@@ -378,6 +377,8 @@ void AddNewTorrentDialog::renameSelectedFile()
   if (selectedIndexes.size() != 1)
     return;
   const QModelIndex &index = selectedIndexes.first();
+  if (!index.isValid())
+    return;
   // Ask for new name
   bool ok;
   const QString new_name_last = AutoExpandableDialog::getText(this, tr("Rename the file"),
diff --git a/src/properties/propertieswidget.cpp b/src/properties/propertieswidget.cpp
index 9ecc836e9..3a0e6acf8 100644
--- a/src/properties/propertieswidget.cpp
+++ b/src/properties/propertieswidget.cpp
@@ -536,6 +536,8 @@ void PropertiesWidget::renameSelectedFile() {
   if (selectedIndexes.size() != 1)
     return;
   const QModelIndex index = selectedIndexes.first();
+  if (!index.isValid())
+    return;
   // Ask for new name
   bool ok;
   QString new_name_last = AutoExpandableDialog::getText(this, tr("Rename the file"),

