commit 751b14e3a20b21ac5011120ebd7129c9b33a7056
Author: Andreas Ericsson <ae@op5.se>
Date:   Wed Sep 4 13:33:18 2013 +0200

    core: Print total number of squeue entries when dumping event stats
    
    It's perhaps the most important stat of all, so let's make sure we
    print it.
    
    Signed-off-by: Andreas Ericsson <ae@op5.se>

diff --git a/base/events.c b/base/events.c
index a1173191..3746daba 100644
--- a/base/events.c
+++ b/base/events.c
@@ -45,8 +45,7 @@ int dump_event_stats(int sd)
 	unsigned int i;
 
 	for (i = 0; i < ARRAY_SIZE(event_count); i++) {
-		nsock_printf(sd, "%s=%u%c", EVENT_TYPE_STR(i), event_count[i],
-		             i == EVENT_USER_FUNCTION ? '\0' : ';');
+		nsock_printf(sd, "%s=%u;", EVENT_TYPE_STR(i), event_count[i]);
 		/*
 		 * VERSIONFIX: Make EVENT_SLEEP and EVENT_USER_FUNCTION
 		 * appear in linear order in include/nagios.h when we go
@@ -55,6 +54,7 @@ int dump_event_stats(int sd)
 		if (i == 16)
 			i = 97;
 		}
+	nsock_printf_nul(sd, "SQUEUE_ENTRIES=%u", squeue_size(nagios_squeue));
 
 	return OK;
 	}

