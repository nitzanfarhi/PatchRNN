commit 0b216bdc8c7a74990589d031b6a7f08ce945d7ba
Author: Yehuda Sadeh <yehuda@hq.newdream.net>
Date:   Fri Aug 19 12:33:08 2011 -0700

    rgw: was missing return value

diff --git a/src/rgw/rgw_rados.cc b/src/rgw/rgw_rados.cc
index 3945dc4c4f..021b08f0d6 100644
--- a/src/rgw/rgw_rados.cc
+++ b/src/rgw/rgw_rados.cc
@@ -923,6 +923,8 @@ int RGWRados::prepare_atomic_for_write(RGWRadosCtx *rctx, rgw_obj& obj, librados
   do {
     r = prepare_atomic_for_write_impl(rctx, obj, io_ctx, actual_obj, op, pstate);
   } while (r == -ECANCELED);
+
+  return r;
 }
 
 /**

