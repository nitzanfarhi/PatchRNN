commit 9d0326831ae84da12084836ef4889782e9345669
Author: chrisisonwildcode <chrisisonwildcode@gmail.com>
Date:   Sun Jan 4 19:19:36 2015 +1000

    See if we can get away from the -Warray-bounds warnings for internal_midi.c by checking max values where they are set.

diff --git a/src/internal_midi.c b/src/internal_midi.c
index 0c066e7..2ca4647 100644
--- a/src/internal_midi.c
+++ b/src/internal_midi.c
@@ -771,6 +771,8 @@ void _WM_do_control_channel_volume(struct _mdi *mdi,
                                       struct _event_data *data) {
 	uint8_t ch = data->channel;
 	MIDI_EVENT_DEBUG(__FUNCTION__,ch, data->data);
+
+    if (data->data > 0x7f) data->data = 0x7f;
     
 	mdi->channel[ch].volume = data->data;
     _WM_AdjustChannelVolumes(mdi, ch);
@@ -780,6 +782,8 @@ void _WM_do_control_channel_balance(struct _mdi *mdi,
                                        struct _event_data *data) {
 	uint8_t ch = data->channel;
 	MIDI_EVENT_DEBUG(__FUNCTION__,ch, data->data);
+
+    if (data->data > 0x7f) data->data = 0x7f;
     
 	mdi->channel[ch].balance = data->data;
     _WM_AdjustChannelVolumes(mdi, ch);
@@ -789,6 +793,8 @@ void _WM_do_control_channel_pan(struct _mdi *mdi, struct _event_data *data) {
 	uint8_t ch = data->channel;
 	MIDI_EVENT_DEBUG(__FUNCTION__,ch, data->data);
     
+    if (data->data > 0x7f) data->data = 0x7f;
+    
 	mdi->channel[ch].pan = data->data;
     _WM_AdjustChannelVolumes(mdi, ch);
 }
@@ -798,6 +804,8 @@ void _WM_do_control_channel_expression(struct _mdi *mdi,
 	uint8_t ch = data->channel;
 	MIDI_EVENT_DEBUG(__FUNCTION__,ch, data->data);
     
+    if (data->data > 0x7f) data->data = 0x7f;
+    
 	mdi->channel[ch].expression = data->data;
     _WM_AdjustChannelVolumes(mdi, ch);
 }
@@ -1025,7 +1033,9 @@ void _WM_do_channel_pressure(struct _mdi *mdi, struct _event_data *data) {
 	uint8_t ch = data->channel;
     
 	MIDI_EVENT_DEBUG(__FUNCTION__,ch, data->data);
-    
+
+    if (data->data > 0x7f) data->data = 0x7f;
+
 	mdi->channel[ch].pressure = data->data;
     _WM_AdjustChannelVolumes(mdi, ch);
 }

