commit 5b78e4c025c4fb5bf66ecab5cbb52536d5e29d67
Author: Antony Dovgal <tony2001@php.net>
Date:   Thu Feb 10 20:22:07 2005 +0000

    hm..
    fix #28324 _properly_

diff --git a/ext/session/session.c b/ext/session/session.c
index 589e060301..9b3552e44d 100644
--- a/ext/session/session.c
+++ b/ext/session/session.c
@@ -537,8 +537,11 @@ static void php_session_track_init(TSRMLS_D)
 	
 	if (PG(register_long_arrays)) {
 		ZEND_SET_GLOBAL_VAR_WITH_LENGTH("HTTP_SESSION_VARS", sizeof("HTTP_SESSION_VARS"), PS(http_session_vars), 2, 1);
+		ZEND_SET_GLOBAL_VAR_WITH_LENGTH("_SESSION", sizeof("_SESSION"), PS(http_session_vars), 2, 1);
+	}
+	else {
+		ZEND_SET_GLOBAL_VAR_WITH_LENGTH("_SESSION", sizeof("_SESSION"), PS(http_session_vars), 1, 1);
 	}
-	ZEND_SET_GLOBAL_VAR_WITH_LENGTH("_SESSION", sizeof("_SESSION"), PS(http_session_vars), 2, 1);
 }
 
 static char *php_session_encode(int *newlen TSRMLS_DC)

