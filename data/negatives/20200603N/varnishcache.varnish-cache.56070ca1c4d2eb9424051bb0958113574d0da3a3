commit 56070ca1c4d2eb9424051bb0958113574d0da3a3
Author: Poul-Henning Kamp <phk@phk.freebsd.dk>
Date:   Tue Nov 9 09:05:27 2010 +0000

    Ok, make code and error message somewhat consistent...
    
    
    
    git-svn-id: http://www.varnish-cache.org/svn/trunk/varnish-cache@5525 d4fa192b-c00b-0410-8231-f00ffab90ce4

diff --git a/bin/varnishd/varnishd.c b/bin/varnishd/varnishd.c
index 208bed7ac..2b9dbe346 100644
--- a/bin/varnishd/varnishd.c
+++ b/bin/varnishd/varnishd.c
@@ -539,7 +539,9 @@ main(int argc, char * const *argv)
 	if (b_arg != NULL && f_arg != NULL) {
 		fprintf(stderr, "Only one of -b or -f can be specified\n");
 		usage();
-	} else if (S_arg == NULL && T_arg == NULL) {
+	}
+	if (S_arg == NULL && T_arg == NULL && d_flag == 0 && b_arg == NULL &&
+	    f_arg == NULL) {
 		fprintf(stderr,
 		    "At least one of -d, -b, -f, -S or -T must be specified\n");
 		usage();

