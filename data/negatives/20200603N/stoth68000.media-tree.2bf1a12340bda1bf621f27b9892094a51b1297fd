commit 2bf1a12340bda1bf621f27b9892094a51b1297fd
Author: Namhyung Kim <namhyung@kernel.org>
Date:   Thu Mar 20 09:10:29 2014 +0900

    perf tools: Do not auto-remove Children column if --fields given
    
    Depending on the configuration perf inserts/removes the Children
    column in the output automatically.  But it might not be what user
    wants if [s]he give --fields option explicitly.
    
    Signed-off-by: Namhyung Kim <namhyung@kernel.org>
    Tested-by: Rodrigo Campos <rodrigo@sdfg.com.ar>
    Cc: Arun Sharma <asharma@fb.com>
    Cc: Frederic Weisbecker <fweisbec@gmail.com>
    Link: http://lkml.kernel.org/r/1401335910-16832-18-git-send-email-namhyung@kernel.org
    Signed-off-by: Jiri Olsa <jolsa@kernel.org>

diff --git a/tools/perf/ui/hist.c b/tools/perf/ui/hist.c
index 8ca638754acc..498adb23c02e 100644
--- a/tools/perf/ui/hist.c
+++ b/tools/perf/ui/hist.c
@@ -513,6 +513,9 @@ void perf_hpp__column_disable(unsigned col)
 
 void perf_hpp__cancel_cumulate(void)
 {
+	if (field_order)
+		return;
+
 	perf_hpp__column_disable(PERF_HPP__OVERHEAD_ACC);
 	perf_hpp__format[PERF_HPP__OVERHEAD].header = hpp__header_overhead;
 }

