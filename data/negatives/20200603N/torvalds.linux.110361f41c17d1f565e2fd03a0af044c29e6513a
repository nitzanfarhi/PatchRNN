commit 110361f41c17d1f565e2fd03a0af044c29e6513a
Author: Dan Carpenter <dan.carpenter@oracle.com>
Date:   Mon Apr 18 11:44:49 2016 +0300

    udp: fix if statement in SIOCINQ ioctl
    
    We deleted a line of code and accidentally made the "return put_user()"
    part of the if statement when it's supposed to be unconditional.
    
    Fixes: 9f9a45beaa96 ('udp: do not expect udp headers on ioctl SIOCINQ')
    Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
    Acked-by: Eric Dumazet <edumazet@google.com>
    Acked-by: Willem de Bruijn <willemb@google.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/ipv4/udp.c b/net/ipv4/udp.c
index f1863136d3e4..37e09c3dd046 100644
--- a/net/ipv4/udp.c
+++ b/net/ipv4/udp.c
@@ -1276,12 +1276,6 @@ int udp_ioctl(struct sock *sk, int cmd, unsigned long arg)
 	{
 		unsigned int amount = first_packet_length(sk);
 
-		if (amount)
-			/*
-			 * We will only return the amount
-			 * of this packet since that is all
-			 * that will be read.
-			 */
 		return put_user(amount, (int __user *)arg);
 	}
 

