commit 9f5ddefdc979d7b71aa4d3d7cc456c76fee80fda
Author: Vladimir Murzin <vladimir.murzin@arm.com>
Date:   Fri Jun 12 14:59:19 2015 +0100

    fbdev: propagate result of fb_videomode_from_videomode()
    
    fb_videomode_from_videomode() may fail, but of_get_fb_videomode()
    silently covers this fact. Instead, trow the error code to the
    caller.
    
    Signed-off-by: Vladimir Murzin <vladimir.murzin@arm.com>
    Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>

diff --git a/drivers/video/fbdev/core/fbmon.c b/drivers/video/fbdev/core/fbmon.c
index 01ef1b953390..d787533d9c8b 100644
--- a/drivers/video/fbdev/core/fbmon.c
+++ b/drivers/video/fbdev/core/fbmon.c
@@ -1475,7 +1475,9 @@ int of_get_fb_videomode(struct device_node *np, struct fb_videomode *fb,
 	if (ret)
 		return ret;
 
-	fb_videomode_from_videomode(&vm, fb);
+	ret = fb_videomode_from_videomode(&vm, fb);
+	if (ret)
+		return ret;
 
 	pr_debug("%s: got %dx%d display mode from %s\n",
 		of_node_full_name(np), vm.hactive, vm.vactive, np->name);

