commit 1bdd6c8c670292ec996fdb6d5204599e56569e70
Author: Elizabeth Chan <echan@lei.ac>
Date:   Wed Dec 4 19:53:45 2013 -0700

    Merge fix for TRQ-2378: MOM crash on obit handling.

diff --git a/src/lib/Libifl/tcp_dis.c b/src/lib/Libifl/tcp_dis.c
index 21e716935..2c1a13bfc 100644
--- a/src/lib/Libifl/tcp_dis.c
+++ b/src/lib/Libifl/tcp_dis.c
@@ -513,6 +513,14 @@ int tcp_puts(
   /*        performance (how?) */
 
   tp = &chan->writebuf;
+  if (tp->tdis_bufsize == 0)
+   {
+   snprintf(log_buf,sizeof(log_buf),
+     "write buffer's tdis_bufsize was unexpectely found with a value of 0");
+   log_err(-1, __func__, log_buf);
+   return(-1);
+   }
+
   if ((tp->tdis_thebuf + tp->tdis_bufsize - tp->tdis_leadp) < (ssize_t)ct)
     {
     /* not enough room, reallocate the buffer */

