commit d3c54aa2214f0179429f4f56626cac08396c574c
Author: Artur Bergman <sky@crucially.net>
Date:   Tue Sep 2 17:54:33 2008 +0000

    If you attach gdb to a running varnish child, then when you tell it to continue it will abort if assertions are enabled due to poll returning with EINTR.
    
    This just re-enters the loop.
    
    
    
    git-svn-id: http://www.varnish-cache.org/svn/trunk/varnish-cache@3155 d4fa192b-c00b-0410-8231-f00ffab90ce4

diff --git a/bin/varnishd/cache_cli.c b/bin/varnishd/cache_cli.c
index f437edb73..7bb8ec8ce 100644
--- a/bin/varnishd/cache_cli.c
+++ b/bin/varnishd/cache_cli.c
@@ -153,6 +153,8 @@ CLI_Run(void)
 		pfd[0].fd = heritage.cli_in;
 		pfd[0].events = POLLIN;
 		i = poll(pfd, 1, -1);
+		if (i == -1 && errno == EINTR)
+			continue;
 		assert(i == 1);
 		if (pfd[0].revents & POLLHUP) {
 			fprintf(stderr,

