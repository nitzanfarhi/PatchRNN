commit 86002a83d37287308543adfe44f3d5f2f4bdd3a5
Author: Sebastian Hahn <sebastian@torproject.org>
Date:   Wed Apr 1 21:07:46 2015 +0200

    Bridges are always dirs
    
    This check was accidentally deleted in 05f7336624d6a47b3cf0fe82.

diff --git a/src/or/entrynodes.c b/src/or/entrynodes.c
index a9a92e224..9663f3400 100644
--- a/src/or/entrynodes.c
+++ b/src/or/entrynodes.c
@@ -398,6 +398,9 @@ add_an_entry_guard(const node_t *chosen, int reset_status, int prepend,
         entry->can_retry = 1;
       }
       entry->is_dir_cache = node_is_dir(node);
+      if (get_options()->UseBridges && node_is_a_configured_bridge(node))
+        entry->is_dir_cache = 1;
+
       return NULL;
     }
   } else if (!for_directory) {

