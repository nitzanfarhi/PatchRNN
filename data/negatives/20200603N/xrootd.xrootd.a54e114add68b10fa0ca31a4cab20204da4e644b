commit a54e114add68b10fa0ca31a4cab20204da4e644b
Author: Matevz Tadel <mtadel@ucsd.edu>
Date:   Thu Dec 17 16:46:46 2015 -0800

    Add startup protection for ReadV, too. It was already there for Read.

diff --git a/src/XrdFileCache/XrdFileCachePrefetch.cc b/src/XrdFileCache/XrdFileCachePrefetch.cc
index c21b20c3..9d4bed9a 100644
--- a/src/XrdFileCache/XrdFileCachePrefetch.cc
+++ b/src/XrdFileCache/XrdFileCachePrefetch.cc
@@ -871,6 +871,19 @@ ssize_t Prefetch::ReadInBlocks(char *buff, off_t off, size_t size)
 
 int Prefetch::ReadV (const XrdOucIOVec *readV, int n)
 {
+   {
+      XrdSysCondVarHelper monitor(m_stateCond);
+
+      // AMT check if this can be done once during initalization
+      if (m_failed) return m_input.ReadV(readV, n);
+
+      if ( ! m_started)
+      {
+         m_stateCond.Wait();
+         if (m_failed) return 0;
+      }
+   }
+
    // check if read sizes are big enough to cache
 
    XrdCl::XRootDStatus Status;

