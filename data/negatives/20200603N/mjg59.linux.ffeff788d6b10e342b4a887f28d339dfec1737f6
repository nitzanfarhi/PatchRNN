commit ffeff788d6b10e342b4a887f28d339dfec1737f6
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Wed Nov 2 16:24:32 2005 -0800

    [PATCH] pci: store PCI_INTERRUPT_PIN in pci_dev
    
    Store the value of the INTERRUPT_PIN in the pci_dev structure
    so that it can be retrieved later.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/pci/probe.c b/drivers/pci/probe.c
index fce2cb2112d8..2f82e63323f3 100644
--- a/drivers/pci/probe.c
+++ b/drivers/pci/probe.c
@@ -571,6 +571,7 @@ static void pci_read_irq(struct pci_dev *dev)
 	unsigned char irq;
 
 	pci_read_config_byte(dev, PCI_INTERRUPT_PIN, &irq);
+	dev->pin = irq;
 	if (irq)
 		pci_read_config_byte(dev, PCI_INTERRUPT_LINE, &irq);
 	dev->irq = irq;
diff --git a/include/linux/pci.h b/include/linux/pci.h
index de690ca73d58..b32f70fe2dbd 100644
--- a/include/linux/pci.h
+++ b/include/linux/pci.h
@@ -98,6 +98,7 @@ struct pci_dev {
 	unsigned int	class;		/* 3 bytes: (base,sub,prog-if) */
 	u8		hdr_type;	/* PCI header type (`multi' flag masked out) */
 	u8		rom_base_reg;	/* which config register controls the ROM */
+	u8		pin;  		/* which interrupt pin this device uses */
 
 	struct pci_driver *driver;	/* which driver has allocated this device */
 	u64		dma_mask;	/* Mask of the bits of bus address this

