commit b2953f1a84eae63e274b461e35b772449d1415a0
Author: Hongli Lai (Phusion) <hongli@phusion.nl>
Date:   Fri Nov 24 16:21:55 2017 +0100

    AdminPanelConnector: fix reporting of log_target global config
    
    The log_target format changed as of 218c26942f0ef6d, but the
    AdminPanelConnector's modifyLogTarget() wasn't properly updated
    accordingly so that it erroneously reported /dev/stderr as the
    log target.

diff --git a/src/agent/Core/AdminPanelConnector.h b/src/agent/Core/AdminPanelConnector.h
index 2e24c8b1c..b40c90015 100644
--- a/src/agent/Core/AdminPanelConnector.h
+++ b/src/agent/Core/AdminPanelConnector.h
@@ -283,10 +283,12 @@ private:
 		if (!subconfig.isMember(key) || subconfig[key].isNull()) {
 			return;
 		}
-		if (subconfig[key].isMember("stderr")) {
-			subconfig[key] = "/dev/stderr";
-		} else {
+		if (subconfig[key].isMember("path")) {
 			subconfig[key] = subconfig[key]["path"];
+		} else {
+			assert(subconfig[key].isMember("stderr"));
+			assert(subconfig[key]["stderr"].asBool());
+			subconfig[key] = "/dev/stderr";
 		}
 	}
 

