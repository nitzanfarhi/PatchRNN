commit 19a9846f3d882e52b8642787a1e96570116af031
Author: Laurent Aimar <fenrir@videolan.org>
Date:   Wed Mar 3 19:54:12 2010 +0000

    Fixed DXVA2 H264 hwaccel compilation.
    
    Originally committed as revision 22180 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/dxva2_h264.c b/libavcodec/dxva2_h264.c
index a20670be1..bf66f1e01 100644
--- a/libavcodec/dxva2_h264.c
+++ b/libavcodec/dxva2_h264.c
@@ -220,11 +220,11 @@ static void fill_slice_long(AVCodecContext *avctx, DXVA_Slice_H264_Long *slice,
                 for (plane = 0; plane < 3; plane++) {
                     int w, o;
                     if (plane == 0 && h->luma_weight_flag[list]) {
-                        w = h->luma_weight[list][i];
-                        o = h->luma_offset[list][i];
+                        w = h->luma_weight[list][i][0];
+                        o = h->luma_weight[list][i][1];
                     } else if (plane >= 1 && h->chroma_weight_flag[list]) {
-                        w = h->chroma_weight[list][i][plane-1];
-                        o = h->chroma_offset[list][i][plane-1];
+                        w = h->chroma_weight[list][i][plane-1][0];
+                        o = h->chroma_weight[list][i][plane-1][1];
                     } else {
                         w = 1 << (plane == 0 ? h->luma_log2_weight_denom :
                                                h->chroma_log2_weight_denom);

