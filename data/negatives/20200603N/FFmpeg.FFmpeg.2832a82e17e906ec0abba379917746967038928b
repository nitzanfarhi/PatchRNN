commit 2832a82e17e906ec0abba379917746967038928b
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Wed Sep 11 13:16:03 2013 +0200

    avformat/gxfenc: Clear nb_fields on array deallocation
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavformat/gxfenc.c b/libavformat/gxfenc.c
index 5e7b281c29..5fa510057d 100644
--- a/libavformat/gxfenc.c
+++ b/libavformat/gxfenc.c
@@ -968,6 +968,7 @@ static int gxf_write_packet(AVFormatContext *s, AVPacket *pkt)
                                          gxf->flt_entries_nb + 500,
                                          sizeof(*gxf->flt_entries))) < 0) {
                 gxf->flt_entries_nb = 0;
+                gxf->nb_fields = 0;
                 av_log(s, AV_LOG_ERROR, "could not reallocate flt entries\n");
                 return err;
             }

