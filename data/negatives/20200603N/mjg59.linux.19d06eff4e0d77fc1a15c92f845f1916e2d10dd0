commit 19d06eff4e0d77fc1a15c92f845f1916e2d10dd0
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Tue Mar 4 14:28:48 2008 -0800

    sm501fb: set transp.offset to 0 in 8bpp and 16bpp modes
    
    Even though it may not be strictly necessary transp.offset should probably be
    0 when alpha channel is not available.
    
    Signed-off-by: Ville Syrjala <syrjala@sci.fi>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/video/sm501fb.c b/drivers/video/sm501fb.c
index 3a98d5a86af1..f49287c88abe 100644
--- a/drivers/video/sm501fb.c
+++ b/drivers/video/sm501fb.c
@@ -281,6 +281,7 @@ static int sm501fb_check_var(struct fb_var_screeninfo *var,
 		var->blue.length	= var->bits_per_pixel;
 		var->blue.offset	= 0;
 		var->transp.length	= 0;
+		var->transp.offset	= 0;
 
 		break;
 
@@ -294,6 +295,7 @@ static int sm501fb_check_var(struct fb_var_screeninfo *var,
 			var->green.offset	= 5;
 			var->blue.offset	= 0;
 		}
+		var->transp.offset	= 0;
 
 		var->red.length		= 5;
 		var->green.length	= 6;

