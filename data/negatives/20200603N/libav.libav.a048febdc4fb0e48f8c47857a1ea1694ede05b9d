commit a048febdc4fb0e48f8c47857a1ea1694ede05b9d
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sun Mar 2 23:11:36 2008 +0000

    subtitles (codec tag tables still missing ...)
    
    Originally committed as revision 12292 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/nutdec.c b/libavformat/nutdec.c
index e072e7ed7..e584ac521 100644
--- a/libavformat/nutdec.c
+++ b/libavformat/nutdec.c
@@ -325,8 +325,11 @@ static int decode_stream_header(NUTContext *nut){
                 av_log(s, AV_LOG_ERROR, "Unknown codec?!\n");
             break;
         case 2:
-//            st->codec->codec_type = CODEC_TYPE_TEXT;
-//            break;
+            st->codec->codec_type = CODEC_TYPE_SUBTITLE;
+//            st->codec->codec_id = codec_get_id(codec_wav_tags, tmp); FIXME
+            if (st->codec->codec_id == CODEC_ID_NONE)
+                av_log(s, AV_LOG_ERROR, "Unknown codec?!\n");
+            break;
         case 3:
             st->codec->codec_type = CODEC_TYPE_DATA;
             break;
diff --git a/libavformat/nutenc.c b/libavformat/nutenc.c
index 5c0975c28..7ed02573a 100644
--- a/libavformat/nutenc.c
+++ b/libavformat/nutenc.c
@@ -394,7 +394,7 @@ static int write_streamheader(NUTContext *nut, ByteIOContext *bc, AVCodecContext
     switch(codec->codec_type){
     case CODEC_TYPE_VIDEO: put_v(bc, 0); break;
     case CODEC_TYPE_AUDIO: put_v(bc, 1); break;
-//    case CODEC_TYPE_TEXT : put_v(bc, 2); break;
+    case CODEC_TYPE_SUBTITLE: put_v(bc, 2); break;
     default              : put_v(bc, 3); break;
     }
     put_v(bc, 4);

