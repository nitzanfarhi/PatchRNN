commit 8bd9bca3c1a214350e2f2f1e2fd493ed24c06f7e
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Sun Jun 21 20:26:59 2009 +0200

    sound: fix check for return value in snd_pcm_hw_refine
    
    'params' is a pointer and looking at the code this probably should be a check
    for ioctl return value.
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

diff --git a/sound/core/pcm_native.c b/sound/core/pcm_native.c
index 84da3ba17c86..ac2150e0670d 100644
--- a/sound/core/pcm_native.c
+++ b/sound/core/pcm_native.c
@@ -320,7 +320,7 @@ int snd_pcm_hw_refine(struct snd_pcm_substream *substream,
                     snd_mask_max(&params->masks[SNDRV_PCM_HW_PARAM_CHANNELS])) {
 			changed = substream->ops->ioctl(substream,
 					SNDRV_PCM_IOCTL1_FIFO_SIZE, params);
-			if (params < 0)
+			if (changed < 0)
 				return changed;
 		}
 	}

