commit 9f29f6de56462a363d3cc1d5f000961d622c5888
Author: Klaus-Dieter Wacket <kdwacker@de.ibm.com>
Date:   Tue May 19 21:38:41 2009 +0000

    qeth: Clear SBALF15 in any case for output buffers.
    
    Function qeth_clear_output_buffer for HiperSockets may not clear
    all 16 SBALEs, but only the used ones. The error flag in SBALF15
    has to be cleared in any case.
    
    Signed-off-by: Klaus-Dieter Wacker <kdwacker@de.ibm.com>
    Signed-off-by: Frank Blaschka <frank.blaschka@de.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/s390/net/qeth_core_main.c b/drivers/s390/net/qeth_core_main.c
index 63c9c05d6147..2994aa1ed466 100644
--- a/drivers/s390/net/qeth_core_main.c
+++ b/drivers/s390/net/qeth_core_main.c
@@ -952,6 +952,7 @@ static void qeth_clear_output_buffer(struct qeth_qdio_out_q *queue,
 		buf->buffer->element[i].addr = NULL;
 		buf->buffer->element[i].flags = 0;
 	}
+	buf->buffer->element[15].flags = 0;
 	buf->next_element_to_fill = 0;
 	atomic_set(&buf->state, QETH_QDIO_BUF_EMPTY);
 }

