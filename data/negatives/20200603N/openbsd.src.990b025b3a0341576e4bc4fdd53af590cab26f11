commit 990b025b3a0341576e4bc4fdd53af590cab26f11
Author: ratchov <ratchov@openbsd.org>
Date:   Sat Apr 24 14:13:34 2010 +0000

    when probing an encoding of a audio(4) device, don't forget to
    set record precision.

diff --git a/lib/libsndio/sun.c b/lib/libsndio/sun.c
index 10ade3d1388..c59faba3f8a 100644
--- a/lib/libsndio/sun.c
+++ b/lib/libsndio/sun.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: sun.c,v 1.30 2010/04/24 06:15:54 ratchov Exp $	*/
+/*	$OpenBSD: sun.c,v 1.31 2010/04/24 14:13:34 ratchov Exp $	*/
 /*
  * Copyright (c) 2008 Alexandre Ratchov <alex@caoua.org>
  *
@@ -171,6 +171,7 @@ sun_tryinfo(struct sun_hdl *hdl, struct sio_enc *enc,
 			aui.record.encoding = AUDIO_ENCODING_ULINEAR_BE;
 		}
 		aui.play.precision = enc->bits;
+		aui.record.precision = enc->bits;
 	}
 	if (pchan)
 		aui.play.channels = pchan;

