commit 5a8ac9d28dae5330c70562c7d7785f5104059c17
Author: Am√©rico Wang <xiyou.wangcong@gmail.com>
Date:   Fri Mar 13 15:56:58 2009 +0800

    x86: ptrace, bts: fix an unreachable statement
    
    Commit c2724775ce57c98b8af9694857b941dc61056516 put a statement
    after return, which makes that statement unreachable.
    
    Move that statement before return.
    
    Signed-off-by: WANG Cong <xiyou.wangcong@gmail.com>
    Cc: Roland McGrath <roland@redhat.com>
    Cc: Markus Metzger <markus.t.metzger@intel.com>
    LKML-Reference: <20090313075622.GB8933@hack>
    Cc: <stable@kernel.org> # .29 only
    Signed-off-by: Ingo Molnar <mingo@elte.hu>

diff --git a/arch/x86/kernel/ptrace.c b/arch/x86/kernel/ptrace.c
index 3d9672e59c16..19378715f415 100644
--- a/arch/x86/kernel/ptrace.c
+++ b/arch/x86/kernel/ptrace.c
@@ -685,9 +685,8 @@ static int ptrace_bts_config(struct task_struct *child,
 		if (!cfg.signal)
 			return -EINVAL;
 
-		return -EOPNOTSUPP;
-
 		child->thread.bts_ovfl_signal = cfg.signal;
+		return -EOPNOTSUPP;
 	}
 
 	if ((cfg.flags & PTRACE_BTS_O_ALLOC) &&

