commit 23a0e27aacad6b97598dd6786f782e4b6dd86096
Author: Paul Walmsley <pwalmsley@nvidia.com>
Date:   Mon Dec 9 18:00:12 2013 -0800

    gpu: host1x: clk_round_rate() can return a zero upon error
    
    Treat both negative and zero return values from clk_round_rate() as
    errors.  This is needed since subsequent patches will convert
    clk_round_rate()'s return value to be an unsigned type, rather than a
    signed type, since some clock sources can generate rates higher than
    (2^31)-1 Hz.
    
    Eventually, when calling clk_round_rate(), only a return value of zero
    will be considered a error.  All other values will be considered valid
    rates.  The comparison against values less than 0 is kept to preserve
    the correct behavior in the meantime.
    
    Signed-off-by: Paul Walmsley <pwalmsley@nvidia.com>
    Cc: Mikko Perttunen <mperttunen@nvidia.com>
    Cc: Arto Merilainen <amerilainen@nvidia.com>
    Cc: Thierry Reding <thierry.reding@gmail.com>
    Cc: Terje Bergstr√∂m <tbergstrom@nvidia.com>
    Signed-off-by: Thierry Reding <treding@nvidia.com>

diff --git a/drivers/gpu/drm/tegra/hdmi.c b/drivers/gpu/drm/tegra/hdmi.c
index 7f6253ea5cb5..0cfc94f8d14c 100644
--- a/drivers/gpu/drm/tegra/hdmi.c
+++ b/drivers/gpu/drm/tegra/hdmi.c
@@ -960,7 +960,7 @@ static int tegra_output_hdmi_check_mode(struct tegra_output *output,
 	parent = clk_get_parent(hdmi->clk_parent);
 
 	err = clk_round_rate(parent, pclk * 4);
-	if (err < 0)
+	if (err <= 0)
 		*status = MODE_NOCLOCK;
 	else
 		*status = MODE_OK;

