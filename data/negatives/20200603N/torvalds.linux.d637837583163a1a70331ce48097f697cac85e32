commit d637837583163a1a70331ce48097f697cac85e32
Author: Jiri Olsa <jolsa@redhat.com>
Date:   Fri Feb 11 15:39:28 2011 +0100

    tty,vt: fix VT_SETACTIVATE console switch
    
    using VT_SETACTIVATE ioctl for console switch did not work,
    since it put wrong param to the set_console function.
    
    Also ioctl returned misleading error, because of the missing
    break statement. I wonder anyone has ever used this one :).
    
    Signed-off-by: Jiri Olsa <jolsa@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/tty/vt/vt_ioctl.c b/drivers/tty/vt/vt_ioctl.c
index 6bcf05bf4978..9e9a901442a3 100644
--- a/drivers/tty/vt/vt_ioctl.c
+++ b/drivers/tty/vt/vt_ioctl.c
@@ -1010,8 +1010,9 @@ int vt_ioctl(struct tty_struct *tty, struct file * file,
 			if (ret)
 				break;
 			/* Commence switch and lock */
-			set_console(arg);
+			set_console(vsa.console);
 		}
+		break;
 	}
 
 	/*

