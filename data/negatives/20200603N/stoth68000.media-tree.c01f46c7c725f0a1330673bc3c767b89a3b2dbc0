commit c01f46c7c725f0a1330673bc3c767b89a3b2dbc0
Author: Johannes Weiner <hannes@cmpxchg.org>
Date:   Wed Dec 10 15:44:27 2014 -0800

    mm: memcontrol: remove bogus NULL check after mem_cgroup_from_task()
    
    That function acts like a typecast - unless NULL is passed in, no NULL can
    come out.  task_in_mem_cgroup() callers don't pass NULL tasks.
    
    Signed-off-by: Johannes Weiner <hannes@cmpxchg.org>
    Reviewed-by: Vladimir Davydov <vdavydov@parallels.com>
    Acked-by: Michal Hocko <mhocko@suse.cz
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/mm/memcontrol.c b/mm/memcontrol.c
index 9073d07c1149..367cc57df362 100644
--- a/mm/memcontrol.c
+++ b/mm/memcontrol.c
@@ -1356,7 +1356,7 @@ static bool mem_cgroup_same_or_subtree(const struct mem_cgroup *root_memcg,
 bool task_in_mem_cgroup(struct task_struct *task,
 			const struct mem_cgroup *memcg)
 {
-	struct mem_cgroup *curr = NULL;
+	struct mem_cgroup *curr;
 	struct task_struct *p;
 	bool ret;
 
@@ -1372,8 +1372,7 @@ bool task_in_mem_cgroup(struct task_struct *task,
 		 */
 		rcu_read_lock();
 		curr = mem_cgroup_from_task(task);
-		if (curr)
-			css_get(&curr->css);
+		css_get(&curr->css);
 		rcu_read_unlock();
 	}
 	/*

