commit b4052eae795b71b2f3127467a4aefb91569ca3a2
Author: ben <ben@b3059339-0415-0410-9bf9-f77b7e298cf2>
Date:   Sat Dec 8 16:27:25 2007 +0000

    rework of libmenu open_dir()
    
    git-svn-id: svn://svn.mplayerhq.hu/mplayer/trunk@25323 b3059339-0415-0410-9bf9-f77b7e298cf2

diff --git a/libmenu/menu_filesel.c b/libmenu/menu_filesel.c
index cc97dc4ba9..6ecd4c5e14 100644
--- a/libmenu/menu_filesel.c
+++ b/libmenu/menu_filesel.c
@@ -180,7 +180,7 @@ static void free_extensions(char **extensions){
   }
 }
 
-static int open_dir(menu_t* menu,char* args) {
+static int _open_dir(menu_t* menu,char* args) {
   char **namelist, **tp;
   struct dirent *dp;
   struct stat st;
@@ -291,7 +291,13 @@ bailout:
 
   return 1;
 }
-    
+static int open_dir(menu_t* menu,char* args) {
+  if (_open_dir(menu, args))
+    return 1;
+  if (menu_chroot && _open_dir(menu, menu_chroot))
+    return 1;
+  return 0;
+}
 
 static char *action;
 

