commit ceca2a7d14625634f8c95fc2317b55086dece054
Author: Tom Lane <tgl@sss.pgh.pa.us>
Date:   Mon Aug 27 00:44:40 2001 +0000

    Un-break pg_dump --- pg_class.indproc is now regproc not oid, which
    for some reason displays a zero oid differently.  Possibly we should
    revert that schema change, but it's easy to make pg_dump accept both
    spellings so I'll do that for now.

diff --git a/src/bin/pg_dump/pg_dump.c b/src/bin/pg_dump/pg_dump.c
index f81439e203..e48ed0bdb4 100644
--- a/src/bin/pg_dump/pg_dump.c
+++ b/src/bin/pg_dump/pg_dump.c
@@ -22,7 +22,7 @@
  *
  *
  * IDENTIFICATION
- *	  $Header: /cvsroot/pgsql/src/bin/pg_dump/pg_dump.c,v 1.224 2001/08/22 20:23:23 petere Exp $
+ *	  $Header: /cvsroot/pgsql/src/bin/pg_dump/pg_dump.c,v 1.225 2001/08/27 00:44:40 tgl Exp $
  *
  *-------------------------------------------------------------------------
  */
@@ -4370,8 +4370,9 @@ dumpIndexes(Archive *fout, IndInfo *indinfo, int numIndexes,
 			continue;
 		}
 
-
-		if (strcmp(indinfo[i].indproc, "0") == 0)
+		/* indproc is regproc in 7.2, oid previously, so check both */
+		if (strcmp(indinfo[i].indproc, "-") == 0 ||
+			strcmp(indinfo[i].indproc, "0") == 0)
 			funcname = NULL;
 		else
 		{

