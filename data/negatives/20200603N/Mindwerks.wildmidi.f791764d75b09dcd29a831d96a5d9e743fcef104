commit f791764d75b09dcd29a831d96a5d9e743fcef104
Author: sezero <sezero@users.noreply.github.com>
Date:   Wed Apr 2 09:11:41 2014 +0300

    minor tidy-up in GetOutput()

diff --git a/src/wildmidi_lib.c b/src/wildmidi_lib.c
index 27298f2..7d4243b 100644
--- a/src/wildmidi_lib.c
+++ b/src/wildmidi_lib.c
@@ -3812,8 +3812,6 @@ WM_SYMBOL int WildMidi_FastSeek(midi * handle, unsigned long int *sample_pos) {
 }
 
 WM_SYMBOL int WildMidi_GetOutput(midi * handle, int8_t *buffer, uint32_t size) {
-	struct _mdi *mdi = (struct _mdi *) handle;
-
 	if (__builtin_expect((!WM_Initialized), 0)) {
 		WM_ERROR(__FUNCTION__, __LINE__, WM_ERR_NOT_INIT, NULL, 0);
 		return -1;
@@ -3828,22 +3826,19 @@ WM_SYMBOL int WildMidi_GetOutput(midi * handle, int8_t *buffer, uint32_t size) {
 				"(NULL buffer pointer)", 0);
 		return -1;
 	}
-
 	if (__builtin_expect((size == 0), 0)) {
 		return 0;
 	}
-
-	if (__builtin_expect((size % 4), 0)) {
+	if (__builtin_expect((!!(size % 4)), 0)) {
 		WM_ERROR(__FUNCTION__, __LINE__, WM_ERR_INVALID_ARG,
 				"(size not a multiple of 4)", 0);
 		return -1;
 	}
-	if (mdi->info.mixer_options & WM_MO_ENHANCED_RESAMPLING) {
+	if (((struct _mdi *) handle)->info.mixer_options & WM_MO_ENHANCED_RESAMPLING) {
 		if (!gauss_table) init_gauss();
 		return WM_GetOutput_Gauss(handle, buffer, size);
-	} else {
-		return WM_GetOutput_Linear(handle, buffer, size);
 	}
+	return WM_GetOutput_Linear(handle, buffer, size);
 }
 
 WM_SYMBOL int WildMidi_SetOption(midi * handle, uint16_t options,

