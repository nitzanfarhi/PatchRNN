commit 5983d1c480b589e97770a11237a47d93b2a0e804
Author: Vitor Sessak <vitor1001@gmail.com>
Date:   Mon Jun 23 19:59:42 2008 +0000

    Simplify rotate_buffer()
    
    Originally committed as revision 13914 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/ra144.c b/libavcodec/ra144.c
index 7059c5030..e6895cec4 100644
--- a/libavcodec/ra144.c
+++ b/libavcodec/ra144.c
@@ -97,14 +97,13 @@ static void eval_coefs(const int *refl, int *coefs)
 /* rotate block */
 static void rotate_block(const int16_t *source, int16_t *target, int offset)
 {
-    int i=0, k=0;
     source += BUFFERSIZE - offset;
 
-    while (i<BLOCKSIZE) {
-        target[i++] = source[k++];
-
-        if (k == offset)
-            k = 0;
+    if (offset > BLOCKSIZE) {
+        memcpy(target, source, BLOCKSIZE*sizeof(*target));
+    } else {
+        memcpy(target, source, offset*sizeof(*target));
+        memcpy(target + offset, source, (BLOCKSIZE - offset)*sizeof(*target));
     }
 }
 

