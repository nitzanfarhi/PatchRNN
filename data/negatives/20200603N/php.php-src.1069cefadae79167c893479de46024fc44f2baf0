commit 1069cefadae79167c893479de46024fc44f2baf0
Author: Wez Furlong <wez@php.net>
Date:   Sun Feb 6 23:05:24 2005 +0000

    support sucking data from streams in file_put_contents()

diff --git a/ext/standard/file.c b/ext/standard/file.c
index f25f8a49f4..b86dad6a5f 100644
--- a/ext/standard/file.c
+++ b/ext/standard/file.c
@@ -586,6 +586,15 @@ PHP_FUNCTION(file_put_contents)
 		RETURN_FALSE;
 	}
 	switch (Z_TYPE_P(data)) {
+		case IS_RESOURCE:
+		{
+			php_stream *srcstream;
+			php_stream_from_zval(srcstream, &data);
+
+			numbytes = php_stream_copy_to_stream(srcstream, stream, PHP_STREAM_COPY_ALL);
+
+			break;
+		}
 		case IS_NULL:
 		case IS_LONG:
 		case IS_DOUBLE:

