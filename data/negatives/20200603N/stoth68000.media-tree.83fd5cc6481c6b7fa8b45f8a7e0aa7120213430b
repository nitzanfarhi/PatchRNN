commit 83fd5cc6481c6b7fa8b45f8a7e0aa7120213430b
Author: Joerg Roedel <joerg.roedel@amd.com>
Date:   Tue Dec 16 19:17:11 2008 +0100

    AMD IOMMU: allocate rlookup_table with __GFP_ZERO
    
    Impact: fix bug which can lead to panic in prealloc_protection_domains()
    
    Signed-off-by: Joerg Roedel <joerg.roedel@amd.com>

diff --git a/arch/x86/kernel/amd_iommu_init.c b/arch/x86/kernel/amd_iommu_init.c
index 30ae2701b3df..c90a15eba5c5 100644
--- a/arch/x86/kernel/amd_iommu_init.c
+++ b/arch/x86/kernel/amd_iommu_init.c
@@ -1074,7 +1074,8 @@ int __init amd_iommu_init(void)
 		goto free;
 
 	/* IOMMU rlookup table - find the IOMMU for a specific device */
-	amd_iommu_rlookup_table = (void *)__get_free_pages(GFP_KERNEL,
+	amd_iommu_rlookup_table = (void *)__get_free_pages(
+			GFP_KERNEL | __GFP_ZERO,
 			get_order(rlookup_table_size));
 	if (amd_iommu_rlookup_table == NULL)
 		goto free;

