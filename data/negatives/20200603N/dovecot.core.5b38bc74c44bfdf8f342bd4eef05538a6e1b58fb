commit 5b38bc74c44bfdf8f342bd4eef05538a6e1b58fb
Author: Timo Sirainen <tss@iki.fi>
Date:   Sun Jan 22 17:48:57 2006 +0200

    If we don't have any auth sockets, don't say we're connected to it.
    
    --HG--
    branch : HEAD

diff --git a/src/lib-auth/auth-client.c b/src/lib-auth/auth-client.c
index 547976e0e..826c06e84 100644
--- a/src/lib-auth/auth-client.c
+++ b/src/lib-auth/auth-client.c
@@ -109,7 +109,8 @@ bool auth_client_reserve_connection(struct auth_client *client,
 bool auth_client_is_connected(struct auth_client *client)
 {
 	return !client->reconnect &&
-		client->conn_waiting_handshake_count == 0;
+		client->conn_waiting_handshake_count == 0 &&
+		client->connections != NULL;
 }
 
 void auth_client_set_connect_notify(struct auth_client *client,

