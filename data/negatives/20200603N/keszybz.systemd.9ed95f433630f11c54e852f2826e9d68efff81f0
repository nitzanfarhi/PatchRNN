commit 9ed95f433630f11c54e852f2826e9d68efff81f0
Author: Lennart Poettering <lennart@poettering.net>
Date:   Tue Aug 31 16:53:58 2010 +0200

    util: look at STDOUT, not STDIN, when determining tty columns
    
    https://bugzilla.redhat.com/show_bug.cgi?id=626891

diff --git a/src/util.c b/src/util.c
index a09b704ff..f982586ce 100644
--- a/src/util.c
+++ b/src/util.c
@@ -2988,7 +2988,7 @@ int columns(void) {
                 struct winsize ws;
                 zero(ws);
 
-                if (ioctl(STDIN_FILENO, TIOCGWINSZ, &ws) >= 0)
+                if (ioctl(STDOUT_FILENO, TIOCGWINSZ, &ws) >= 0)
                         parsed_columns = ws.ws_col;
         }
 

