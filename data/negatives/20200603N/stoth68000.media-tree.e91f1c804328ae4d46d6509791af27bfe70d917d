commit e91f1c804328ae4d46d6509791af27bfe70d917d
Author: Mike Marshall <hubcap@omnibond.com>
Date:   Fri Dec 4 13:06:55 2015 -0500

    Orangefs: don't expose internal details of pathname resolution to userspace.
    
    Signed-off-by: Mike Marshall <hubcap@omnibond.com>

diff --git a/fs/orangefs/namei.c b/fs/orangefs/namei.c
index 63aa1e7fbdb6..9f82eb377857 100644
--- a/fs/orangefs/namei.c
+++ b/fs/orangefs/namei.c
@@ -113,7 +113,7 @@ static struct dentry *orangefs_lookup(struct inode *dir, struct dentry *dentry,
 	if (!new_op)
 		return ERR_PTR(-ENOMEM);
 
-	new_op->upcall.req.lookup.sym_follow = flags & LOOKUP_FOLLOW;
+	new_op->upcall.req.lookup.sym_follow = PVFS2_LOOKUP_LINK_NO_FOLLOW;
 
 	gossip_debug(GOSSIP_NAME_DEBUG, "%s:%s:%d using parent %pU\n",
 		     __FILE__,

