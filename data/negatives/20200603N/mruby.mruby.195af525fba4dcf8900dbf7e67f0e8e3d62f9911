commit 195af525fba4dcf8900dbf7e67f0e8e3d62f9911
Author: Yukihiro "Matz" Matsumoto <matz@ruby-lang.org>
Date:   Sat Apr 1 12:42:11 2017 +0900

    Expand stack for method_missing; fix #3528

diff --git a/src/vm.c b/src/vm.c
index 24a0a1db..aa8b171b 100644
--- a/src/vm.c
+++ b/src/vm.c
@@ -1227,6 +1227,10 @@ RETRY_TRY_BLOCK:
         mid = missing;
         if (n != CALL_MAXARGS) {
           mrb_value blk = regs[bidx];
+
+          if (a+2 > irep->nregs) {
+            stack_extend(mrb, a+2, a+n+1);
+          }
           regs[a+1] = mrb_ary_new_from_values(mrb, n, regs+a+1);
           regs[a+2] = blk;
           n = CALL_MAXARGS;

