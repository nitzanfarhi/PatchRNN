commit b5c80bc5d70a1ce5b071ed06dd95292b9de46f95
Author: Wolfram Sang <w.sang@pengutronix.de>
Date:   Tue Feb 2 13:03:31 2010 +0100

    i2c-highlander: remover superflous variable
    
    When cppcheck found this flaw
    
    [./i2c/busses/i2c-highlander.c:284]: (style) Warning - using char variable in bit operation
    
    it was noted that the 'read'-variable could be simply removed as read_write can
    only be 0 or 1 anyhow. So, we remove the flaw and simplify the code.
    
    Reported-by: d binderman <dcb314@hotmail.com>
    Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
    Acked-by: Paul Mundt <lethal@linux-sh.org>
    Acked-by: Jean Delvare <khali@linux-fr.org>
    Cc: Ben Dooks <ben-linux@fluff.org>

diff --git a/drivers/i2c/busses/i2c-highlander.c b/drivers/i2c/busses/i2c-highlander.c
index ce87a902c94d..3df1bc80f37a 100644
--- a/drivers/i2c/busses/i2c-highlander.c
+++ b/drivers/i2c/busses/i2c-highlander.c
@@ -282,7 +282,6 @@ static int highlander_i2c_smbus_xfer(struct i2c_adapter *adap, u16 addr,
 				  union i2c_smbus_data *data)
 {
 	struct highlander_i2c_dev *dev = i2c_get_adapdata(adap);
-	int read = read_write & I2C_SMBUS_READ;
 	u16 tmp;
 
 	init_completion(&dev->cmd_complete);
@@ -337,11 +336,11 @@ static int highlander_i2c_smbus_xfer(struct i2c_adapter *adap, u16 addr,
 	highlander_i2c_done(dev);
 
 	/* Set slave address */
-	iowrite16((addr << 1) | read, dev->base + SMSMADR);
+	iowrite16((addr << 1) | read_write, dev->base + SMSMADR);
 
 	highlander_i2c_command(dev, command, dev->buf_len);
 
-	if (read)
+	if (read_write == I2C_SMBUS_READ)
 		return highlander_i2c_read(dev);
 	else
 		return highlander_i2c_write(dev);

