commit 0cf4fa80781dcdb5bf6096fa221f3fc6c7073405
Author: Bill Pemberton <wfp5p@virginia.edu>
Date:   Mon Jul 27 16:47:39 2009 -0400

    Staging: hv: remove VMBUS_CHANNEL_PACKET_PAGE_BUFFER typedef
    
    Signed-off-by: Bill Pemberton <wfp5p@virginia.edu>
    Cc: Hank Janssen <hjanssen@microsoft.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/hv/Channel.c b/drivers/staging/hv/Channel.c
index bd82154e69f1..e2c833fb923f 100644
--- a/drivers/staging/hv/Channel.c
+++ b/drivers/staging/hv/Channel.c
@@ -831,7 +831,7 @@ VmbusChannelSendPacketPageBuffer(
 {
 	int ret=0;
 	int i=0;
-	VMBUS_CHANNEL_PACKET_PAGE_BUFFER desc;
+	struct VMBUS_CHANNEL_PACKET_PAGE_BUFFER desc;
 	u32 descSize;
 	u32 packetLen;
 	u32 packetLenAligned;
@@ -845,7 +845,7 @@ VmbusChannelSendPacketPageBuffer(
 	DumpVmbusChannel(Channel);
 
 	/* Adjust the size down since VMBUS_CHANNEL_PACKET_PAGE_BUFFER is the largest size we support */
-	descSize = sizeof(VMBUS_CHANNEL_PACKET_PAGE_BUFFER) - ((MAX_PAGE_BUFFER_COUNT - PageCount)*sizeof(PAGE_BUFFER));
+	descSize = sizeof(struct VMBUS_CHANNEL_PACKET_PAGE_BUFFER) - ((MAX_PAGE_BUFFER_COUNT - PageCount)*sizeof(PAGE_BUFFER));
 	packetLen = descSize + BufferLen;
 	packetLenAligned = ALIGN_UP(packetLen, sizeof(u64));
 
diff --git a/drivers/staging/hv/Channel.h b/drivers/staging/hv/Channel.h
index be65d64e4590..54b79f083fbf 100644
--- a/drivers/staging/hv/Channel.h
+++ b/drivers/staging/hv/Channel.h
@@ -32,7 +32,7 @@
 
 
 /* The format must be the same as VMDATA_GPA_DIRECT */
-typedef struct _VMBUS_CHANNEL_PACKET_PAGE_BUFFER {
+struct VMBUS_CHANNEL_PACKET_PAGE_BUFFER {
     u16				Type;
     u16				DataOffset8;
     u16				Length8;
@@ -41,7 +41,7 @@ typedef struct _VMBUS_CHANNEL_PACKET_PAGE_BUFFER {
 	u32				Reserved;
 	u32				RangeCount;
     PAGE_BUFFER			Range[MAX_PAGE_BUFFER_COUNT];
-} VMBUS_CHANNEL_PACKET_PAGE_BUFFER;
+};
 
 
 /* The format must be the same as VMDATA_GPA_DIRECT */
diff --git a/drivers/staging/hv/Vmbus.c b/drivers/staging/hv/Vmbus.c
index 81b86c270661..cc5c61a94843 100644
--- a/drivers/staging/hv/Vmbus.c
+++ b/drivers/staging/hv/Vmbus.c
@@ -126,7 +126,7 @@ VmbusInitialize(
 	DPRINT_INFO(VMBUS, "+++++++ Vmbus using SINT %d +++++++", VMBUS_MESSAGE_SINT);
 
 	DPRINT_DBG(VMBUS, "sizeof(VMBUS_CHANNEL_PACKET_PAGE_BUFFER)=%ld, sizeof(VMBUS_CHANNEL_PACKET_MULITPAGE_BUFFER)=%ld",
-		sizeof(VMBUS_CHANNEL_PACKET_PAGE_BUFFER), sizeof(VMBUS_CHANNEL_PACKET_MULITPAGE_BUFFER));
+		sizeof(struct VMBUS_CHANNEL_PACKET_PAGE_BUFFER), sizeof(VMBUS_CHANNEL_PACKET_MULITPAGE_BUFFER));
 
 	drv->name = gDriverName;
 	memcpy(&drv->deviceType, &gVmbusDeviceType, sizeof(GUID));

