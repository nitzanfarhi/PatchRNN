commit 2da2c510d235a34b789aa143972385658755a8f9
Author: Michael Natterer <mitch@gimp.org>
Date:   Fri Oct 9 11:02:51 2009 +0200

    Use gtk_widget_get_window() instead of widget->window

diff --git a/app/tools/gimpdrawtool.c b/app/tools/gimpdrawtool.c
index 1ae4751727..a6226f073c 100644
--- a/app/tools/gimpdrawtool.c
+++ b/app/tools/gimpdrawtool.c
@@ -480,7 +480,7 @@ gimp_draw_tool_draw_guide_line (GimpDrawTool        *draw_tool,
   x1 = 0;
   y1 = 0;
 
-  gdk_drawable_get_size (shell->canvas->window, &x2, &y2);
+  gdk_drawable_get_size (gtk_widget_get_window (shell->canvas), &x2, &y2);
 
   switch (orientation)
     {

