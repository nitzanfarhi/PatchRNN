commit b82fb9a97ef8b204f4aec53d60cfb41528d702e9
Author: Steve Lime <sdlime@gmail.com>
Date:   Tue Dec 19 18:58:05 2006 +0000

    Fixed templating code to respect msJoinConnect return values for URL templates. (bug 1989)
    
    
    git-svn-id: http://svn.osgeo.org/mapserver/trunk@5867 7532c77e-422f-0410-93f4-f0b67bdd69e2

diff --git a/maptemplate.c b/maptemplate.c
index 78ed9672..1aa97efe 100644
--- a/maptemplate.c
+++ b/maptemplate.c
@@ -27,6 +27,9 @@
  ******************************************************************************
  *
  * $Log$
+ * Revision 1.124  2006/12/19 18:58:05  sdlime
+ * Fixed templating code to respect msJoinConnect return values for URL templates. (bug 1989)
+ *
  * Revision 1.123  2006/10/30 23:42:39  sdlime
  * Added pattern option to the item tag so you can restrict the set of feature values that a particular output tag is applied to. The pattern is given as a regex.
  *
@@ -3185,7 +3188,9 @@ int msReturnQuery(mapservObj* msObj, char* pszMimeType, char **papszBuffer)
 
         if(lp->numjoins > 0) {
           for(k=0; k<lp->numjoins; k++) { 
-            msJoinConnect(lp, &(lp->joins[k]));
+            status = msJoinConnect(lp, &(lp->joins[k]));
+            if(status != MS_SUCCESS) return status;  
+
             msJoinPrepare(&(lp->joins[k]), &(msObj->ResultShape));
             msJoinNext(&(lp->joins[k])); /* fetch the first row */
           }

