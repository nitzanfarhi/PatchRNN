commit 5ba79d72a77b12c3158a3e0bd271a6c5e4c499ad
Author: monty@mysql.com <>
Date:   Tue Jan 18 02:04:41 2005 +0200

    Anoter fix for moved IO_CACHE object

diff --git a/sql/filesort.cc b/sql/filesort.cc
index fe42f391007..a53067ccd73 100644
--- a/sql/filesort.cc
+++ b/sql/filesort.cc
@@ -686,7 +686,10 @@ int merge_many_buff(SORTPARAM *param, uchar *sort_buffer,
   }
   close_cached_file(to_file);			// This holds old result
   if (to_file == t_file)
+  {
     *t_file=t_file2;				// Copy result file
+    setup_io_cache(t_file);
+  }
 
   DBUG_RETURN(*maxbuffer >= MERGEBUFF2);	/* Return 1 if interrupted */
 } /* merge_many_buff */

