commit bb05683b1271517b5f78aff1890e37f0d27b4d2d
Author: bellard <bellard@c046a42c-6fe2-441c-8c8c-71466251a162>
Date:   Fri Jan 28 00:01:00 2005 +0000

    flush TLBs at cpu reset
    
    
    git-svn-id: svn://svn.savannah.nongnu.org/qemu/trunk@1248 c046a42c-6fe2-441c-8c8c-71466251a162

diff --git a/target-sparc/translate.c b/target-sparc/translate.c
index dc7e6dbf6a..7673bf2ddd 100644
--- a/target-sparc/translate.c
+++ b/target-sparc/translate.c
@@ -1553,6 +1553,7 @@ extern int ram_size;
 void cpu_reset(CPUSPARCState *env)
 {
     memset(env, 0, sizeof(*env));
+    tlb_flush(env, 1);
     env->cwp = 0;
     env->wim = 1;
     env->regwptr = env->regbase + (env->cwp * 16);

