commit 1cfcbe4cd4033ada0e18051b55e7dcab9bde36e3
Author: Gabor Juhos <juhosg@openwrt.org>
Date:   Wed May 1 17:17:31 2013 +0200

    rt2x00: rt2800pci: use rt2x00dev->tx->limit
    
    The TX data queue is initialized already when
    the rt2800pci_txstatus_interrupt() function is
    called.
    
    Fetch the number of the queue entries from that
    instead of using the entry_num field of the data
    queue descriptor.
    
    The two values are the same, and the use of the
    rt2x00dev->tx->limit value allows us to get rid
    of a superfluous pointer dereference.
    
    Signed-off-by: Gabor Juhos <juhosg@openwrt.org>
    Acked-by: Gertjan van Wingerde <gwingerde@gmail.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/rt2x00/rt2800pci.c b/drivers/net/wireless/rt2x00/rt2800pci.c
index 6f4a861af336..330f1d25726d 100644
--- a/drivers/net/wireless/rt2x00/rt2800pci.c
+++ b/drivers/net/wireless/rt2x00/rt2800pci.c
@@ -1014,7 +1014,7 @@ static void rt2800pci_txstatus_interrupt(struct rt2x00_dev *rt2x00dev)
 	 * Since we have only one producer and one consumer we don't
 	 * need to lock the kfifo.
 	 */
-	for (i = 0; i < rt2x00dev->ops->tx->entry_num; i++) {
+	for (i = 0; i < rt2x00dev->tx->limit; i++) {
 		rt2x00mmio_register_read(rt2x00dev, TX_STA_FIFO, &status);
 
 		if (!rt2x00_get_field32(status, TX_STA_FIFO_VALID))

