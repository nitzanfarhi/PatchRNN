commit 346a850e3c3a20159cef2b79235e6d34aa497c65
Author: Manuel Traut <manut@linutronix.de>
Date:   Wed May 27 06:20:05 2009 -0700

    Input: usb1400_ts - fix access to "device data" in resume function
    
    platform_data != driver_data
    
    driver data is actually the "correct" place of the struct however it is
    not placed there due to the need of the ac97 struct. This is broken since
    d9105c2b01 aka "[ARM] 5184/1: Split ucb1400_ts into core and touchscreen"
    
    Signed-off-by: Manuel Traut <manut@linutronix.de>
    Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

diff --git a/drivers/input/touchscreen/ucb1400_ts.c b/drivers/input/touchscreen/ucb1400_ts.c
index f100c7f4c1db..6954f5500108 100644
--- a/drivers/input/touchscreen/ucb1400_ts.c
+++ b/drivers/input/touchscreen/ucb1400_ts.c
@@ -419,7 +419,7 @@ static int ucb1400_ts_remove(struct platform_device *dev)
 #ifdef CONFIG_PM
 static int ucb1400_ts_resume(struct platform_device *dev)
 {
-	struct ucb1400_ts *ucb = platform_get_drvdata(dev);
+	struct ucb1400_ts *ucb = dev->dev.platform_data;
 
 	if (ucb->ts_task) {
 		/*

