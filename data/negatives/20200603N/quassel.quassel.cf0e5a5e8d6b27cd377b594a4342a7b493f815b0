commit cf0e5a5e8d6b27cd377b594a4342a7b493f815b0
Author: Manuel Nickschas <sputnick@quassel-irc.org>
Date:   Tue Sep 15 08:56:25 2009 +0200

    Show one-letter words again
    
    Looks like QTextBoundaryFinder has a pathological issue with strings of length 1.

diff --git a/src/qtui/chatlinemodelitem.cpp b/src/qtui/chatlinemodelitem.cpp
index ea0b44a9..824e9dab 100644
--- a/src/qtui/chatlinemodelitem.cpp
+++ b/src/qtui/chatlinemodelitem.cpp
@@ -182,8 +182,12 @@ void ChatLineModelItem::computeWrapList() const {
   line.setNumColumns(length);
   layout.endLayout();
 
-  while((idx = finder.toNextBoundary()) >= 0 && idx < length) {
-    idx++;  // the boundary is *before* the actual character
+  while((idx = finder.toNextBoundary()) >= 0 && idx <= length) {
+    if(idx < length)
+      idx++;  // the boundary is *before* the actual character
+
+    if(idx == oldidx)
+      continue;
 
     word.start = oldidx;
     int wordend = idx;

