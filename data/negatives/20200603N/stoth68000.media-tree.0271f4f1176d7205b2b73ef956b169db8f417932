commit 0271f4f1176d7205b2b73ef956b169db8f417932
Author: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Date:   Wed Dec 26 13:26:46 2012 +0100

    ACPI / power: Remove useless message from device registering routine
    
    After commit 71fbad6 (PCI/ACPI: Notify PCI devices when their power
    resource is turned on) made acpi_pci_bind() call
    acpi_power_resource_register_device(), the debug message at the end
    of the latter appears in the kernel log for every PCI device that
    doesn't happen to have power resources assigned (which is the vast
    majority of them).  However, this message is totally useless, because
    it doesn't even say which device it is about.  Moreover, it is
    misleading, because it only means that the given device has no power
    resources, which isn't exceptional at all.
    
    Remove that useless message altogether and simplify
    acpi_power_resource_register_device() slightly.
    
    Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>

diff --git a/drivers/acpi/power.c b/drivers/acpi/power.c
index 7db61b8fa11f..6e7b9d523812 100644
--- a/drivers/acpi/power.c
+++ b/drivers/acpi/power.c
@@ -445,11 +445,8 @@ int acpi_power_resource_register_device(struct device *dev, acpi_handle handle)
 		return -ENODEV;
 
 	ret = acpi_bus_get_device(handle, &acpi_dev);
-	if (ret)
-		goto no_power_resource;
-
-	if (!acpi_dev->power.flags.power_resources)
-		goto no_power_resource;
+	if (ret || !acpi_dev->power.flags.power_resources)
+		return -ENODEV;
 
 	powered_device = kzalloc(sizeof(*powered_device), GFP_KERNEL);
 	if (!powered_device)
@@ -471,10 +468,6 @@ int acpi_power_resource_register_device(struct device *dev, acpi_handle handle)
 	}
 
 	return ret;
-
-no_power_resource:
-	printk(KERN_DEBUG PREFIX "Invalid Power Resource to register!\n");
-	return -ENODEV;
 }
 EXPORT_SYMBOL_GPL(acpi_power_resource_register_device);
 

