commit 410405e01c0c9bb5d1c9ed4f8d2a28b865cd19c8
Author: Shaun Verch <shaun.verch@10gen.com>
Date:   Fri Jan 17 12:50:07 2014 -0800

    Fix segfault in --syslogFacility option

diff --git a/src/mongo/db/server_options_helpers.cpp b/src/mongo/db/server_options_helpers.cpp
index d65e5ac899..74df014f91 100644
--- a/src/mongo/db/server_options_helpers.cpp
+++ b/src/mongo/db/server_options_helpers.cpp
@@ -628,7 +628,9 @@ namespace {
             std::string facility = params["systemLog.syslogFacility"].as<string>();
             bool set = false;
             // match facility string to facility value
-            for (unsigned long i = 0; i < sizeof(facilitynames)/sizeof(facilitynames[0]); i++) {
+            size_t facilitynamesLength = sizeof(facilitynames)/sizeof(facilitynames[0]);
+            for (unsigned long i = 0; i < facilitynamesLength &&
+                                      facilitynames[i].c_name != NULL; i++) {
                 if (!facility.compare(facilitynames[i].c_name)) {
                     serverGlobalParams.syslogFacility = facilitynames[i].c_val;
                     set = true;

