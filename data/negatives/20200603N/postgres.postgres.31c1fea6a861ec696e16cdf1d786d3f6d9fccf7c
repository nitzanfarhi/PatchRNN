commit 31c1fea6a861ec696e16cdf1d786d3f6d9fccf7c
Author: Tom Lane <tgl@sss.pgh.pa.us>
Date:   Tue Jul 3 16:52:12 2001 +0000

    Start the stats collector at a less randomly chosen time.  Bad idea
    to start it before we have acquired the data directory lock; also a
    bad idea to start it before we have set up to catch SIGCHLD signals.

diff --git a/src/backend/postmaster/postmaster.c b/src/backend/postmaster/postmaster.c
index 0d92324623..3e92f16720 100644
--- a/src/backend/postmaster/postmaster.c
+++ b/src/backend/postmaster/postmaster.c
@@ -37,7 +37,7 @@
  *
  *
  * IDENTIFICATION
- *	  $Header: /cvsroot/pgsql/src/backend/postmaster/postmaster.c,v 1.230 2001/07/01 00:06:23 tgl Exp $
+ *	  $Header: /cvsroot/pgsql/src/backend/postmaster/postmaster.c,v 1.231 2001/07/03 16:52:12 tgl Exp $
  *
  * NOTES
  *
@@ -569,14 +569,6 @@ PostmasterMain(int argc, char *argv[])
 		ExitPostmaster(1);
 	}
 
-	/*
-	 * Initialize and startup the statistics collector process
-	 */
-	if (pgstat_init() < 0)
-		ExitPostmaster(1);
-	if (pgstat_start() < 0)
-		ExitPostmaster(1);
-
 	if (DebugLvl > 2)
 	{
 		extern char **environ;
@@ -699,6 +691,14 @@ PostmasterMain(int argc, char *argv[])
 	pqsignal(SIGTTIN, SIG_IGN); /* ignored */
 	pqsignal(SIGTTOU, SIG_IGN); /* ignored */
 
+	/*
+	 * Initialize and startup the statistics collector process
+	 */
+	if (pgstat_init() < 0)
+		ExitPostmaster(1);
+	if (pgstat_start() < 0)
+		ExitPostmaster(1);
+
 	/*
 	 * We're ready to rock and roll...
 	 */

