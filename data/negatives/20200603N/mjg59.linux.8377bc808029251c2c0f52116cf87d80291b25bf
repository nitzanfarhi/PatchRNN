commit 8377bc808029251c2c0f52116cf87d80291b25bf
Author: NeilBrown <neilb@suse.de>
Date:   Wed Apr 30 00:52:28 2008 -0700

    md: skip all metadata update processing when using external metadata.
    
    All the metadata update processing for external metadata is on in user-space
    or through the sysfs interfaces, so make "md_update_sb" a no-op in that case.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/md/md.c b/drivers/md/md.c
index 11457a28a14c..61767f1962eb 100644
--- a/drivers/md/md.c
+++ b/drivers/md/md.c
@@ -1652,6 +1652,8 @@ static void md_update_sb(mddev_t * mddev, int force_change)
 	int sync_req;
 	int nospares = 0;
 
+	if (mddev->external)
+		return;
 repeat:
 	spin_lock_irq(&mddev->write_lock);
 

