commit 254bd61a0f60da1de2c256a23e55177a8f772402
Author: Dieter Baron <dillo@danbala.tuwien.ac.at>
Date:   Mon Jul 26 20:12:23 1999 +0000

    handle zero len as till eof
    
    --HG--
    branch : HEAD

diff --git a/lib/zip_replace_filep.c b/lib/zip_replace_filep.c
index 9cb7035..879aa84 100644
--- a/lib/zip_replace_filep.c
+++ b/lib/zip_replace_filep.c
@@ -30,7 +30,7 @@ zip_replace_filep(struct zip *zf, int idx, char *name, struct zip_meta *meta,
 
     f->f = file;
     f->off = start;
-    f->len = len;
+    f->len = (len ? len : -1);
     
     return zip_replace(zf, idx, name, meta, read_file, f, 0);
 }
diff --git a/lib/zip_replace_zip.c b/lib/zip_replace_zip.c
index 66731b9..637f7b5 100644
--- a/lib/zip_replace_zip.c
+++ b/lib/zip_replace_zip.c
@@ -53,7 +53,7 @@ zip_replace_zip(struct zip *zf, int idx, char *name, struct zip_meta *meta,
 	p->zf = srczf;
 	p->idx = srcidx;
 	p->off = start;
-	p->len = len;
+	p->len = (len ? len : -1);
 	p->zff = NULL;
 	return zip_replace(zf, idx, (name ? name : srczf->entry[srcidx].fn),
 			   meta, read_part, p, 0);

