commit 568fffe3537c6e98ba853a0769eb19954abc5f86
Author: Christophe Fergeau <cfergeau@redhat.com>
Date:   Tue May 31 09:53:48 2011 +0200

    tcg: Fix unused-but-set-variable warning
    
    Based on a patch from Hans de Goede <hdegoede@redhat.com>
    
    This warning is new in gcc 4.6.
    
    Acked-by: Amit Shah <amit.shah@redhat.com>
    Signed-off-by: Christophe Fergeau <cfergeau@redhat.com>
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

diff --git a/tcg/tcg.c b/tcg/tcg.c
index fad92f97c3..184c208980 100644
--- a/tcg/tcg.c
+++ b/tcg/tcg.c
@@ -585,7 +585,7 @@ void tcg_register_helper(void *func, const char *name)
 void tcg_gen_callN(TCGContext *s, TCGv_ptr func, unsigned int flags,
                    int sizemask, TCGArg ret, int nargs, TCGArg *args)
 {
-#ifdef TCG_TARGET_I386
+#if defined(TCG_TARGET_I386) && TCG_TARGET_REG_BITS < 64
     int call_type;
 #endif
     int i;
@@ -612,7 +612,7 @@ void tcg_gen_callN(TCGContext *s, TCGv_ptr func, unsigned int flags,
 
     *gen_opc_ptr++ = INDEX_op_call;
     nparam = gen_opparam_ptr++;
-#ifdef TCG_TARGET_I386
+#if defined(TCG_TARGET_I386) && TCG_TARGET_REG_BITS < 64
     call_type = (flags & TCG_CALL_TYPE_MASK);
 #endif
     if (ret != TCG_CALL_DUMMY_ARG) {

