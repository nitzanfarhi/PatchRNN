commit 8d2f55538d331d4ce40557278bf7947ce96fd08c
Author: matyhtf <mikan.tenny@gmail.com>
Date:   Wed May 24 16:55:22 2017 +0800

    revert.

diff --git a/swoole_serialize.c b/swoole_serialize.c
index ceeccc88..9e5e64ca 100644
--- a/swoole_serialize.c
+++ b/swoole_serialize.c
@@ -577,8 +577,12 @@ static void* swoole_unserialize_arr(void *buffer, zval *zvalue, uint32_t nNumOfE
     {
         return NULL;
     }
+    if (!buffer)
+    {
+        php_error_docref(NULL TSRMLS_CC, E_NOTICE, "illegal unserialize data");
+        return NULL;
+    }
     ZVAL_NEW_ARR(zvalue);
-
     //Initialize buckets
     zend_array *ht = Z_ARR_P(zvalue);
     ht->nTableSize = size;

