commit 9c9306f653623a78b38873dc78862dbf012a9ccc
Author: Michael Natterer <mitch@gimp.org>
Date:   Fri Oct 9 22:00:14 2009 +0200

    Use GtkSelectionData's accessors

diff --git a/plug-ins/imagemap/imap_browse.c b/plug-ins/imagemap/imap_browse.c
index 715b3262ff..49df3edaae 100644
--- a/plug-ins/imagemap/imap_browse.c
+++ b/plug-ins/imagemap/imap_browse.c
@@ -98,9 +98,10 @@ handle_drop(GtkWidget *widget, GdkDragContext *context, gint x, gint y,
 {
    gboolean success = FALSE;
 
-   if (data->length >= 0 && data->format == 8)
+   if (gtk_selection_data_get_length (data) >= 0 &&
+       gtk_selection_data_get_format (data) == 8)
      {
-       const gchar *text = (const gchar *) data->data;
+       const gchar *text = (const gchar *) gtk_selection_data_get_data (data);
 
        if (g_utf8_validate (text, -1, NULL))
          {

