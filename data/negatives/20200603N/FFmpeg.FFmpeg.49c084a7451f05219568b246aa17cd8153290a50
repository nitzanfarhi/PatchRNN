commit 49c084a7451f05219568b246aa17cd8153290a50
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Thu Dec 18 01:10:51 2008 +0000

    Skip non intra luma code when there is no coded luma.
    0.7% speedup for the cathedral sample.
    
    Originally committed as revision 16203 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/h264.c b/libavcodec/h264.c
index 341b9a8302..e5c9e33611 100644
--- a/libavcodec/h264.c
+++ b/libavcodec/h264.c
@@ -2525,7 +2525,7 @@ static av_always_inline void hl_decode_mb_internal(H264Context *h, int simple){
                                 idct_dc_add(dest_y + block_offset[i], h->mb + i*16, linesize);
                         }
                     }
-                }else{
+                }else if(h->cbp&15){
                     const int di = IS_8x8DCT(mb_type) ? 4 : 1;
                     for(i=0; i<16; i+=di){
                         int nnz = h->non_zero_count_cache[ scan8[i] ];

