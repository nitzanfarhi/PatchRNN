commit 3a7f18784a770e6256cad2b154c425b71077e99b
Author: Love Hörnquist Åstrand <lha@kth.se>
Date:   Thu Jul 20 10:27:50 2006 +0000

    Avoid calling sl_command w/o command name.
    
    
    git-svn-id: svn://svn.h5l.se/heimdal/trunk/heimdal@17857 ec53bebd-3082-4978-b11e-865c3cabbd6b

diff --git a/lib/gssapi/gss.c b/lib/gssapi/gss.c
index df1d99014..5f65d7d00 100644
--- a/lib/gssapi/gss.c
+++ b/lib/gssapi/gss.c
@@ -42,6 +42,7 @@
 #include <getarg.h>
 #include <rtbl.h>
 #include <gss-commands.h>
+#include <krb5.h>
 
 RCSID("$Id$");
 
@@ -110,6 +111,10 @@ supported_mechs(void *argptr, int argc, char **argv)
     return 0;
 }
 
+/*
+ *
+ */
+
 int
 help(void *opt, int argc, char **argv)
 {
@@ -164,10 +169,10 @@ main(int argc, char **argv)
     argc -= optidx;
     argv += optidx;
 
-    if (argc == 0)
+    if (argc == 0) {
 	help(NULL, argc, argv);
-    else
-	sl_command (commands, argc, argv);
+	return 1;
+    }
 
-    return 0;
+    return sl_command (commands, argc, argv);
 }

