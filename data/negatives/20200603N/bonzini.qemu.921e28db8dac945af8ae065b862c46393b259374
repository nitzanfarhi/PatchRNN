commit 921e28db8dac945af8ae065b862c46393b259374
Author: Alexander Graf <agraf@suse.de>
Date:   Thu Jul 21 02:54:51 2011 +0200

    PPC: KVM: Add stubs for kvm helper functions
    
    We have a bunch of helper functions that don't have any stubs for them in case
    we don't have CONFIG_KVM enabled. That didn't bite us so far, because gcc can
    optimize them out pretty well, but we should really provide them.
    
    Signed-off-by: Alexander Graf <agraf@suse.de>
    
    ---
    
    v1 -> v2:
    
       - use uint64_t for clockfreq

diff --git a/target-ppc/kvm_ppc.h b/target-ppc/kvm_ppc.h
index 0c659c8d75..76f98d9ab2 100644
--- a/target-ppc/kvm_ppc.h
+++ b/target-ppc/kvm_ppc.h
@@ -11,11 +11,37 @@
 
 void kvmppc_init(void);
 
+#ifdef CONFIG_KVM
+
 uint32_t kvmppc_get_tbfreq(void);
 uint64_t kvmppc_get_clockfreq(void);
 int kvmppc_get_hypercall(CPUState *env, uint8_t *buf, int buf_len);
 int kvmppc_set_interrupt(CPUState *env, int irq, int level);
 
+#else
+
+static inline uint32_t kvmppc_get_tbfreq(void)
+{
+    return 0;
+}
+
+static inline uint64_t kvmppc_get_clockfreq(void)
+{
+    return 0;
+}
+
+static inline int kvmppc_get_hypercall(CPUState *env, uint8_t *buf, int buf_len)
+{
+    return -1;
+}
+
+static inline int kvmppc_set_interrupt(CPUState *env, int irq, int level)
+{
+    return -1;
+}
+
+#endif
+
 #ifndef CONFIG_KVM
 #define kvmppc_eieio() do { } while (0)
 #else

