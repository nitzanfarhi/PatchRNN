commit f7e1ad1a1e23af97419cd8d5adff67fedf7cf169
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Wed Dec 10 15:52:13 2014 -0800

    fs/binfmt_misc.c: use GFP_KERNEL instead of GFP_USER
    
    GFP_USER means "honour cpuset nodes-allowed beancounting".  These are
    regular old kernel objects and there seems no reason to give them this
    treatment.
    
    Acked-by: Mike Frysinger <vapier@gentoo.org>
    Cc: Joe Perches <joe@perches.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/fs/binfmt_misc.c b/fs/binfmt_misc.c
index 01a2cd9ab2bf..70789e198dea 100644
--- a/fs/binfmt_misc.c
+++ b/fs/binfmt_misc.c
@@ -308,7 +308,7 @@ static Node *create_entry(const char __user *buffer, size_t count)
 
 	err = -ENOMEM;
 	memsize = sizeof(Node) + count + 8;
-	e = kmalloc(memsize, GFP_USER);
+	e = kmalloc(memsize, GFP_KERNEL);
 	if (!e)
 		goto out;
 
@@ -416,7 +416,7 @@ static Node *create_entry(const char __user *buffer, size_t count)
 
 			if (e->mask) {
 				int i;
-				char *masked = kmalloc(e->size, GFP_USER);
+				char *masked = kmalloc(e->size, GFP_KERNEL);
 
 				print_hex_dump_bytes(
 					KBUILD_MODNAME ": register:  mask[decoded]: ",

