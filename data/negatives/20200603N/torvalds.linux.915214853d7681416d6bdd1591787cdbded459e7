commit 915214853d7681416d6bdd1591787cdbded459e7
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:39:40 2006 -0700

    [SPARC64] clock: Only probe central fhc clock on Enterprise boxes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/arch/sparc64/kernel/time.c b/arch/sparc64/kernel/time.c
index 540e4b6c2dee..75cb6b4dc14f 100644
--- a/arch/sparc64/kernel/time.c
+++ b/arch/sparc64/kernel/time.c
@@ -780,6 +780,13 @@ static int __devinit clock_probe(struct of_device *op, const struct of_device_id
 	if (!model || !clock_model_matches(model))
 		return -ENODEV;
 
+	/* On an Enterprise system there can be multiple mostek clocks.
+	 * We should only match the one that is on the central FHC bus.
+	 */
+	if (!strcmp(dp->parent, "fhc") &&
+	    strcmp(dp->parent->parent, "central") != 0)
+		return -ENODEV;
+
 	size = (op->resource[0].end - op->resource[0].start) + 1;
 	regs = of_ioremap(&op->resource[0], 0, size, "clock");
 	if (!regs)

