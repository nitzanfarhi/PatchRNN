commit d2867f7943a321096a4007e5f791cf30f9db044e
Author: Yves Jacolin <yjacolin@free.fr>
Date:   Wed May 7 19:35:51 2014 +0200

    Add <ogc:PropertyName></ogc:PropertyName> tags in SLD label (#4921)
    
    Added in <label></label> when we are using values from an attribute
    (ie property in OGC terms). In MapServer this is the only way to get
    a value for a label when using the labelitem parameter.

diff --git a/mapogcsld.c b/mapogcsld.c
index c23b9eea..67c7127b 100644
--- a/mapogcsld.c
+++ b/mapogcsld.c
@@ -3833,7 +3833,7 @@ char *msSLDGenerateTextSLD(classObj *psClass, layerObj *psLayer, int nVersion)
     snprintf(szTmp, sizeof(szTmp), "<%sTextSymbolizer>\n",  sNameSpace);
     pszSLD = msStringConcatenate(pszSLD, szTmp);
 
-    snprintf(szTmp, sizeof(szTmp), "<%sLabel>%s</%sLabel>\n",  sNameSpace,
+    snprintf(szTmp, sizeof(szTmp), "<%sLabel><ogc:PropertyName>%s</ogc:PropertyName></%sLabel>\n",  sNameSpace,
              psLayer->labelitem, sNameSpace);
     pszSLD = msStringConcatenate(pszSLD, szTmp);
 

