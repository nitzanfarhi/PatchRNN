commit 702807365ee63f0929858ea26eeea593df4e51da
Author: Tom Gundersen <teg@jklm.no>
Date:   Fri Apr 11 23:57:18 2014 +0200

    networkd: add an assert
    
    This error should never happen, so replace the check with an assert. The check
    was anyway broken due to an uninitialized return value.
    
    Reported by Thomas Hindoe Paaboel Andersen <phomes@gmail.com>.

diff --git a/src/network/networkd-link.c b/src/network/networkd-link.c
index 684e1e5d3..31b4befd7 100644
--- a/src/network/networkd-link.c
+++ b/src/network/networkd-link.c
@@ -1518,8 +1518,7 @@ int link_save(Link *link) {
         assert(link->state_file);
 
         state = link_state_to_string(link->state);
-        if (!state)
-                goto finish;
+        assert(state);
 
         r = fopen_temporary(link->state_file, &f, &temp_path);
         if (r < 0)

