commit e75316a89374f85d94cebf93a328db4d565d65ef
Author: Vassil Vassilev <vvasilev@cern.ch>
Date:   Wed Oct 2 15:54:06 2013 +0200

    Update clang::Decl::isUsed.
    
    CheckVariableDeclaration calls mergeVarDecl, which updates isUsed.
    And if the previous wasn't used the VD's used flag gets updated to not used too.

diff --git a/interpreter/cling/lib/Interpreter/DeclExtractor.cpp b/interpreter/cling/lib/Interpreter/DeclExtractor.cpp
index 03e1ab3972..66b50bd0ad 100644
--- a/interpreter/cling/lib/Interpreter/DeclExtractor.cpp
+++ b/interpreter/cling/lib/Interpreter/DeclExtractor.cpp
@@ -272,8 +272,13 @@ namespace cling {
                               );
 
         m_Sema->LookupName(Previous, S);
-
+        bool VDWasUsed = VD->isUsed();
         m_Sema->CheckVariableDeclaration(VD, Previous);
+        // CheckVariableDeclaration calls mergeVarDecl, which updates isUsed. 
+        // And if the previous wasn't used the VD's used flag gets updated to 
+        // not used too.
+        if(VDWasUsed)
+          VD->setIsUsed(true);
       }
 
       if (ND->isInvalidDecl())

