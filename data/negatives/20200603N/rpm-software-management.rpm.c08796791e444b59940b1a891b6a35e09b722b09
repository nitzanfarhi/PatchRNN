commit c08796791e444b59940b1a891b6a35e09b722b09
Author: Florian Festi <ffesti@redhat.com>
Date:   Tue Jun 10 10:29:38 2014 +0200

    Add packageDependencies() to allow accesing the rpmds by name tag

diff --git a/build/rpmbuild_internal.h b/build/rpmbuild_internal.h
index 0a1977fb9..387f87a9f 100644
--- a/build/rpmbuild_internal.h
+++ b/build/rpmbuild_internal.h
@@ -340,6 +340,16 @@ rpmRC lookupPackage(rpmSpec spec, const char * name, int flag,
 RPM_GNUC_INTERNAL
 Package newPackage(const char *name, rpmstrPool pool, Package * pkglist);
 
+
+/** \ingroup rpmbuild
+ * Return rpmds containing the dependencies of a given type
+ * @param pkg		package
+ * @param tag		name tag denominating the dependency
+ * @return		pointer to dependency set
+ */
+RPM_GNUC_INTERNAL
+rpmds * packageDependencies(Package pkg, rpmTagVal tag);
+
 /** \ingroup rpmbuild
  * Post-build processing for binary package(s).
  * @param spec		spec file control structure
diff --git a/build/spec.c b/build/spec.c
index 7ae2120b7..d9446cd93 100644
--- a/build/spec.c
+++ b/build/spec.c
@@ -174,6 +174,48 @@ static Package freePackages(Package packages)
     return NULL;
 }
 
+rpmds * packageDependencies(Package pkg, rpmTagVal tag)
+{ 
+    if (!pkg)
+	return NULL;
+
+    switch (tag) {
+    default:
+    case RPMTAG_REQUIRENAME:
+	return &pkg->requires;
+	break;
+    case RPMTAG_PROVIDENAME:
+	return &pkg->provides;
+	break;
+    case RPMTAG_RECOMMENDNAME:
+	return &pkg->recommends;
+	break;
+    case RPMTAG_SUGGESTNAME:
+	return &pkg->suggests;
+	break;
+    case RPMTAG_SUPPLEMENTNAME:
+	return &pkg->supplements;
+	break;
+    case RPMTAG_ENHANCENAME:
+	return &pkg->enhances;
+	break;
+    case RPMTAG_CONFLICTNAME:
+	return &pkg->conflicts;
+	break;
+    case RPMTAG_OBSOLETENAME:
+	return &pkg->obsoletes;
+	break;
+    case RPMTAG_TRIGGERNAME:
+	return &pkg->triggers;
+	break;
+    case RPMTAG_ORDERNAME:
+	return &pkg->order;
+	break;
+    }
+    return NULL;
+}
+
+
 rpmSpec newSpec(void)
 {
     rpmSpec spec = xcalloc(1, sizeof(*spec));

