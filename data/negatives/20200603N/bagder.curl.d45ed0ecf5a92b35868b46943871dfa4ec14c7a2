commit d45ed0ecf5a92b35868b46943871dfa4ec14c7a2
Author: Daniel Stenberg <daniel@haxx.se>
Date:   Wed Jan 5 14:09:53 2011 +0100

    SSH: acknowledge speedcheck
    
    Check for speedcheck limits during the state machine traversals

diff --git a/lib/ssh.c b/lib/ssh.c
index 73d0478a4..58da9e629 100644
--- a/lib/ssh.c
+++ b/lib/ssh.c
@@ -2456,6 +2456,12 @@ static CURLcode ssh_easy_statemach(struct connectdata *conn,
 
     if(Curl_pgrsUpdate(conn))
       return CURLE_ABORTED_BY_CALLBACK;
+    else {
+      struct timeval now = Curl_tvnow();
+      result = Curl_speedcheck(data, now);
+      if(result)
+        return result;
+    }
 
     left = Curl_timeleft(data, NULL, duringconnect);
     if(left < 0) {

