commit 17b3c70ea9cd21b71b44062dfff20cea7e67b349
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 26 11:20:46 2012 +0100

    core: try all srv protocols when not already set
    
    - patch to commit by Mihály Mészáros

diff --git a/resolve.c b/resolve.c
index 34d4ff853..2a690a442 100644
--- a/resolve.c
+++ b/resolve.c
@@ -1475,7 +1475,7 @@ struct hostent* no_naptr_srv_sip_resolvehost(str* name, unsigned short* port, ch
 						" (%d), unable to perform SRV lookup\n", name->len);
 	} else {
 		/* if proto available, then add only the forced protocol to the list */
-		if (proto && *proto==0){
+		if (proto && *proto!=PROTO_NONE){
 			srv_proto_list[0].proto=*proto;
 			list_len=1;
 		} else {

