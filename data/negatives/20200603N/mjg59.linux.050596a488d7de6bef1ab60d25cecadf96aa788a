commit 050596a488d7de6bef1ab60d25cecadf96aa788a
Author: Rupesh Gujare <rupesh.gujare@atmel.com>
Date:   Fri Aug 23 18:33:28 2013 +0100

    staging: ozwpan: Check for correct config number.
    
    Check for valid config number before completing set interface.
    
    Signed-off-by: Rupesh Gujare <rupesh.gujare@atmel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ozwpan/ozhcd.c b/drivers/staging/ozwpan/ozhcd.c
index ab93b74e34be..83ed64c72872 100644
--- a/drivers/staging/ozwpan/ozhcd.c
+++ b/drivers/staging/ozwpan/ozhcd.c
@@ -909,7 +909,7 @@ static void oz_hcd_complete_set_interface(struct oz_port *port, struct urb *urb,
 	struct usb_hcd *hcd = port->ozhcd->hcd;
 	int rc = 0;
 
-	if (rcode == 0) {
+	if ((rcode == 0) && (port->config_num > 0)) {
 		struct usb_host_config *config;
 		struct usb_host_interface *intf;
 		oz_dbg(ON, "Set interface %d alt %d\n", if_num, alt);

