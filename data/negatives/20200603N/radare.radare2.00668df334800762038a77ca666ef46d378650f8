commit 00668df334800762038a77ca666ef46d378650f8
Author: xarkes <antide.petit@gmail.com>
Date:   Sat Mar 3 17:49:27 2018 +0100

    Fix non closing on readline failure (windows)

diff --git a/libr/cons/dietline.c b/libr/cons/dietline.c
index 572a63890..337aea479 100644
--- a/libr/cons/dietline.c
+++ b/libr/cons/dietline.c
@@ -164,7 +164,8 @@ static int r_line_readchar_win(int *vch) { // this function handle the input in
 	if (I.zerosep) {
 		*vch = 0;
 		buf[0] = 0;
-		read (0, buf, 1);
+		if (read (0, buf, 1) != 1)
+			return -1;
 		return buf[0];
 	}
 

