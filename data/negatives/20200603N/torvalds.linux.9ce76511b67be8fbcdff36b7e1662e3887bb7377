commit 9ce76511b67be8fbcdff36b7e1662e3887bb7377
Author: Tom Rini <trini@konsulko.com>
Date:   Tue Aug 22 21:51:46 2017 -0400

    ASoC: rt5677: Reintroduce I2C device IDs
    
    Not all devices with ACPI and this combination of sound devices will
    have the required information provided via ACPI.  Reintroduce the I2C
    device ID to restore sound functionality on on the Chromebook 'Samus'
    model.
    
    [ More background note:
     the commit a36afb0ab648 ("ASoC: rt5677: Introduce proper table...")
     moved the i2c ID probed via ACPI ("RT5677CE:00") to a proper
     acpi_device_id table.  Although the action itself is correct per se,
     the overseen issue is the reference id->driver_data at
     rt5677_i2c_probe() for retrieving the corresponding chip model for
     the given id.  Since id=NULL is passed for ACPI matching case, we get
     an Oops now.
    
     We already have queued more fixes for 4.14 and they already address
     the issue, but they are bigger changes that aren't preferable for the
     late 4.13-rc stage.  So, this patch just papers over the bug as a
     once-off quick fix for a particular ACPI matching.  -- tiwai ]
    
    Fixes: a36afb0ab648 ("ASoC: rt5677: Introduce proper table for ACPI enumeration")
    Signed-off-by: Tom Rini <trini@konsulko.com>
    Acked-by: Mark Brown <broonie@kernel.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

diff --git a/sound/soc/codecs/rt5677.c b/sound/soc/codecs/rt5677.c
index 36e530a36c82..6f629278d982 100644
--- a/sound/soc/codecs/rt5677.c
+++ b/sound/soc/codecs/rt5677.c
@@ -5021,6 +5021,7 @@ static const struct regmap_config rt5677_regmap = {
 static const struct i2c_device_id rt5677_i2c_id[] = {
 	{ "rt5677", RT5677 },
 	{ "rt5676", RT5676 },
+	{ "RT5677CE:00", RT5677 },
 	{ }
 };
 MODULE_DEVICE_TABLE(i2c, rt5677_i2c_id);

