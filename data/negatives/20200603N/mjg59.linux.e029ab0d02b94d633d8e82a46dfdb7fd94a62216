commit e029ab0d02b94d633d8e82a46dfdb7fd94a62216
Author: Florian Tobias Schandinat <FlorianSchandinat@gmx.de>
Date:   Fri Sep 17 02:10:33 2010 +0000

    viafb: reduce I2C timeout and delay
    
    This patch reduces the value for I2C timeout and udelay.
    The udelay was reduced to 10 (old: 40) which is still very high as for
    standard-mode I2C even 5 should work. This gives a speedup of factor 4
    when talking to I2C devices.
    The timeout was reduced to 2 (old: 20) which is taken from the radeon
    driver so it should work as well. This gives a speedup of factor 10 when
    detecting that there is no I2C device we want to talk to.
    This causes a huge improvement of device initialization time.
    
    Signed-off-by: Florian Tobias Schandinat <FlorianSchandinat@gmx.de>
    Acked-by: Jonathan Corbet <corbet@lwn.net>
    Cc: Joseph Chan <JosephChan@via.com.tw>

diff --git a/drivers/video/via/via_i2c.c b/drivers/video/via/via_i2c.c
index 021112e279de..3844b558b7bd 100644
--- a/drivers/video/via/via_i2c.c
+++ b/drivers/video/via/via_i2c.c
@@ -202,8 +202,8 @@ static int create_i2c_bus(struct i2c_adapter *adapter,
 	algo->setscl = via_i2c_setscl;
 	algo->getsda = via_i2c_getsda;
 	algo->getscl = via_i2c_getscl;
-	algo->udelay = 40;
-	algo->timeout = 20;
+	algo->udelay = 10;
+	algo->timeout = 2;
 	algo->data = adap_cfg;
 
 	sprintf(adapter->name, "viafb i2c io_port idx 0x%02x",

