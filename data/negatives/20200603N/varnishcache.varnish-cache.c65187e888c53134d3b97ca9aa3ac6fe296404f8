commit c65187e888c53134d3b97ca9aa3ac6fe296404f8
Author: Poul-Henning Kamp <phk@phk.freebsd.dk>
Date:   Mon Aug 21 17:49:39 2006 +0000

    Bandaid until Dag Erling does what's necessary
    
    
    git-svn-id: http://www.varnish-cache.org/svn/trunk/varnish-cache@874 d4fa192b-c00b-0410-8231-f00ffab90ce4

diff --git a/bin/varnishd/tcp.c b/bin/varnishd/tcp.c
index ac38dbca5..d59afe60e 100644
--- a/bin/varnishd/tcp.c
+++ b/bin/varnishd/tcp.c
@@ -10,6 +10,7 @@
 #include <errno.h>
 #include <netdb.h>
 #include <stdio.h>
+#include <stdlib.h>
 #include <string.h>
 #include <unistd.h>
 
@@ -74,6 +75,19 @@ accept_filter(int fd)
 }
 #endif
 
+static char *
+strndup(const char *p, unsigned n)
+{
+	char *q;
+
+	q = malloc(n + 1);
+	if (q != NULL) {
+		memcpy(q, p, n);
+		q[n] = '\0';
+	}
+	return (q);
+}
+
 int
 TCP_parse(const char *str, char **addr, char **port)
 {

