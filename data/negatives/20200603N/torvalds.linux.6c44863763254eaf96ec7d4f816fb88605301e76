commit 6c44863763254eaf96ec7d4f816fb88605301e76
Author: Peter Ujfalusi <peter.ujfalusi@ti.com>
Date:   Wed Jun 1 13:05:10 2011 +0300

    MFD: twl6040: Change platform data for soc codec driver
    
    Pass twl4030_codec_data instead of the twl4030_audio_data
    for the ASoC codec driver.
    
    Signed-off-by: Peter Ujfalusi <peter.ujfalusi@ti.com>
    Acked-by: Samuel Ortiz <sameo@linux.intel.com>

diff --git a/drivers/mfd/twl6040-core.c b/drivers/mfd/twl6040-core.c
index 57ae36bae807..cfaedb5581ad 100644
--- a/drivers/mfd/twl6040-core.c
+++ b/drivers/mfd/twl6040-core.c
@@ -501,9 +501,8 @@ static int __devinit twl6040_probe(struct platform_device *pdev)
 	if (pdata->codec) {
 		cell = &twl6040->cells[children];
 		cell->name = "twl6040-codec";
-		/* The codec expects the twl4030_audio_data as platform data */
-		cell->platform_data = pdata;
-		cell->pdata_size = sizeof(*pdata);
+		cell->platform_data = pdata->codec;
+		cell->pdata_size = sizeof(*pdata->codec);
 		children++;
 	}
 

