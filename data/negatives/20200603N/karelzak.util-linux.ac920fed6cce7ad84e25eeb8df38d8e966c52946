commit ac920fed6cce7ad84e25eeb8df38d8e966c52946
Author: Davidlohr Bueso <davidlohr@hp.com>
Date:   Sat Sep 21 20:45:14 2013 -0700

    libfdisk: gpt: avoid unnecessary pmbr check
    
    We only jump to the 'check_hybrid' label when a valid pmbr
    is detected, so we need not recheck again. Move the label's
    logic so it doesn't include the check.
    
    Signed-off-by: Davidlohr Bueso <davidlohr@hp.com>

diff --git a/libfdisk/src/gpt.c b/libfdisk/src/gpt.c
index 908da9922..155745d26 100644
--- a/libfdisk/src/gpt.c
+++ b/libfdisk/src/gpt.c
@@ -490,9 +490,10 @@ static int valid_pmbr(struct fdisk_context *cxt)
 			goto check_hybrid;
 		}
 	}
-check_hybrid:
+
 	if (ret != GPT_MBR_PROTECTIVE)
 		goto done;
+check_hybrid:
 	for (i = 0 ; i < 4; i++) {
 		if ((pmbr->partition_record[i].os_type != EFI_PMBR_OSTYPE) &&
 		    (pmbr->partition_record[i].os_type != 0x00))

