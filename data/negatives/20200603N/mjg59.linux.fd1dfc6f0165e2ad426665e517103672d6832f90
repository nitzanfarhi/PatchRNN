commit fd1dfc6f0165e2ad426665e517103672d6832f90
Author: Christoph Lameter <clameter@sgi.com>
Date:   Tue Sep 5 11:56:51 2006 -0700

    [IA64-SGI] Do not request DMA memory for BTE
    
    The GFP_DMA option usually does nothing on SN2 since all of memory is in thei
    DMA zone and the BTE has always been capable of addressing all of memory.
    So there is no need to get memory from a restricted range of memory (which
    is what GFP_DMA is for).
    
    Remove useless __GFP_DMA option.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

diff --git a/arch/ia64/sn/kernel/bte.c b/arch/ia64/sn/kernel/bte.c
index 27dee4584061..7f73ad4408aa 100644
--- a/arch/ia64/sn/kernel/bte.c
+++ b/arch/ia64/sn/kernel/bte.c
@@ -277,8 +277,7 @@ bte_result_t bte_unaligned_copy(u64 src, u64 dest, u64 len, u64 mode)
 	}
 
 	/* temporary buffer used during unaligned transfers */
-	bteBlock_unaligned = kmalloc(len + 3 * L1_CACHE_BYTES,
-				     GFP_KERNEL | GFP_DMA);
+	bteBlock_unaligned = kmalloc(len + 3 * L1_CACHE_BYTES, GFP_KERNEL);
 	if (bteBlock_unaligned == NULL) {
 		return BTEFAIL_NOTAVAIL;
 	}

