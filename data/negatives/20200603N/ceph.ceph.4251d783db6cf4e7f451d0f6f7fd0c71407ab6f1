commit 4251d783db6cf4e7f451d0f6f7fd0c71407ab6f1
Author: Yehuda Sadeh <yehuda@inktank.com>
Date:   Sat Sep 15 15:21:56 2012 -0700

    rgw: update cache interface
    
    RGWRados::delete_obj() was updated in commit
    93218aeab7615ced131f0f1af49f6cda41b4a661, but we
    failed to update the corresponding RGWCache api.
    This commit fixes it.
    
    Signed-off-by: Yehuda Sadeh <yehuda@inktank.com>

diff --git a/src/rgw/rgw_cache.h b/src/rgw/rgw_cache.h
index 1419e813d5..7213b1af50 100644
--- a/src/rgw/rgw_cache.h
+++ b/src/rgw/rgw_cache.h
@@ -197,7 +197,7 @@ public:
 
   int obj_stat(void *ctx, rgw_obj& obj, uint64_t *psize, time_t *pmtime, map<string, bufferlist> *attrs, bufferlist *first_chunk);
 
-  int delete_obj(void *ctx, rgw_obj& obj, bool sync);
+  int delete_obj(void *ctx, rgw_obj& obj);
 };
 
 template <class T>
@@ -213,13 +213,13 @@ void RGWCache<T>::normalize_bucket_and_obj(rgw_bucket& src_bucket, string& src_o
 }
 
 template <class T>
-int RGWCache<T>::delete_obj(void *ctx, rgw_obj& obj, bool sync)
+int RGWCache<T>::delete_obj(void *ctx, rgw_obj& obj)
 {
   rgw_bucket bucket;
   string oid;
   normalize_bucket_and_obj(obj.bucket, obj.object, bucket, oid);
   if (bucket.name[0] != '.')
-    return T::delete_obj(ctx, obj, sync);
+    return T::delete_obj(ctx, obj);
 
   string name = normal_name(obj);
   cache.remove(name);
@@ -227,7 +227,7 @@ int RGWCache<T>::delete_obj(void *ctx, rgw_obj& obj, bool sync)
   ObjectCacheInfo info;
   distribute(name, obj, info, REMOVE_OBJ);
 
-  return T::delete_obj(ctx, obj, sync);
+  return T::delete_obj(ctx, obj);
 }
 
 template <class T>

