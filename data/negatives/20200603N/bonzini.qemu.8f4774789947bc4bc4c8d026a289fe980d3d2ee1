commit 8f4774789947bc4bc4c8d026a289fe980d3d2ee1
Author: Michael Roth <mdroth@linux.vnet.ibm.com>
Date:   Thu Aug 11 15:38:11 2011 -0500

    guest agent: remove g_strcmp0 usage
    
    g_strcmp0 isn't in all version of glib 2.0, so don't use it to avoid
    build breakage on older distros.
    
    Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>
    Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>
    Signed-off-by: Anthony Liguori <aliguori@us.ibm.com>

diff --git a/qemu-ga.c b/qemu-ga.c
index eb632b7b55..858d75a361 100644
--- a/qemu-ga.c
+++ b/qemu-ga.c
@@ -146,7 +146,7 @@ static void ga_log(const gchar *domain, GLogLevelFlags level,
     }
 
     level &= G_LOG_LEVEL_MASK;
-    if (g_strcmp0(domain, "syslog") == 0) {
+    if (domain && strcmp(domain, "syslog") == 0) {
         syslog(LOG_INFO, "%s: %s", level_str, msg);
     } else if (level & s->log_level) {
         g_get_current_time(&time);

