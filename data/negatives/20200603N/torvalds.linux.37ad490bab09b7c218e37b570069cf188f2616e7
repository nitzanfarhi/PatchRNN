commit 37ad490bab09b7c218e37b570069cf188f2616e7
Author: Nicholas Lowell <nlowell@lexmark.com>
Date:   Mon Mar 19 09:23:14 2018 -0400

    regulator: giving regulator controlling gpios a non-empty label when used through the devicetree.
    
    When the label is empty, it causes missing information and limits diagnostics
    for instances such as 'cat /sys/kernel/debug/gpio'
    
    Setting the label to the regulator supply_name will point to the device
    using the gpio(s).
    
    Signed-off-by: Nicholas Lowell <nlowell@lexmark.com>
    Signed-off-by: Mark Brown <broonie@kernel.org>

diff --git a/drivers/regulator/gpio-regulator.c b/drivers/regulator/gpio-regulator.c
index a2eb50719c7b..a86b8997bb54 100644
--- a/drivers/regulator/gpio-regulator.c
+++ b/drivers/regulator/gpio-regulator.c
@@ -196,6 +196,7 @@ of_get_gpio_regulator_config(struct device *dev, struct device_node *np,
 				break;
 			}
 			config->gpios[i].gpio = gpio;
+			config->gpios[i].label = config->supply_name;
 			if (proplen > 0) {
 				of_property_read_u32_index(np, "gpios-states",
 							   i, &ret);

