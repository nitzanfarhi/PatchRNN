commit d67e7ebb2a15bf0429c55f2fc1c4b02808367874
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Nov 18 11:55:00 2005 -0500

    [libata sata_mv] IRQ PIO build fix

diff --git a/drivers/scsi/sata_mv.c b/drivers/scsi/sata_mv.c
index 9687646d73e1..6dc2a612ccbd 100644
--- a/drivers/scsi/sata_mv.c
+++ b/drivers/scsi/sata_mv.c
@@ -1220,8 +1220,7 @@ static void mv_host_intr(struct ata_host_set *host_set, u32 relevant,
 			handled++;
 		}
 
-		if (ap &&
-		    (ap->flags & (ATA_FLAG_PORT_DISABLED | ATA_FLAG_NOINTR)))
+		if (ap && (ap->flags & ATA_FLAG_PORT_DISABLED))
 			continue;
 
 		err_mask = ac_err_mask(ata_status);
@@ -1242,7 +1241,7 @@ static void mv_host_intr(struct ata_host_set *host_set, u32 relevant,
 				VPRINTK("port %u IRQ found for qc, "
 					"ata_status 0x%x\n", port,ata_status);
 				/* mark qc status appropriately */
-				if (!(qc->tf.ctl & ATA_NIEN))
+				if (!(qc->tf.flags & ATA_TFLAG_POLLING))
 					ata_qc_complete(qc, err_mask);
 			}
 		}

