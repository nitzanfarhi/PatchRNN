commit e9ccdae09b1913fa2427c2a7f87a5ba6ce8c5d60
Author: Reimar DÃ¶ffinger <Reimar.Doeffinger@gmx.de>
Date:   Sun Mar 27 14:38:21 2011 +0200

    Use consistent condition for whether to run slice-threading execute function.

diff --git a/libavcodec/mpeg12.c b/libavcodec/mpeg12.c
index 5db24e87fd..7034a91b51 100644
--- a/libavcodec/mpeg12.c
+++ b/libavcodec/mpeg12.c
@@ -2344,7 +2344,7 @@ static int decode_chunks(AVCodecContext *avctx,
             break;
 
         case PICTURE_START_CODE:
-            if (avctx->thread_count > 1 && s->slice_count) {
+            if (HAVE_THREADS && (avctx->active_thread_type&FF_THREAD_SLICE) && s->slice_count) {
                 int i;
 
                 avctx->execute(avctx, slice_decode_thread,

