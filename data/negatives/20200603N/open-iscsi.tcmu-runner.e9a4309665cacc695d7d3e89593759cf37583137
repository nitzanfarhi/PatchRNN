commit e9a4309665cacc695d7d3e89593759cf37583137
Author: tangwenji <tang.wenji@zte.com.cn>
Date:   Thu Jul 20 18:35:55 2017 +0800

    tcmu: fix vpd0 inquiry response
    
    Signed-off-by: tangwenji <tang.wenji@zte.com.cn>

diff --git a/api.c b/api.c
index 1b8b7aa..b53fd1c 100644
--- a/api.c
+++ b/api.c
@@ -342,14 +342,19 @@ int tcmu_emulate_evpd_inquiry(
 		memset(data, 0, sizeof(data));
 
 		/* data[1] (page code) already 0 */
-
-		data[4] = 0x80;
-		data[5] = 0x83;
-		data[6] = 0xb0;
-		data[7] = 0xb1;
-		data[8] = 0xb2;
-
-		data[3] = 5;
+		/*
+		  *  spc4r22 7.7.13 The supported VPD page list shall contain
+		  *  a list of all VPD page codes (see 7.7) implemented by the
+		  *  logical unit in ascending order beginning with page code 00h
+		  */
+		data[4] = 0x00;
+		data[5] = 0x80;
+		data[6] = 0x83;
+		data[7] = 0xb0;
+		data[8] = 0xb1;
+		data[9] = 0xb2;
+
+		data[3] = 6;
 
 		tcmu_memcpy_into_iovec(iovec, iov_cnt, data, sizeof(data));
 		return SAM_STAT_GOOD;

