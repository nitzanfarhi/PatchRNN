commit 282edf8494f4381120aa0b6857920c731c89b0d1
Author: Zoltan Varga <vargaz@gmail.com>
Date:   Tue Jan 12 14:39:55 2016 -0500

    [llvmonly] Avoid disabling llvm for the Selector.GetHandle () intrinsics.

diff --git a/mono/mini/method-to-ir.c b/mono/mini/method-to-ir.c
index d299eca7f6a..96787ddd999 100644
--- a/mono/mini/method-to-ir.c
+++ b/mono/mini/method-to-ir.c
@@ -6703,7 +6703,7 @@ mini_emit_inst_for_method (MonoCompile *cfg, MonoMethod *cmethod, MonoMethodSign
 			   (strcmp (cmethod->klass->name_space, "System.Reflection") == 0) &&
 			   (strcmp (cmethod->klass->name, "Assembly") == 0)) {
 		if (cfg->llvm_only && !strcmp (cmethod->name, "GetExecutingAssembly")) {
-			/* No stack walks are current available, so implement this as an intrinsic */
+			/* No stack walks are currently available, so implement this as an intrinsic */
 			MonoInst *assembly_ins;
 
 			EMIT_NEW_AOTCONST (cfg, assembly_ins, MONO_PATCH_INFO_IMAGE, cfg->method->klass->image);
@@ -6727,11 +6727,13 @@ mini_emit_inst_for_method (MonoCompile *cfg, MonoMethod *cmethod, MonoMethodSign
 		if (cfg->backend->have_objc_get_selector &&
 			!strcmp (cmethod->name, "GetHandle") && fsig->param_count == 1 &&
 		    (args [0]->opcode == OP_GOT_ENTRY || args [0]->opcode == OP_AOTCONST) &&
-		    cfg->compile_aot) {
+		    cfg->compile_aot && !cfg->llvm_only) {
 			MonoInst *pi;
 			MonoJumpInfoToken *ji;
 			MonoString *s;
 
+			// FIXME: llvmonly
+
 			cfg->exception_message = g_strdup ("GetHandle");
 			cfg->disable_llvm = TRUE;
 

