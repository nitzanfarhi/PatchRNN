commit 71b645f698f05c6b1524614559b4c19af343c353
Author: Kazuho Oku <kazuhooku@gmail.com>
Date:   Mon Nov 6 14:10:35 2017 +0900

    reset `reprocess_is_too_early` when reprocessing

diff --git a/lib/core/request.c b/lib/core/request.c
index e15a9a65..a0ae090f 100644
--- a/lib/core/request.c
+++ b/lib/core/request.c
@@ -366,6 +366,7 @@ void h2o_reprocess_request(h2o_req_t *req, h2o_iovec_t method, const h2o_url_sch
     req->path_normalized = h2o_url_normalize_path(&req->pool, req->path.base, req->path.len, &req->query_at, &req->norm_indexes);
     req->overrides = overrides;
     req->res_is_delegated |= is_delegated;
+    req->reprocess_if_too_early = 0;
     reset_response(req);
 
     /* check the delegation (or reprocess) counter */

