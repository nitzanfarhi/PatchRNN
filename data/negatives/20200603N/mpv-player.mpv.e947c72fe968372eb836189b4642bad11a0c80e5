commit e947c72fe968372eb836189b4642bad11a0c80e5
Author: Alexander Preisinger <alexander.preisinger@gmail.com>
Date:   Thu Jan 2 19:33:52 2014 +0100

    wayland: don't change set fullscreen twice
    
    Newest weston chrashes if we call set_fullscreen twice. This is a major bug
    I which I should probably report.

diff --git a/video/out/wayland_common.c b/video/out/wayland_common.c
index e45483c5f2..f73dc0c2ca 100644
--- a/video/out/wayland_common.c
+++ b/video/out/wayland_common.c
@@ -810,7 +810,7 @@ static void vo_wayland_border (struct vo *vo)
 static void vo_wayland_fullscreen (struct vo *vo)
 {
     struct vo_wayland_state *wl = vo->wayland;
-    if (!wl->display.shell)
+    if (!wl->display.shell || !!vo->opts->fullscreen == wl->window.is_fullscreen)
         return;
 
     struct wl_output *fs_output = wl->display.fs_output;

