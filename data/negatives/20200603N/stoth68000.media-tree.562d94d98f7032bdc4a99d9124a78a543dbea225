commit 562d94d98f7032bdc4a99d9124a78a543dbea225
Author: Mark Langsdorf <mark.langsdorf@amd.com>
Date:   Fri Aug 3 14:09:05 2007 -0500

    [CPUFREQ] Support different families in fid/did to frequency conversion
    
    The equation to find the frequency given the fid and did is family dependant.
    
    Acked-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Joachim Deguara <joachim.deguara@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

diff --git a/arch/i386/kernel/cpu/cpufreq/powernow-k8.c b/arch/i386/kernel/cpu/cpufreq/powernow-k8.c
index f2a65a9609f1..b273b69cfddf 100644
--- a/arch/i386/kernel/cpu/cpufreq/powernow-k8.c
+++ b/arch/i386/kernel/cpu/cpufreq/powernow-k8.c
@@ -76,7 +76,10 @@ static u32 find_khz_freq_from_fid(u32 fid)
 /* Return a frequency in MHz, given an input fid and did */
 static u32 find_freq_from_fiddid(u32 fid, u32 did)
 {
-	return 100 * (fid + 0x10) >> did;
+	if (current_cpu_data.x86 == 0x10)
+		return 100 * (fid + 0x10) >> did;
+	else
+		return 100 * (fid + 0x8) >> did;
 }
 
 static u32 find_khz_freq_from_fiddid(u32 fid, u32 did)

