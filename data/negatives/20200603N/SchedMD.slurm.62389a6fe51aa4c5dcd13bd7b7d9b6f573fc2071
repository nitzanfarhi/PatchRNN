commit 62389a6fe51aa4c5dcd13bd7b7d9b6f573fc2071
Author: Moe Jette <jette1@llnl.gov>
Date:   Mon Jul 14 17:38:53 2008 +0000

    send repeated SIGKILL signals to task epilog as needed

diff --git a/src/slurmd/slurmstepd/mgr.c b/src/slurmd/slurmstepd/mgr.c
index a97b9eae62..b0e2b440ba 100644
--- a/src/slurmd/slurmstepd/mgr.c
+++ b/src/slurmd/slurmstepd/mgr.c
@@ -1801,7 +1801,7 @@ _run_script_as_user(const char *name, const char *path, slurmd_job_t *job,
 			break;
 		} else if (rc == 0) {
 			sleep(1);
-			if ((--max_wait) == 0) {
+			if ((--max_wait) <= 0) {
 				killpg(cpid, SIGKILL);
 				opt = 0;
 			}
@@ -1810,7 +1810,7 @@ _run_script_as_user(const char *name, const char *path, slurmd_job_t *job,
 			break;
 		}
 	}
-	/* Insure that all child processes get killed */
+	/* Insure that all child processes get killed, one last time */
 	killpg(cpid, SIGKILL);
 	slurm_container_signal(job->cont_id, SIGKILL);
 	

