commit c4d198d5183ec7bbf8b53216cfc5ded7ebb0ec0c
Author: Avi Kivity <avi@qumranet.com>
Date:   Sat Jul 21 09:06:46 2007 +0300

    KVM: MMU: Fix cleaning up the shadow page allocation cache
    
    __free_page() wants a struct page, not a virtual address.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/kvm/mmu.c b/drivers/kvm/mmu.c
index d99d2fe53dca..1a87ba9d5156 100644
--- a/drivers/kvm/mmu.c
+++ b/drivers/kvm/mmu.c
@@ -244,7 +244,7 @@ static int mmu_topup_memory_cache_page(struct kvm_mmu_memory_cache *cache,
 static void mmu_free_memory_cache_page(struct kvm_mmu_memory_cache *mc)
 {
 	while (mc->nobjs)
-		__free_page(mc->objects[--mc->nobjs]);
+		free_page((unsigned long)mc->objects[--mc->nobjs]);
 }
 
 static int __mmu_topup_memory_caches(struct kvm_vcpu *vcpu, gfp_t gfp_flags)

