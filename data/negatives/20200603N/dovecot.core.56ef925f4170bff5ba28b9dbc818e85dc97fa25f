commit 56ef925f4170bff5ba28b9dbc818e85dc97fa25f
Author: Timo Sirainen <tss@iki.fi>
Date:   Thu Jul 19 03:59:39 2007 +0300

    Minor code cleanup
    
    --HG--
    branch : HEAD

diff --git a/src/lib-storage/index/maildir/maildir-sync-index.c b/src/lib-storage/index/maildir/maildir-sync-index.c
index 9d261022f..290e42013 100644
--- a/src/lib-storage/index/maildir/maildir-sync-index.c
+++ b/src/lib-storage/index/maildir/maildir-sync-index.c
@@ -250,10 +250,8 @@ maildir_index_update_ext_header(struct maildir_mailbox *mbox,
 				      &data, &data_size) < 0)
 		data_size = 0;
 
-	if (data_size == sizeof(mbox->maildir_hdr) &&
-	    !maildir_index_header_has_changed(data, &mbox->maildir_hdr)) {
-		/* nothing changed */
-	} else {
+	if (data_size != sizeof(mbox->maildir_hdr) ||
+	    maildir_index_header_has_changed(data, &mbox->maildir_hdr)) {
 		mail_index_update_header_ext(trans, mbox->maildir_ext_id, 0,
 					     &mbox->maildir_hdr,
 					     sizeof(mbox->maildir_hdr));

