commit b3507d398b703ed8f06d8608f254c3937a7a42b0
Author: Alex Converse <alex.converse@gmail.com>
Date:   Sun Nov 15 19:40:44 2009 +0000

    Pad the extradata in the AAC ADTS to AudioSpecificConfig bitstream filter.
    
    Originally committed as revision 20541 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/aac_adtstoasc_bsf.c b/libavcodec/aac_adtstoasc_bsf.c
index 96876dd62..9d53a011c 100644
--- a/libavcodec/aac_adtstoasc_bsf.c
+++ b/libavcodec/aac_adtstoasc_bsf.c
@@ -84,7 +84,7 @@ static int aac_adtstoasc_filter(AVBitStreamFilterContext *bsfc,
             buf      += get_bits_count(&gb)/8;
         }
         avctx->extradata_size = 2 + pce_size;
-        avctx->extradata = av_malloc(avctx->extradata_size);
+        avctx->extradata = av_mallocz(avctx->extradata_size + FF_INPUT_BUFFER_PADDING_SIZE);
 
         init_put_bits(&pb, avctx->extradata, avctx->extradata_size);
         put_bits(&pb, 5, hdr.object_type);

