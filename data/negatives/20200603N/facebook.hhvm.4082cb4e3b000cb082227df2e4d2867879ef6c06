commit 4082cb4e3b000cb082227df2e4d2867879ef6c06
Author: Sara Golemon <sgolemon@fb.com>
Date:   Tue Feb 25 15:51:55 2014 -0800

    Fix debug-only invalidation of NativeData buffer
    
    I called memset() incorrectly passing size for value and
    value for size meaning that 0x6A bytes of data were written
    with an essentially garbage value during sweep.
    
    Under the right circumstances, this overran into the next
    object's pre-alloc header.
    
    Fortunately this is a debug-only issue and the invalidation
    only happens in debug builds.
    
    Reviewed By: smith
    
    Differential Revision: D1189301

diff --git a/hphp/runtime/vm/native-data.cpp b/hphp/runtime/vm/native-data.cpp
index 22d02bff19..d9f51a807d 100644
--- a/hphp/runtime/vm/native-data.cpp
+++ b/hphp/runtime/vm/native-data.cpp
@@ -86,7 +86,7 @@ DEBUG_ONLY
 static bool invalidateNativeData(ObjectData* obj, const NativeDataInfo* ndi) {
   const size_t size = ndi->sz + sizeof(SweepNode);
   void *ptr = reinterpret_cast<char*>(obj) - size;
-  memset(ptr, size, 0x6A);
+  memset(ptr, kSmartFreeFill, size);
   return true;
 }
 

