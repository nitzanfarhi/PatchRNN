commit 4bc41b84e9b4d904f68cba2dbe0c60a5428c27c4
Author: Joe Stringer <joe@wand.net.nz>
Date:   Wed Jul 3 16:04:25 2013 +0900

    core: Copy inner_protocol in copy_skb_header()
    
    inner_protocol was added to struct sk_buff in
    0d89d2035fe063461a5ddb609b2c12e7fb006e44 ("MPLS: Add limited GSO support"),
    which is scheduled to be included in v3.11.
    
    That patch did not update __copy_skb_header to copy the inner_protocol.
    
    Signed-off-by: Joe Stringer <joe@wand.net.nz>
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/core/skbuff.c b/net/core/skbuff.c
index 77971a35d6e1..724bb7cb173f 100644
--- a/net/core/skbuff.c
+++ b/net/core/skbuff.c
@@ -697,6 +697,7 @@ static void __copy_skb_header(struct sk_buff *new, const struct sk_buff *old)
 	new->transport_header	= old->transport_header;
 	new->network_header	= old->network_header;
 	new->mac_header		= old->mac_header;
+	new->inner_protocol	= old->inner_protocol;
 	new->inner_transport_header = old->inner_transport_header;
 	new->inner_network_header = old->inner_network_header;
 	new->inner_mac_header = old->inner_mac_header;

