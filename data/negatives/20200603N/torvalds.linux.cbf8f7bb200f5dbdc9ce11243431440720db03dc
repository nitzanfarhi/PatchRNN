commit cbf8f7bb200f5dbdc9ce11243431440720db03dc
Author: Eric Dumazet <edumazet@google.com>
Date:   Thu Apr 19 06:10:26 2012 +0000

    ipv4: dont drop packet in defrag but consume it
    
    When defragmentation is finalized, we clone a packet and kfree_skb() it.
    
    Call consume_skb() to not confuse dropwatch, since its not a drop.
    
    Signed-off-by: Eric Dumazet <edumazet@google.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/ipv4/ip_fragment.c b/net/ipv4/ip_fragment.c
index 3727e234c884..631f596d5d70 100644
--- a/net/ipv4/ip_fragment.c
+++ b/net/ipv4/ip_fragment.c
@@ -569,7 +569,7 @@ static int ip_frag_reasm(struct ipq *qp, struct sk_buff *prev,
 		skb_morph(head, qp->q.fragments);
 		head->next = qp->q.fragments->next;
 
-		kfree_skb(qp->q.fragments);
+		consume_skb(qp->q.fragments);
 		qp->q.fragments = head;
 	}
 

