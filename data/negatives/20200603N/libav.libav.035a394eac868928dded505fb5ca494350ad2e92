commit 035a394eac868928dded505fb5ca494350ad2e92
Author: Jakub Stachowski <qbast@go2.pl>
Date:   Sat Apr 28 11:24:19 2012 -0700

    WMAL: do not output last frame again if nothing was decoded in current packet
    
    Reviewed-by: Mashiat Sarker Shakkhar <mashiat.sarker@gmail.com>
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>
    Signed-off-by: Kostya Shishkov <kostya.shishkov@gmail.com>

diff --git a/libavcodec/wmalosslessdec.c b/libavcodec/wmalosslessdec.c
index e86645e22..913271e21 100644
--- a/libavcodec/wmalosslessdec.c
+++ b/libavcodec/wmalosslessdec.c
@@ -1166,6 +1166,8 @@ static int decode_packet(AVCodecContext *avctx, void *data, int *got_frame_ptr,
     int buf_size       = avpkt->size;
     int num_bits_prev_frame, packet_sequence_number, spliced_packet;
 
+    s->frame.nb_samples = 0;
+
     if (s->packet_done || s->packet_loss) {
         s->packet_done = 0;
 

