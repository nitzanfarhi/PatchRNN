commit c9fe1d6ba603ddc5f2ef0a6b84f9df2bb4c679f1
Author: Tony Breeds <tony@bakeyournoodle.com>
Date:   Tue Feb 12 02:54:33 2008 -0300

    V4L/DVB (7195): xc5000: fix build error when built as module
    
    drivers/built-in.o: In function `set_type':
    tuner-core.c:(.text+0x8879d): undefined reference to `xc5000_attach'
    
    Signed-off-by: Tony Breeds <tony@bakeyournoodle.com>
    Reviewed-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/drivers/media/dvb/frontends/xc5000.h b/drivers/media/dvb/frontends/xc5000.h
index e0e84562aed1..32a5f1c86a16 100644
--- a/drivers/media/dvb/frontends/xc5000.h
+++ b/drivers/media/dvb/frontends/xc5000.h
@@ -45,7 +45,8 @@ struct xc5000_config {
 /* xc5000 callback command */
 #define XC5000_TUNER_RESET		0
 
-#if defined(CONFIG_DVB_TUNER_XC5000) || defined(CONFIG_DVB_TUNER_XC5000_MODULE)
+#if defined(CONFIG_DVB_TUNER_XC5000) || \
+    (defined(CONFIG_DVB_TUNER_XC5000_MODULE) && defined(MODULE))
 extern struct dvb_frontend* xc5000_attach(struct dvb_frontend *fe,
 					  struct i2c_adapter *i2c,
 					  struct xc5000_config *cfg);

