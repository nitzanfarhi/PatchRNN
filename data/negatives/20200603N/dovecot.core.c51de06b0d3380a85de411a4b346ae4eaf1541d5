commit c51de06b0d3380a85de411a4b346ae4eaf1541d5
Author: Aki Tuomi <aki.tuomi@dovecot.fi>
Date:   Mon Aug 6 11:36:41 2018 +0300

    doveconf: Fix compiler nit
    
    Ensure secret_r cannot be NULL unless none was found.

diff --git a/src/config/doveconf.c b/src/config/doveconf.c
index 709a53188..bf1670a10 100644
--- a/src/config/doveconf.c
+++ b/src/config/doveconf.c
@@ -183,6 +183,7 @@ static const char *find_next_secret(const char *input, const char **secret_r)
 {
 	const char *const *secret;
 	const char *ptr = NULL;
+	*secret_r = NULL;
 	for(secret = secrets; *secret != NULL; secret++) {
 		const char *cptr;
 		if ((cptr = strstr(input, *secret)) != NULL) {
@@ -192,6 +193,7 @@ static const char *find_next_secret(const char *input, const char **secret_r)
 			}
 		}
 	}
+	i_assert(*secret_r != NULL || ptr == NULL);
 	return ptr;
 }
 

