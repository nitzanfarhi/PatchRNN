commit 4a27e3d65e76fb0b9e516b6f48cf344098531843
Author: Patrik Nyblom <pan@erlang.org>
Date:   Fri Dec 17 15:32:53 2010 +0100

    Correct usage of pointer-to-size in unix_efile

diff --git a/erts/emulator/drivers/unix/unix_efile.c b/erts/emulator/drivers/unix/unix_efile.c
index 6297ccb8bc..4b3934657c 100644
--- a/erts/emulator/drivers/unix/unix_efile.c
+++ b/erts/emulator/drivers/unix/unix_efile.c
@@ -620,7 +620,7 @@ efile_readdir(Efile_error* errInfo,	/* Where to return error codes. */
 	if (IS_DOT_OR_DOTDOT(dirp->d_name))
 	    continue;
 	buffer[0] = '\0';
-	strncat(buffer, dirp->d_name, size-1);
+	strncat(buffer, dirp->d_name, (*size)-1);
 	*size = strlen(dirp->d_name);
 	return 1;
     }

