commit 787cfbc432bf1d353a77cbdb613754f3963371a3
Author: Blue Swirl <blauwirbel@gmail.com>
Date:   Sat Jan 16 09:06:35 2010 +0000

    Sparc32: improve DMA controller IRQ debugging
    
    Signed-off-by: Blue Swirl <blauwirbel@gmail.com>

diff --git a/hw/sparc32_dma.c b/hw/sparc32_dma.c
index faf6dbc1cf..6e991e0734 100644
--- a/hw/sparc32_dma.c
+++ b/hw/sparc32_dma.c
@@ -142,6 +142,7 @@ void espdma_memory_read(void *opaque, uint8_t *buf, int len)
     DPRINTF("DMA read, direction: %c, addr 0x%8.8x\n",
             s->dmaregs[0] & DMA_WRITE_MEM ? 'w': 'r', s->dmaregs[1]);
     sparc_iommu_memory_read(s->iommu, s->dmaregs[1], buf, len);
+    DPRINTF("Raise IRQ\n");
     s->dmaregs[0] |= DMA_INTR;
     s->dmaregs[1] += len;
 }
@@ -153,6 +154,7 @@ void espdma_memory_write(void *opaque, uint8_t *buf, int len)
     DPRINTF("DMA write, direction: %c, addr 0x%8.8x\n",
             s->dmaregs[0] & DMA_WRITE_MEM ? 'w': 'r', s->dmaregs[1]);
     sparc_iommu_memory_write(s->iommu, s->dmaregs[1], buf, len);
+    DPRINTF("Raise IRQ\n");
     s->dmaregs[0] |= DMA_INTR;
     s->dmaregs[1] += len;
 }

