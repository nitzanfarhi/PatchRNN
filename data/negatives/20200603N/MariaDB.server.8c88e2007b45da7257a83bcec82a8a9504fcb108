commit 8c88e2007b45da7257a83bcec82a8a9504fcb108
Author: vasil <Unknown>
Date:   Sat May 30 13:46:05 2009 +0000

    branches/5.1:
    
    Merge a change from MySQL (this fixes the failing innodb_mysql test):
    
      ------------------------------------------------------------
      revno: 1810.3894.10
      committer: Sergey Glukhov <Sergey.Glukhov@sun.com>
      branch nick: mysql-5.0-bugteam
      timestamp: Tue 2009-05-19 11:32:21 +0500
      message:
        Bug#39793 Foreign keys not constructed when column has a '#' in a comment or default value
        Internal InnoDN FK parser does not recognize '\'' as quotation symbol.
        Suggested fix is to add '\'' symbol check for quotation condition
        (dict_strip_comments() function).
      modified:
        innobase/dict/dict0dict.c
        mysql-test/r/innodb_mysql.result
        mysql-test/t/innodb_mysql.test

diff --git a/dict/dict0dict.c b/dict/dict0dict.c
index 0fec2443836..8cb196bf983 100644
--- a/dict/dict0dict.c
+++ b/dict/dict0dict.c
@@ -2616,7 +2616,7 @@ dict_strip_comments(
 		} else if (quote) {
 			/* Within quotes: do not look for
 			starting quotes or comments. */
-		} else if (*sptr == '"' || *sptr == '`') {
+		} else if (*sptr == '"' || *sptr == '`' || *sptr == '\'') {
 			/* Starting quote: remember the quote character. */
 			quote = *sptr;
 		} else if (*sptr == '#'

