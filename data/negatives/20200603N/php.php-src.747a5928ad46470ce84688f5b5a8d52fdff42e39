commit 747a5928ad46470ce84688f5b5a8d52fdff42e39
Author: Dmitry Stogov <dmitry@zend.com>
Date:   Thu Dec 7 15:01:23 2017 +0300

    Added assertion

diff --git a/Zend/zend_variables.c b/Zend/zend_variables.c
index 1d3d2a66a7..6cdea0ed71 100644
--- a/Zend/zend_variables.c
+++ b/Zend/zend_variables.c
@@ -167,6 +167,7 @@ ZEND_API void ZEND_FASTCALL _zval_copy_ctor_func(zval *zvalue ZEND_FILE_LINE_DC)
 	if (EXPECTED(Z_TYPE_P(zvalue) == IS_ARRAY)) {
 		ZVAL_ARR(zvalue, zend_array_dup(Z_ARRVAL_P(zvalue)));
 	} else if (EXPECTED(Z_TYPE_P(zvalue) == IS_STRING)) {
+		ZEND_ASSERT(!ZSTR_IS_INTERNED(Z_STR_P(zvalue)));
 		CHECK_ZVAL_STRING_REL(Z_STR_P(zvalue));
 		ZVAL_NEW_STR(zvalue, zend_string_dup(Z_STR_P(zvalue), 0));
 	}

