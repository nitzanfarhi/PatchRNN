commit 2fac94ec1ada0e58761809db7637e7c5f4d4fb78
Author: Vadim B. Mikheev <vadim4o@yahoo.com>
Date:   Wed Apr 23 06:09:36 1997 +0000

    1. SHOW/RESET var fixed.
    2. vacuum() call changed (ANALYZE).

diff --git a/src/backend/tcop/utility.c b/src/backend/tcop/utility.c
index 03fcd111ca..ee89e5b391 100644
--- a/src/backend/tcop/utility.c
+++ b/src/backend/tcop/utility.c
@@ -9,7 +9,7 @@
  *
  *
  * IDENTIFICATION
- *    $Header: /cvsroot/pgsql/src/backend/tcop/utility.c,v 1.15 1997/04/23 03:17:09 scrappy Exp $
+ *    $Header: /cvsroot/pgsql/src/backend/tcop/utility.c,v 1.16 1997/04/23 06:09:33 vadim Exp $
  *
  *-------------------------------------------------------------------------
  */
@@ -610,7 +610,9 @@ ProcessUtility(Node *parsetree,
 	commandTag = "VACUUM";
 	CHECK_IF_ABORTED();
 	vacuum( ((VacuumStmt *) parsetree)->vacrel,
-		((VacuumStmt *) parsetree)->verbose);
+		((VacuumStmt *) parsetree)->verbose,
+		((VacuumStmt *) parsetree)->analyze,
+		((VacuumStmt *) parsetree)->va_spec);
 	break;
 
     case T_ExplainStmt:
@@ -649,7 +651,7 @@ ProcessUtility(Node *parsetree,
       
     case T_VariableShowStmt:
 	{
-	    VariableSetStmt *n = (VariableSetStmt *) parsetree;
+	    VariableShowStmt *n = (VariableShowStmt *) parsetree;
 	    GetPGVariable(n->name);
 	    commandTag = "SHOW VARIABLE";
 	}
@@ -657,7 +659,7 @@ ProcessUtility(Node *parsetree,
       
     case T_VariableResetStmt:
 	{
-	    VariableSetStmt *n = (VariableSetStmt *) parsetree;
+	    VariableResetStmt *n = (VariableResetStmt *) parsetree;
 	    ResetPGVariable(n->name);
 	    commandTag = "RESET VARIABLE";
 	}
diff --git a/src/backend/tcop/variable.c b/src/backend/tcop/variable.c
index a1c95a7a02..20006dc4b4 100644
--- a/src/backend/tcop/variable.c
+++ b/src/backend/tcop/variable.c
@@ -1,68 +1,10 @@
 /*
- * Routines for handling of SET var TO statements
+ * Routines for handling of 'SET var TO', 'SHOW var' and 'RESET var'
+ * statements.
  *
- * $Id: variable.c,v 1.4 1997/04/23 03:17:16 scrappy Exp $
+ * $Id: variable.c,v 1.5 1997/04/23 06:09:36 vadim Exp $
  *
- * $Log: variable.c,v $
- * Revision 1.4  1997/04/23 03:17:16  scrappy
- * To: Thomas Lockhart <Thomas.G.Lockhart@jpl.nasa.gov>
- * Subject: Re: [PATCHES] SET DateStyle patches
- *
- * On Tue, 22 Apr 1997, Thomas Lockhart wrote:
- *
- * > Some more patches! These (try to) finish implementing SET variable TO value
- * > for "DateStyle" (changed the name from simply "date" to be more descriptive).
- * > This is based on code from Martin and Bruce (?), which was easy to modify.
- * > The syntax is
- * >
- * > SET DateStyle TO 'iso'
- * > SET DateStyle TO 'postgres'
- * > SET DateStyle TO 'sql'
- * > SET DateStyle TO 'european'
- * > SET DateStyle TO 'noneuropean'
- * > SET DateStyle TO 'us'         (same as "noneuropean")
- * > SET DateStyle TO 'default'    (current same as "postgres,us")
- * >
- * > ("european" is just compared for the first 4 characters, and "noneuropean"
- * > is compared for the first 7 to allow less typing).
- * >
- * > Multiple arguments are allowed, so SET datestyle TO 'sql,euro' is valid.
- * >
- * > My mods also try to implement "SHOW variable" and "RESET variable", but
- * > that part just core dumps at the moment. I would guess that my errors
- * > are obvious to someone who knows what they are doing with the parser stuff,
- * > so if someone (Bruce and/or Martin??) could have it do the right thing
- * > we will have a more complete set of what we need.
- * >
- * > Also, I would like to have a floating point precision global variable to
- * > implement "SET precision TO 10" and perhaps "SET precision TO 10,2" for
- * > float8 and float4, but I don't know how to do that for integer types rather
- * > than strings. If someone is fixing the SHOW and RESET code, perhaps they can
- * > add some hooks for me to do the floats while they are at it.
- * >
- * > I've left some remnants of variable structures in the source code which
- * > I did not use in the interests of getting something working for v6.1.
- * > We'll have time to clean things up for the next release...
- *
- * Revision 1.3  1997/04/17 13:50:30  scrappy
- * From: "Martin J. Laubach" <mjl@CSlab.tuwien.ac.at>
- * Subject: [HACKERS] Patch: set date to euro/us postgres/iso/sql
- *
- *   Here a patch that implements a SET date for use by the datetime
- * stuff. The syntax is
- *
- *         SET date TO 'val[,val,...]'
- *
- *   where val is us (us dates), euro (european dates), postgres,
- * iso or sql.
- *
- *   Thomas is working on the integration in his datetime module.
- * I just needed to get the patch out before it went stale :)
- *
- * Revision 1.1  1997/04/10 16:52:07  mjl
- * Initial revision
  */
-/*-----------------------------------------------------------------------*/
 
 #include <stdio.h>
 #include <string.h>

