commit bfc226e9ad87110c9aa0f0d3466135e0f8f47050
Author: ewt <devnull@localhost>
Date:   Tue Jun 30 18:52:29 1998 +0000

    added an error message when rmdir() fails
    
    CVS patchset: 2159
    CVS date: 1998/06/30 18:52:29

diff --git a/lib/rebuilddb.c b/lib/rebuilddb.c
index e71672b08..a34f9a3de 100644
--- a/lib/rebuilddb.c
+++ b/lib/rebuilddb.c
@@ -103,7 +103,9 @@ int rpmdbRebuild(char * rootdir) {
 			"to recover", dbpath, newdbpath);
 	    return 1;
 	}
-	rmdir(newdbpath);
+	if (rmdir(newdbpath))
+	    rpmMessage(RPMERR_RMDIR, "failed to remove %s: %s\n",
+			newdbpath, strerror(errno));
     }
 
 

