commit 383c55350fb4ab6bd08abfab82038ae0364f1f48
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri May 27 15:19:12 2011 +0000

    [CIFS] Fix endian error comparing authusers when cifsacl enabled
    
    Fix sparse warning:
     CHECK   fs/cifs/cifsacl.c
    fs/cifs/cifsacl.c:41:36: warning: incorrect type in initializer
    (different base types)
    fs/cifs/cifsacl.c:41:36:    expected restricted __le32
    fs/cifs/cifsacl.c:41:36:    got int
    fs/cifs/cifsacl.c:461:52: warning: restricted __le32 degrades to integer
    fs/cifs/cifsacl.c:461:73: warning: restricted __le32 degrades to integer
    
    The second one looks harmless but the first one (sid_authusers)
    was added in commit 2fbc2f1729e785a7b2faf9d8d60926bb1ff62af0
    and only affects 2.6.38/2.6.39
    
    CC: Stable <stable@kernel.org>
    Reviewed-and-Tested-by: Shirish Pargaonkar <shirishpargaonkar@gmail.com>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

diff --git a/fs/cifs/cifsacl.c b/fs/cifs/cifsacl.c
index 076b69ceef7f..5f02b4ee9a03 100644
--- a/fs/cifs/cifsacl.c
+++ b/fs/cifs/cifsacl.c
@@ -38,7 +38,7 @@ static const struct cifs_sid sid_everyone = {
 	1, 1, {0, 0, 0, 0, 0, 1}, {0} };
 /* security id for Authenticated Users system group */
 static const struct cifs_sid sid_authusers = {
-	1, 1, {0, 0, 0, 0, 0, 5}, {11} };
+	1, 1, {0, 0, 0, 0, 0, 5}, {cpu_to_le32(11)} };
 /* group users */
 static const struct cifs_sid sid_user = {1, 2 , {0, 0, 0, 0, 0, 5}, {} };
 
@@ -458,7 +458,8 @@ int compare_sids(const struct cifs_sid *ctsid, const struct cifs_sid *cwsid)
 	if (num_subauth) {
 		for (i = 0; i < num_subauth; ++i) {
 			if (ctsid->sub_auth[i] != cwsid->sub_auth[i]) {
-				if (ctsid->sub_auth[i] > cwsid->sub_auth[i])
+				if (le32_to_cpu(ctsid->sub_auth[i]) >
+					le32_to_cpu(cwsid->sub_auth[i]))
 					return 1;
 				else
 					return -1;

