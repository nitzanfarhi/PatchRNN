commit eecacf73a40f37e74dc9d0453283c79b91f34d51
Author: Dan Carpenter <dan.carpenter@oracle.com>
Date:   Tue Mar 31 16:49:38 2015 +0300

    spi: pxa2xx: missing break in pxa2xx_ssp_get_clk_div()
    
    We refactored this code but accidentally left out a break statement so
    QUARK_X1000_SSP isn't handled correctly.
    
    Fixes: 025ffe88ee60 ('spi: pxa2xx: shift clk_div in one place')
    Tested-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
    Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
    Signed-off-by: Mark Brown <broonie@kernel.org>

diff --git a/drivers/spi/spi-pxa2xx.c b/drivers/spi/spi-pxa2xx.c
index 60526a591742..e3223ac75a7c 100644
--- a/drivers/spi/spi-pxa2xx.c
+++ b/drivers/spi/spi-pxa2xx.c
@@ -791,8 +791,10 @@ static unsigned int pxa2xx_ssp_get_clk_div(struct driver_data *drv_data,
 	switch (drv_data->ssp_type) {
 	case QUARK_X1000_SSP:
 		clk_div = quark_x1000_get_clk_div(rate, &chip->dds_rate);
+		break;
 	default:
 		clk_div = ssp_get_clk_div(drv_data, rate);
+		break;
 	}
 	return clk_div << 8;
 }

