commit d2b10b5c474009d194c1497e0304298d6e710d42
Author: tangwenji <tang.wenji@zte.com.cn>
Date:   Mon Jul 10 18:52:34 2017 +0800

    libtcmu: free ctx in tcmulib_initialize
    
    Signed-off-by: tangwenji <tang.wenji@zte.com.cn>

diff --git a/libtcmu.c b/libtcmu.c
index f55a4ae..042ffb5 100644
--- a/libtcmu.c
+++ b/libtcmu.c
@@ -653,6 +653,8 @@ struct tcmulib_context *tcmulib_initialize(
 		teardown_netlink(ctx->nl_sock);
 		darray_free(ctx->handlers);
 		darray_free(ctx->devices);
+		genl_unregister_family(&tcmu_ops);
+		free(ctx);
 		return NULL;
 	}
 

