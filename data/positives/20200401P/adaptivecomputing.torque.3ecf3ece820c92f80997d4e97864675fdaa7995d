commit 3ecf3ece820c92f80997d4e97864675fdaa7995d
Author: bdaw <bdaw@adaptivecomputing.com>
Date:   Thu Sep 5 09:45:12 2013 -0600

    Added memory checking.

diff --git a/src/server/array_func.c b/src/server/array_func.c
index 318430b99..1fbadec6a 100644
--- a/src/server/array_func.c
+++ b/src/server/array_func.c
@@ -459,6 +459,11 @@ int array_recov(
     }
 
   pa->job_ids = (char **)calloc(pa->ai_qs.array_size, sizeof(char *));
+  if(pa->job_ids == NULL)
+    {
+    memset(&pa->ai_qs,0,sizeof(array_info));
+    return PBSE_SYSTEM;
+    }
 
   /* check to see if there is any additional info saved in the array file */
   /* check if there are any array request tokens that haven't been fully
diff --git a/src/server/array_upgrade.c b/src/server/array_upgrade.c
index 78c64bd7b..9ec80b407 100644
--- a/src/server/array_upgrade.c
+++ b/src/server/array_upgrade.c
@@ -67,7 +67,7 @@ int array_upgrade(
    */
   if (version < 3)
     {
-    /* these versions are depricated, documentation includes a warning 
+    /* these versions are deprecated, documentation includes a warning
        about the incompatibility and inability to upgrade, print a quick and 
        dirty error message and exit */
        

