commit fd6c2df7f4ec6b252b3278ae16de8d9d8f44cd8f
Author: Wouter Coekaerts <coekie@irssi.org>
Date:   Sat Sep 10 13:30:23 2005 +0000

    don't crash if server sends weird NICK line, patch by Jarno Honkanen (Bug 216)
    
    git-svn-id: http://svn.irssi.org/repos/irssi/trunk@3992 dbcabf3a-b0e7-0310-adc4-f8d773084564

diff --git a/src/irc/core/irc-nicklist.c b/src/irc/core/irc-nicklist.c
index ddf62e5b..46dde7b7 100644
--- a/src/irc/core/irc-nicklist.c
+++ b/src/irc/core/irc-nicklist.c
@@ -380,6 +380,7 @@ static void event_nick(IRC_SERVER_REC *server, const char *data,
 	char *params, *nick;
 
 	g_return_if_fail(data != NULL);
+	g_return_if_fail(orignick != NULL);
 
 	params = event_get_params(data, 1, &nick);
 
diff --git a/src/irc/dcc/dcc-chat.c b/src/irc/dcc/dcc-chat.c
index 35655c9e..25658a39 100644
--- a/src/irc/dcc/dcc-chat.c
+++ b/src/irc/dcc/dcc-chat.c
@@ -780,6 +780,7 @@ static void event_nick(IRC_SERVER_REC *server, const char *data,
 	char *params, *nick, *tag;
 
 	g_return_if_fail(data != NULL);
+	g_return_if_fail(orignick != NULL);
 
 	params = event_get_params(data, 1, &nick);
 	if (g_strcasecmp(nick, orignick) == 0) {

