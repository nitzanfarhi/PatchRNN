commit 01c24328af074c071733ccc3162e2f35dff62973
Author: ewt <devnull@localhost>
Date:   Tue Jan 20 02:41:18 1998 +0000

    accept NULL as a valid prefix in rpmdbOpen()
    
    CVS patchset: 1974
    CVS date: 1998/01/20 02:41:18

diff --git a/lib/rpmdb.c b/lib/rpmdb.c
index f196d2231..c57dc5c76 100644
--- a/lib/rpmdb.c
+++ b/lib/rpmdb.c
@@ -79,6 +79,9 @@ int openDatabase(char * prefix, char * dbpath, rpmdb *rpmdbp, int mode,
     int i;
     struct flock lockinfo;
 
+    /* we should accept NULL as a valid prefix */
+    if (!prefix) prefix="";
+
     i = strlen(dbpath);
     if (dbpath[i - 1] != '/') {
 	filename = alloca(i + 2);

