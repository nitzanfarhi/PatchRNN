commit 41a1af3b5f67d9961de87ddb82808959489e3651
Author: heikki@hundin.mysql.fi <>
Date:   Thu May 9 16:33:12 2002 +0300

    row0sel.c:
      Monty said an SQL NULL BLOB field must have NULL as the data pointer value

diff --git a/innobase/row/row0sel.c b/innobase/row/row0sel.c
index 5f110d85e7d..d6b2413c911 100644
--- a/innobase/row/row0sel.c
+++ b/innobase/row/row0sel.c
@@ -31,8 +31,6 @@ Created 12/19/1997 Heikki Tuuri
 #include "pars0pars.h"
 #include "row0mysql.h"
 
-byte	row_sel_dummy_byte;
-
 /* Maximum number of rows to prefetch; MySQL interface has another parameter */
 #define SEL_MAX_N_PREFETCH	16
 
@@ -2122,13 +2120,12 @@ row_sel_store_mysql_rec(
 			has been marked to contain the SQL NULL value.
 			This caused seg faults reported by two users.
 			Set the BLOB length to 0 and the data pointer
-			to a dummy allocated mem address to avoid
-			a seg fault. */
+			to NULL to avoid a seg fault. */
 
 			if (templ->type == DATA_BLOB) {
 				row_sel_field_store_in_mysql_format(
 				mysql_rec + templ->mysql_col_offset,
-				templ->mysql_col_len, &row_sel_dummy_byte,
+				templ->mysql_col_len, NULL,
 				0, templ->type, templ->is_unsigned);
 			}
 

