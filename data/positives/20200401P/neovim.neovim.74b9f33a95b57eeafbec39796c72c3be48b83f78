commit 74b9f33a95b57eeafbec39796c72c3be48b83f78
Author: Thiago de Arruda <tpadilha84@gmail.com>
Date:   Mon Nov 3 15:31:41 2014 -0300

    event: Do an early return from event_teardown when not initialized

diff --git a/src/nvim/os/event.c b/src/nvim/os/event.c
index ecaec0b9c..bfb8a625e 100644
--- a/src/nvim/os/event.c
+++ b/src/nvim/os/event.c
@@ -39,7 +39,7 @@ typedef struct {
 // immediate_events: Events that should be processed after exiting libuv event
 //                   loop(to avoid recursion), but before returning from
 //                   `event_poll`
-static klist_t(Event) *deferred_events, *immediate_events;
+static klist_t(Event) *deferred_events = NULL, *immediate_events = NULL;
 
 void event_init(void)
 {
@@ -68,6 +68,11 @@ void event_init(void)
 
 void event_teardown(void)
 {
+  if (!deferred_events) {
+    // Not initialized(possibly a --version invocation)
+    return;
+  }
+
   channel_teardown();
   job_teardown();
   server_teardown();

