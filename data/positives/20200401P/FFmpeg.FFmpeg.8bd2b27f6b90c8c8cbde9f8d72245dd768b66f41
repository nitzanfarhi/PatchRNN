commit 8bd2b27f6b90c8c8cbde9f8d72245dd768b66f41
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sat Dec 3 04:50:35 2011 +0100

    zmbv: fix 2 memleaks
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/zmbv.c b/libavcodec/zmbv.c
index 39549c9083..2eb12e8031 100644
--- a/libavcodec/zmbv.c
+++ b/libavcodec/zmbv.c
@@ -476,8 +476,8 @@ static int decode_frame(AVCodecContext *avctx, void *data, int *data_size, AVPac
             return -1;
         }
 
-        c->cur = av_realloc(c->cur, avctx->width * avctx->height * (c->bpp / 8));
-        c->prev = av_realloc(c->prev, avctx->width * avctx->height * (c->bpp / 8));
+        c->cur = av_realloc_f(c->cur, avctx->width * avctx->height,  (c->bpp / 8));
+        c->prev = av_realloc_f(c->prev, avctx->width * avctx->height,  (c->bpp / 8));
         c->bx = (c->width + c->bw - 1) / c->bw;
         c->by = (c->height+ c->bh - 1) / c->bh;
         if(!c->cur || !c->prev)

