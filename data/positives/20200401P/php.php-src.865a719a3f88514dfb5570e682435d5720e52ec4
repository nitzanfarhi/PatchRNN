commit 865a719a3f88514dfb5570e682435d5720e52ec4
Author: Xinchen Hui <laruence@php.net>
Date:   Sat Feb 21 22:17:17 2015 +0800

    Fixed mem issue with internal return type hinting assert

diff --git a/Zend/zend_closures.c b/Zend/zend_closures.c
index 967cb6acc6..3943b7105a 100644
--- a/Zend/zend_closures.c
+++ b/Zend/zend_closures.c
@@ -63,6 +63,7 @@ ZEND_METHOD(Closure, __invoke) /* {{{ */
 	/* destruct the function also, then - we have allocated it in get_method */
 	zend_string_release(func->internal_function.function_name);
 	efree(func);
+	EX(func) = NULL;
 }
 /* }}} */
 

