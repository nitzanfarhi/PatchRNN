commit f9b7aab35cc6c3542203354d9fc4ec8572074abc
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Apr 14 23:46:37 2008 +0300

    KVM: x86 emulator: fix lea to really get the effective address
    
    We never hit this, since there is currently no reason to emulate lea.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

diff --git a/arch/x86/kvm/x86_emulate.c b/arch/x86/kvm/x86_emulate.c
index 46ef78f8bb35..2ca08386f993 100644
--- a/arch/x86/kvm/x86_emulate.c
+++ b/arch/x86/kvm/x86_emulate.c
@@ -1512,7 +1512,7 @@ special_insn:
 	case 0x88 ... 0x8b:	/* mov */
 		goto mov;
 	case 0x8d: /* lea r16/r32, m */
-		c->dst.val = c->modrm_val;
+		c->dst.val = c->modrm_ea;
 		break;
 	case 0x8f:		/* pop (sole member of Grp1a) */
 		rc = emulate_grp1a(ctxt, ops);

