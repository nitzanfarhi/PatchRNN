commit 5ee6054faba5ca8c621073aa944bca9b5bc73803
Author: miod <miod@openbsd.org>
Date:   Fri Jul 23 14:19:02 2010 +0000

    Make sure the u area of new processes is zero-filled; this got lost in
    1.119.

diff --git a/sys/kern/kern_fork.c b/sys/kern/kern_fork.c
index 8d30efdc09c..07b8b1bc2c7 100644
--- a/sys/kern/kern_fork.c
+++ b/sys/kern/kern_fork.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: kern_fork.c,v 1.120 2010/07/19 23:00:15 guenther Exp $	*/
+/*	$OpenBSD: kern_fork.c,v 1.121 2010/07/23 14:19:02 miod Exp $	*/
 /*	$NetBSD: kern_fork.c,v 1.29 1996/02/09 18:59:34 christos Exp $	*/
 
 /*
@@ -243,7 +243,8 @@ fork1(struct proc *p1, int exitsig, int flags, void *stack, size_t stacksize,
 	}
 
 	uaddr = uvm_km_kmemalloc_pla(kernel_map, uvm.kernel_object, USPACE,
-	    USPACE_ALIGN, 0, dma_constraint.ucr_low, dma_constraint.ucr_high,
+	    USPACE_ALIGN, UVM_KMF_ZERO,
+	    dma_constraint.ucr_low, dma_constraint.ucr_high,
 	    0, 0, USPACE/PAGE_SIZE);
 	if (uaddr == 0) {
 		chgproccnt(uid, -1);

