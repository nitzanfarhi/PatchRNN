commit d04eb60066ed532d2e5da9f39cc0c79883d8a33c
Author: Tony Lindgren <tony@atomide.com>
Date:   Fri Jan 8 10:29:08 2010 -0800

    omap3: Fix booting if package is uninitialized
    
    Otherwise bringing up new boards can be harder:
    
    Unable to handle kernel NULL pointer dereference at virtual address 00000000
    pgd = c0004000
    [00000000] *pgd=00000000
    Internal error: Oops: 5 [#1]
    last sysfs file:
    Modules linked in:
    CPU: 0    Not tainted  (2.6.33-rc2-00015-g0bc9c93-dirty #37)
    PC is at omap_mux_init+0xa4/0x3d8
    LR is at omap_mux_init+0x3c/0x3d8
    ...
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

diff --git a/arch/arm/mach-omap2/mux.c b/arch/arm/mach-omap2/mux.c
index e071b3fd1878..459ef23ab8a8 100644
--- a/arch/arm/mach-omap2/mux.c
+++ b/arch/arm/mach-omap2/mux.c
@@ -994,8 +994,10 @@ int __init omap_mux_init(u32 mux_pbase, u32 mux_size,
 	}
 
 #ifdef CONFIG_OMAP_MUX
-	omap_mux_package_fixup(package_subset, superset);
-	omap_mux_package_init_balls(package_balls, superset);
+	if (package_subset)
+		omap_mux_package_fixup(package_subset, superset);
+	if (package_balls)
+		omap_mux_package_init_balls(package_balls, superset);
 	omap_mux_set_cmdline_signals();
 	omap_mux_set_board_signals(board_mux);
 #endif

