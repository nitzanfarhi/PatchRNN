commit 856858980ca0a6d0dcf0f0ba237a31b2033fca3a
Author: Eduardo Silva <eduardo@monkey.io>
Date:   Wed Jul 22 22:19:45 2015 -0600

    mk_server: streams: fix dereference after null check (CID 1312109)
    
    Signed-off-by: Eduardo Silva <eduardo@monkey.io>

diff --git a/include/monkey/mk_stream.h b/include/monkey/mk_stream.h
index ad3a7346..06db9dde 100644
--- a/include/monkey/mk_stream.h
+++ b/include/monkey/mk_stream.h
@@ -133,7 +133,7 @@ static inline void mk_stream_set(struct mk_stream *stream, int type,
      * performance and aim to make things easier. The COPYBUF type is not
      * used by Monkey core, at the moment the only caller is the CGI plugin.
      */
-    if (!stream && type == MK_STREAM_COPYBUF) {
+    if (type == MK_STREAM_COPYBUF) {
         stream = mk_mem_malloc(sizeof(struct mk_stream));
     }
 

