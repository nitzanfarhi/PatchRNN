commit d0563a039c9d35305f4cb2405665130de596d86a
Author: Tobias Jakobi <tjakobi@math.uni-bielefeld.de>
Date:   Thu Sep 29 14:36:36 2016 +0200

    PM / devfreq: Skip status update on uninitialized previous_freq
    
    In case devfreq->previous_freq is still uninitialized in
    devfreq_update_status(), i.e. it has value '0', the lookups in
    that function fail, eventually leading to some error message:
    [    3.041292] devfreq bus_dmc: Couldn't update frequency transition information.
    
    Just skip the statup update in this situation.
    
    Signed-off-by: Tobias Jakobi <tjakobi@math.uni-bielefeld.de>
    Acked-by: MyungJoo Ham <myungjoo.ham@samsung.com>
    Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>

diff --git a/drivers/devfreq/devfreq.c b/drivers/devfreq/devfreq.c
index 66d3c7184a0f..bf3ea7603a58 100644
--- a/drivers/devfreq/devfreq.c
+++ b/drivers/devfreq/devfreq.c
@@ -137,6 +137,10 @@ static int devfreq_update_status(struct devfreq *devfreq, unsigned long freq)
 
 	cur_time = jiffies;
 
+	/* Immediately exit if previous_freq is not initialized yet. */
+	if (!devfreq->previous_freq)
+		goto out;
+
 	prev_lev = devfreq_get_freq_level(devfreq, devfreq->previous_freq);
 	if (prev_lev < 0) {
 		ret = prev_lev;

