commit 4f59ab50b7b1693e26ce60be1550bb41655e050b
Author: w00t <w00t@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Mon Oct 2 00:08:58 2006 +0000

    This ULine check looks really, really bad - and caused horrible things to happen (equal TS wasn't merged, causing infinite loops.). I think removing it is the solution, Brain, please verify when you wake up. Seems to fix it.
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@5380 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/modules/m_spanningtree.cpp b/src/modules/m_spanningtree.cpp
index 0f6ee9836..595bb7efa 100644
--- a/src/modules/m_spanningtree.cpp
+++ b/src/modules/m_spanningtree.cpp
@@ -1553,7 +1553,8 @@ class TreeSocket : public InspSocket
 		 * Note that this causes the losing server to send out confirming
 		 * FMODE lines.
 		 */
-		if ((ourTS > TS) || (this->Instance->ULine(source.c_str())))
+		if (ourTS > TS)
+// || (this->Instance->ULine(source.c_str())))
 		{
 			Instance->Log(DEBUG,"FJOIN detected, our TS=%lu, their TS=%lu",ourTS,TS);
 			std::deque<std::string> param_list;

