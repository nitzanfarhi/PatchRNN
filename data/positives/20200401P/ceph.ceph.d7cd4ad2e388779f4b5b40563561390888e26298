commit d7cd4ad2e388779f4b5b40563561390888e26298
Author: Sage Weil <sage@redhat.com>
Date:   Tue May 2 20:42:34 2017 -0500

    mon/OSDMonitor: skip new pgs for prime_pg_temp
    
    If the pg didn't previously exist we don't need to (and can't) prime
    pg_temp for it.  This avoids crashing on mapping.get().
    
    Signed-off-by: Sage Weil <sage@redhat.com>

diff --git a/src/mon/OSDMonitor.cc b/src/mon/OSDMonitor.cc
index 08f616dc91..5914f06601 100644
--- a/src/mon/OSDMonitor.cc
+++ b/src/mon/OSDMonitor.cc
@@ -1076,6 +1076,9 @@ void OSDMonitor::prime_pg_temp(
       return;
     }
   }
+  if (!osdmap.have_pg_pool(pgid.pool())) {
+    return;
+  }
 
   vector<int> up, acting;
   mapping.get(pgid, &up, nullptr, &acting, nullptr);

