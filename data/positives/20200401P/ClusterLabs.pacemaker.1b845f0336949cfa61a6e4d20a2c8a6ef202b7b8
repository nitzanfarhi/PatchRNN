commit 1b845f0336949cfa61a6e4d20a2c8a6ef202b7b8
Author: Dejan Muhamedagic <dejan@hello-penguin.com>
Date:   Wed Jul 11 14:03:49 2007 +0200

    LRM plugins: skip dot-files.
    
    Mercurial revision: b2cb965812c00a59728915c380088a8cf2fa0053

diff --git a/lib/plugins/lrm/racommon.c b/lib/plugins/lrm/racommon.c
index 9dd6c2cc2..9a0a94b32 100644
--- a/lib/plugins/lrm/racommon.c
+++ b/lib/plugins/lrm/racommon.c
@@ -73,16 +73,22 @@ get_ra_pathname(const char* class_path, const char* type, const char* provider,
  *    Return Value:
  *		     TRUE:  the file is qualified.
  *		     FALSE: the file is unqualified.
- *    Notes: A qalifed file is a regular file with execute bits.
+ *    Notes: A qualifed file is a regular file with execute bits
+ *           which does not start with '.'
  */
 gboolean
 filtered(char * file_name)
 {
 	struct stat buf;
+	char *s;
 
 	if ( stat(file_name, &buf) != 0 ) {
 		return FALSE;
 	}
+	if ( ((s = strrchr(file_name,'/')) && *(s+1) == '.')
+			|| *file_name == '.' ) {
+		return FALSE;
+	}
 
 	if (   S_ISREG(buf.st_mode)
             && (   ( buf.st_mode & S_IXUSR ) || ( buf.st_mode & S_IXGRP )

