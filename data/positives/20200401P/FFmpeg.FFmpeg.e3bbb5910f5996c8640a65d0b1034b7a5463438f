commit e3bbb5910f5996c8640a65d0b1034b7a5463438f
Author: Oded Shimon <ods15@ods15.dyndns.org>
Date:   Mon Oct 2 05:56:16 2006 +0000

    Original Commit: r35 | ods15 | 2006-09-22 18:53:22 +0300 (Fri, 22 Sep 2006) | 4 lines
    
    another off by one
    
    header writing seems compliant now!
    
    Originally committed as revision 6443 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/vorbis_enc.c b/libavcodec/vorbis_enc.c
index 8f8f2b51c7..388570902c 100644
--- a/libavcodec/vorbis_enc.c
+++ b/libavcodec/vorbis_enc.c
@@ -433,7 +433,7 @@ static void put_residue_header(PutBitContext * pb, residue_t * rc) {
     put_bits(pb, 24, rc->begin);
     put_bits(pb, 24, rc->end);
     put_bits(pb, 24, rc->partition_size - 1);
-    put_bits(pb, 6, rc->classifications);
+    put_bits(pb, 6, rc->classifications - 1);
     put_bits(pb, 8, rc->classbook);
 
     for (i = 0; i < rc->classifications; i++) {

