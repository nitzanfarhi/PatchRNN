commit 42ac14449c5ebf11aa92021df8136f27fbbacd41
Author: Riccardo Magliocchetti <riccardo.magliocchetti@gmail.com>
Date:   Tue May 5 14:18:30 2015 +0200

    core/legion: fix use of uninitialized value
    
    Rework conditionals so that best_uuid is always initialized.
    Reported by Coverity as CID #1296722

diff --git a/core/legion.c b/core/legion.c
index b767e3cf..e068da14 100644
--- a/core/legion.c
+++ b/core/legion.c
@@ -277,14 +277,12 @@ static void legions_check_nodes_step2() {
 			memcpy(best_uuid, node->uuid, 36);
 		}
 		// go on if i am not an arbiter
-		else if (ul->valor > 0) {
-			// no potential Lord is available, i will propose myself
-			// but only if i am not suspended...
-			if (uwsgi_now() > ul->suspended_til) {
-				best_valor = ul->valor;
-				memcpy(best_uuid, ul->uuid, 36);
-				i_am_the_best = 1;
-			}
+		// no potential Lord is available, i will propose myself
+		// but only if i am not suspended...
+		else if (ul->valor > 0 && uwsgi_now() > ul->suspended_til) {
+			best_valor = ul->valor;
+			memcpy(best_uuid, ul->uuid, 36);
+			i_am_the_best = 1;
 		}
 		else {
 			// empty lord

