commit 1ce4e8c45ede395db9b3c2d157dbeb29a28830c5
Author: Rasmus Lerdorf <rasmus@lerdorf.com>
Date:   Mon Jul 13 19:38:55 2015 -0700

    Fix potential segfault

diff --git a/Zend/zend_list.c b/Zend/zend_list.c
index 261489b4a1..c2cd606074 100644
--- a/Zend/zend_list.c
+++ b/Zend/zend_list.c
@@ -102,11 +102,11 @@ ZEND_API zend_resource* zend_register_resource(void *rsrc_pointer, int rsrc_type
 
 ZEND_API void *zend_fetch_resource2(zend_resource *res, const char *resource_type_name, int resource_type1, int resource_type2)
 {
-	if (resource_type1 == res->type) {
+	if (res && resource_type1 == res->type) {
 		return res->ptr;
 	}
 
-	if (resource_type2 == res->type) {
+	if (res && resource_type2 == res->type) {
 		return res->ptr;
 	}
 

