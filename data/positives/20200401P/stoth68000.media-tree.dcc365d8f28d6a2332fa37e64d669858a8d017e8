commit dcc365d8f28d6a2332fa37e64d669858a8d017e8
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Aug 6 12:36:42 2005 +0200

    [Bluetooth] Revert session reference counting fix
    
    The fix for the reference counting problem of the signal DLC introduced
    a race condition which leads to an oops. The reason for it is not fully
    understood by now and so revert this fix, because the reference counting
    problem is not crashing the RFCOMM layer and its appearance it rare.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

diff --git a/net/bluetooth/rfcomm/core.c b/net/bluetooth/rfcomm/core.c
index e9e6fda66f1a..27bf5047cd33 100644
--- a/net/bluetooth/rfcomm/core.c
+++ b/net/bluetooth/rfcomm/core.c
@@ -389,8 +389,6 @@ static int __rfcomm_dlc_close(struct rfcomm_dlc *d, int err)
 		rfcomm_dlc_unlock(d);
 
 		skb_queue_purge(&d->tx_queue);
-		rfcomm_session_put(s);
-
 		rfcomm_dlc_unlink(d);
 	}
 
@@ -600,8 +598,6 @@ static struct rfcomm_session *rfcomm_session_create(bdaddr_t *src, bdaddr_t *dst
 		goto failed;
 	}
 
-	rfcomm_session_hold(s);
-
 	s->initiator = 1;
 
 	bacpy(&addr.l2_bdaddr, dst);

