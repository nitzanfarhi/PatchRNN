commit 6343b05f0a77c5d76d291d15c5cf2d9cf1b4e700
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Tue Apr 30 17:52:16 2013 +0200

    ARM: SPEAr: conditionalize l2x0 support
    
    If the cache controller implementation is disabled at build time,
    we must not call any functions related to it.
    
    arch/arm/mach-spear/built-in.o: In function `spear13xx_l2x0_init':
    arch/arm/mach-spear/spear13xx.c:47: undefined reference to `l2x0_init'
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Acked-by: Viresh Kumar <viresh.linux@gmail.com>

diff --git a/arch/arm/mach-spear13xx/spear13xx.c b/arch/arm/mach-spear13xx/spear13xx.c
index 25a10191b021..0dacf571ea72 100644
--- a/arch/arm/mach-spear13xx/spear13xx.c
+++ b/arch/arm/mach-spear13xx/spear13xx.c
@@ -92,6 +92,8 @@ void __init spear13xx_l2x0_init(void)
 	 * write alloc and 'Full line of zero' options
 	 *
 	 */
+	if (!IS_ENABLED(CONFIG_CACHE_L2X0))
+		return;
 
 	writel_relaxed(0x06, VA_L2CC_BASE + L2X0_PREFETCH_CTRL);
 

