commit 5fb5d38fc268b8285125b213b9b2ded9322a371c
Author: Dan Carpenter <error27@gmail.com>
Date:   Fri Nov 12 08:08:35 2010 +0300

    Staging: speakup: free after input_unregister_device()
    
    input_unregister_device() frees the device so the call to
    input_free_device() is a double free.
    
    Signed-off-by: Dan Carpenter <error27@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/speakup/fakekey.c b/drivers/staging/speakup/fakekey.c
index adb93f21c0d6..65b231178f05 100644
--- a/drivers/staging/speakup/fakekey.c
+++ b/drivers/staging/speakup/fakekey.c
@@ -62,7 +62,6 @@ void speakup_remove_virtual_keyboard(void)
 {
 	if (virt_keyboard != NULL) {
 		input_unregister_device(virt_keyboard);
-		input_free_device(virt_keyboard);
 		virt_keyboard = NULL;
 	}
 }

