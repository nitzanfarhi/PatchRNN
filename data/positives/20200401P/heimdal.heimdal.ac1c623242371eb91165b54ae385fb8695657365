commit ac1c623242371eb91165b54ae385fb8695657365
Author: Love Hörnquist Åstrand <lha@kth.se>
Date:   Tue Mar 7 19:38:09 2006 +0000

    (add_addrs): handle the case where addr->len == 0 and n == 0, then
    realloc might return NULL.
    
    
    git-svn-id: svn://svn.h5l.se/heimdal/trunk/heimdal@16788 ec53bebd-3082-4978-b11e-865c3cabbd6b

diff --git a/lib/krb5/get_for_creds.c b/lib/krb5/get_for_creds.c
index 829892ac1..93d521416 100644
--- a/lib/krb5/get_for_creds.c
+++ b/lib/krb5/get_for_creds.c
@@ -50,7 +50,7 @@ add_addrs(krb5_context context,
 	++n;
 
     tmp = realloc(addr->val, (addr->len + n) * sizeof(*addr->val));
-    if (tmp == NULL) {
+    if (tmp == NULL && (addr->len + n) != 0) {
 	krb5_set_error_string(context, "malloc: out of memory");
 	ret = ENOMEM;
 	goto fail;

