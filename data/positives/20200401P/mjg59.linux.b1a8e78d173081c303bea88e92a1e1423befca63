commit b1a8e78d173081c303bea88e92a1e1423befca63
Author: Tomasz Figa <tomasz.figa@gmail.com>
Date:   Sun Aug 11 02:33:28 2013 +0200

    spi: s3c64xx: Zero dma_slave_config struct in prepare_dma()
    
    Not all fields of dma_slave_config struct are being initialized by
    prepare_dma() function, leaving those which are not in undefined state,
    which can confuse DMA drivers using them.
    
    This patch adds call to memset() to zero the struct before initializing
    a subset of its fields.
    
    Signed-off-by: Tomasz Figa <tomasz.figa@gmail.com>
    Signed-off-by: Mark Brown <broonie@linaro.org>

diff --git a/drivers/spi/spi-s3c64xx.c b/drivers/spi/spi-s3c64xx.c
index c9d0b1273be9..d67384b3c318 100644
--- a/drivers/spi/spi-s3c64xx.c
+++ b/drivers/spi/spi-s3c64xx.c
@@ -392,6 +392,8 @@ static void prepare_dma(struct s3c64xx_spi_dma_data *dma,
 	struct scatterlist sg;
 	struct dma_async_tx_descriptor *desc;
 
+	memset(&config, 0, sizeof(config));
+
 	if (dma->direction == DMA_DEV_TO_MEM) {
 		sdd = container_of((void *)dma,
 			struct s3c64xx_spi_driver_data, rx_dma);

