commit c0ee62734e8e840b0096827f02b1aaac71ef5105
Author: Sachin Kamat <sachin.kamat@linaro.org>
Date:   Tue Dec 24 08:42:05 2013 -0300

    [media] s5k5baf: Fix potential NULL pointer dereferencing
    
    Dereference 'fw' after the NULL check.
    
    Signed-off-by: Sachin Kamat <sachin.kamat@linaro.org>
    Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>

diff --git a/drivers/media/i2c/s5k5baf.c b/drivers/media/i2c/s5k5baf.c
index 974b865c2ee1..4b8381111cbd 100644
--- a/drivers/media/i2c/s5k5baf.c
+++ b/drivers/media/i2c/s5k5baf.c
@@ -548,12 +548,14 @@ static void s5k5baf_synchronize(struct s5k5baf *state, int timeout, u16 addr)
 static u16 *s5k5baf_fw_get_seq(struct s5k5baf *state, u16 seq_id)
 {
 	struct s5k5baf_fw *fw = state->fw;
-	u16 *data = fw->data + 2 * fw->count;
+	u16 *data;
 	int i;
 
 	if (fw == NULL)
 		return NULL;
 
+	data = fw->data + 2 * fw->count;
+
 	for (i = 0; i < fw->count; ++i) {
 		if (fw->seq[i].id == seq_id)
 			return data + fw->seq[i].offset;

