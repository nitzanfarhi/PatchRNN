commit 6848ad6461e551849ba3c32d945d4f45e96453a6
Author: Yan, Zheng <zheng.z.yan@linux.intel.com>
Date:   Mon Feb 14 16:00:03 2011 -0500

    Btrfs: Fix balance panic
    
    Mark the cloned backref_node as checked in clone_backref_node()
    
    Signed-off-by: Yan, Zheng <zheng.z.yan@intel.com>
    Signed-off-by: Chris Mason <chris.mason@oracle.com>

diff --git a/fs/btrfs/relocation.c b/fs/btrfs/relocation.c
index 1f5556acb530..0825e4ed9447 100644
--- a/fs/btrfs/relocation.c
+++ b/fs/btrfs/relocation.c
@@ -1157,6 +1157,7 @@ static int clone_backref_node(struct btrfs_trans_handle *trans,
 	new_node->bytenr = dest->node->start;
 	new_node->level = node->level;
 	new_node->lowest = node->lowest;
+	new_node->checked = 1;
 	new_node->root = dest;
 
 	if (!node->lowest) {

