commit a37e0b4deb596c42a07fd67cacaa3b66f9cad7bb
Author: Moe Jette <jette1@llnl.gov>
Date:   Wed Oct 22 17:56:09 2003 +0000

    Change test from > to >= to avoid connect retries if PORT_RETRIES parameter
    is zero.

diff --git a/src/common/slurm_protocol_socket_implementation.c b/src/common/slurm_protocol_socket_implementation.c
index 1d725c0941..f5384f0819 100644
--- a/src/common/slurm_protocol_socket_implementation.c
+++ b/src/common/slurm_protocol_socket_implementation.c
@@ -448,7 +448,7 @@ slurm_fd _slurm_open_stream(slurm_addr *addr)
                 rc = _slurm_connect(fd, (struct sockaddr const *)addr, sizeof(*addr));
                 if (rc >= 0)                    /* success */
                         break;
-                if ((errno != ECONNREFUSED) || (retry > PORT_RETRIES))
+                if ((errno != ECONNREFUSED) || (retry >= PORT_RETRIES))
                         goto error;
 
                 if ((_slurm_close_stream(fd) < 0) && (errno == EINTR))

