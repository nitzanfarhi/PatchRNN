commit 011f4ea09768fdf6f95e3781cba2ed681a2ac710
Author: Amit Kumar Salecha <amit.salecha@qlogic.com>
Date:   Thu Jan 7 22:10:14 2010 +0000

    netxen: fix tx ring memory leak
    
    o While unloading driver or resetting the context, tx ring was not
      getting free.
    
    Signed-off-by: Amit Kumar Salecha <amit.salecha@qlogic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/netxen/netxen_nic_init.c b/drivers/net/netxen/netxen_nic_init.c
index 02f8d4b4db63..925b69958da5 100644
--- a/drivers/net/netxen/netxen_nic_init.c
+++ b/drivers/net/netxen/netxen_nic_init.c
@@ -184,6 +184,8 @@ void netxen_free_sw_resources(struct netxen_adapter *adapter)
 
 	tx_ring = adapter->tx_ring;
 	vfree(tx_ring->cmd_buf_arr);
+	kfree(tx_ring);
+	adapter->tx_ring = NULL;
 }
 
 int netxen_alloc_sw_resources(struct netxen_adapter *adapter)

