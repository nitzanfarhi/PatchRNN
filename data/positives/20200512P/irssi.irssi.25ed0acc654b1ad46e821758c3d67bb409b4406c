commit 25ed0acc654b1ad46e821758c3d67bb409b4406c
Author: Timo Sirainen <cras@irssi.org>
Date:   Sun Mar 10 16:23:37 2002 +0000

    If you had query with "X" but the nick really was "x", and after nick change
    to "X" you saw "X changed nick to X"
    
    
    git-svn-id: http://svn.irssi.org/repos/irssi/trunk@2561 dbcabf3a-b0e7-0310-adc4-f8d773084564

diff --git a/src/irc/core/irc-queries.c b/src/irc/core/irc-queries.c
index 402aa75d..50fed22b 100644
--- a/src/irc/core/irc-queries.c
+++ b/src/irc/core/irc-queries.c
@@ -81,7 +81,7 @@ static void event_nick(SERVER_REC *server, const char *data,
 	char *params, *nick;
 
 	query = query_find(server, orignick);
-	if (query != NULL) {
+	if (query != NULL && strcmp(query->name, nick) != 0) {
 		params = event_get_params(data, 1, &nick);
 		query_change_nick(query, nick);
 		g_free(params);

