commit 28230ca61ae5694bdb186b0f0b3add6d5542bfb0
Author: Love Hörnquist Åstrand <lha@kth.se>
Date:   Fri Feb 27 03:29:20 2009 +0000

    catch error code
    
    git-svn-id: svn://svn.h5l.se/heimdal/trunk/heimdal@24848 ec53bebd-3082-4978-b11e-865c3cabbd6b

diff --git a/lib/krb5/init_creds_pw.c b/lib/krb5/init_creds_pw.c
index 95f6eca54..859281e52 100644
--- a/lib/krb5/init_creds_pw.c
+++ b/lib/krb5/init_creds_pw.c
@@ -968,6 +968,8 @@ add_enc_ts_padata(krb5_context context,
     if(salt == NULL) {
 	/* default to standard salt */
 	ret = krb5_get_pw_salt (context, client, &salt2);
+	if (ret)
+	    return ret;
 	salt = &salt2;
     }
     if (!enctypes) {

