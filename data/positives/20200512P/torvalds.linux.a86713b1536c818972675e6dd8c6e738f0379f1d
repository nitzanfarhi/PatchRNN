commit a86713b1536c818972675e6dd8c6e738f0379f1d
Author: Sudhir Sreedharan <ssreedharan@mvista.com>
Date:   Mon Sep 22 12:00:22 2014 +0530

    serial/core: Initialize the console pm state
    
    For console devices having UART_CAP_SLEEP capability, the uart_pm_state has
    to be initialized to UART_PM_STATE_ON. Otherwise the LCR regiser values
    are reinitialized when uart_change_pm is called from uart_configure_port.
    
    Signed-off-by: Sudhir Sreedharan <ssreedharan@mvista.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/tty/serial/serial_core.c b/drivers/tty/serial/serial_core.c
index df3a8c74358e..e7d9d65095da 100644
--- a/drivers/tty/serial/serial_core.c
+++ b/drivers/tty/serial/serial_core.c
@@ -2606,6 +2606,9 @@ int uart_add_one_port(struct uart_driver *drv, struct uart_port *uport)
 	if (uport->cons && uport->dev)
 		of_console_check(uport->dev->of_node, uport->cons->name, uport->line);
 
+	if (uart_console(uport))
+		state->pm_state = UART_PM_STATE_ON;
+
 	uart_configure_port(drv, state, uport);
 
 	num_groups = 2;

