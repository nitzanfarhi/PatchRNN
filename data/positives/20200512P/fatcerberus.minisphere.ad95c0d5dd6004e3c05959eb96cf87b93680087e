commit ad95c0d5dd6004e3c05959eb96cf87b93680087e
Author: Bruce Pascoe <fatcerberus@icloud.com>
Date:   Wed Jun 17 00:10:48 2015 -0400

    Add NUL terminator in spk_fslurp()
    
    This is a very useful feature.  Sometimes it's the tiniest little
    things...

diff --git a/src/spk.c b/src/spk.c
index 5c0aea53..41d4069c 100644
--- a/src/spk.c
+++ b/src/spk.c
@@ -259,7 +259,8 @@ spk_fslurp(spk_t* spk, const char* path, size_t *out_size)
 	al_fseek(spk->file, p_entry->offset, ALLEGRO_SEEK_SET);
 	if (al_fread(spk->file, packdata, p_entry->pack_size) < p_entry->pack_size)
 		goto on_error;
-	if (!(unpacked = malloc(p_entry->file_size))) goto on_error;
+	if (!(unpacked = malloc(p_entry->file_size + 1)))
+		goto on_error;
 	z.avail_in = (uInt)p_entry->pack_size;
 	z.next_in = packdata;
 	z.avail_out = (uInt)p_entry->file_size;
@@ -269,6 +270,8 @@ spk_fslurp(spk_t* spk, const char* path, size_t *out_size)
 		goto on_error;
 	inflateEnd(&z);
 	free(packdata);
+	*((char*)unpacked + p_entry->file_size) = '\0';
+	
 	*out_size = p_entry->file_size;
 	return unpacked;
 

