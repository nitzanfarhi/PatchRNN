commit 7a0f3979198fa4244b7aa748d9b288a73ccd75d2
Author: Robert Stepanek <rsto@fastmail.com>
Date:   Thu Mar 22 19:50:05 2018 +0100

    http_jmap.c: gracefully handle NULL mailboxes on close

diff --git a/imap/http_jmap.c b/imap/http_jmap.c
index 6ecf32178..673f83ee5 100644
--- a/imap/http_jmap.c
+++ b/imap/http_jmap.c
@@ -933,6 +933,8 @@ EXPORTED void jmap_closembox(jmap_req_t *req, struct mailbox **mboxp)
     struct _mboxcache_rec *rec = NULL;
     int i;
 
+    if (!mboxp || !*mboxp) return;
+
     for (i = 0; i < req->mboxes->count; i++) {
         rec = (struct _mboxcache_rec*) ptrarray_nth(req->mboxes, i);
         if (rec->mbox == *mboxp)

