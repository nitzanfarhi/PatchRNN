commit a753776ff5d85994952f0abcb77fa49faf76b475
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sat May 25 12:05:32 2013 +0200

    img2dec: dont set start_time/duration to invalid values
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavformat/img2dec.c b/libavformat/img2dec.c
index 5eea2df4f4..76ef5fb230 100644
--- a/libavformat/img2dec.c
+++ b/libavformat/img2dec.c
@@ -301,8 +301,10 @@ static int img_read_header(AVFormatContext *s1)
         s->img_last   = last_index;
         s->img_number = first_index;
         /* compute duration */
-        st->start_time = 0;
-        st->duration   = last_index - first_index + 1;
+        if (!s->ts_from_file) {
+            st->start_time = 0;
+            st->duration   = last_index - first_index + 1;
+        }
     }
 
     if (s1->video_codec_id) {

