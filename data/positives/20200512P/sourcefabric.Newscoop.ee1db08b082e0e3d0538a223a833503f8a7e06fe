commit ee1db08b082e0e3d0538a223a833503f8a7e06fe
Author: mugur <mugur@952d13e4-84fd-0310-bd7c-ee2827c68691>
Date:   Sat Jun 26 19:16:18 2004 +0000

    in CActions::takeAction(): check if the result of the query was not null

diff --git a/campsite/implementation/parser/parser/actions.cpp b/campsite/implementation/parser/parser/actions.cpp
index 13a880a77..79377aea6 100644
--- a/campsite/implementation/parser/parser/actions.cpp
+++ b/campsite/implementation/parser/parser/actions.cpp
@@ -2177,6 +2177,8 @@ int CActIf::takeAction(CContext& c, sockstream& fs)
 	StoreResult(&m_coSql, res);
 	CheckForRows(*res, 1);
 	FetchRow(*res, row);
+	if (row[0] == NULL)
+		return ERR_NODATA;
 	if (modifier == CMS_ST_ARTICLE && param.attrType() != "" && !m_bStrictType)
 	{
 		field = param.attribute();

