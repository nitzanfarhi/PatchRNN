commit e03dc19ba9c7ebc48cedc9cb797fa42dff302565
Author: Jason Jin <Jason.Jin@freescale.com>
Date:   Fri Aug 14 13:54:09 2015 +0800

    video: fbdev: fsl: Fix the sleep function for FSL DIU module
    
    For deep sleep, the diu module will power off, when wake up
    from the deep sleep, the registers need to be reinitialized.
    
    Signed-off-by: Jason Jin <Jason.Jin@freescale.com>
    Signed-off-by: Wang Dongsheng <dongsheng.wang@freescale.com>
    Acked-by: Timur Tabi <timur@tabi.org>
    Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>

diff --git a/drivers/video/fbdev/fsl-diu-fb.c b/drivers/video/fbdev/fsl-diu-fb.c
index 7fa2e6f9e322..b335c1ae8625 100644
--- a/drivers/video/fbdev/fsl-diu-fb.c
+++ b/drivers/video/fbdev/fsl-diu-fb.c
@@ -1628,9 +1628,16 @@ static int fsl_diu_suspend(struct platform_device *ofdev, pm_message_t state)
 static int fsl_diu_resume(struct platform_device *ofdev)
 {
 	struct fsl_diu_data *data;
+	unsigned int i;
 
 	data = dev_get_drvdata(&ofdev->dev);
-	enable_lcdc(data->fsl_diu_info);
+
+	fsl_diu_enable_interrupts(data);
+	update_lcdc(data->fsl_diu_info);
+	for (i = 0; i < NUM_AOIS; i++) {
+		if (data->mfb[i].count)
+			fsl_diu_enable_panel(&data->fsl_diu_info[i]);
+	}
 
 	return 0;
 }

