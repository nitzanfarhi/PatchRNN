commit 22f83205e59c97c2460ad8e4bd6e71268cb2f37f
Author: Axel Lin <axel.lin@gmail.com>
Date:   Thu Aug 11 09:22:45 2011 -0700

    Input: tegra-kbc - correct call to input_free_device
    
    If kzalloc for kbc fails, then we have NULL pointer dereference while
    calling input_free_device(kbc->idev) in the error handling.
    So it is safer to always use the original name, input_dev.
    
    Signed-off-by: Axel Lin <axel.lin@gmail.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

diff --git a/drivers/input/keyboard/tegra-kbc.c b/drivers/input/keyboard/tegra-kbc.c
index f270447ba951..a5a77915c650 100644
--- a/drivers/input/keyboard/tegra-kbc.c
+++ b/drivers/input/keyboard/tegra-kbc.c
@@ -702,7 +702,7 @@ static int __devinit tegra_kbc_probe(struct platform_device *pdev)
 err_free_mem_region:
 	release_mem_region(res->start, resource_size(res));
 err_free_mem:
-	input_free_device(kbc->idev);
+	input_free_device(input_dev);
 	kfree(kbc);
 
 	return err;

