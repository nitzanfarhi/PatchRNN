commit c584f61b8531eaa35718d43b2bfdb19824c10612
Author: Tomasz Sterna <tomek@xiaoka.com>
Date:   Mon Jun 8 11:32:13 2009 +0000

    Do not null first bytes of just freed memory

diff --git a/mio/mio_epoll.h b/mio/mio_epoll.h
index b44db17..07e3ab5 100644
--- a/mio/mio_epoll.h
+++ b/mio/mio_epoll.h
@@ -72,7 +72,7 @@
 
 
 #define MIO_ALLOC_FD(m, rfd)    _mio_alloc_fd(m, rfd)
-#define MIO_FREE_FD(m, mfd)     free(mfd);mfd=NULL
+#define MIO_FREE_FD(m, mfd)     if(mfd)free(mfd)
 
 #define MIO_REMOVE_FD(m, mfd) \
     do {                                                                \
diff --git a/mio/mio_kqueue.h b/mio/mio_kqueue.h
index c4cc459..8baf538 100644
--- a/mio/mio_kqueue.h
+++ b/mio/mio_kqueue.h
@@ -131,7 +131,7 @@
     } while(0)
 
 #define MIO_ALLOC_FD(m, rfd) _mio_alloc_fd(m,rfd)
-#define MIO_FREE_FD(m, mfd)     free(mfd);mfd=NULL
+#define MIO_FREE_FD(m, mfd)     free(mfd)
 #define MIO_REMOVE_FD(m, mfd) _mio_set_events(m, mfd->mio_fd.fd, 0, 0, NULL)
 #define MIO_CHECK(m, t)         _mio_poll(m, t)
 

