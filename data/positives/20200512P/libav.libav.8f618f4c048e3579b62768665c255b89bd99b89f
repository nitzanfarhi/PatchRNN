commit 8f618f4c048e3579b62768665c255b89bd99b89f
Author: Vitor Sessak <vitor1001@gmail.com>
Date:   Fri Feb 15 21:39:12 2008 +0000

    Check for error so that
    avfilter_open(av_filter_get_by_name(...etc...)) fails
    gracefully.
    
    Commited in SoC by Vitor Sessak on 2007-10-29 16:00:27
    
    Originally committed as revision 12024 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavfilter/avfilter.c b/libavfilter/avfilter.c
index e017e77ff..760c01acf 100644
--- a/libavfilter/avfilter.c
+++ b/libavfilter/avfilter.c
@@ -363,7 +363,12 @@ static const char *filter_name(void *p)
 
 AVFilterContext *avfilter_open(AVFilter *filter, char *inst_name)
 {
-    AVFilterContext *ret = av_malloc(sizeof(AVFilterContext));
+    AVFilterContext *ret;
+
+    if (!filter)
+        return 0;
+
+    ret = av_malloc(sizeof(AVFilterContext));
 
     ret->av_class = av_mallocz(sizeof(AVClass));
     ret->av_class->item_name = filter_name;

