commit fd1bbbb79eff1a4381328049b375c80c3fc8bff9
Author: Peter Huewe <peterhuewe@gmx.de>
Date:   Sun Feb 3 22:54:33 2013 +0100

    staging/xgifb: Fix return of uninitialized variable
    
    Clang warning:
    drivers/staging/xgifb/XGI_main_26.c: warning: variable 'ret' is
    used uninitialized whenever 'if' condition:
            if (xgifb_info->mode_idx < 0) {
    evaluates to true.
    
    drivers/staging/xgifb/XGI_main_26.c:
    note: uninitialized use occurs here
            return ret;
    
    This patch initializes the variable in this case.
    
    Signed-off-by: Peter Huewe <peterhuewe@gmx.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/xgifb/XGI_main_26.c b/drivers/staging/xgifb/XGI_main_26.c
index fa351f90da33..106abc8d9cbb 100644
--- a/drivers/staging/xgifb/XGI_main_26.c
+++ b/drivers/staging/xgifb/XGI_main_26.c
@@ -1921,6 +1921,7 @@ static int xgifb_probe(struct pci_dev *pdev,
 
 	if (xgifb_info->mode_idx < 0) {
 		dev_err(&pdev->dev, "No supported video mode found\n");
+		ret = -EINVAL;
 		goto error_1;
 	}
 

