commit c49bafa3842751b8955a962859f42d307673d75d
Author: Dan Carpenter <error27@gmail.com>
Date:   Sat Jul 30 12:58:41 2011 -0400

    ext4: add missing kfree() on error return path in add_new_gdb()
    
    We added some more error handling in b40971426a "ext4: add error
    checking to calls to ext4_handle_dirty_metadata()".  But we need to
    call kfree() as well to avoid a memory leak.
    
    Signed-off-by: Dan Carpenter <error27@gmail.com>
    Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>

diff --git a/fs/ext4/resize.c b/fs/ext4/resize.c
index 6e3327d6ff1f..71085df97bbd 100644
--- a/fs/ext4/resize.c
+++ b/fs/ext4/resize.c
@@ -517,6 +517,7 @@ static int add_new_gdb(handle_t *handle, struct inode *inode,
 	return err;
 
 exit_inode:
+	kfree(n_group_desc);
 	/* ext4_handle_release_buffer(handle, iloc.bh); */
 	brelse(iloc.bh);
 exit_dindj:

