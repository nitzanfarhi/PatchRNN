commit 7c488647dfeae7eca05004530d81d1ae1967186e
Author: Poul-Henning Kamp <phk@phk.freebsd.dk>
Date:   Tue Jan 29 10:59:01 2008 +0000

    Close another possible NULL dereference
    
    
    git-svn-id: http://www.varnish-cache.org/svn/trunk/varnish-cache@2396 d4fa192b-c00b-0410-8231-f00ffab90ce4

diff --git a/bin/varnishd/cache_hash.c b/bin/varnishd/cache_hash.c
index 56946e02f..7542745c0 100644
--- a/bin/varnishd/cache_hash.c
+++ b/bin/varnishd/cache_hash.c
@@ -352,7 +352,8 @@ HSH_Deref(struct object *o)
 	}
 	assert(o->refcnt > 0);
 	r = --o->refcnt;
-	hsh_rush(oh);
+	if (oh != NULL)
+		hsh_rush(oh);
 	if (oh != NULL) {
 		if (!r)
 			VTAILQ_REMOVE(&oh->objects, o, list);

