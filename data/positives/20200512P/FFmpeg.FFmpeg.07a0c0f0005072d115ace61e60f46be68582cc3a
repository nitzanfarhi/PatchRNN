commit 07a0c0f0005072d115ace61e60f46be68582cc3a
Author: Vittorio Giovara <vittorio.giovara@gmail.com>
Date:   Thu Dec 18 20:26:57 2014 +0100

    opt: check memory allocation
    
    CC: libav-stable@libav.org
    Bug-Id: CID 1257771

diff --git a/libavutil/opt.c b/libavutil/opt.c
index 6785a08741..b3435e0f0e 100644
--- a/libavutil/opt.c
+++ b/libavutil/opt.c
@@ -119,6 +119,8 @@ static int set_string_binary(void *obj, const AVOption *o, const char *val, uint
     len /= 2;
 
     ptr = bin = av_malloc(len);
+    if (!ptr)
+        return AVERROR(ENOMEM);
     while (*val) {
         int a = hexchar2int(*val++);
         int b = hexchar2int(*val++);

