commit 5e123c7668f339af415e8d3158d934ea9577bf4a
Author: Stefan de Konink <stefan@konink.de>
Date:   Fri Jan 3 16:09:37 2014 +0100

    cherokee_buffer_crc32() did not handle empty buffers correctly.
    
    https://github.com/alobbs/libhpack/commit/8ae40a4f406743243c9dddc5a3588d5ee58a333f

diff --git a/cherokee/buffer.c b/cherokee/buffer.c
index 89959631..252c403a 100644
--- a/cherokee/buffer.c
+++ b/cherokee/buffer.c
@@ -1010,6 +1010,9 @@ cherokee_buffer_cnt_cspn (cherokee_buffer_t *buf, cuint_t offset, const char *st
 crc_t
 cherokee_buffer_crc32 (cherokee_buffer_t *buf)
 {
+	if (cherokee_buffer_is_empty (buf))
+		return 0;
+
 	return crc32_sz (buf->buf, buf->len);
 }
 

