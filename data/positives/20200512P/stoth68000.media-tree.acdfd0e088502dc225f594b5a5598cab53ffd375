commit acdfd0e088502dc225f594b5a5598cab53ffd375
Author: Sven Eckelmann <sven.eckelmann@gmx.de>
Date:   Sat Jan 2 11:30:36 2010 +0100

    Staging: batman-adv: Remove NULL pointer check
    
    It is safe to call kfree(NULL) which makes this extra check unneeded. It
    was found using checkpatch.pl from linux-2.6
    
    Signed-off-by: Sven Eckelmann <sven.eckelmann@gmx.de>
    Acked-by: Simon Wunderlich <siwu@hrz.tu-chemnitz.de>
    Signed-off-by: Andrew Lunn <andrew@lunn.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/batman-adv/hard-interface.c b/drivers/staging/batman-adv/hard-interface.c
index e9cb977d0016..28d02f68a3f8 100644
--- a/drivers/staging/batman-adv/hard-interface.c
+++ b/drivers/staging/batman-adv/hard-interface.c
@@ -399,8 +399,7 @@ int hardif_add_interface(char *dev, int if_num)
 	return 1;
 
 out:
-	if (batman_if->packet_buff)
-		kfree(batman_if->packet_buff);
+	kfree(batman_if->packet_buff);
 	kfree(batman_if);
 	kfree(dev);
 	return -1;

