commit c95137070e6a2b752919fa30487900bd045eca04
Author: ellie timoney <ellie@fastmail.com>
Date:   Fri Jan 6 17:50:58 2017 +1100

    mboxlist: don't crash without patterns

diff --git a/imap/mboxlist.c b/imap/mboxlist.c
index 581653058..7de66872e 100644
--- a/imap/mboxlist.c
+++ b/imap/mboxlist.c
@@ -2695,6 +2695,8 @@ static int mboxlist_do_find(struct find_rock *rock, const strarray_t *patterns)
     int i;
     const char *p;
 
+    if (patterns->count < 1) return 0; /* nothing to do */
+
     for (i = 0; i < patterns->count; i++) {
         glob *g = glob_init(strarray_nth(patterns, i), rock->namespace->hier_sep);
         ptrarray_append(&rock->globs, g);

