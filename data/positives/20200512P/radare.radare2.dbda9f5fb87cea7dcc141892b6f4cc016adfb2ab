commit dbda9f5fb87cea7dcc141892b6f4cc016adfb2ab
Author: pancake <pancake@nopcode.org>
Date:   Wed Apr 2 10:03:33 2014 +0200

    Fix ns-free null deref

diff --git a/shlr/sdb/src/ns.c b/shlr/sdb/src/ns.c
index cd9207431..21e6ee1ef 100644
--- a/shlr/sdb/src/ns.c
+++ b/shlr/sdb/src/ns.c
@@ -17,8 +17,9 @@ SDB_API void sdb_ns_free(Sdb *s) {
 	SdbListIter next;
 	SdbListIter *it;
 	SdbNs *ns;
-	// TODO: Implement and use ls_foreach_safe
+	if (s)
 	ls_foreach (s->ns, it, ns) {
+	// TODO: Implement and use ls_foreach_safe
 		next.n = it->n;
 		sdb_ns_free (ns->sdb);
 		sdb_free (ns->sdb);

