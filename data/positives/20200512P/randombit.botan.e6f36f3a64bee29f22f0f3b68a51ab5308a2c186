commit e6f36f3a64bee29f22f0f3b68a51ab5308a2c186
Author: lloyd <lloyd@randombit.net>
Date:   Sun Jun 25 12:09:52 2006 +0000

    Guard set_timer with a check so it does not set the timer to NULL

diff --git a/src/libstate.cpp b/src/libstate.cpp
index a2a3bbe9a..a7a6b5f6f 100644
--- a/src/libstate.cpp
+++ b/src/libstate.cpp
@@ -131,8 +131,11 @@ void Library_State::add_allocator(Allocator* allocator)
 *************************************************/
 void Library_State::set_timer(Timer* new_timer)
    {
-   delete timer;
-   timer = new_timer;
+   if(new_timer)
+      {
+      delete timer;
+      timer = new_timer;
+      }
    }
 
 /*************************************************

