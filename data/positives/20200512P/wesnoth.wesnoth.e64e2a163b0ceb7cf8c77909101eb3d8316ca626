commit e64e2a163b0ceb7cf8c77909101eb3d8316ca626
Author: Eugen Jiresch <e0204097@student.tuwien.ac.at>
Date:   Fri Jul 10 12:58:14 2009 +0000

    leader replacement in get_player_info no longer uses player_info

diff --git a/src/gamestatus.cpp b/src/gamestatus.cpp
index af4733f6a7..29627b9720 100644
--- a/src/gamestatus.cpp
+++ b/src/gamestatus.cpp
@@ -778,15 +778,18 @@ void game_state::get_player_info(const config& side_cfg,
 			for(std::vector<unit>::iterator it = player->available_units.begin();
 				it != player->available_units.end(); ++it) {
 				if(it->can_recruit()) {
-					new_unit = *it;
-					new_unit.set_game_context(&units, &map, &tod_mng, &teams);
 					player->available_units.erase(it);
 					break;
 				}
 			}
+		}
+		
+		if (player_cfg != NULL) {
 			for(std::vector<unit>::iterator it = teams.back().recall_list().begin();
 				it != teams.back().recall_list().end(); ++it) {
 				if(it->can_recruit()) {
+					new_unit = *it;
+					new_unit.set_game_context(&units, &map, &tod_mng, &teams);
 					teams.back().recall_list().erase(it);
 					break;
 				}

