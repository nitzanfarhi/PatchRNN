commit 1503021ee59e8ecfa4052b8fb8b44b9a4eddef77
Author: Nick Mathewson <nickm@torproject.org>
Date:   Thu Dec 27 00:25:54 2007 +0000

     r15723@tombo:  nickm | 2007-12-26 19:25:51 -0500
     Actually trim freelists.
    
    
    svn:r12991

diff --git a/src/or/buffers.c b/src/or/buffers.c
index 26a31cc4e..9a8064a27 100644
--- a/src/or/buffers.c
+++ b/src/or/buffers.c
@@ -247,8 +247,9 @@ buf_shrink_freelists(int free_all)
         --n_to_free;
       }
       tor_assert(!n_to_free);
-      freelists[i].lowest_length = freelists[i].cur_length = n_to_skip;
+      freelists[i].cur_length = n_to_skip;
     }
+    freelists[i].lowest_length = freelists[i].cur_length;
     assert_freelist_ok(&freelists[i]);
   }
 }

