commit 6bbf79a14080a0c61212f53b4b87dc1a99fedf9c
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu Aug 12 04:13:49 2010 +0100

    dm mpath: fix NULL pointer dereference when path parameters missing
    
    multipath_ctr() forgets to return an error after detecting
    missing path parameters.  Fix this.
    
    Signed-off-by: Patrick LoPresti <lopresti@gmail.com>
    Cc: stable@kernel.org
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>

diff --git a/drivers/md/dm-mpath.c b/drivers/md/dm-mpath.c
index 826bce7343b3..da2223aa727f 100644
--- a/drivers/md/dm-mpath.c
+++ b/drivers/md/dm-mpath.c
@@ -706,6 +706,7 @@ static struct priority_group *parse_priority_group(struct arg_set *as,
 
 		if (as->argc < nr_params) {
 			ti->error = "not enough path parameters";
+			r = -EINVAL;
 			goto bad;
 		}
 

