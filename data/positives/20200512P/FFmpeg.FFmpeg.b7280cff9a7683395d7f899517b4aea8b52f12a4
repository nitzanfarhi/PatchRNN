commit b7280cff9a7683395d7f899517b4aea8b52f12a4
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sat Nov 3 05:58:12 2012 +0100

    asfdec: check stream_index for validity
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavformat/asfdec.c b/libavformat/asfdec.c
index 535d5108c7..884390141c 100644
--- a/libavformat/asfdec.c
+++ b/libavformat/asfdec.c
@@ -975,7 +975,7 @@ static int asf_read_frame_header(AVFormatContext *s, AVIOContext *pb){
             case 0x54:
                 aspect.num = avio_r8(pb);
                 aspect.den = avio_r8(pb);
-                if (aspect.num > 0 && aspect.den > 0) {
+                if (aspect.num > 0 && aspect.den > 0 && asf->stream_index >= 0) {
                     s->streams[asf->stream_index]->sample_aspect_ratio = aspect;
                 }
                 break;

