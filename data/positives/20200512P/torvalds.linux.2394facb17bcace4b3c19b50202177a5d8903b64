commit 2394facb17bcace4b3c19b50202177a5d8903b64
Author: Arun Kumar Neelakantam <aneela@codeaurora.org>
Date:   Mon Oct 30 11:11:24 2017 +0530

    rpmsg: glink: Initialize the "intent_req_comp" completion variable
    
    The "intent_req_comp" variable is used without initialization which
    results in NULL pointer dereference in qcom_glink_request_intent().
    
    we need to initialize the completion variable before using it.
    
    Fixes: 27b9c5b66b23 ("rpmsg: glink: Request for intents when unavailable")
    Signed-off-by: Arun Kumar Neelakantam <aneela@codeaurora.org>
    Signed-off-by: Bjorn Andersson <bjorn.andersson@linaro.org>

diff --git a/drivers/rpmsg/qcom_glink_native.c b/drivers/rpmsg/qcom_glink_native.c
index 5dcc9bf1c5bc..fcd46ab090a7 100644
--- a/drivers/rpmsg/qcom_glink_native.c
+++ b/drivers/rpmsg/qcom_glink_native.c
@@ -227,6 +227,7 @@ static struct glink_channel *qcom_glink_alloc_channel(struct qcom_glink *glink,
 
 	init_completion(&channel->open_req);
 	init_completion(&channel->open_ack);
+	init_completion(&channel->intent_req_comp);
 
 	INIT_LIST_HEAD(&channel->done_intents);
 	INIT_WORK(&channel->intent_work, qcom_glink_rx_done_work);

