commit 6be0b7a9a7a9aa4c2c6bbc83d60539bd21b96c85
Author: Larry Greenfield <leg@andrew.cmu.edu>
Date:   Mon Oct 9 03:28:50 2000 +0000

    proxyd_findinboxserver was crashing when the user didn't have an inbox

diff --git a/imap/proxyd.c b/imap/proxyd.c
index c68688775..58dd902a9 100644
--- a/imap/proxyd.c
+++ b/imap/proxyd.c
@@ -39,7 +39,7 @@
  * OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
  */
 
-/* $Id: proxyd.c,v 1.42 2000/09/30 01:17:54 leg Exp $ */
+/* $Id: proxyd.c,v 1.43 2000/10/09 03:28:50 leg Exp $ */
 
 #include <config.h>
 
@@ -788,15 +788,17 @@ static struct backend *proxyd_findinboxserver(void)
 {
     char inbox[MAX_MAILBOX_NAME];
     int r;
-    char *server;
-    struct backend *s;
+    char *server = NULL;
+    struct backend *s = NULL;
 
     if (strlen(proxyd_userid) > MAX_MAILBOX_NAME - 30) return NULL;
     strcpy(inbox, "user.");
     strcat(inbox, proxyd_userid);
 	
     r = mlookup(inbox, &server, NULL, NULL);
-    s = proxyd_findserver(server);
+    if (!r) {
+	s = proxyd_findserver(server);
+    }
 
     return s;
 }

