commit d5cd4aadd3d220afac8e3e6d922e333592551f7d
Author: Bart Oldeman <bartoldeman@users.sourceforge.net>
Date:   Sun Oct 30 14:59:29 2005 -0800

    [PATCH] x86: initialise tss->io_bitmap_owner to something
    
    There exists a field io_bitmap_owner in the TSS that is only checked, but
    never set to anything else but NULL.
    
    Signed-off-by: Bart Oldeman <bartoldeman@users.sourceforge.net>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/arch/i386/kernel/traps.c b/arch/i386/kernel/traps.c
index 19e90bdd84ea..c34d1bfc5161 100644
--- a/arch/i386/kernel/traps.c
+++ b/arch/i386/kernel/traps.c
@@ -488,6 +488,7 @@ fastcall void __kprobes do_general_protection(struct pt_regs * regs,
 				tss->io_bitmap_max - thread->io_bitmap_max);
 		tss->io_bitmap_max = thread->io_bitmap_max;
 		tss->io_bitmap_base = IO_BITMAP_OFFSET;
+		tss->io_bitmap_owner = thread;
 		put_cpu();
 		return;
 	}

