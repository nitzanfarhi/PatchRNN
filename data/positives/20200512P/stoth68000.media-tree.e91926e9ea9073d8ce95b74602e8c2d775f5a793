commit e91926e9ea9073d8ce95b74602e8c2d775f5a793
Author: Anton Vorontsov <cbouatmailru@gmail.com>
Date:   Sun Jan 13 02:44:54 2008 +0300

    apm_power: check I.intval for zero value, we use it as the divisor
    
    Signed-off-by: Anton Vorontsov <cbou@mail.ru>

diff --git a/drivers/power/apm_power.c b/drivers/power/apm_power.c
index a832a9a05c66..a4892275659d 100644
--- a/drivers/power/apm_power.c
+++ b/drivers/power/apm_power.c
@@ -133,6 +133,9 @@ static int do_calculate_time(int status, enum apm_source source)
 			return -1;
 	}
 
+	if (!I.intval)
+		return 0;
+
 	switch (source) {
 	case SOURCE_CHARGE:
 		full_prop = POWER_SUPPLY_PROP_CHARGE_FULL;

