commit 0f5aaac47a6002bbd4fdfaf0e6897d307c2cbc0e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 9 12:33:58 2015 +0100

    textops: stop after substituting in first header if flag f is set for subst_hf()
    
    - reported by Julia Boudniatsky

diff --git a/modules/textops/textops.c b/modules/textops/textops.c
index f8b6e419b..a677cba03 100644
--- a/modules/textops/textops.c
+++ b/modules/textops/textops.c
@@ -2874,6 +2874,9 @@ static int subst_hf_f(struct sip_msg *msg, char *str_hf, char *subst, char *flag
 		} else {
 			hfl = hf;
 		}
+		/* if flags set for first header, then all done */
+		if(flags!=NULL && *flags=='f')
+			return ret;
 	}
 	if(hfl!=NULL)
 	{

