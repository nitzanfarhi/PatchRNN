commit 92f86bff088dc6f0c0ed93b8e82d4d2459c35145
Author: Gerd Hoffmann <kraxel@redhat.com>
Date:   Tue Mar 13 11:17:29 2018 -0600

    vfio/common: cleanup in vfio_region_finalize
    
    Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>
    Reviewed by: Kirti Wankhede <kwankhede@nvidia.com>
    Signed-off-by: Alex Williamson <alex.williamson@redhat.com>

diff --git a/hw/vfio/common.c b/hw/vfio/common.c
index f895e3c335..6a8203a532 100644
--- a/hw/vfio/common.c
+++ b/hw/vfio/common.c
@@ -858,6 +858,13 @@ void vfio_region_finalize(VFIORegion *region)
     g_free(region->mmaps);
 
     trace_vfio_region_finalize(region->vbasedev->name, region->nr);
+
+    region->mem = NULL;
+    region->mmaps = NULL;
+    region->nr_mmaps = 0;
+    region->size = 0;
+    region->flags = 0;
+    region->nr = 0;
 }
 
 void vfio_region_mmaps_set_enabled(VFIORegion *region, bool enabled)

