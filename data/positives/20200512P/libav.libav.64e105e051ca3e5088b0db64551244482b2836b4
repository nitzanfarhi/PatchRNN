commit 64e105e051ca3e5088b0db64551244482b2836b4
Author: Philip Gladstone <philipjsg@users.sourceforge.net>
Date:   Sat Jul 27 03:05:45 2002 +0000

    Fix a potential endless loop (nb (1 * 3) / 2 == 1)
    
    Originally committed as revision 823 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libav/aviobuf.c b/libav/aviobuf.c
index 71f4b64dc..6c23088d9 100644
--- a/libav/aviobuf.c
+++ b/libav/aviobuf.c
@@ -519,7 +519,7 @@ static void dyn_buf_write(void *opaque, UINT8 *buf, int buf_size)
         if (!new_allocated_size)
             new_allocated_size = new_size;
         else
-            new_allocated_size = (new_allocated_size * 3) / 2;
+            new_allocated_size = (new_allocated_size * 3) / 2 + 1;    
     }
     
     if (new_allocated_size > d->allocated_size) {

