commit c508adb22366149222797669b27fa5cdaa52fa9d
Author: Timothy Gu <timothygu99@gmail.com>
Date:   Thu Jul 17 18:26:44 2014 -0700

    hevc: propagate error code from set_sps()
    
    Signed-off-by: Timothy Gu <timothygu99@gmail.com>
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/hevc.c b/libavcodec/hevc.c
index 1fee4ddae9..3f1c65b75d 100644
--- a/libavcodec/hevc.c
+++ b/libavcodec/hevc.c
@@ -3311,7 +3311,8 @@ static int hevc_update_thread_context(AVCodecContext *dst,
     }
 
     if (s->sps != s0->sps)
-        ret = set_sps(s, s0->sps);
+        if ((ret = set_sps(s, s0->sps)) < 0)
+            return ret;
 
     s->seq_decode = s0->seq_decode;
     s->seq_output = s0->seq_output;

