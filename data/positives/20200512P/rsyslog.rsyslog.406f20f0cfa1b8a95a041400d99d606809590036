commit 406f20f0cfa1b8a95a041400d99d606809590036
Author: Rainer Gerhards <rgerhards@adiscon.com>
Date:   Thu Oct 11 11:45:05 2012 +0200

    fix double-free

diff --git a/tools/omfile.c b/tools/omfile.c
index efdb61a14..5b0bfb46d 100644
--- a/tools/omfile.c
+++ b/tools/omfile.c
@@ -961,7 +961,7 @@ CODESTARTnewActInst
 		ABORT_FINALIZE(RS_RET_MISSING_CNFPARAMS);
 	}
 
-	tplToUse = (pData->tplName == NULL) ? ustrdup(getDfltTpl()) : pData->tplName;
+	tplToUse = ustrdup((pData->tplName == NULL) ? getDfltTpl() : pData->tplName);
 	CHKiRet(OMSRsetEntry(*ppOMSR, 0, tplToUse, OMSR_NO_RQD_TPL_OPTS));
 
 	if(pData->bDynamicName) {

