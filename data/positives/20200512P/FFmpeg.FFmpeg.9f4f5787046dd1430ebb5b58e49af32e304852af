commit 9f4f5787046dd1430ebb5b58e49af32e304852af
Author: Rostislav Pehlivanov <atomnuker@gmail.com>
Date:   Thu Jul 2 19:13:03 2015 +0100

    aacenc: reset marked IS and M/S bands upon frame encoding
    
    This commit resets any bands marked as M/S or IS upon encoding a frame.
    This is needed because the arrays may contain some residual information
    upon allocation on startup and because there isn't any mechanism to
    reset the arrays once the frame has been encoded.
    
    Reviewed-by: Claudio Freire <klaussfreire@gmail.com>
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/aacenc.c b/libavcodec/aacenc.c
index 3a512ffeee..05a8162394 100644
--- a/libavcodec/aacenc.c
+++ b/libavcodec/aacenc.c
@@ -617,6 +617,8 @@ static int aac_encode_frame(AVCodecContext *avctx, AVPacket *avpkt,
             tag      = s->chan_map[i+1];
             chans    = tag == TYPE_CPE ? 2 : 1;
             cpe      = &s->cpe[i];
+            memset(cpe->is_mask, 0, sizeof(cpe->is_mask));
+            memset(cpe->ms_mask, 0, sizeof(cpe->ms_mask));
             put_bits(&s->pb, 3, tag);
             put_bits(&s->pb, 4, chan_el_counter[tag]++);
             for (ch = 0; ch < chans; ch++)

