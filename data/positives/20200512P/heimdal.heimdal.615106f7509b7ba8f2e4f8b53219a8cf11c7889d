commit 615106f7509b7ba8f2e4f8b53219a8cf11c7889d
Author: Love Hörnquist Åstrand <lha@kth.se>
Date:   Thu Jul 13 18:37:58 2006 +0000

    (_kdc_pk_check_client): make it not crash when there are no acl
    
    
    git-svn-id: svn://svn.h5l.se/heimdal/trunk/heimdal@17831 ec53bebd-3082-4978-b11e-865c3cabbd6b

diff --git a/kdc/pkinit.c b/kdc/pkinit.c
index 7c1c07a5d..5ca9481ae 100644
--- a/kdc/pkinit.c
+++ b/kdc/pkinit.c
@@ -1226,7 +1226,7 @@ _kdc_pk_check_client(krb5_context context,
     }
 
     ret = hdb_entry_get_pkinit_acl(&client->entry, &acl);
-    if (ret == 0) {
+    if (ret == 0 && acl != NULL) {
 	/*
 	 * Cheat here and compare the generated name with the string
 	 * and not the reverse.

