commit 6c7ee8905d54e66d01902c59490bbc99d87d4efb
Author: Dan Carpenter <dan.carpenter@oracle.com>
Date:   Mon Jun 16 12:32:33 2014 +0300

    clk: ti: apll: not allocating enough data
    
    There is a cut and paste bug here which will lead to memory corruption
    because we don't allocate enough data.
    
    Fixes: 4d008589e271 ('CLK: TI: APLL: add support for omap2 aplls')
    Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
    Signed-off-by: Tero Kristo <t-kristo@ti.com>

diff --git a/drivers/clk/ti/apll.c b/drivers/clk/ti/apll.c
index 5428c9c547cd..18dbaf128a39 100644
--- a/drivers/clk/ti/apll.c
+++ b/drivers/clk/ti/apll.c
@@ -338,7 +338,7 @@ static void __init of_omap2_apll_setup(struct device_node *node)
 	const char *parent_name;
 	u32 val;
 
-	ad = kzalloc(sizeof(*clk_hw), GFP_KERNEL);
+	ad = kzalloc(sizeof(*ad), GFP_KERNEL);
 	clk_hw = kzalloc(sizeof(*clk_hw), GFP_KERNEL);
 	init = kzalloc(sizeof(*init), GFP_KERNEL);
 

