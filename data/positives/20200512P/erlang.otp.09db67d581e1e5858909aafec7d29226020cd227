commit 09db67d581e1e5858909aafec7d29226020cd227
Author: Dan Gudmundsson <dgud@erlang.org>
Date:   Wed Mar 18 15:47:47 2015 +0100

    Fix thread name from driver api
    
    if opts was null the name was not set

diff --git a/erts/emulator/beam/erl_drv_thread.c b/erts/emulator/beam/erl_drv_thread.c
index 31b05d22af..240faa823d 100644
--- a/erts/emulator/beam/erl_drv_thread.c
+++ b/erts/emulator/beam/erl_drv_thread.c
@@ -604,10 +604,12 @@ erl_drv_thread_create(char *name,
     ethr_thr_opts ethr_opts = ETHR_THR_OPTS_DEFAULT_INITER;
     ethr_thr_opts *use_opts;
 
-    if (!opts)
+    if (!opts && !name)
 	use_opts = NULL;
     else {
-	ethr_opts.suggested_stack_size = opts->suggested_stack_size;
+	if(opts)
+	    ethr_opts.suggested_stack_size = opts->suggested_stack_size;
+
         ethr_opts.name = name;
 	use_opts = &ethr_opts;
     }

