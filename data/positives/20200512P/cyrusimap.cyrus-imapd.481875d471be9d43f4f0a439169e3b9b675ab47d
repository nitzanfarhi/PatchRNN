commit 481875d471be9d43f4f0a439169e3b9b675ab47d
Author: John Gardiner Myers <jm36@andrew.cmu.edu>
Date:   Thu May 12 16:11:11 1994 +0000

    Need to call krb_mk_req before krb_get_cred to ensure the service key
    gets fetched into the ticket file.

diff --git a/lib/acte_krb.c b/lib/acte_krb.c
index d75fda4d2..96713af23 100644
--- a/lib/acte_krb.c
+++ b/lib/acte_krb.c
@@ -149,6 +149,7 @@ void **state;			/* On success, filled in with state ptr */
     char realm[REALM_SZ];
     char uinst[INST_SZ];
     char urealm[INST_SZ];
+    KTEXT_ST authent;
     CREDENTIALS cr;
     struct krb_state *kstate;
 
@@ -170,6 +171,10 @@ void **state;			/* On success, filled in with state ptr */
     strcpy(realm, krb_realmofhost(host_name->h_name));
     strcpy(instance, krb_get_phost(host_name->h_name));
 
+    /* Fetch imap.hostname service key */
+    (void) krb_mk_req(&authent, "imap", instance, realm, 0);
+    memset(&authent, 0, sizeof(authent));
+
     if (krb_get_cred("imap", instance, realm, &cr)) {
 	return ACTE_FAIL;
     }

