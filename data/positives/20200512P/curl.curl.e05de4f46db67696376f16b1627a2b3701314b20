commit e05de4f46db67696376f16b1627a2b3701314b20
Author: Dan Fandrich <dan@coneharvesters.com>
Date:   Sun Dec 7 11:08:10 2014 +0100

    get_url_file_name: Fixed crash on OOM on debug build
    
    This caused a null-pointer dereference which caused a few dozen
    torture tests to fail.

diff --git a/src/tool_operhlp.c b/src/tool_operhlp.c
index 7a6ed2015..abf949617 100644
--- a/src/tool_operhlp.c
+++ b/src/tool_operhlp.c
@@ -164,6 +164,8 @@ CURLcode get_url_file_name(char **filename, const char *url)
       Curl_safefree(*filename);
       *filename = strdup(buffer); /* clone the buffer */
       curl_free(tdir);
+      if(!*filename)
+        return CURLE_OUT_OF_MEMORY;
     }
   }
 #endif

