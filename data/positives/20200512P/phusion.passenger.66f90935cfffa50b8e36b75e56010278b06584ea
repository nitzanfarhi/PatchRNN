commit 66f90935cfffa50b8e36b75e56010278b06584ea
Author: Hongli Lai (Phusion) <hongli@phusion.nl>
Date:   Fri Nov 21 20:26:27 2008 +0100

    Fix potential leak in Application::connect(): if connecting fails, close the socket.

diff --git a/ext/apache2/Application.h b/ext/apache2/Application.h
index ccac71463..8b5854a1d 100644
--- a/ext/apache2/Application.h
+++ b/ext/apache2/Application.h
@@ -450,6 +450,9 @@ public:
 			string message("Cannot connect to Unix socket '");
 			message.append(listenSocketName);
 			message.append("' on the abstract namespace");
+			do {
+				ret = close(fd);
+			} while (ret == -1 && errno == EINTR);
 			throw SystemException(message, e);
 		}
 		

