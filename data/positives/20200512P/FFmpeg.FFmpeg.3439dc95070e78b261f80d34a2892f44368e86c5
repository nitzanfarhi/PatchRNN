commit 3439dc95070e78b261f80d34a2892f44368e86c5
Author: Baptiste Coudurier <baptiste.coudurier@gmail.com>
Date:   Sun Jan 14 13:57:26 2007 +0000

    seek back at the end of file after updating header
    
    Originally committed as revision 7473 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/swf.c b/libavformat/swf.c
index 7ec3f7f767..ab9ec5acb5 100644
--- a/libavformat/swf.c
+++ b/libavformat/swf.c
@@ -691,6 +691,7 @@ static int swf_write_trailer(AVFormatContext *s)
         put_le32(pb, file_size);
         url_fseek(pb, swf->duration_pos, SEEK_SET);
         put_le16(pb, video_enc->frame_number);
+        url_fseek(pb, file_size, SEEK_SET);
     }
 
     av_free(swf->audio_fifo);

