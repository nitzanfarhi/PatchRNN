commit ce3e3737a3361e0c7030f8598eec36bb82050de6
Author: Peter Ujfalusi <peter.ujfalusi@nokia.com>
Date:   Fri Oct 2 09:17:37 2009 +0300

    ASoC: Improve the debugfs hierarchy
    
    Change the way the debugfs entries are created:
    If the codec->dev is valid, than use:
    debugfs/asoc/{codec->name}.{dev_name(codec->dev)}/
    
    if the codec->dev is NULL:
    debugfs/asoc/{codec->name}/
    
    as root for the debugfs entries.
    
    Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com>
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/sound/soc/soc-core.c b/sound/soc/soc-core.c
index e4ab36daf3f7..1dec9d21c55e 100644
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@ -1256,8 +1256,12 @@ static void soc_init_codec_debugfs(struct snd_soc_codec *codec)
 {
 	char codec_root[128];
 
-	snprintf(codec_root, sizeof(codec_root),
-		 "%s-%s", dev_name(codec->socdev->dev), codec->name);
+	if (codec->dev)
+		snprintf(codec_root, sizeof(codec_root),
+			"%s.%s", codec->name, dev_name(codec->dev));
+	else
+		snprintf(codec_root, sizeof(codec_root),
+			"%s", codec->name);
 
 	codec->debugfs_codec_root = debugfs_create_dir(codec_root,
 						       debugfs_root);

