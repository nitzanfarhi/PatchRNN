commit 8bc7294801f1e0bdf8b92c45b327a2b362cc6032
Author: Eduardo Silva <eduardo@monkey.io>
Date:   Sun May 3 13:37:37 2015 -0600

    IOV: on consume, check best of case where all bytes where consume (avoid walk around the array)
    
    Signed-off-by: Eduardo Silva <eduardo@monkey.io>

diff --git a/src/mk_iov.c b/src/mk_iov.c
index 2ed91d7a..37822157 100644
--- a/src/mk_iov.c
+++ b/src/mk_iov.c
@@ -169,6 +169,12 @@ int mk_iov_consume(struct mk_iov *mk_io, size_t bytes)
     int idx;
     size_t len;
 
+    if (mk_io->total_len == bytes) {
+        mk_io->total_len = 0;
+        mk_io->iov_idx   = 0;
+        return 0;
+    }
+
     for (idx = 0; idx < mk_io->iov_idx; idx++) {
         len = mk_io->io[idx].iov_len;
 

