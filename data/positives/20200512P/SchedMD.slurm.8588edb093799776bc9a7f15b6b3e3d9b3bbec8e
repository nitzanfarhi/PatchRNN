commit 8588edb093799776bc9a7f15b6b3e3d9b3bbec8e
Author: Morris Jette <jette@schedmd.com>
Date:   Mon Oct 16 13:07:02 2017 -0600

    Add error check for system() call

diff --git a/src/plugins/node_features/knl_cray/node_features_knl_cray.c b/src/plugins/node_features/knl_cray/node_features_knl_cray.c
index 159ba12e89..13abf47acf 100644
--- a/src/plugins/node_features/knl_cray/node_features_knl_cray.c
+++ b/src/plugins/node_features/knl_cray/node_features_knl_cray.c
@@ -2708,11 +2708,18 @@ extern void node_features_p_step_config(bool mem_sort, bitstr_t *numa_bitmap)
 #ifdef HAVE_NUMA
 	if (mem_sort && (numa_available() != -1)) {
 		struct stat sb;
-		int buf_len, fd, i, len;
+		int buf_len, fd, i, len, rc;
 		char buf[8];
 
-		if (stat(ZONE_SORT_PATH, &sb) == -1)
-			(void) system(MODPROBE_PATH " zonesort_module");
+		if (stat(ZONE_SORT_PATH, &sb) == -1) {
+			rc = system(MODPROBE_PATH " zonesort_module");
+			if (rc != -1)
+				rc = WEXITSTATUS(rc);
+			if (rc) {
+				verbose("%s: zonesort execution failure. Return code: %d",
+					__func__, rc);
+			}
+		}
 		if ((fd = open(ZONE_SORT_PATH, O_WRONLY | O_SYNC)) == -1) {
 			error("%s: Could not open file %s: %m",
 			      __func__, ZONE_SORT_PATH);

