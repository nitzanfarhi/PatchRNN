commit 12474951da31e4ef3b18c52ef86eab6adbc1a469
Author: Sunny Bains <Sunny.Bains@oracle.com>
Date:   Mon Jul 17 19:04:59 2017 +1000

    WL#10793 - Follow up fix.
    
    Release the heap memory before exiting the function, if there aren't
    any locks to release.

diff --git a/storage/innobase/lock/lock0lock.cc b/storage/innobase/lock/lock0lock.cc
index 52683245b67..bb24244a7ee 100644
--- a/storage/innobase/lock/lock0lock.cc
+++ b/storage/innobase/lock/lock0lock.cc
@@ -2728,6 +2728,7 @@ lock_grant_vats(
 
 	if (waiting.empty() && granted.empty()) {
 		/* Nothing to grant. */
+		mem_heap_free(heap);
 		return;
 	}
 

