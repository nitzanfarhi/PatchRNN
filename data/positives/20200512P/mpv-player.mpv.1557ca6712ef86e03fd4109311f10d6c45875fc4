commit 1557ca6712ef86e03fd4109311f10d6c45875fc4
Author: Philip Langdale <philipl@overt.org>
Date:   Wed Sep 28 12:06:56 2016 -0700

    cuda: initialize hwframes format
    
    In retrospect, this seems obvious, but ffmpeg didn't complain until
    a recent update.

diff --git a/video/decode/cuda.c b/video/decode/cuda.c
index f41aed2e7c..f9dd418fd5 100644
--- a/video/decode/cuda.c
+++ b/video/decode/cuda.c
@@ -57,6 +57,7 @@ static int init_decoder(struct lavc_ctx *ctx, int w, int h)
     AVCodecContext *avctx = ctx->avctx;
     AVCUDADeviceContext *device_hwctx;
     AVHWDeviceContext *device_ctx;
+    AVHWFramesContext *hwframe_ctx;
     CUVIDContext *priv = ctx->hwdec_priv;
     int ret = 0;
 
@@ -89,6 +90,9 @@ static int init_decoder(struct lavc_ctx *ctx, int w, int h)
         goto error;
     }
 
+    hwframe_ctx = (AVHWFramesContext*)avctx->hw_frames_ctx->data;
+    hwframe_ctx->format = AV_PIX_FMT_CUDA;
+
     return 0;
 
  error:

