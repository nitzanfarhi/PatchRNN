commit 7dda510dda343418c491258107b5b3d7e52c7770
Author: Armin Novak <armin.novak@thincast.com>
Date:   Tue Jan 13 12:43:27 2015 +0100

    Resetting disconnect flag on client start.
    Fixed initialisation of variable to avoid NULL dereference.

diff --git a/client/X11/xf_client.c b/client/X11/xf_client.c
index 1e96e9674..de592ca22 100644
--- a/client/X11/xf_client.c
+++ b/client/X11/xf_client.c
@@ -716,7 +716,7 @@ BOOL xf_get_pixmap_info(xfContext* xfc)
 		return FALSE;
 	}
 
-	vi = NULL;
+	vi = vis;
 
 	for (i = 0; i < vi_count; i++)
 	{
@@ -1763,6 +1763,7 @@ static int xfreerdp_client_start(rdpContext* context)
 		WLog_ERR(TAG,  "error: server hostname was not specified with /v:<server>[:port]");
 		return -1;
 	}
+	xfc->disconnect = FALSE;
 	xfc->thread = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE) xf_thread,
 							   context->instance, 0, NULL);
 	return 0;

