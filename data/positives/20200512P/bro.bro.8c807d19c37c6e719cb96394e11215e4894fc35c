commit 8c807d19c37c6e719cb96394e11215e4894fc35c
Author: Robin Sommer <robin@icir.org>
Date:   Wed Jan 30 20:08:36 2013 -0800

    Fixing exit-after-terminate when used with bare mode.

diff --git a/src/main.cc b/src/main.cc
index 599918624..fffedee3d 100644
--- a/src/main.cc
+++ b/src/main.cc
@@ -1053,7 +1053,7 @@ int main(int argc, char** argv)
 
 	io_sources.Register(thread_mgr, true);
 
-	if ( io_sources.Size() > 0 || have_pending_timers )
+	if ( io_sources.Size() > 0 || have_pending_timers || BifConst::exit_only_after_terminate )
 		{
 		if ( profiling_logger )
 			profiling_logger->Log();

