commit bd1f8a927cee96a91f523b853fb623ef3342182a
Author: serg@serg.mylan <>
Date:   Fri Jan 30 08:40:01 2004 +0100

    incorrect fix undone, as it causes memory leaks (e.g. in key.test)

diff --git a/sql/sql_select.cc b/sql/sql_select.cc
index f6e7a474eca..874a3b16312 100644
--- a/sql/sql_select.cc
+++ b/sql/sql_select.cc
@@ -7200,6 +7200,7 @@ create_sort_index(THD *thd, JOIN *join, ORDER *order,
   table->sort.found_records=filesort(thd, table,sortorder, length,
                                      select, filesort_limit, &examined_rows);
   tab->records=table->sort.found_records;		// For SQL_CALC_ROWS
+  delete select;
   tab->select=0;
   tab->select_cond=0;
   tab->type=JT_ALL;				// Read with normal read_record

