commit b996393f85ead446405f0cf77f0cb4fcfcca65b0
Author: Jilles Tjoelker <jilles@stack.nl>
Date:   Mon Jul 21 23:18:33 2008 +0200

    anope_convert: Avoid a crash on a nickless account.
    The account will be silently skipped.
    Apparently anope databases can sometimes be corrupted like this.

diff --git a/contrib/anope_convert.c b/contrib/anope_convert.c
index c8dfd1bfa..8e107cae6 100644
--- a/contrib/anope_convert.c
+++ b/contrib/anope_convert.c
@@ -73,6 +73,8 @@ void write_accounts(void)
 	for (i = 0; i < 1024; i++) {
 		for (nc = nclists[i]; nc; nc = nc->next) {
 			athemeflags = 0;
+			if (nc->aliases.count == 0)
+				continue;
 			na = nc->aliases.list[0];
 			registered = na->time_registered;
 			for (ii = 1; ii < nc->aliases.count; ii++)

