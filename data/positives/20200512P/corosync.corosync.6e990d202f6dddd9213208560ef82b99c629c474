commit 6e990d202f6dddd9213208560ef82b99c629c474
Author: Zane Bitter <zane.bitter@gmail.com>
Date:   Thu Apr 7 23:48:49 2011 -0400

    Fix uninitialised memory errors found by valgrind
    
    Signed-off-by: Zane Bitter <zane.bitter@gmail.com>
    Reviewed-by: Steven Dake <sdake@redhat.com>

diff --git a/exec/totempg.c b/exec/totempg.c
index c5144533..9188958c 100644
--- a/exec/totempg.c
+++ b/exec/totempg.c
@@ -673,6 +673,7 @@ int callback_token_received_fn (enum totem_callback_token_type type,
 		return (0);
 	}
 	mcast.header.version = 0;
+	mcast.header.type = 0;
 	mcast.fragmented = 0;
 
 	/*
diff --git a/exec/totemsrp.c b/exec/totemsrp.c
index 2d8755ca..0c6e82e4 100644
--- a/exec/totemsrp.c
+++ b/exec/totemsrp.c
@@ -2191,6 +2191,7 @@ int totemsrp_mcast (
 	/*
 	 * Set mcast header
 	 */
+	memset(message_item.mcast, 0, sizeof (struct mcast));
 	message_item.mcast->header.type = MESSAGE_TYPE_MCAST;
 	message_item.mcast->header.endian_detector = ENDIAN_LOCAL;
 	message_item.mcast->header.encapsulated = MESSAGE_NOT_ENCAPSULATED;

