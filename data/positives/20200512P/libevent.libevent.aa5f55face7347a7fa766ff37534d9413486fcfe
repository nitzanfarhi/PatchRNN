commit aa5f55face7347a7fa766ff37534d9413486fcfe
Author: Joachim Bauch <mail@joachim-bauch.de>
Date:   Tue Nov 2 13:50:57 2010 -0400

    reset "chunked" flag when sending non-chunked reply

diff --git a/http.c b/http.c
index 2a1cb670..3a567227 100644
--- a/http.c
+++ b/http.c
@@ -2179,6 +2179,8 @@ evhttp_send_reply_start(struct evhttp_request *req, int code,
 		evhttp_add_header(req->output_headers, "Transfer-Encoding",
 		    "chunked");
 		req->chunked = 1;
+	} else {
+		req->chunked = 0;
 	}
 	evhttp_make_header(req->evcon, req);
 	evhttp_write_buffer(req->evcon, NULL, NULL);

