commit 64159a588b505d879c57078d223d8e617a36ff04
Author: Baptiste Coudurier <baptiste.coudurier@gmail.com>
Date:   Sat Mar 21 10:32:43 2009 +0000

    check if feed max file size is too small
    
    Originally committed as revision 18109 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/ffserver.c b/ffserver.c
index 8d77b94453..61ecf206d4 100644
--- a/ffserver.c
+++ b/ffserver.c
@@ -3987,6 +3987,11 @@ static int parse_ffconfig(const char *filename)
                     break;
                 }
                 feed->feed_max_size = (int64_t)fsize;
+                if (feed->feed_max_size < FFM_PACKET_SIZE*4) {
+                    fprintf(stderr, "%s:%d: Feed max file size is too small, "
+                            "must be at least %d\n", filename, line_num, FFM_PACKET_SIZE*4);
+                    errors++;
+                }
             }
         } else if (!strcasecmp(cmd, "</Feed>")) {
             if (!feed) {

