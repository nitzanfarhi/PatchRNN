commit cea3235cf578b5e952f5a0cec9bc6c2e862eb697
Author: Rajkumar Manoharan <rmanoharan@atheros.com>
Date:   Sat Apr 16 14:17:39 2011 +0530

    ath9k_htc: Fix free slot value for cab queue
    
    ath9k_htc_tx_get_slot can return zero as valid index.
    
    Signed-off-by: Rajkumar Manoharan <rmanoharan@atheros.com>
    Acked-by: Sujith Manoharan <Sujith.Manoharan@Atheros.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/ath/ath9k/htc_drv_beacon.c b/drivers/net/wireless/ath/ath9k/htc_drv_beacon.c
index bf7ef1b7eb3f..a157107b3f3b 100644
--- a/drivers/net/wireless/ath/ath9k/htc_drv_beacon.c
+++ b/drivers/net/wireless/ath/ath9k/htc_drv_beacon.c
@@ -322,7 +322,7 @@ static void ath9k_htc_send_buffered(struct ath9k_htc_priv *priv,
 		}
 
 		tx_slot = ath9k_htc_tx_get_slot(priv);
-		if (tx_slot != 0) {
+		if (tx_slot < 0) {
 			ath_dbg(common, ATH_DBG_XMIT, "No free CAB slot\n");
 			dev_kfree_skb_any(skb);
 			goto next;

