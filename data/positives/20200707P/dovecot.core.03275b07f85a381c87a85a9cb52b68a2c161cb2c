commit 03275b07f85a381c87a85a9cb52b68a2c161cb2c
Author: Timo Sirainen <tss@iki.fi>
Date:   Sun Jun 24 03:02:11 2012 +0300

    mailbox_list_index=yes: Fixed a potential crash.

diff --git a/src/lib-storage/list/mailbox-list-index-status.c b/src/lib-storage/list/mailbox-list-index-status.c
index adfe1cd55..500d4e843 100644
--- a/src/lib-storage/list/mailbox-list-index-status.c
+++ b/src/lib-storage/list/mailbox-list-index-status.c
@@ -81,7 +81,8 @@ index_list_get_view_status(struct mailbox *box, struct mail_index_view *view,
 			ret = FALSE;
 		else {
 			status_r->uidvalidity = rec->uid_validity;
-			memcpy(mailbox_guid, rec->guid, GUID_128_SIZE);
+			if (mailbox_guid != NULL)
+				memcpy(mailbox_guid, rec->guid, GUID_128_SIZE);
 		}
 	}
 

