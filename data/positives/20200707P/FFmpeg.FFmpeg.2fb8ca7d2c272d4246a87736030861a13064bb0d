commit 2fb8ca7d2c272d4246a87736030861a13064bb0d
Author: Clément Bœsch <ubitux@gmail.com>
Date:   Thu Apr 11 14:58:13 2013 +0200

    lavfi/astreamsync: fix eval memleak.

diff --git a/libavfilter/af_astreamsync.c b/libavfilter/af_astreamsync.c
index 79f703a5ae..76a152c87a 100644
--- a/libavfilter/af_astreamsync.c
+++ b/libavfilter/af_astreamsync.c
@@ -180,6 +180,14 @@ static int filter_frame(AVFilterLink *inlink, AVFrame *insamples)
     return 0;
 }
 
+static av_cold void uninit(AVFilterContext *ctx)
+{
+    AStreamSyncContext *as = ctx->priv;
+
+    av_expr_free(as->expr);
+    as->expr = NULL;
+}
+
 static const AVFilterPad astreamsync_inputs[] = {
     {
         .name         = "in1",
@@ -214,6 +222,7 @@ AVFilter avfilter_af_astreamsync = {
                                           "in a configurable order."),
     .priv_size     = sizeof(AStreamSyncContext),
     .init          = init,
+    .uninit        = uninit,
     .query_formats = query_formats,
     .inputs        = astreamsync_inputs,
     .outputs       = astreamsync_outputs,

