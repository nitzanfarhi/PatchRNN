commit a76dc45512acf8182f4fad5d3a9d5db6e08bbe9e
Author: Chip Salzenberg <chip@pobox.com>
Date:   Thu Oct 3 19:07:20 2013 -0700

    paper bag bug: json_string_set* functions should set the length too

diff --git a/src/value.c b/src/value.c
index 1b69904..417ea85 100644
--- a/src/value.c
+++ b/src/value.c
@@ -723,6 +723,7 @@ int json_string_setn_nocheck(json_t *json, const char *value, size_t len)
     string = json_to_string(json);
     jsonp_free(string->value);
     string->value = dup;
+    string->length = len;
 
     return 0;
 }

