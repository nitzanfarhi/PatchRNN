commit b3644ee99394eba61758080796744386d835c4b4
Author: David Lutterkort <lutter@redhat.com>
Date:   Sun Feb 1 21:33:15 2009 -0800

    * src/augeas.c (init_root): check for failure of strdup

diff --git a/src/augeas.c b/src/augeas.c
index a3196837..c092ec28 100644
--- a/src/augeas.c
+++ b/src/augeas.c
@@ -157,6 +157,8 @@ static const char *init_root(const char *root0) {
     if (root0 == NULL)
         root0 = "/";
     root = strdup(root0);
+    if (root == NULL)
+        return NULL;
     if (root[strlen(root)-1] != SEP) {
         if (REALLOC_N(root, strlen(root) + 2) == -1) {
             FREE(root);

