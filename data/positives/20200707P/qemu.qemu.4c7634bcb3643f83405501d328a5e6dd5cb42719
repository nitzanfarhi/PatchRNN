commit 4c7634bcb3643f83405501d328a5e6dd5cb42719
Author: bellard <bellard@c046a42c-6fe2-441c-8c8c-71466251a162>
Date:   Sat Jun 5 18:49:26 2004 +0000

    init VGA with default config
    
    
    git-svn-id: svn://svn.savannah.nongnu.org/qemu/trunk@900 c046a42c-6fe2-441c-8c8c-71466251a162

diff --git a/hw/pci.c b/hw/pci.c
index 1e8466ef10..e72071590c 100644
--- a/hw/pci.c
+++ b/hw/pci.c
@@ -1030,6 +1030,8 @@ static void pci_bios_init_device(PCIDevice *d)
         }
         break;
     case 0x0300:
+        if (vendor_id != 0x1234)
+            goto default_map;
         /* VGA: map frame buffer to default Bochs VBE address */
         pci_set_io_region_addr(d, 0, 0xE0000000);
         break;
@@ -1040,6 +1042,7 @@ static void pci_bios_init_device(PCIDevice *d)
         }
         break;
     default:
+    default_map:
         /* default memory mappings */
         for(i = 0; i < PCI_NUM_REGIONS; i++) {
             r = &d->io_regions[i];

