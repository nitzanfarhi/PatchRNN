commit 7defac36db43df73feef44e0f6edc298868ae1ac
Author: Yuanhan Liu <yuanhan.liu@linux.intel.com>
Date:   Mon Oct 29 13:50:37 2012 +0800

    staging: dgrp: fix potential NULL defereference issue
    
    Fix a coccinelle warning catched by Fengguang's 0-DAY system:
    + drivers/staging/dgrp/dgrp_net_ops.c:1061:11-27: ERROR: nd is NULL but dereferenced.
    
    Put the "done:" label a bit down would solve this issue.
    
    Cc: Fengguang Wu <fengguang.wu@intel.com>
    Cc: Julia Lawall <julia.lawall@lip6.fr>
    Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
    Signed-off-by: Yuanhan Liu <yuanhan.liu@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/dgrp/dgrp_net_ops.c b/drivers/staging/dgrp/dgrp_net_ops.c
index 067d97555446..c409cd03e8c1 100644
--- a/drivers/staging/dgrp/dgrp_net_ops.c
+++ b/drivers/staging/dgrp/dgrp_net_ops.c
@@ -1057,13 +1057,13 @@ static int dgrp_net_release(struct inode *inode, struct file *file)
 
 	spin_unlock_irqrestore(&dgrp_poll_data.poll_lock, lock_flags);
 
-done:
 	down(&nd->nd_net_semaphore);
 
 	dgrp_monitor_message(nd, "Net Close");
 
 	up(&nd->nd_net_semaphore);
 
+done:
 	module_put(THIS_MODULE);
 	file->private_data = NULL;
 	return 0;

