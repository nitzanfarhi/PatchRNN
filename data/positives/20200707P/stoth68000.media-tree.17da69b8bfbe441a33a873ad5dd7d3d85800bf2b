commit 17da69b8bfbe441a33a873ad5dd7d3d85800bf2b
Author: Guo-Fu Tseng <cooldavid@cooldavid.org>
Date:   Wed Mar 17 00:09:29 2010 +0000

    jme: Fix VLAN memory leak
    
    Fix memory leak while receiving 8021q tagged packet which is not
    registered by user.
    
    Signed-off-by: Guo-Fu Tseng <cooldavid@cooldavid.org>
    Cc: stable@kernel.org
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/jme.c b/drivers/net/jme.c
index 0f31497833df..cfc7b9824d6f 100644
--- a/drivers/net/jme.c
+++ b/drivers/net/jme.c
@@ -946,6 +946,8 @@ jme_alloc_and_feed_skb(struct jme_adapter *jme, int idx)
 				jme->jme_vlan_rx(skb, jme->vlgrp,
 					le16_to_cpu(rxdesc->descwb.vlan));
 				NET_STAT(jme).rx_bytes += 4;
+			} else {
+				dev_kfree_skb(skb);
 			}
 		} else {
 			jme->jme_rx(skb);

