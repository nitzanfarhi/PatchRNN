commit 7474f23dd05713dacc5f22d309913c96bce1c92b
Author: Julia Lawall <Julia.Lawall@lip6.fr>
Date:   Sat Sep 26 22:18:20 2015 +0200

    gpio: max730x: eliminate double free
    
    The function __max730x_remove is called from the remove functions of
    drivers/gpio/gpio-max7300.c and drivers/gpio/gpio-max7301.c.  In both
    cases, the probe function allocates ts using devm_kzalloc.  Explicitly
    freeing such a value with kfree will cause a double free.
    
    Signed-off-by: Julia Lawall <Julia.Lawall@lip6.fr>
    Reviewed-by: Alexandre Courbot <acourbot@nvidia.com>
    Signed-off-by: Linus Walleij <linus.walleij@linaro.org>

diff --git a/drivers/gpio/gpio-max730x.c b/drivers/gpio/gpio-max730x.c
index 18ab89e20806..0f57d2d248ec 100644
--- a/drivers/gpio/gpio-max730x.c
+++ b/drivers/gpio/gpio-max730x.c
@@ -236,7 +236,6 @@ int __max730x_remove(struct device *dev)
 	ts->write(dev, 0x04, 0x00);
 	gpiochip_remove(&ts->chip);
 	mutex_destroy(&ts->lock);
-	kfree(ts);
 	return 0;
 }
 EXPORT_SYMBOL_GPL(__max730x_remove);

