commit 34ff2e7aee644894bcac1d264c5200027ab41ee4
Author: Benjamin Jemlich <pcgod@users.sourceforge.net>
Date:   Fri Nov 19 15:42:25 2010 +0100

    More potential a_ucTexture == NULL crash fixes

diff --git a/overlay/lib.cpp b/overlay/lib.cpp
index 3509c7ea..097524a1 100644
--- a/overlay/lib.cpp
+++ b/overlay/lib.cpp
@@ -364,6 +364,7 @@ void Pipe::checkMessage(unsigned int w, unsigned int h) {
 						ods("Pipe: Failed to map memory");
 						CloseHandle(hMemory);
 						hMemory = NULL;
+						break;
 					}
 
 					MEMORY_BASIC_INFORMATION mbi;
@@ -421,6 +422,9 @@ void Pipe::checkMessage(unsigned int w, unsigned int h) {
 		omMsg.omh.iLength = -1;
 	}
 
+	if (!a_ucTexture)
+		return;
+
 	for (std::vector<RECT>::iterator i = blits.begin(); i != blits.end(); ++i)
 		blit((*i).left, (*i).top, (*i).right - (*i).left, (*i).bottom - (*i).top);
 }

