commit 0c9eb5b931c3da3a79faa889b903dc7bd318203c
Author: Florian Fainelli <f.fainelli@gmail.com>
Date:   Fri Dec 6 13:01:38 2013 -0800

    net: sh_eth: do not issue a wild PHY reset through BMCR
    
    The sh_eth driver issues an uncontrolled PHY reset through the MII
    register BMCR but fails to wait for the reset to complete, and will also
    implicitely wipe out all possible PHY fixups applied. Use phy_init_hw()
    which remedies both problems.
    
    Signed-off-by: Florian Fainelli <f.fainelli@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/ethernet/renesas/sh_eth.c b/drivers/net/ethernet/renesas/sh_eth.c
index d256ce19d4de..6761dde7007a 100644
--- a/drivers/net/ethernet/renesas/sh_eth.c
+++ b/drivers/net/ethernet/renesas/sh_eth.c
@@ -1704,7 +1704,10 @@ static int sh_eth_phy_start(struct net_device *ndev)
 		return ret;
 
 	/* reset phy - this also wakes it from PDOWN */
-	phy_write(mdp->phydev, MII_BMCR, BMCR_RESET);
+	ret = phy_init_hw(mdp->phydev);
+	if (ret)
+		return ret;
+
 	phy_start(mdp->phydev);
 
 	return 0;

