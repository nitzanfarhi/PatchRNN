commit e8c69cef7e78993cc523239ea0e6bbef60e83f3c
Author: Jakub Zawadzki <darkjames-ws@darkjames.pl>
Date:   Wed May 16 09:07:19 2012 +0000

    Free memory when create_tempfile() failed.
    
    svn path=/trunk/; revision=42654

diff --git a/ui/gtk/iax2_analysis.c b/ui/gtk/iax2_analysis.c
index 2a30b60ec4..859fa24591 100644
--- a/ui/gtk/iax2_analysis.c
+++ b/ui/gtk/iax2_analysis.c
@@ -3538,6 +3538,7 @@ void iax2_analysis(
 		simple_dialog(ESD_TYPE_ERROR, ESD_BTN_OK,
 			      "Can't create temporary file for IAX2 analysis:\n%s.",
 			      g_strerror(errno));
+		g_free(user_data);
 		return;
 	}
 	user_data->f_tempname = g_strdup(tempname);
@@ -3547,6 +3548,8 @@ void iax2_analysis(
 		simple_dialog(ESD_TYPE_ERROR, ESD_BTN_OK,
 			      "Can't create temporary file for IAX2 analysis:\n%s.",
 			      g_strerror(errno));
+		g_free(user_data->f_tempname);
+		g_free(user_data);
 		return;
 	}
 	user_data->r_tempname = g_strdup(tempname);
diff --git a/ui/gtk/rtp_analysis.c b/ui/gtk/rtp_analysis.c
index 7e867462f4..a4368afafa 100644
--- a/ui/gtk/rtp_analysis.c
+++ b/ui/gtk/rtp_analysis.c
@@ -3709,6 +3709,7 @@ void rtp_analysis(
 		simple_dialog(ESD_TYPE_ERROR, ESD_BTN_OK,
 			      "Can't create temporary file for RTP analysis:\n%s.",
 			      g_strerror(errno));
+		g_free(user_data);
 		return;
 	}
 	user_data->f_tempname = g_strdup(tempname);
@@ -3718,6 +3719,8 @@ void rtp_analysis(
 		simple_dialog(ESD_TYPE_ERROR, ESD_BTN_OK,
 			      "Can't create temporary file for RTP analysis:\n%s.",
 			      g_strerror(errno));
+		g_free(user_data->f_tempname);
+		g_free(user_data);
 		return;
 	}
 	user_data->r_tempname = g_strdup(tempname);

