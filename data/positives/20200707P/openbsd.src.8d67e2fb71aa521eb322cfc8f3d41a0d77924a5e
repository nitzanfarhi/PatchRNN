commit 8d67e2fb71aa521eb322cfc8f3d41a0d77924a5e
Author: art <art@openbsd.org>
Date:   Thu May 31 10:21:01 2001 +0000

    Initialize bp->b_dep if we malloc our own struct buf.

diff --git a/sys/arch/hp300/dev/ac.c b/sys/arch/hp300/dev/ac.c
index 657ddc7a1c4..693444f5114 100644
--- a/sys/arch/hp300/dev/ac.c
+++ b/sys/arch/hp300/dev/ac.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: ac.c,v 1.7 1997/04/20 07:01:11 downsj Exp $	*/
+/*	$OpenBSD: ac.c,v 1.8 2001/05/31 10:21:01 art Exp $	*/
 /*	$NetBSD: ac.c,v 1.9 1997/04/02 22:37:21 scottr Exp $	*/
 
 /*
@@ -330,6 +330,7 @@ accommand(dev, command, bufp, buflen)
 	bp->b_resid = 0;
 	bp->b_blkno = 0;
 	bp->b_error = 0;
+	LIST_INIT(&bp->b_dep);
 	if (scsireq(sc->sc_dev.dv_parent, &sc->sc_sq))
 		acstart(sc);
 	error = biowait(bp);

