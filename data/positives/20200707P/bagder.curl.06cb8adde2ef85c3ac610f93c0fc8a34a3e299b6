commit 06cb8adde2ef85c3ac610f93c0fc8a34a3e299b6
Author: Patrick Monnerat <patrick@monnerat.net>
Date:   Mon Oct 9 01:26:27 2017 +0100

    mime: properly unbind mime structure in curl_mime_free().
    
    This allows freeing a mime structure bound to the easy handle before
    curl_easy_cleanup().
    
    Fixes #1970.

diff --git a/lib/mime.c b/lib/mime.c
index 04746ed09..cba95b929 100644
--- a/lib/mime.c
+++ b/lib/mime.c
@@ -1130,6 +1130,7 @@ void curl_mime_free(curl_mime *mime)
   curl_mimepart *part;
 
   if(mime) {
+    mime_subparts_unbind(mime);  /* Be sure it's not referenced anymore. */
     while(mime->firstpart) {
       part = mime->firstpart;
       mime->firstpart = part->nextpart;

