commit f63fcc90a379a269a07a1111f5b7ba28ebcb1eb4
Author: Masanari Iida <standby24x7@gmail.com>
Date:   Tue Feb 11 22:15:07 2014 +0900

    clk:at91: Fix memory leak in of_at91_clk_master_setup()
    
    cppcheck detected following error
    [clk-master.c:245]: (error) Memory leak: characteristics
    
    The original code forgot to free characteristics when
    irq_of_parse_and_map() failed.
    
    Signed-off-by: Masanari Iida <standby24x7@gmail.com>
    Acked-by Boris BREZILLON <b.brezillon@overkiz.com>
    Acked-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Signed-off-by: Mike Turquette <mturquette@linaro.org>

diff --git a/drivers/clk/at91/clk-master.c b/drivers/clk/at91/clk-master.c
index bd313f7816a8..c1af80bcdf20 100644
--- a/drivers/clk/at91/clk-master.c
+++ b/drivers/clk/at91/clk-master.c
@@ -242,7 +242,7 @@ of_at91_clk_master_setup(struct device_node *np, struct at91_pmc *pmc,
 
 	irq = irq_of_parse_and_map(np, 0);
 	if (!irq)
-		return;
+		goto out_free_characteristics;
 
 	clk = at91_clk_register_master(pmc, irq, name, num_parents,
 				       parent_names, layout,

