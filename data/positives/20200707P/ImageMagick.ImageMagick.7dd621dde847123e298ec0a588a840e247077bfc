commit 7dd621dde847123e298ec0a588a840e247077bfc
Author: Dirk Lemstra <dirk@git.imagemagick.org>
Date:   Sat Sep 30 10:30:09 2017 +0200

    Added missing null check reported in #817.

diff --git a/MagickCore/draw.c b/MagickCore/draw.c
index 2c5a5e926..defd6b7e1 100644
--- a/MagickCore/draw.c
+++ b/MagickCore/draw.c
@@ -4847,6 +4847,11 @@ static MagickBooleanType DrawStrokePolygon(Image *image,
   for (p=primitive_info; p->primitive != UndefinedPrimitive; p+=p->coordinates)
   {
     stroke_polygon=TraceStrokePolygon(draw_info,p);
+    if (stroke_polygon == (PrimitiveInfo *) NULL)
+      {
+        status=0;
+        break;
+      }
     status&=DrawPolygonPrimitive(image,clone_info,stroke_polygon,exception);
     if (status == 0)
       break;

