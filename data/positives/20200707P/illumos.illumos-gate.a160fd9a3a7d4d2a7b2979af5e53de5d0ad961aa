commit a160fd9a3a7d4d2a7b2979af5e53de5d0ad961aa
Author: Toomas Soome <tsoome@me.com>
Date:   Mon May 1 12:08:10 2017 +0300

    8137 sun_fc: NULL pointer is used in wrong context
    Reviewed by: Yuri Pankov <yuri.pankov@gmail.com>
    Reviewed by: Marcel Telka <marcel@telka.sk>
    Reviewed by: Igor Kozhukhov <igor@dilos.org>
    Approved by: Robert Mustacchi <rm@joyent.com>

diff --git a/usr/src/lib/sun_fc/common/TgtFCHBAPort.cc b/usr/src/lib/sun_fc/common/TgtFCHBAPort.cc
index 04161a75eb..ba2ee1eb59 100644
--- a/usr/src/lib/sun_fc/common/TgtFCHBAPort.cc
+++ b/usr/src/lib/sun_fc/common/TgtFCHBAPort.cc
@@ -433,7 +433,7 @@ void TgtFCHBAPort::sendRLS(uint64_t destWWN,
 	fctio.fctio_obuf = (uint64_t)(uintptr_t)new uchar_t[*pRspBufferSize];
 	fctio.fctio_olen = *pRspBufferSize;
 
-	if (fctio.fctio_obuf == NULL) {
+	if (fctio.fctio_obuf == 0) {
 	    log.noMemory();
 	    throw InternalError();
 	}
@@ -441,7 +441,7 @@ void TgtFCHBAPort::sendRLS(uint64_t destWWN,
 	fct_ioctl(FCTIO_CMD, &fctio);
 	memcpy(pRspBuffer, (uchar_t *)(uintptr_t)fctio.fctio_obuf, 
 	       *pRspBufferSize);
-	if (fctio.fctio_obuf != NULL) {
+	if (fctio.fctio_obuf != 0) {
 	    delete((uchar_t *)(uintptr_t)fctio.fctio_obuf);
 	}
 }

