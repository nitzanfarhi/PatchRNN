commit 56651314ea01211582e566f0b6b758b24cc7ce07
Author: Thorvald Natvig <slicer@users.sourceforge.net>
Date:   Mon Dec 8 13:14:39 2008 +0000

    Patch #2393239: PA div by zero fix (/ bf2 plugin fix) [dd0t]
    
    git-svn-id: https://mumble.svn.sourceforge.net/svnroot/mumble/trunk@1352 05730e5d-ab1b-0410-a4ac-84af385074fa

diff --git a/src/mumble/AudioOutput.cpp b/src/mumble/AudioOutput.cpp
index f5b415eb..8582c6c8 100644
--- a/src/mumble/AudioOutput.cpp
+++ b/src/mumble/AudioOutput.cpp
@@ -590,9 +590,12 @@ bool AudioOutput::mix(void *outbuff, unsigned int nsamp) {
 			if (validListener && ((aop->fPos[0] != 0.0f) || (aop->fPos[1] != 0.0f) || (aop->fPos[2] != 0.0f))) {
 				float dir[3] = { aop->fPos[0] - g.p->fPosition[0], aop->fPos[1] - g.p->fPosition[1], aop->fPos[2] - g.p->fPosition[2] };
 				float len = sqrtf(dir[0] * dir[0] + dir[1] * dir[1] + dir[2] * dir[2]);
-				dir[0] /= len;
-				dir[1] /= len;
-				dir[2] /= len;
+				if(len > 0.0f)
+				{
+					dir[0] /= len;
+					dir[1] /= len;
+					dir[2] /= len;
+				}
 				/*
 								qWarning("Voice pos: %f %f %f", aop->fPos[0], aop->fPos[1], aop->fPos[2]);
 								qWarning("Voice dir: %f %f %f", dir[0], dir[1], dir[2]);

