commit e2d4ecafd24d6eee4ae6bdbede0cfd0e78423a33
Author: Krzysztof Helt <krzysztof.h1@wp.pl>
Date:   Thu Jun 5 22:45:56 2008 -0700

    modedb: fix incorrect sync and vmode flags for CVT modes
    
    The temporary structure for calculated CVT mode is not initialized.  Few
    fields have only bits or-ed or and-ed so they may be left in incorrect
    (random) state.
    
    Testing of the tridentfb seems like a good exercise for the fbdev layer.
    
    Signed-off-by: Krzysztof Helt <krzysztof.h1@wp.pl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/video/modedb.c b/drivers/video/modedb.c
index 473562191586..d1bbef930dfa 100644
--- a/drivers/video/modedb.c
+++ b/drivers/video/modedb.c
@@ -590,6 +590,7 @@ done:
 		    "", (margins) ? " with margins" : "", (interlace) ?
 		    " interlaced" : "");
 
+	    memset(&cvt_mode, 0, sizeof(cvt_mode));
 	    cvt_mode.xres = xres;
 	    cvt_mode.yres = yres;
 	    cvt_mode.refresh = (refresh) ? refresh : 60;

