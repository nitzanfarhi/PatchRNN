commit a5ca3a1bc719cb9056acc6f24340a1e2674f21a0
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sun Jul 5 15:44:20 2009 -0300

    V4L/DVB (12203): radio-si470x: fix lock imbalance
    
    There is one path with omitted unlock in si470x_fops_release. Fix that.
    
    Cc: Tobias Lorenz <tobias.lorenz@gmx.net>
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Douglas Schilling Landgraf <dougsland@redhat.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/radio/radio-si470x.c b/drivers/media/radio/radio-si470x.c
index 640421ceb24a..46d216329611 100644
--- a/drivers/media/radio/radio-si470x.c
+++ b/drivers/media/radio/radio-si470x.c
@@ -1200,7 +1200,7 @@ static int si470x_fops_release(struct file *file)
 			video_unregister_device(radio->videodev);
 			kfree(radio->buffer);
 			kfree(radio);
-			goto done;
+			goto unlock;
 		}
 
 		/* stop rds reception */
@@ -1213,9 +1213,8 @@ static int si470x_fops_release(struct file *file)
 		retval = si470x_stop(radio);
 		usb_autopm_put_interface(radio->intf);
 	}
-
+unlock:
 	mutex_unlock(&radio->disconnect_lock);
-
 done:
 	return retval;
 }

