commit 9b57c57dfc9aab2011871d2ed8e7d225419a3f78
Author: Attila Molnar <attilamolnar@hush.com>
Date:   Thu Sep 18 00:59:21 2014 +0200

    libathemecore/connection: Fix memory leak when connect() fails
    
    CID: 1238964

diff --git a/libathemecore/connection.c b/libathemecore/connection.c
index 6974217c9..1712c7ab3 100644
--- a/libathemecore/connection.c
+++ b/libathemecore/connection.c
@@ -473,6 +473,7 @@ connection_t *connection_open_tcp(char *host, char *vhost, unsigned int port,
 		else
 			slog(LG_ERROR, "connection_open_tcp(): failed to connect to %s: %d (%s)", host, ioerrno(), strerror(ioerrno()));
 		close(s);
+		freeaddrinfo(addr);
 		return NULL;
 	}
 

