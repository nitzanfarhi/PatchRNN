commit 41795a8a3cff8e4ba54236ca16c3814ba9cd7f39
Author: Jon Hunter <jonathanh@nvidia.com>
Date:   Fri Mar 4 10:55:15 2016 +0000

    PM / Domains: Fix potential NULL pointer dereference
    
    In the function of_genpd_get_from_provider(), we never check to see if
    the argument 'genpdspec' is NULL before dereferencing it. Add error
    checking to handle any NULL pointers.
    
    Signed-off-by: Jon Hunter <jonathanh@nvidia.com>
    Acked-by: Ulf Hansson <ulf.hansson@linaro.org>
    Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>

diff --git a/drivers/base/power/domain.c b/drivers/base/power/domain.c
index 79f5d3965931..56705b52758e 100644
--- a/drivers/base/power/domain.c
+++ b/drivers/base/power/domain.c
@@ -1702,6 +1702,9 @@ struct generic_pm_domain *of_genpd_get_from_provider(
 	struct generic_pm_domain *genpd = ERR_PTR(-ENOENT);
 	struct of_genpd_provider *provider;
 
+	if (!genpdspec)
+		return ERR_PTR(-EINVAL);
+
 	mutex_lock(&of_genpd_mutex);
 
 	/* Check if we have such a provider in our array */

