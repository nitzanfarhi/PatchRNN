commit e5054c8eed339283f352c70d191b35b3c3db227e
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sat Nov 1 11:22:06 2014 +0100

    avcodec/pthread_slice: Use av_freep() to avoid leaving stale pointers in memory
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/pthread_slice.c b/libavcodec/pthread_slice.c
index fea989fc4c..b948e16d24 100644
--- a/libavcodec/pthread_slice.c
+++ b/libavcodec/pthread_slice.c
@@ -120,7 +120,7 @@ void ff_slice_thread_free(AVCodecContext *avctx)
     pthread_mutex_destroy(&c->current_job_lock);
     pthread_cond_destroy(&c->current_job_cond);
     pthread_cond_destroy(&c->last_job_cond);
-    av_free(c->workers);
+    av_freep(&c->workers);
     av_freep(&avctx->internal->thread_ctx);
 }
 

