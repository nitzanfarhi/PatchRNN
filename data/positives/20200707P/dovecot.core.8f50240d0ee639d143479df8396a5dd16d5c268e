commit 8f50240d0ee639d143479df8396a5dd16d5c268e
Author: Timo Sirainen <tss@iki.fi>
Date:   Tue Oct 21 06:35:32 2003 +0300

    assert
    
    --HG--
    branch : HEAD

diff --git a/src/lib-index/mail-cache.c b/src/lib-index/mail-cache.c
index e49742fa9..4ed4b447f 100644
--- a/src/lib-index/mail-cache.c
+++ b/src/lib-index/mail-cache.c
@@ -1365,6 +1365,7 @@ int mail_cache_set_header_fields(struct mail_cache_transaction_ctx *ctx,
 	uint32_t offset, update_offset, size;
 	const char *header_str;
 
+	i_assert(*headers != NULL);
 	i_assert(idx < MAIL_CACHE_HEADERS_COUNT);
 	i_assert(idx >= ctx->next_unused_header_lowwater);
 	i_assert(offset_to_uint32(cache->header->header_offsets[idx]) == 0);

