commit 026dadad6b44f0469a475efb4cae48269d8848bd
Author: Dan Carpenter <dan.carpenter@oracle.com>
Date:   Mon Jul 8 16:01:27 2013 -0700

    mwave: fix info leak in mwave_ioctl()
    
    Smatch complains that on 64 bit systems, there is a hole in the
    MW_ABILITIES struct between ->component_count and ->component_list[].
    It leaks stack information from the mwave_ioctl() function.
    
    I've added a memset() to initialize the struct to zero.
    
    Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
    Cc: Greg KH <greg@kroah.com>
    Cc: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/char/mwave/tp3780i.c b/drivers/char/mwave/tp3780i.c
index c68969708068..04e6d6a27994 100644
--- a/drivers/char/mwave/tp3780i.c
+++ b/drivers/char/mwave/tp3780i.c
@@ -479,6 +479,7 @@ int tp3780I_QueryAbilities(THINKPAD_BD_DATA * pBDData, MW_ABILITIES * pAbilities
 	PRINTK_2(TRACE_TP3780I,
 		"tp3780i::tp3780I_QueryAbilities entry pBDData %p\n", pBDData);
 
+	memset(pAbilities, 0, sizeof(*pAbilities));
 	/* fill out standard constant fields */
 	pAbilities->instr_per_sec = pBDData->rDspSettings.uIps;
 	pAbilities->data_size = pBDData->rDspSettings.uDStoreSize;

