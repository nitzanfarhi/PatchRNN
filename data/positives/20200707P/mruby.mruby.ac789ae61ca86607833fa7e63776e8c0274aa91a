commit ac789ae61ca86607833fa7e63776e8c0274aa91a
Author: Yukihiro Matsumoto <matz@ruby-lang.org>
Date:   Tue Aug 28 02:03:19 2012 +0900

    free symbol table from mrb_close()

diff --git a/src/state.c b/src/state.c
index fb2bebe9..28c49510 100644
--- a/src/state.c
+++ b/src/state.c
@@ -50,6 +50,8 @@ mrb_open()
   return mrb;
 }
 
+void mrb_free_symtbl(mrb_state *mrb);
+
 void
 mrb_close(mrb_state *mrb)
 {
@@ -69,6 +71,7 @@ mrb_close(mrb_state *mrb)
     mrb_free(mrb, mrb->irep[i]);
   }
   mrb_free(mrb, mrb->irep);
+  mrb_free_symtbl(mrb);
   mrb_free(mrb, mrb);
 }
 
diff --git a/src/symbol.c b/src/symbol.c
index 6b29ed35..353245bb 100644
--- a/src/symbol.c
+++ b/src/symbol.c
@@ -94,7 +94,7 @@ mrb_sym2name_len(mrb_state *mrb, mrb_sym sym, int *lenp)
 }
 
 void
-mrb_free_symtbls(mrb_state *mrb)
+mrb_free_symtbl(mrb_state *mrb)
 {
   khash_t(n2s) *h = mrb->name2sym;
   khiter_t k;

