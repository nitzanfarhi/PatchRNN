commit c24ef1e78c42bf90d56041a4dbd0689179ff4961
Author: Timo Sirainen <tss@iki.fi>
Date:   Tue Oct 13 21:40:33 2015 +0300

    imap: APPEND crashed if invalid keyword was given as parameter.

diff --git a/src/imap/cmd-append.c b/src/imap/cmd-append.c
index 128ca30d5..aa524186e 100644
--- a/src/imap/cmd-append.c
+++ b/src/imap/cmd-append.c
@@ -534,6 +534,7 @@ cmd_append_handle_args(struct client_command_context *cmd,
 			/* invalid keywords - delay failure */
 			client_send_box_error(cmd, ctx->box);
 			ctx->failed = TRUE;
+			keywords = NULL;
 		}
 	}
 

