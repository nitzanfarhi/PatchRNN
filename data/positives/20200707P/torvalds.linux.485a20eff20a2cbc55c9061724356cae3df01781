commit 485a20eff20a2cbc55c9061724356cae3df01781
Author: Alexandre Courbot <acourbot@nvidia.com>
Date:   Thu Nov 17 16:37:29 2016 +0900

    drm/nouveau/pmu: make sure the reset hook exists before running it
    
    Some PMU implementations (in particular the ones managed by secure
    boot) may not have a reset() hook. Make sure we don't crash in that
    case.
    
    Signed-off-by: Alexandre Courbot <acourbot@nvidia.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c b/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c
index a73f690eb4b5..ad4ac4e8b29e 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c
@@ -85,7 +85,8 @@ nvkm_pmu_reset(struct nvkm_pmu *pmu)
 	);
 
 	/* Reset. */
-	pmu->func->reset(pmu);
+	if (pmu->func->reset)
+		pmu->func->reset(pmu);
 
 	/* Wait for IMEM/DMEM scrubbing to be complete. */
 	nvkm_msec(device, 2000,

