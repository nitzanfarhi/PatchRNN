commit ea64ba24af5c17c0a89f31dc4a3c78c8d5c4c573
Author: martin <martin@c6295689-39f2-0310-b995-f0e70906c6a9>
Date:   Mon May 23 17:31:02 2011 +0000

    OpenPGP: NULL-ify free()'d pointer
    
    Signed-off-by: Peter Marschall <peter@adpm.de>
    
    git-svn-id: https://www.opensc-project.org/svnp/opensc/trunk@5473 c6295689-39f2-0310-b995-f0e70906c6a9

diff --git a/src/libopensc/card-openpgp.c b/src/libopensc/card-openpgp.c
index e0abe681..6b4e6042 100644
--- a/src/libopensc/card-openpgp.c
+++ b/src/libopensc/card-openpgp.c
@@ -211,6 +211,7 @@ pgp_finish(sc_card_t *card)
 	pgp_iterate_blobs(priv->mf, 99, pgp_free_blob);
 
 	free(priv);
+	card->drv_data = NULL;
 	return 0;
 }
 

