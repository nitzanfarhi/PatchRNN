commit f72c4e82fd4155eb108d61a17d314d391e4f7730
Author: Yang Tse <yangsita@gmail.com>
Date:   Mon Jul 17 15:25:37 2006 +0000

    Return NULL if argument is NULL.

diff --git a/lib/strdup.c b/lib/strdup.c
index a9ed448a8..e16e08a72 100644
--- a/lib/strdup.c
+++ b/lib/strdup.c
@@ -30,6 +30,9 @@ char *curlx_strdup(const char *str)
   int len;
   char *newstr;
 
+  if (!str)
+    return (char *)NULL;
+
   len = strlen(str);
   newstr = (char *) malloc((len+1)*sizeof(char));
   if (!newstr)

