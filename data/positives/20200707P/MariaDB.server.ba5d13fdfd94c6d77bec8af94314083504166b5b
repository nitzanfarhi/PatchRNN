commit ba5d13fdfd94c6d77bec8af94314083504166b5b
Author: Sergey Vojtovich <svoj@sun.com>
Date:   Thu Apr 1 15:19:18 2010 +0400

    Applying InnoDB snapshot
    
    Detailed revision comments:
    
    r6367 | marko | 2009-12-28 15:39:19 +0200 (Mon, 28 Dec 2009) | 2 lines
    branches/zip: dict_index_add_to_cache(): Always free the index object,
    also when returning DB_CORRUPTION.

diff --git a/storage/innodb_plugin/dict/dict0dict.c b/storage/innodb_plugin/dict/dict0dict.c
index 4c62e8de748..ca129c29d20 100644
--- a/storage/innodb_plugin/dict/dict0dict.c
+++ b/storage/innodb_plugin/dict/dict0dict.c
@@ -1460,6 +1460,7 @@ dict_index_add_to_cache(
 
 	if (!dict_index_find_cols(table, index)) {
 
+		dict_mem_index_free(index);
 		return(DB_CORRUPTION);
 	}
 

