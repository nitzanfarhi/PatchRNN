commit a7402175da70f53d308450b50dd0c00cb733276e
Author: greg@kroah.com <greg@kroah.com>
Date:   Thu Dec 25 00:33:00 2003 -0800

    [PATCH] If a LABEL rule has a BUS id, then we must check to see if the device is on a bus.

diff --git a/namedev.c b/namedev.c
index de1b20618..813f26b03 100644
--- a/namedev.c
+++ b/namedev.c
@@ -473,7 +473,10 @@ static int do_label(struct sysfs_class_device *class_dev, struct udevice *udev,
 		if (dev->type != LABEL)
 			continue;
 
-		if (sysfs_device) {
+		if (dev->bus[0] != '\0') {
+			/* as the user specified a bus, we must match it up */
+			if (!sysfs_device)
+				continue;
 			dbg("dev->bus='%s' sysfs_device->bus='%s'", dev->bus, sysfs_device->bus);
 			if (strcasecmp(dev->bus, sysfs_device->bus) != 0)
 				continue;

