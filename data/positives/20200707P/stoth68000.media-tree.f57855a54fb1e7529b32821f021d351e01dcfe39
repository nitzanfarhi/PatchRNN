commit f57855a54fb1e7529b32821f021d351e01dcfe39
Author: Jason Wang <jasowang@redhat.com>
Date:   Thu Jun 13 14:23:36 2013 +0800

    macvtap: fix uninitialized return value macvtap_ioctl_set_queue()
    
    Return -EINVAL on illegal flag instead of uninitialized value. This fixes the
    kbuild test warning.
    
    Signed-off-by: Jason Wang <jasowang@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/macvtap.c b/drivers/net/macvtap.c
index edcbf1c0d6ed..5a76f20776af 100644
--- a/drivers/net/macvtap.c
+++ b/drivers/net/macvtap.c
@@ -969,6 +969,8 @@ static int macvtap_ioctl_set_queue(struct file *file, unsigned int flags)
 		ret = macvtap_enable_queue(vlan->dev, file, q);
 	else if (flags & IFF_DETACH_QUEUE)
 		ret = macvtap_disable_queue(q);
+	else
+		ret = -EINVAL;
 
 	macvtap_put_vlan(vlan);
 	return ret;

