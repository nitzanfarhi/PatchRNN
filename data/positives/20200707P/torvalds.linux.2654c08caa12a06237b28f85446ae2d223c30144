commit 2654c08caa12a06237b28f85446ae2d223c30144
Author: Fernando Vazquez <fernando@intellilink.co.jp>
Date:   Sat Sep 30 23:29:08 2006 -0700

    [PATCH] stack overflow safe kdump: safe_smp_processor_id(): voyager
    
    "safe_smp_processor_id" implementation for i386-Voyager.
    
    Signed-off-by: Fernando Vazquez <fernando@intellilink.co.jp>
    Looks-reasonable-to: Andi Kleen <ak@muc.de>
    Acked-by: "Eric W. Biederman" <ebiederm@xmission.com>
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Cc: James Bottomley <James.Bottomley@steeleye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/arch/i386/mach-voyager/voyager_smp.c b/arch/i386/mach-voyager/voyager_smp.c
index 6c86575ffdcb..856c73fcb7e7 100644
--- a/arch/i386/mach-voyager/voyager_smp.c
+++ b/arch/i386/mach-voyager/voyager_smp.c
@@ -99,6 +99,7 @@ static void do_boot_cpu(__u8 cpuid);
 static void do_quad_bootstrap(void);
 
 int hard_smp_processor_id(void);
+int safe_smp_processor_id(void);
 
 /* Inline functions */
 static inline void
@@ -1247,6 +1248,12 @@ hard_smp_processor_id(void)
 	return 0;
 }
 
+int
+safe_smp_processor_id(void)
+{
+	return hard_smp_processor_id();
+}
+
 /* broadcast a halt to all other CPUs */
 void
 smp_send_stop(void)

