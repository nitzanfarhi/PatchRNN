commit 0ec6d6e9b682318b5b5b5457e09fbf3c4ca41335
Author: Laurent Aimar <fenrir@videolan.org>
Date:   Wed Sep 21 20:46:30 2011 +0200

    vp56: Check for missing reference frame data
    
    Signed-off-by: Janne Grunau <janne-libav@jannau.net>

diff --git a/libavcodec/vp56.c b/libavcodec/vp56.c
index 5c7e93e5e6..530b890de1 100644
--- a/libavcodec/vp56.c
+++ b/libavcodec/vp56.c
@@ -401,6 +401,8 @@ static void vp56_decode_mb(VP56Context *s, int row, int col, int is_alpha)
 
     frame_current = s->framep[VP56_FRAME_CURRENT];
     frame_ref = s->framep[ref_frame];
+    if (mb_type != VP56_MB_INTRA && !frame_ref->data[0])
+        return;
 
     ab = 6*is_alpha;
     b_max = 6 - 2*is_alpha;

