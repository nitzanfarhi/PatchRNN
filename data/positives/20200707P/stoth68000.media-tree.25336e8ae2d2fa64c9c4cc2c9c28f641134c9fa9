commit 25336e8ae2d2fa64c9c4cc2c9c28f641134c9fa9
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Thu Mar 7 14:10:25 2013 -0500

    ALSA: hda - check NULL pointer when creating SPDIF controls
    
    If the SPDIF control array cannot be reallocated, the function
    will return to avoid dereferencing a NULL pointer.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

diff --git a/sound/pci/hda/hda_codec.c b/sound/pci/hda/hda_codec.c
index 04b57383e8cb..3dc656688c08 100644
--- a/sound/pci/hda/hda_codec.c
+++ b/sound/pci/hda/hda_codec.c
@@ -3334,6 +3334,8 @@ int snd_hda_create_dig_out_ctls(struct hda_codec *codec,
 		return -EBUSY;
 	}
 	spdif = snd_array_new(&codec->spdif_out);
+	if (!spdif)
+		return -ENOMEM;
 	for (dig_mix = dig_mixes; dig_mix->name; dig_mix++) {
 		kctl = snd_ctl_new1(dig_mix, codec);
 		if (!kctl)

