commit 1f961c196cbb475e612a4fb082b33efde71e7a03
Author: Petr Baudis <pasky@suse.cz>
Date:   Tue Sep 20 02:19:50 2005 +0200

    [PATCH] Fix git-init-db creating crap directories.
    
    The base target directory for the templates copying was initialized
    to git_dir, but git_dir[len] is not zero but / at the time we do the
    initialization. This is not what we want for our target directory string
    since we pass it to mkdir(), so make it zero-terminated manually.
    
    Signed-off-by: Petr Baudis <pasky@suse.cz>
    Signed-off-by: Junio C Hamano <junkio@cox.net>

diff --git a/init-db.c b/init-db.c
index 902bdfaaf..da2bc8f42 100644
--- a/init-db.c
+++ b/init-db.c
@@ -154,6 +154,7 @@ static void copy_templates(const char *git_dir, int len, char *template_dir)
 	}
 
 	memcpy(path, git_dir, len);
+	path[len] = 0;
 	copy_templates_1(path, len,
 			 template_path, template_len,
 			 dir);

