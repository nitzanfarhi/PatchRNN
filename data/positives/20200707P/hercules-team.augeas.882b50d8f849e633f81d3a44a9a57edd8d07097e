commit 882b50d8f849e633f81d3a44a9a57edd8d07097e
Author: David Lutterkort <dlutter@redhat.com>
Date:   Thu Dec 20 18:18:06 2007 -0800

    Don't try to dump a NULL grammar

diff --git a/src/ast.c b/src/ast.c
index 26760ac6..d98fa170 100644
--- a/src/ast.c
+++ b/src/ast.c
@@ -989,7 +989,7 @@ struct grammar *load_grammar(const char *filename, FILE *log, int flags) {
         fprintf(stderr, errmsg);
     }
 
-    if (flags != GF_NONE)
+    if (result != NULL && flags != GF_NONE)
         dump_grammar(result, (log == NULL) ? stdout : log, flags);
 
     return ok ? result : NULL;

