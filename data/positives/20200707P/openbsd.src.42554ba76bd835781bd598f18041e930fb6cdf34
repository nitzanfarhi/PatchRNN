commit 42554ba76bd835781bd598f18041e930fb6cdf34
Author: krw <krw@openbsd.org>
Date:   Thu Apr 28 16:48:18 2016 +0000

    Plug a couple of leaks of input buffers.
    
    Pointed out by David Carlier.

diff --git a/usr.sbin/installboot/i386_installboot.c b/usr.sbin/installboot/i386_installboot.c
index 793a0937531..4842d21957b 100644
--- a/usr.sbin/installboot/i386_installboot.c
+++ b/usr.sbin/installboot/i386_installboot.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: i386_installboot.c,v 1.26 2015/12/28 23:00:29 krw Exp $	*/
+/*	$OpenBSD: i386_installboot.c,v 1.27 2016/04/28 16:48:18 krw Exp $	*/
 /*	$NetBSD: installboot.c,v 1.5 1995/11/17 23:23:50 gwr Exp $ */
 
 /*
@@ -794,6 +794,8 @@ getbootparams(char *boot, int devfd, struct disklabel *dl)
 		    (unsigned int)((((char *)ap) - buf) + INODEOFF));
 	}
 
+	free (buf);
+
 	return 0;
 }
 
diff --git a/usr.sbin/installboot/i386_softraid.c b/usr.sbin/installboot/i386_softraid.c
index fec2740a40f..4e8bbe26e7e 100644
--- a/usr.sbin/installboot/i386_softraid.c
+++ b/usr.sbin/installboot/i386_softraid.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: i386_softraid.c,v 1.9 2015/12/01 06:39:52 krw Exp $	*/
+/*	$OpenBSD: i386_softraid.c,v 1.10 2016/04/28 16:48:18 krw Exp $	*/
 /*
  * Copyright (c) 2012 Joel Sing <jsing@openbsd.org>
  *
@@ -194,5 +194,6 @@ sr_install_bootldr(int devfd, char *dev)
 		fprintf(stderr, "%s is %d blocks x %d bytes\n",
 		    stage2, nblocks, bsize);
 
+	free(p);
 	close(fd);
 }

