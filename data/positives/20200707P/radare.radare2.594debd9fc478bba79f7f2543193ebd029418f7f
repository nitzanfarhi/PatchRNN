commit 594debd9fc478bba79f7f2543193ebd029418f7f
Author: jvoisin <julien.voisin@dustri.org>
Date:   Mon Jul 28 18:12:18 2014 +0200

    Fix a memleak

diff --git a/libr/lang/lang.c b/libr/lang/lang.c
index 8fe63ed7d..0c8e83e43 100644
--- a/libr/lang/lang.c
+++ b/libr/lang/lang.c
@@ -250,5 +250,6 @@ R_API int r_lang_prompt(RLang *lang) {
 
 	clearerr (stdin);
 	printf ("\n");
+	free(prompt);
 	return R_TRUE;
 }
diff --git a/libr/util/p_date.c b/libr/util/p_date.c
index 4a091f1e8..db2a397f9 100644
--- a/libr/util/p_date.c
+++ b/libr/util/p_date.c
@@ -94,7 +94,7 @@ R_API int r_print_date_w32(RPrint *p, const ut8 *buf, int len) {
 		l = (l > L ? l-L : 0); // isValidUnixTime?
 		t = (time_t) l; // TODO limit above!
 		// "%d:%m:%Y %H:%M:%S %z",
-		if (p->datefmt && p->datefmt[0]) {
+		if (p->datefmt[0]) {
 			ret = strftime(datestr, 256, p->datefmt,
 				(const struct tm*) gmtime((const time_t*)&t));
 			if (ret) {

