commit ecd11c82c3b775afb9ea3c94d1e1bb77604cca46
Author: Danny Auble <da@llnl.gov>
Date:   Thu Apr 29 20:12:22 2010 +0000

    fixed minor memory leak

diff --git a/src/common/slurmdbd_defs.c b/src/common/slurmdbd_defs.c
index cb3842b428..59d6f36d63 100644
--- a/src/common/slurmdbd_defs.c
+++ b/src/common/slurmdbd_defs.c
@@ -2018,6 +2018,14 @@ static void *_agent(void *x)
 			free_buf(buffer);
 			fail_time = 0;
 		} else {
+			/* We still need to free a mult_msg even if we
+			   got a failure.
+			*/
+			if(list_msg.my_list) {
+				list_msg.my_list = NULL;
+				free_buf(buffer);
+			}
+
 			fail_time = time(NULL);
 		}
 		slurm_mutex_unlock(&agent_lock);

