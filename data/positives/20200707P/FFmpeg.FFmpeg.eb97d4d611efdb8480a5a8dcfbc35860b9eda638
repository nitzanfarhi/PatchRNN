commit eb97d4d611efdb8480a5a8dcfbc35860b9eda638
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sun May 22 02:33:03 2011 +0200

    wmadec: avoid infinit loop.
    
    Fixes ticket183
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/wmadec.c b/libavcodec/wmadec.c
index 3da1a60c19..840025d493 100644
--- a/libavcodec/wmadec.c
+++ b/libavcodec/wmadec.c
@@ -827,7 +827,7 @@ static int wma_decode_superframe(AVCodecContext *avctx,
         return 0;
     }
     if (buf_size < s->block_align)
-        return 0;
+        return AVERROR(EINVAL);
     buf_size = s->block_align;
 
     samples = data;

