commit b58c86e1e4cdf59373aad2ec25f99f772766374c
Author: Stefan Weil <sw@weilnetz.de>
Date:   Sun Jun 16 12:02:40 2013 +0200

    fsdev: Fix potential memory leak
    
    This leak was reported by cppcheck.
    
    Signed-off-by: Stefan Weil <sw@weilnetz.de>
    Reviewed-by: M. Mohan Kumar <mohan@in.ibm.com>
    Message-id: 1371376960-18192-1-git-send-email-sw@weilnetz.de
    Signed-off-by: Anthony Liguori <aliguori@us.ibm.com>

diff --git a/fsdev/qemu-fsdev.c b/fsdev/qemu-fsdev.c
index 6eaf36dbfa..ccfec139ab 100644
--- a/fsdev/qemu-fsdev.c
+++ b/fsdev/qemu-fsdev.c
@@ -76,6 +76,8 @@ int qemu_fsdev_add(QemuOpts *opts)
 
     if (fsle->fse.ops->parse_opts) {
         if (fsle->fse.ops->parse_opts(opts, &fsle->fse)) {
+            g_free(fsle->fse.fsdev_id);
+            g_free(fsle);
             return -1;
         }
     }

