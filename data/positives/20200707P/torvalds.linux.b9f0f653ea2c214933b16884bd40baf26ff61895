commit b9f0f653ea2c214933b16884bd40baf26ff61895
Author: Anton Vasilyev <vasilyev@ispras.ru>
Date:   Fri Jul 27 07:47:59 2018 -0400

    media: vimc: Remove redundant free
    
    Commit 4a29b7090749 ("[media] vimc: Subdevices as modules") removes
    vimc allocation from vimc_probe(), so corresponding deallocation
    on the error path tries to free static memory.
    
    Found by Linux Driver Verification project (linuxtesting.org).
    
    Signed-off-by: Anton Vasilyev <vasilyev@ispras.ru>
    Acked-by: Helen Koike <helen.koike@collabora.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>

diff --git a/drivers/media/platform/vimc/vimc-core.c b/drivers/media/platform/vimc/vimc-core.c
index fe088a953860..9246f265de31 100644
--- a/drivers/media/platform/vimc/vimc-core.c
+++ b/drivers/media/platform/vimc/vimc-core.c
@@ -328,7 +328,6 @@ static int vimc_probe(struct platform_device *pdev)
 	if (ret) {
 		media_device_cleanup(&vimc->mdev);
 		vimc_rm_subdevs(vimc);
-		kfree(vimc);
 		return ret;
 	}
 

