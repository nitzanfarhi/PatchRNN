commit 636f5eb882f1c84a86968502c6cf6594e2850cab
Author: Daniel Stenberg <daniel@haxx.se>
Date:   Sat Dec 8 22:57:17 2007 +0000

    fix a crash in oom situations (thanks runtests.pl -t!)

diff --git a/src/main.c b/src/main.c
index 68db08cc9..c3a830bc6 100644
--- a/src/main.c
+++ b/src/main.c
@@ -3640,6 +3640,9 @@ operate(struct Configurable *config, int argc, argv_item_t argv[])
   long retry_sleep;
 
   char *env;
+
+  memset(&heads, 0, sizeof(struct OutStruct));
+
 #ifdef CURLDEBUG
   /* this sends all memory debug messages to a logfile named memdump */
   env = curlx_getenv("CURL_MEMDEBUG");
@@ -4220,7 +4223,8 @@ operate(struct Configurable *config, int argc, argv_item_t argv[])
         /* what call to read */
         my_setopt(curl, CURLOPT_READFUNCTION, my_fread);
 
-        /* libcurl 7.12.3 business: */
+        /* the ioctl function is at this point only used to rewind files
+           that are posted when using NTLM etc */
         my_setopt(curl, CURLOPT_IOCTLDATA, &input);
         my_setopt(curl, CURLOPT_IOCTLFUNCTION, my_ioctl);
 

