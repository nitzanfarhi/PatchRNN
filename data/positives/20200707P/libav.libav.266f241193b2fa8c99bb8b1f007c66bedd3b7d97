commit 266f241193b2fa8c99bb8b1f007c66bedd3b7d97
Author: Vittorio Giovara <vittorio.giovara@gmail.com>
Date:   Wed Feb 4 14:20:59 2015 +0000

    avplay: Check frame allocation inside video_thread()
    
    CC: libav-stable@libav.org
    Bug-Id: CID 1267893

diff --git a/avplay.c b/avplay.c
index 9148c04a8..5c6fcfdb0 100644
--- a/avplay.c
+++ b/avplay.c
@@ -1587,6 +1587,9 @@ static int video_thread(void *arg)
     filt_out = is->out_video_filter;
 #endif
 
+    if (!frame)
+        return AVERROR(ENOMEM);
+
     for (;;) {
 #if CONFIG_AVFILTER
         AVRational tb;

