commit c918dcce92f76bb9903e4d049f4780bad384c207
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Aug 14 01:41:39 2008 -0700

    sparc64: Fix overshoot in nid_range().
    
    If 'start' does not begin on a page boundary, we can overshoot
    past 'end'.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/arch/sparc64/mm/init.c b/arch/sparc64/mm/init.c
index 217de3ea29e8..64d8e7623e0d 100644
--- a/arch/sparc64/mm/init.c
+++ b/arch/sparc64/mm/init.c
@@ -796,6 +796,9 @@ static unsigned long nid_range(unsigned long start, unsigned long end,
 		start += PAGE_SIZE;
 	}
 
+	if (start > end)
+		start = end;
+
 	return start;
 }
 #else

