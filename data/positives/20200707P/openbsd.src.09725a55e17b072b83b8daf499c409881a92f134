commit 09725a55e17b072b83b8daf499c409881a92f134
Author: deraadt <deraadt@openbsd.org>
Date:   Wed Aug 24 21:01:35 2005 +0000

    some scsi xs transactions can come in without a buffer pointer obviously; tested by unpronounceable

diff --git a/sys/arch/vax/vsa/ncr.c b/sys/arch/vax/vsa/ncr.c
index ee5e344cd50..e9532d3369e 100644
--- a/sys/arch/vax/vsa/ncr.c
+++ b/sys/arch/vax/vsa/ncr.c
@@ -1,4 +1,4 @@
-/* $OpenBSD: ncr.c,v 1.14 2004/07/07 23:10:46 deraadt Exp $ */
+/* $OpenBSD: ncr.c,v 1.15 2005/08/24 21:01:35 deraadt Exp $ */
 /*	$NetBSD: ncr.c,v 1.32 2000/06/25 16:00:43 ragge Exp $	*/
 
 /*-
@@ -324,7 +324,10 @@ found:
 	dh->dh_flags = SIDH_BUSY;
 	dh->dh_addr = ncr_sc->sc_dataptr;
 	dh->dh_len = xlen;
-	dh->dh_proc = xs->bp->b_proc;
+	if (xs->bp)
+		dh->dh_proc = xs->bp->b_proc;
+	else
+		dh->dh_proc = NULL;
 
 	/* Remember dest buffer parameters */
 	if (xs->flags & SCSI_DATA_OUT)

