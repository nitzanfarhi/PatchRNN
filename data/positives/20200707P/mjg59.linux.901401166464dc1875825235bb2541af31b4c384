commit 901401166464dc1875825235bb2541af31b4c384
Author: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Date:   Tue Jul 22 23:11:03 2014 +0900

    ALSA: bebob: Fix a missing to unlock mutex in error handling case
    
    In error handling case, special_clk_ctl_put() returns without unlock_mutex(),
    therefore the mutex is still locked. This commit moves mutex_lock() after
    the error handling case.
    
    This commit is my solution for this post.
    
    [PATCH -next] ALSA: bebob: Fix missing unlock on error in special_clk_ctl_put()
    https://lkml.org/lkml/2014/7/20/12
    
    Signed-off-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

diff --git a/sound/firewire/bebob/bebob_maudio.c b/sound/firewire/bebob/bebob_maudio.c
index 6af50eb80ea7..fc470c60e433 100644
--- a/sound/firewire/bebob/bebob_maudio.c
+++ b/sound/firewire/bebob/bebob_maudio.c
@@ -379,12 +379,12 @@ static int special_clk_ctl_put(struct snd_kcontrol *kctl,
 	struct special_params *params = bebob->maudio_special_quirk;
 	int err, id;
 
-	mutex_lock(&bebob->mutex);
-
 	id = uval->value.enumerated.item[0];
 	if (id >= ARRAY_SIZE(special_clk_labels))
 		return 0;
 
+	mutex_lock(&bebob->mutex);
+
 	err = avc_maudio_set_special_clk(bebob, id,
 					 params->dig_in_fmt,
 					 params->dig_out_fmt,

