commit e7e0db7a204a9eb07b9cf54e454dcf4ff6f7ec01
Author: Andrew Beekhof <andrew@beekhof.net>
Date:   Sun Jul 11 09:05:27 2010 +0200

    High: cib: Correctly free memory when writing out the cib to disk
    
    Mercurial revision: 5620d819dba3af37d2eab8dd7cfdfa2a9e27d8be

diff --git a/cib/io.c b/cib/io.c
index 58d11d6c9..5515773b5 100644
--- a/cib/io.c
+++ b/cib/io.c
@@ -663,6 +663,8 @@ write_cib_contents(gpointer p)
 	crm_free(tmp2);
 	crm_free(tmp1);
 
+	free_xml(local_cib);
+	
 	if(p == NULL) {
 	    /* exit() could potentially affect the parent by closing things it shouldn't
 	     * Use _exit instead

