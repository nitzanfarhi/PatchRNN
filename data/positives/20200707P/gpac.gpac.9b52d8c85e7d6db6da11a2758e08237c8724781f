commit 9b52d8c85e7d6db6da11a2758e08237c8724781f
Author: jeanlf <jeanlf@users.sourceforge.net>
Date:   Tue Sep 20 18:11:30 2016 +0200

    Fixed UTF16 srt import and mem leak

diff --git a/src/media_tools/media_import.c b/src/media_tools/media_import.c
index 212b424ee..35660bb41 100644
--- a/src/media_tools/media_import.c
+++ b/src/media_tools/media_import.c
@@ -5728,6 +5728,7 @@ static GF_Err gf_lhevc_set_operating_points_information(GF_ISOFile *file, u32 tr
 	gf_bs_del(bs);
 	gf_isom_oinf_del_entry(oinf);
 	gf_isom_add_sample_group_info(file, track, GF_4CC( 'o', 'i', 'n', 'f'), data, data_size, GF_TRUE, &di);
+	gf_free(data);
 	return GF_OK;
 }
 
diff --git a/src/media_tools/text_import.c b/src/media_tools/text_import.c
index 582fd4bab..3a1998f6a 100644
--- a/src/media_tools/text_import.c
+++ b/src/media_tools/text_import.c
@@ -99,7 +99,7 @@ static GF_Err gf_text_guess_format(char *filename, u32 *fmt)
 		const u16 *sptr;
 		char szUTF[1024];
 		u32 read = (u32) fread(szUTF, 1, 1023, test);
-		if ((s32) read) {
+		if ((s32) read < 0) {
 			gf_fclose(test);
 			return GF_IO_ERR;
 		}

