commit b49dcbff1b550330aa0ce39b112d492aa673144b
Author: aland <aland>
Date:   Fri May 5 17:31:53 2006 +0000

            Don't de-reference request->username if it's NULL

diff --git a/src/modules/rlm_preprocess/rlm_preprocess.c b/src/modules/rlm_preprocess/rlm_preprocess.c
index bcc87c443..78c9e2243 100644
--- a/src/modules/rlm_preprocess/rlm_preprocess.c
+++ b/src/modules/rlm_preprocess/rlm_preprocess.c
@@ -548,8 +548,8 @@ static int preprocess_authorize(void *instance, REQUEST *request)
 	if ((r = huntgroup_access(request, data->huntgroups,
 			     request->packet->vps)) != RLM_MODULE_OK) {
 		radlog(L_AUTH, "No huntgroup access: [%s] (%s)",
-		    request->username->strvalue,
-		    auth_name(buf, sizeof(buf), request, 1));
+		       request->username ? request->username->strvalue : "<No User-Name>",
+		       auth_name(buf, sizeof(buf), request, 1));
 		return r;
 	}
 

