commit 9a8217a728581b4787ab65eb6d1b06681945803d
Author: Timo Sirainen <timo.sirainen@dovecot.fi>
Date:   Tue Dec 13 16:04:53 2016 +0200

    lib-storage: Fix crash in obox's dsync-merge

diff --git a/src/lib-storage/list/mailbox-list-index-backend.c b/src/lib-storage/list/mailbox-list-index-backend.c
index d37e30494..cf8d7ccf1 100644
--- a/src/lib-storage/list/mailbox-list-index-backend.c
+++ b/src/lib-storage/list/mailbox-list-index-backend.c
@@ -516,6 +516,12 @@ static int index_list_mailbox_open(struct mailbox *box)
 	if (ibox->module_ctx.super.open(box) < 0)
 		return -1;
 
+	if (box->view == NULL) {
+		/* FIXME: dsync-merge is performing a delete in obox - remove
+		   this check once dsync-merging is no longer used. */
+		return 0;
+	}
+
 	/* if mailbox name has changed, update it to the header. Use \0
 	   as the hierarchy separator in the header. This is to make sure
 	   we don't keep rewriting the name just in case some backend switches

