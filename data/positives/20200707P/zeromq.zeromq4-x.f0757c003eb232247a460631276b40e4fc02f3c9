commit f0757c003eb232247a460631276b40e4fc02f3c9
Author: Martin Sustrik <sustrik@fastmq.commkdir>
Date:   Thu Jan 21 09:58:49 2010 +0100

    ZMQII-43: Race condition when writing to pipe

diff --git a/src/session.cpp b/src/session.cpp
index 5b5fcb3f..1aece4da 100644
--- a/src/session.cpp
+++ b/src/session.cpp
@@ -78,7 +78,7 @@ bool zmq::session_t::read (::zmq_msg_t *msg_)
 
 bool zmq::session_t::write (::zmq_msg_t *msg_)
 {
-    if (out_pipe->write (msg_)) {
+    if (out_pipe && out_pipe->write (msg_)) {
         zmq_msg_init (msg_);
         return true;
     }

