commit 748ad112e2c07a517297b9592410c8fd627bc49a
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Mon Dec 29 14:06:26 2014 +0100

    avcodec/ffwavesynth: Use av_freep() to avoid leaving stale pointers in memory
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/ffwavesynth.c b/libavcodec/ffwavesynth.c
index 4a5031a8ca..e835934fa0 100644
--- a/libavcodec/ffwavesynth.c
+++ b/libavcodec/ffwavesynth.c
@@ -345,8 +345,8 @@ static av_cold int wavesynth_init(AVCodecContext *avc)
     return 0;
 
 fail:
-    av_free(ws->inter);
-    av_free(ws->sin);
+    av_freep(&ws->inter);
+    av_freep(&ws->sin);
     return r;
 }
 
@@ -463,8 +463,8 @@ static av_cold int wavesynth_close(AVCodecContext *avc)
 {
     struct wavesynth_context *ws = avc->priv_data;
 
-    av_free(ws->sin);
-    av_free(ws->inter);
+    av_freep(&ws->sin);
+    av_freep(&ws->inter);
     return 0;
 }
 

