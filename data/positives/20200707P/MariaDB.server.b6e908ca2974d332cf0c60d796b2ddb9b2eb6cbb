commit b6e908ca2974d332cf0c60d796b2ddb9b2eb6cbb
Author: jonas@perch.ndb.mysql.com <>
Date:   Tue Aug 29 09:19:41 2006 +0200

    ndb -
      fix backup/lcp race

diff --git a/storage/ndb/src/kernel/blocks/backup/Backup.cpp b/storage/ndb/src/kernel/blocks/backup/Backup.cpp
index 3b56f1e9fb1..23a2f908c20 100644
--- a/storage/ndb/src/kernel/blocks/backup/Backup.cpp
+++ b/storage/ndb/src/kernel/blocks/backup/Backup.cpp
@@ -4860,7 +4860,7 @@ Backup::lcp_open_file(Signal* signal, BackupRecordPtr ptr)
   c_backupFilePool.getPtr(filePtr, ptr.p->dataFilePtr);
   ndbrequire(filePtr.p->m_flags == 0);
   filePtr.p->m_flags |= BackupFile::BF_OPENING;
-  
+  filePtr.p->tableId = RNIL; // Will force init
   req->userPointer = filePtr.i;
   FsOpenReq::setVersion(req->fileNumber, 5);
   FsOpenReq::setSuffix(req->fileNumber, FsOpenReq::S_DATA);

