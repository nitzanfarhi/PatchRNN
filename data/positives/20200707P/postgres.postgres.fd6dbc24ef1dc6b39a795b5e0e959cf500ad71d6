commit fd6dbc24ef1dc6b39a795b5e0e959cf500ad71d6
Author: Bruce Momjian <bruce@momjian.us>
Date:   Sat Nov 26 09:27:11 2011 -0500

    Fix join_path_components() to not add a leading slash when joining to an
    initial null string.
    
    Per report from Robert Haas in testing psql \ir.

diff --git a/src/port/path.c b/src/port/path.c
index 13ca4f3f1c..9cb0b01644 100644
--- a/src/port/path.c
+++ b/src/port/path.c
@@ -212,7 +212,8 @@ join_path_components(char *ret_path,
 	}
 	if (*tail)
 		snprintf(ret_path + strlen(ret_path), MAXPGPATH - strlen(ret_path),
-				 "/%s", tail);
+				/* only add slash if there is something already in head */
+				 "%s%s", head[0] ? "/" : "", tail);
 }
 
 

