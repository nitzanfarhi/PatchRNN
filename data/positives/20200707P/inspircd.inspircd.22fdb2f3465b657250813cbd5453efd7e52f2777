commit 22fdb2f3465b657250813cbd5453efd7e52f2777
Author: brain <brain@e03df62e-2008-0410-955e-edbf42e46eb7>
Date:   Thu Aug 24 00:39:53 2006 +0000

    Check for missing comma in FJOIN element
    
    
    git-svn-id: http://svn.inspircd.org/repository/trunk/inspircd@5008 e03df62e-2008-0410-955e-edbf42e46eb7

diff --git a/src/modules/m_spanningtree.cpp b/src/modules/m_spanningtree.cpp
index 967ef73ea..14d2ee61d 100644
--- a/src/modules/m_spanningtree.cpp
+++ b/src/modules/m_spanningtree.cpp
@@ -1393,7 +1393,7 @@ class TreeSocket : public InspSocket
 			if (usr && *usr)
 			{
 				char* permissions = usr;
-				while (*permissions != ',')
+				while ((*permissions) && (*permissions != ','))
 				{
 					ModeHandler* mh = ServerInstance->Modes->FindPrefix(*permissions);
 					if (mh)

