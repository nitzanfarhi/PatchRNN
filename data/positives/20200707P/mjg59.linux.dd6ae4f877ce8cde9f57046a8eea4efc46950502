commit dd6ae4f877ce8cde9f57046a8eea4efc46950502
Author: Felix Fietkau <nbd@openwrt.org>
Date:   Sun Nov 15 22:27:17 2009 +0100

    ath9k: fix massive rx packet loss issue
    
    This patch fixes a regression introduced in
    "ath9k: avoid the copy skb->cb on every RX'd skb"
    
    With that change, the rx status in skb->cb was left uninitialized
    
    Signed-off-by: Felix Fietkau <nbd@openwrt.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/ath/ath9k/common.c b/drivers/net/wireless/ath/ath9k/common.c
index acd4bb503dfc..2f1e1612e2ad 100644
--- a/drivers/net/wireless/ath/ath9k/common.c
+++ b/drivers/net/wireless/ath/ath9k/common.c
@@ -203,6 +203,7 @@ int ath9k_cmn_rx_skb_preprocess(struct ath_common *common,
 {
 	struct ath_hw *ah = common->ah;
 
+	memset(rx_status, 0, sizeof(struct ieee80211_rx_status));
 	if (!ath9k_rx_accept(common, skb, rx_status, rx_stats, decrypt_error))
 		return -EINVAL;
 

