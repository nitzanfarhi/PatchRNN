commit a7c8aadad39428b64d26c3971d967f8314e2397d
Author: Miroslav Slugen <thunder.mmm@gmail.com>
Date:   Sun Dec 11 18:57:58 2011 -0300

    [media] cx23885-dvb: check if dvb_attach() succeded
    
    Fix possible null dereference for Leadtek DTV 3200H
    XC4000 tuner when no firmware file available.
    
    Cc: stable@kernel.org
    Signed-off-by: Miroslav Slugen <thunder.mmm@gmail.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/cx23885/cx23885-dvb.c b/drivers/media/video/cx23885/cx23885-dvb.c
index af8a225763d3..6835eb1fc093 100644
--- a/drivers/media/video/cx23885/cx23885-dvb.c
+++ b/drivers/media/video/cx23885/cx23885-dvb.c
@@ -943,6 +943,11 @@ static int dvb_register(struct cx23885_tsport *port)
 
 			fe = dvb_attach(xc4000_attach, fe0->dvb.frontend,
 					&dev->i2c_bus[1].i2c_adap, &cfg);
+			if (!fe) {
+				printk(KERN_ERR "%s/2: xc4000 attach failed\n",
+				       dev->name);
+				goto frontend_detach;
+			}
 		}
 		break;
 	case CX23885_BOARD_TBS_6920:

