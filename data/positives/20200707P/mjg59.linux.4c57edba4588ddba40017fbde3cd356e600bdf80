commit 4c57edba4588ddba40017fbde3cd356e600bdf80
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 28 15:37:25 2009 +1000

    drm/r600: fix memory leak introduced with 64k malloc avoidance fix.
    
    The legacy r600 path shares code, but doesn't share quite enough
    to get the freeing correct. Free the pages here also.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

diff --git a/drivers/gpu/drm/radeon/r600_cs.c b/drivers/gpu/drm/radeon/r600_cs.c
index ac7d93e2d5d5..06eab79c2eec 100644
--- a/drivers/gpu/drm/radeon/r600_cs.c
+++ b/drivers/gpu/drm/radeon/r600_cs.c
@@ -722,6 +722,8 @@ static void r600_cs_parser_fini(struct radeon_cs_parser *parser, int error)
 	kfree(parser->relocs);
 	for (i = 0; i < parser->nchunks; i++) {
 		kfree(parser->chunks[i].kdata);
+		kfree(parser->chunks[i].kpage[0]);
+		kfree(parser->chunks[i].kpage[1]);
 	}
 	kfree(parser->chunks);
 	kfree(parser->chunks_array);

