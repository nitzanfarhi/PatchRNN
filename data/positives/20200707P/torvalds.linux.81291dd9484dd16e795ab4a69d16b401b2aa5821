commit 81291dd9484dd16e795ab4a69d16b401b2aa5821
Author: Kirill Tkhai <tkhai@yandex.ru>
Date:   Mon Feb 10 22:40:11 2014 +0400

    staging: sbe-2t3e3: Fix possible reuse of freed memory in timer function
    
    Do not call kfree() till timer function is finished.
    
    [This was found using grep. Compilation tested only]
    
    Signed-off-by: Kirill Tkhai <tkhai@yandex.ru>
    CC: Joe Perches <joe@perches.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/sbe-2t3e3/module.c b/drivers/staging/sbe-2t3e3/module.c
index 0e32be5c2471..a6f93a43d216 100644
--- a/drivers/staging/sbe-2t3e3/module.c
+++ b/drivers/staging/sbe-2t3e3/module.c
@@ -122,7 +122,7 @@ static void t3e3_remove_card(struct pci_dev *pdev)
 	struct channel *channel0 = pci_get_drvdata(pdev);
 	struct card *card = channel0->card;
 
-	del_timer(&card->timer);
+	del_timer_sync(&card->timer);
 	if (has_two_ports(channel0->pdev)) {
 		t3e3_remove_channel(&card->channels[1]);
 		pci_dev_put(card->channels[1].pdev);

