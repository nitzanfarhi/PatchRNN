commit 22830cfb64fbb46aa645582126ff26455a3caff8
Author: Miguel de Icaza <miguel@gnome.org>
Date:   Fri Dec 2 21:24:25 2016 -0500

    [marshal] Only copy the minimum of size/length, not the full size, fixes #46288 (#4031)

diff --git a/mono/metadata/marshal.c b/mono/metadata/marshal.c
index 87c55ba890a..5eb7a8a9902 100644
--- a/mono/metadata/marshal.c
+++ b/mono/metadata/marshal.c
@@ -1159,7 +1159,7 @@ mono_string_to_byvalwstr (gpointer dst, MonoString *src, int size)
 	}
 
 	len = MIN (size, (mono_string_length (src)));
-	memcpy (dst, mono_string_chars (src), size * 2);
+	memcpy (dst, mono_string_chars (src), len * 2);
 	if (size <= mono_string_length (src))
 		len--;
 	*((gunichar2 *) dst + len) = 0;

