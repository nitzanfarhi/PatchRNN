commit bc564fd0bc26ecaa54b0d6c6cbb5c293cfd59c1e
Author: unknown <sasha@mysql.sashanet.com>
Date:   Wed Apr 25 15:20:59 2001 -0600

    fixed bug in mysqlbinlog

diff --git a/sql/log_event.cc b/sql/log_event.cc
index 5fc5f7f0e62..17499db4684 100644
--- a/sql/log_event.cc
+++ b/sql/log_event.cc
@@ -455,7 +455,7 @@ void Query_log_event::print(FILE* file, bool short_form, char* last_db)
 
   if(db && last_db)
     {
-      if(!(same_db = !memcmp(last_db, db, db_len)))
+      if(!(same_db = !memcmp(last_db, db, db_len + 1)))
         memcpy(last_db, db, db_len + 1);
     }
   
@@ -646,7 +646,7 @@ void Load_log_event::print(FILE* file, bool short_form, char* last_db)
 
   if(db && last_db)
     {
-      if(!(same_db = !memcmp(last_db, db, db_len)))
+      if(!(same_db = !memcmp(last_db, db, db_len + 1)))
         memcpy(last_db, db, db_len + 1);
     }
   

