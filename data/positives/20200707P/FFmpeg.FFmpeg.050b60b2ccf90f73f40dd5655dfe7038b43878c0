commit 050b60b2ccf90f73f40dd5655dfe7038b43878c0
Author: Kostya Shishkov <kostya.shishkov@gmail.com>
Date:   Wed Sep 27 04:37:57 2006 +0000

    free memory before return
    
    Originally committed as revision 6351 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/jpeg_ls.c b/libavcodec/jpeg_ls.c
index 4b365bb4ad..862a3b4229 100644
--- a/libavcodec/jpeg_ls.c
+++ b/libavcodec/jpeg_ls.c
@@ -459,6 +459,8 @@ static int ls_decode_picture(MJpegDecodeContext *s, int near, int point_transfor
         }
     } else if(ilv == 2) { /* sample interleaving */
         av_log(s->avctx, AV_LOG_ERROR, "Sample interleaved images are not supported.\n");
+        av_free(state);
+        av_free(zero);
         return -1;
     }
 

