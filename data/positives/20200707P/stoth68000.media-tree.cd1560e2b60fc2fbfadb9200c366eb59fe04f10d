commit cd1560e2b60fc2fbfadb9200c366eb59fe04f10d
Author: Rajesh Borundia <rajesh.borundia@qlogic.com>
Date:   Mon Aug 4 11:51:18 2014 -0400

    qlcnic: Initialize dcbnl_ops before register_netdev
    
    o Initialization of dcbnl_ops after register netdev may result in
      dcbnl_ops not getting set before it is being accessed from open.
      So, moving it before register_netdev.
    
    Signed-off-by: Rajesh Borundia <rajesh.borundia@qlogic.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c
index 158e1d9f255f..3187bc0c471b 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c
@@ -2323,14 +2323,14 @@ qlcnic_setup_netdev(struct qlcnic_adapter *adapter, struct net_device *netdev,
 	if (err)
 		return err;
 
+	qlcnic_dcb_init_dcbnl_ops(adapter->dcb);
+
 	err = register_netdev(netdev);
 	if (err) {
 		dev_err(&pdev->dev, "failed to register net device\n");
 		return err;
 	}
 
-	qlcnic_dcb_init_dcbnl_ops(adapter->dcb);
-
 	return 0;
 }
 

