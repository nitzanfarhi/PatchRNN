commit bde7d0932cb56a846c81f081ac9c4e21cb69e004
Author: unknown <bell@sanja.is.com.ua>
Date:   Wed Jul 14 23:57:14 2004 +0300

    stack overflow check added for subqueries processing (BUG#4554)
    
    
    sql/item_subselect.cc:
      stack overflow check added for subqueries processing

diff --git a/sql/item_subselect.cc b/sql/item_subselect.cc
index 4c1ffeecc97..3d5a11a26bc 100644
--- a/sql/item_subselect.cc
+++ b/sql/item_subselect.cc
@@ -128,7 +128,12 @@ bool Item_subselect::fix_fields(THD *thd_param, TABLE_LIST *tables, Item **ref)
   stmt= thd->current_statement;
 
   char const *save_where= thd->where;
-  int res= engine->prepare();
+  int res;
+
+  if (check_stack_overrun(thd, (gptr)&res))
+    return 1;
+
+  res= engine->prepare();
 
   // all transformetion is done (used by prepared statements)
   changed= 1;

