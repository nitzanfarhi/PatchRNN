commit da3e4599f061bc7e99da3c55a5cb92a9d0ba3e9d
Author: GXhua <393323503@qq.com>
Date:   Thu Dec 25 14:50:49 2014 +0800

    fix mem invalid read/write

diff --git a/src/reactor/ReactorBase.c b/src/reactor/ReactorBase.c
index 36decf1b..506e4b4e 100644
--- a/src/reactor/ReactorBase.c
+++ b/src/reactor/ReactorBase.c
@@ -122,12 +122,15 @@ swConnection* swReactor_get(swReactor *reactor, int fd)
         }
         else
         {
-            int max_socket = reactor->max_socket * 2;
+            int max_socket = fd * 2;
             if (max_socket > SwooleG.max_sockets)
             {
                 max_socket = SwooleG.max_sockets + 1;
             }
             reactor->sockets = sw_realloc(reactor->sockets, max_socket * sizeof(swConnection));
+            if(reactor->sockets)
+                bzero((void *)reactor->sockets+reactor->max_socket*sizeof(swConnection),(max_socket-reactor->max_socket)*sizeof(swConnection));
+            
             reactor->max_socket = max_socket;
         }
 

