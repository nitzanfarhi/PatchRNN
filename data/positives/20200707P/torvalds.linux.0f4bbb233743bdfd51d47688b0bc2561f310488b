commit 0f4bbb233743bdfd51d47688b0bc2561f310488b
Author: Lars-Peter Clausen <lars@metafoo.de>
Date:   Tue Oct 18 16:54:00 2016 +0200

    gpio: GPIO_GET_CHIPINFO_IOCTL: Fix information leak
    
    The GPIO_GET_CHIPINFO_IOCTL handler allocates a gpiochip_info struct on the
    stack and then passes it to copy_to_user(). But depending on the length of
    the GPIO chip name and label the struct is only partially initialized.
    
    This exposes the previous, potentially sensitive, stack content to the
    issuing userspace application. To avoid this make sure that the struct is
    fully initialized.
    
    Cc: stable@vger.kernel.org
    Fixes: 521a2ad6f862 ("gpio: add userspace ABI for GPIO line information")
    Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>
    Signed-off-by: Linus Walleij <linus.walleij@linaro.org>

diff --git a/drivers/gpio/gpiolib.c b/drivers/gpio/gpiolib.c
index dac975397253..7a01969169e8 100644
--- a/drivers/gpio/gpiolib.c
+++ b/drivers/gpio/gpiolib.c
@@ -823,6 +823,8 @@ static long gpio_ioctl(struct file *filp, unsigned int cmd, unsigned long arg)
 	if (cmd == GPIO_GET_CHIPINFO_IOCTL) {
 		struct gpiochip_info chipinfo;
 
+		memset(&chipinfo, 0, sizeof(chipinfo));
+
 		strncpy(chipinfo.name, dev_name(&gdev->dev),
 			sizeof(chipinfo.name));
 		chipinfo.name[sizeof(chipinfo.name)-1] = '\0';

