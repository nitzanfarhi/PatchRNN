commit a928d28d4487402e6bd18bea1b8cc2b2ec6e6d8f
Author: Evgenii Lepikhin <johnlepikhin@gmail.com>
Date:   Tue Apr 21 15:49:57 2015 +0300

    ISCSI: fix minor memory leak
    
    This patch adds a missing kfree for sess->sess_ops memory upon
    transport_init_session() failure.
    
    Signed-off-by: Evgenii Lepikhin <johnlepikhin@gmail.com>
    Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>

diff --git a/drivers/target/iscsi/iscsi_target_login.c b/drivers/target/iscsi/iscsi_target_login.c
index 8ce94ff744e6..70d799dfab03 100644
--- a/drivers/target/iscsi/iscsi_target_login.c
+++ b/drivers/target/iscsi/iscsi_target_login.c
@@ -346,6 +346,7 @@ static int iscsi_login_zero_tsih_s1(
 	if (IS_ERR(sess->se_sess)) {
 		iscsit_tx_login_rsp(conn, ISCSI_STATUS_CLS_TARGET_ERR,
 				ISCSI_LOGIN_STATUS_NO_RESOURCES);
+		kfree(sess->sess_ops);
 		kfree(sess);
 		return -ENOMEM;
 	}

