commit 5d44b414daa8c1d8551aed6130d86d54175db43f
Author: Harvey Harrison <harvey.harrison@gmail.com>
Date:   Fri Feb 15 13:41:32 2008 -0800

    ata: fix sparse warning in libata.h
    
    Avoids lots of these, also is more readable.
    include/linux/libata.h:1210:13: warning: potentially expensive pointer subtraction
    
    Change the subtraction to addition on the other side of the comparison.
    
    Thanks to Christer Weinigel for the suggestion.
    
    Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com>
    Acked-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

diff --git a/include/linux/libata.h b/include/linux/libata.h
index 2e098f940cec..ce7603a73156 100644
--- a/include/linux/libata.h
+++ b/include/linux/libata.h
@@ -1197,7 +1197,7 @@ static inline struct ata_link *ata_port_next_link(struct ata_link *link)
 		return ap->pmp_link;
 	}
 
-	if (++link - ap->pmp_link < ap->nr_pmp_links)
+	if (++link < ap->nr_pmp_links + ap->pmp_link)
 		return link;
 	return NULL;
 }

