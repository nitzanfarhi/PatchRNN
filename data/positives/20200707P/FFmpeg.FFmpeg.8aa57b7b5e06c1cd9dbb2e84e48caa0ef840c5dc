commit 8aa57b7b5e06c1cd9dbb2e84e48caa0ef840c5dc
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sun Apr 22 15:32:58 2012 +0200

    audemux: Check channels isnt 0
    
    Fixes a division by 0
    
    Found-by: Mateusz "j00ru" Jurczyk and Gynvael Coldwind
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavformat/au.c b/libavformat/au.c
index 67e6cab181..bec0d7641b 100644
--- a/libavformat/au.c
+++ b/libavformat/au.c
@@ -150,6 +150,11 @@ static int au_read_header(AVFormatContext *s)
         return AVERROR_INVALIDDATA;
     }
 
+    if (channels <= 0) {
+        av_log(s, AV_LOG_ERROR, "Invalid number of channels %d\n", channels);
+        return AVERROR_INVALIDDATA;
+    }
+
     if (size >= 24) {
         /* skip unused data */
         avio_skip(pb, size - 24);

