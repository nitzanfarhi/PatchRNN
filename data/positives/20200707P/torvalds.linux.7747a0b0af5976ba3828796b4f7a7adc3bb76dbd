commit 7747a0b0af5976ba3828796b4f7a7adc3bb76dbd
Author: Felix Blyakher <felixb@sgi.com>
Date:   Thu Jun 11 17:07:28 2009 -0500

    xfs: fix freeing memory in xfs_getbmap()
    
    Regression from commit 28e211700a81b0a934b6c7a4b8e7dda843634d2f.
    Need to free temporary buffer allocated in xfs_getbmap().
    
    Signed-off-by: Felix Blyakher <felixb@sgi.com>
    Signed-off-by: Hedi Berriche <hedi@sgi.com>
    Reported-by: Justin Piszcz <jpiszcz@lucidpixels.com>
    Reviewed-by: Eric Sandeen <sandeen@sandeen.net>
    Reviewed-by: Christoph Hellwig <hch@lst.de>

diff --git a/fs/xfs/xfs_bmap.c b/fs/xfs/xfs_bmap.c
index 4b0f6efb046c..7928b9983c1d 100644
--- a/fs/xfs/xfs_bmap.c
+++ b/fs/xfs/xfs_bmap.c
@@ -6086,6 +6086,7 @@ xfs_getbmap(
 			break;
 	}
 
+	kmem_free(out);
 	return error;
 }
 

