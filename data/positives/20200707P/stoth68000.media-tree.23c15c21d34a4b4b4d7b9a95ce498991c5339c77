commit 23c15c21d34a4b4b4d7b9a95ce498991c5339c77
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat May 19 08:51:57 2007 -0700

    mlx4_core: Fix array overrun in dump_dev_cap_flags()
    
    Don't overrun fname[] array when decoding device flags.
    
    This was spotted by the Coverity checker (CID 1642).
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

diff --git a/drivers/net/mlx4/fw.c b/drivers/net/mlx4/fw.c
index c42717313663..cfa5cc072339 100644
--- a/drivers/net/mlx4/fw.c
+++ b/drivers/net/mlx4/fw.c
@@ -90,7 +90,7 @@ static void dump_dev_cap_flags(struct mlx4_dev *dev, u32 flags)
 	int i;
 
 	mlx4_dbg(dev, "DEV_CAP flags:\n");
-	for (i = 0; i < 32; ++i)
+	for (i = 0; i < ARRAY_SIZE(fname); ++i)
 		if (fname[i] && (flags & (1 << i)))
 			mlx4_dbg(dev, "    %s\n", fname[i]);
 }

