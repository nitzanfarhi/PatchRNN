commit eadc69cc9054594ff7860d407f855536af13af99
Author: Emil Velikov <eeydev@nottingham.ac.uk>
Date:   Sun Sep 26 20:26:02 2010 +0100

    drm/nouveau: don't use the default pll limits in table v2.1 on nv50+ cards
    
    This fixes issues bug 30370 and prevents another possible divide by zero on
    the original nv50 cards, by returning -ENOENT
    
    Signed-off-by: Emil Velikov <eeydev@nottingham.ac.uk>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

diff --git a/drivers/gpu/drm/nouveau/nouveau_bios.c b/drivers/gpu/drm/nouveau/nouveau_bios.c
index c66d4567a2ed..53f4eba65cb9 100644
--- a/drivers/gpu/drm/nouveau/nouveau_bios.c
+++ b/drivers/gpu/drm/nouveau/nouveau_bios.c
@@ -4890,6 +4890,12 @@ int get_pll_limits(struct drm_device *dev, uint32_t limit_match, struct pll_lims
 				break;
 			}
 
+		if ((dev_priv->card_type >= NV_50) && (pllindex == 0)) {
+			NV_ERROR(dev, "Register 0x%08x not found in PLL "
+				 "limits table", pll_lim->reg);
+			return -ENOENT;
+		}
+
 		pll_rec = &bios->data[plloffs + recordlen * pllindex];
 
 		BIOSLOG(bios, "Loading PLL limits for reg 0x%08x\n",

