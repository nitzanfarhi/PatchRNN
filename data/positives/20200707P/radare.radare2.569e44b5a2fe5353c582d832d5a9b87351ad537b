commit 569e44b5a2fe5353c582d832d5a9b87351ad537b
Author: pancake <pancake@nopcode.org>
Date:   Sun Feb 28 02:50:33 2016 +0100

    Fix invalid free in r_fs_free

diff --git a/libr/fs/fs.c b/libr/fs/fs.c
index 9cebcb8a2..2473b8108 100644
--- a/libr/fs/fs.c
+++ b/libr/fs/fs.c
@@ -59,7 +59,9 @@ R_API void r_fs_add(RFS *fs, RFSPlugin *p) {
 	// TODO: find coliding plugin name
 	if (p && p->init)
 		p->init ();
-	r_list_append (fs->plugins, p);
+	RFSPlugin *sp = R_NEW (RFSPlugin);
+	memcpy (sp, p, sizeof (RFSPlugin));
+	r_list_append (fs->plugins, sp);
 }
 
 R_API void r_fs_del(RFS *fs, RFSPlugin *p) {

