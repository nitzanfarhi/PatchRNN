commit 9a8a2fd294ffa68bfed3d503090366faf0f45964
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   Mon Jul 9 04:35:53 2012 +0000

    ext/zlib/zlib.c: initialize return value
    
    * ext/zlib/zlib.c (zstream_run_func): initialize the return value,
      interrupt flag may set before starting loop.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@36341 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

diff --git a/ext/zlib/zlib.c b/ext/zlib/zlib.c
index 1b651d1c08..fc49e4454a 100644
--- a/ext/zlib/zlib.c
+++ b/ext/zlib/zlib.c
@@ -924,6 +924,7 @@ zstream_run_func(void *ptr)
     struct zstream *z = args->z;
     uInt n;
 
+    err = Z_OK;
     while (!args->interrupt) {
 	n = z->stream.avail_out;
 	err = z->func->run(&z->stream, flush);

