commit 425304f5626a2b2a0fc2ada1e0f306a3465341b4
Author: unknown <sergefp@mysql.com>
Date:   Wed Mar 28 18:38:42 2007 +0400

    BUG#26625: crash in range optimizer (out of mem)
    - Define Sql_alloc::operator new() as thow() so that C++ compiler
      handles NULL return values
    (there is no testcase as there is no portable way to set limit on the
    amount of memory that a process can allocate)
    
    
    sql/sql_list.h:
      BUG#26625: crash in range optimizer (out of mem)
      - Define Sql_alloc::operator new() as thow() so that C++ compiler
        handles NULL return values

diff --git a/sql/sql_list.h b/sql/sql_list.h
index 47379ab1ddf..2075361a398 100644
--- a/sql/sql_list.h
+++ b/sql/sql_list.h
@@ -30,7 +30,7 @@
 class Sql_alloc
 {
 public:
-  static void *operator new(size_t size)
+  static void *operator new(size_t size) throw ()
   {
     return (void*) sql_alloc((uint) size);
   }
@@ -38,7 +38,7 @@ class Sql_alloc
   {
     return (void*) sql_alloc((uint) size);
   }
-  static void *operator new(size_t size, MEM_ROOT *mem_root)
+  static void *operator new(size_t size, MEM_ROOT *mem_root) throw ()
   { return (void*) alloc_root(mem_root, (uint) size); }
   static void operator delete(void *ptr, size_t size) { TRASH(ptr, size); }
   static void operator delete(void *ptr, MEM_ROOT *mem_root)

