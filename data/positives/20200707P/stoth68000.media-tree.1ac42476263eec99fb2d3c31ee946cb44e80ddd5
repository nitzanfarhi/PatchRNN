commit 1ac42476263eec99fb2d3c31ee946cb44e80ddd5
Author: Paul Moore <paul@paul-moore.com>
Date:   Mon Apr 18 16:41:38 2016 -0400

    selinux: check ss_initialized before revalidating an inode label
    
    There is no point in trying to revalidate an inode's security label if
    the security server is not yet initialized.
    
    Signed-off-by: Paul Moore <paul@paul-moore.com>

diff --git a/security/selinux/hooks.c b/security/selinux/hooks.c
index b09aad7ad423..474011c46bbd 100644
--- a/security/selinux/hooks.c
+++ b/security/selinux/hooks.c
@@ -259,7 +259,7 @@ static int __inode_security_revalidate(struct inode *inode,
 
 	might_sleep_if(may_sleep);
 
-	if (isec->initialized != LABEL_INITIALIZED) {
+	if (ss_initialized && isec->initialized != LABEL_INITIALIZED) {
 		if (!may_sleep)
 			return -ECHILD;
 

