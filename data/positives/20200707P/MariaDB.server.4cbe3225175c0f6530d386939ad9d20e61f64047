commit 4cbe3225175c0f6530d386939ad9d20e61f64047
Author: serg@sergbook.mysql.com <>
Date:   Wed Jan 5 02:19:04 2005 +0200

    reverting the change that results in infinite recursion

diff --git a/sql/sql_base.cc b/sql/sql_base.cc
index 87e4f5df1cc..a620ce2f10f 100644
--- a/sql/sql_base.cc
+++ b/sql/sql_base.cc
@@ -3047,15 +3047,15 @@ insert_fields(THD *thd, TABLE_LIST *tables, const char *db_name,
                                  &not_used_field_index, TRUE))
         {
           Item *item= iterator->item(thd);
+          if (!found++)
+            (void) it->replace(item);		// Replace '*'
+          else
+            it->after(item);
 	  if (view && !thd->lex->current_select->no_wrap_view_item)
 	  {
 	    item= new Item_ref(it->ref(), tables->view_name.str,
 			       field_name);
 	  }
-          if (!found++)
-            (void) it->replace(item);		// Replace '*'
-          else
-            it->after(item);
 #ifndef NO_EMBEDDED_ACCESS_CHECKS
           if (any_privileges)
           {

