commit 8286e96d95f2dd01a72e3500322ad95153a469c2
Author: Dexuan Cui <decui@microsoft.com>
Date:   Thu Nov 10 07:17:48 2016 +0000

    PCI: hv: Use the correct buffer size in new_pcichild_device()
    
    We don't really need such a big on-stack buffer.  vmbus_sendpacket() here
    only uses sizeof(struct pci_child_message).
    
    Signed-off-by: Dexuan Cui <decui@microsoft.com>
    Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
    Reviewed-by: Jake Oshins <jakeo@microsoft.com>

diff --git a/drivers/pci/host/pci-hyperv.c b/drivers/pci/host/pci-hyperv.c
index 06c98695c06c..9ea63b4b0e58 100644
--- a/drivers/pci/host/pci-hyperv.c
+++ b/drivers/pci/host/pci-hyperv.c
@@ -1271,9 +1271,9 @@ static struct hv_pci_dev *new_pcichild_device(struct hv_pcibus_device *hbus,
 	struct hv_pci_dev *hpdev;
 	struct pci_child_message *res_req;
 	struct q_res_req_compl comp_pkt;
-	union {
-	struct pci_packet init_packet;
-		u8 buffer[0x100];
+	struct {
+		struct pci_packet init_packet;
+		u8 buffer[sizeof(struct pci_child_message)];
 	} pkt;
 	unsigned long flags;
 	int ret;

