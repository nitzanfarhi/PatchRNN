commit 9d5ce56fe4d71cbe053d060d0c696c72854b805c
Author: ewt <devnull@localhost>
Date:   Mon Oct 21 01:23:29 1996 +0000

    rpmdbRemove() should free header it read
    matches needed to be freed in removeIndexEntry()
    
    CVS patchset: 1120
    CVS date: 1996/10/21 01:23:29

diff --git a/lib/rpmdb.c b/lib/rpmdb.c
index 3c68b6245..a51bfbef2 100644
--- a/lib/rpmdb.c
+++ b/lib/rpmdb.c
@@ -298,6 +298,8 @@ static void removeIndexEntry(dbIndex * dbi, char * key, dbIndexRecord rec,
       case 2:
 	break;   /* error message already generated from dbindex.c */
     }
+
+    freeDBIndexRecord(matches);
 }
 
 int rpmdbRemove(rpmdb db, unsigned int offset, int tolerant) {
@@ -390,6 +392,8 @@ int rpmdbRemove(rpmdb db, unsigned int offset, int tolerant) {
 
     unblockSignals();
 
+    freeHeader(h);
+
     return 0;
 }
 

