commit fef4c86e59a76f2ec1a77d5732f40752700bd5dd
Author: David Oostdyk <daveo@ll.mit.edu>
Date:   Fri Mar 8 08:28:15 2013 +0000

    rrunner.c: fix possible memory leak in rr_init_one()
    
    In the event that register_netdev() failed, the rrpriv->evt_ring
    allocation would have not been freed.
    
    Signed-off-by: David Oostdyk <daveo@ll.mit.edu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/hippi/rrunner.c b/drivers/net/hippi/rrunner.c
index e5b19b056909..3c4d6274bb9b 100644
--- a/drivers/net/hippi/rrunner.c
+++ b/drivers/net/hippi/rrunner.c
@@ -202,6 +202,9 @@ static int rr_init_one(struct pci_dev *pdev, const struct pci_device_id *ent)
 	return 0;
 
  out:
+	if (rrpriv->evt_ring)
+		pci_free_consistent(pdev, EVT_RING_SIZE, rrpriv->evt_ring,
+				    rrpriv->evt_ring_dma);
 	if (rrpriv->rx_ring)
 		pci_free_consistent(pdev, RX_TOTAL_SIZE, rrpriv->rx_ring,
 				    rrpriv->rx_ring_dma);

