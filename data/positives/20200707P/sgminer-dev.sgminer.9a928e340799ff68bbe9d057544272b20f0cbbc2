commit 9a928e340799ff68bbe9d057544272b20f0cbbc2
Author: Con Kolivas <kernel@kolivas.org>
Date:   Sun Jul 24 08:55:16 2011 +1000

    Fix possible dereference on blank inputs during input_pool.

diff --git a/main.c b/main.c
index f14f74e6..577adc81 100644
--- a/main.c
+++ b/main.c
@@ -3126,8 +3126,8 @@ static char *curses_input(const char *query)
 
 static bool input_pool(bool live)
 {
-	char *url, *user, *pass;
-	struct pool *pool;
+	char *url = NULL, *user = NULL, *pass = NULL;
+	struct pool *pool = NULL;
 	bool ret = false;
 
 	immedok(logwin, true);
@@ -3179,13 +3179,14 @@ out:
 	immedok(logwin, false);
 
 	if (!ret) {
-		free(pool);
 		if (url)
 			free(url);
 		if (user)
 			free(user);
 		if (pass)
 			free(pass);
+		if (pool)
+			free(pool);
 	}
 	return ret;
 }

