commit 64e0987d3dedb8e606332d4b1b38755829a5fb8d
Author: Lauri Aalto <laalto@iki.fi>
Date:   Tue Oct 23 11:52:23 2007 +0000

    (raptor_stringbuffer_append_turtle_string) Check for alloc failure.

diff --git a/src/turtle_common.c b/src/turtle_common.c
index e458664e..43a687bf 100644
--- a/src/turtle_common.c
+++ b/src/turtle_common.c
@@ -76,6 +76,9 @@ raptor_stringbuffer_append_turtle_string(raptor_stringbuffer* stringbuffer,
   const unsigned char *s;
   unsigned char *d;
   unsigned char *string=(unsigned char *)RAPTOR_MALLOC(cstring, len+1);
+  
+  if(!string)
+    return -1;
 
   for(s=text, d=string, i=0; i<len; s++, i++) {
     unsigned char c=*s;

