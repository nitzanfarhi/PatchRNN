commit 1f3f53ae5179ba7f24b4a429bc41773f1f4857ca
Author: Rob Clark <rob@ti.com>
Date:   Sat Dec 17 13:28:52 2011 -0600

    OMAPDSS: APPLY: fix NULL pointer deref when mgr is not set
    
    extra_info_update_ongoing() goes through all overlays, but doesn't check
    if the overlay is connected to a manager. This leads to a crash whenever
    an overlay has been detached.
    
    Add a check to skip the non-connected overlays.
    
    Reported-by: Rob Clark <rob@ti.com>
    Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>

diff --git a/drivers/video/omap2/dss/apply.c b/drivers/video/omap2/dss/apply.c
index 0a6fb8de19c0..052dc874cd3d 100644
--- a/drivers/video/omap2/dss/apply.c
+++ b/drivers/video/omap2/dss/apply.c
@@ -327,6 +327,9 @@ static bool extra_info_update_ongoing(void)
 		ovl = omap_dss_get_overlay(i);
 		op = get_ovl_priv(ovl);
 
+		if (!ovl->manager)
+			continue;
+
 		mp = get_mgr_priv(ovl->manager);
 
 		if (!mp->enabled)

