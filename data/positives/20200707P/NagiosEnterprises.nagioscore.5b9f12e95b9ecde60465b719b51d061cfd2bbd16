commit 5b9f12e95b9ecde60465b719b51d061cfd2bbd16
Author: Andreas Ericsson <ae@op5.se>
Date:   Thu Oct 18 22:06:23 2012 +0000

    nerd: Plug a micro-leak
    
    When subscribers disconnected, we would earlier leave the ghost
    of their subscription behind. This patch makes sure they're removed.
    
    Signed-off-by: Andreas Ericsson <ae@op5.se>
    
    git-svn-id: https://nagios.svn.sourceforge.net/svnroot/nagios/nagioscore/trunk@2370 5f96b256-904b-4d8d-8c98-d829582c6739

diff --git a/base/nerd.c b/base/nerd.c
index a93c8f57..5b672aad 100644
--- a/base/nerd.c
+++ b/base/nerd.c
@@ -118,6 +118,7 @@ static int cancel_channel_subscription(struct nerd_channel *chan, int sd)
 		if(subscr->sd == sd) {
 			cancelled++;
 			free(list);
+			free(subscr);
 			if(prev) {
 				prev->next = next;
 			} else {

