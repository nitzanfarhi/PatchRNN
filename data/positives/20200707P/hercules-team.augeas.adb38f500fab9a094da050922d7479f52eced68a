commit adb38f500fab9a094da050922d7479f52eced68a
Author: David Lutterkort <lutter@watzmann.net>
Date:   Mon Sep 26 21:28:57 2016 -0700

    * src/fa.c (determinize): do not leak INI in an error case
    
    If we succeed in allocating INI ourselves, but then fail to push the
    initial state into it, we would leak INI. Fix that by explicitly freeing
    it.

diff --git a/src/fa.c b/src/fa.c
index 562b3e3e..31b0bde9 100644
--- a/src/fa.c
+++ b/src/fa.c
@@ -1311,8 +1311,10 @@ static int determinize(struct fa *fa, struct state_set *ini) {
     E(points == NULL);
     if (make_ini) {
         ini = state_set_init(-1, S_NONE);
-        if (ini == NULL || state_set_push(ini, fa->initial) < 0)
+        if (ini == NULL || state_set_push(ini, fa->initial) < 0) {
+            state_set_free(ini);
             goto error;
+        }
     }
 
     F(state_set_list_add(&worklist, ini));

