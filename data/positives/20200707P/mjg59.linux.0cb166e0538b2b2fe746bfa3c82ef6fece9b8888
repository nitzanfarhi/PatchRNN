commit 0cb166e0538b2b2fe746bfa3c82ef6fece9b8888
Author: Andreas Pretzsch <apr@cn-eng.de>
Date:   Mon Sep 17 18:17:21 2012 +0200

    mfd: Use devm_* APIs for mc13xxx: remove leftover kfree
    
    commit e7c706b1e5ccf28eaaf76c7a4613e80b0ca52863 migrated the allocation
    of struct mc13xxx to devm_* functions, but left a kfree(mc13xxx) in the
    mc13xxx_common_init error path. Remove it to prevent memory corruption.
    
    Signed-off-by: Andreas Pretzsch <apr@cn-eng.de>
    Reviewed-by: Axel Lin <axel.lin@gmail.com>
    Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>

diff --git a/drivers/mfd/mc13xxx-core.c b/drivers/mfd/mc13xxx-core.c
index 1ec79b54bd2f..1aba0238f426 100644
--- a/drivers/mfd/mc13xxx-core.c
+++ b/drivers/mfd/mc13xxx-core.c
@@ -676,7 +676,6 @@ int mc13xxx_common_init(struct mc13xxx *mc13xxx,
 err_mask:
 err_revision:
 		mc13xxx_unlock(mc13xxx);
-		kfree(mc13xxx);
 		return ret;
 	}
 

