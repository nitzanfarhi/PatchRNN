commit bde27e1e617dfeb3c026f530f48a77f5ed8aa2ea
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Thu Dec 4 18:58:38 2014 +0100

    doc/examples/transcoding: check encoder before using it
    
    Fixes null pointer exception
    
    Found-by: stoupeace
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/doc/examples/transcoding.c b/doc/examples/transcoding.c
index 759c628e93..5572461616 100644
--- a/doc/examples/transcoding.c
+++ b/doc/examples/transcoding.c
@@ -116,6 +116,10 @@ static int open_output_file(const char *filename)
                 || dec_ctx->codec_type == AVMEDIA_TYPE_AUDIO) {
             /* in this example, we choose transcoding to same codec */
             encoder = avcodec_find_encoder(dec_ctx->codec_id);
+            if (!encoder) {
+                av_log(NULL, AV_LOG_FATAL, "Neccessary encoder not found\n");
+                return AVERROR_INVALIDDATA;
+            }
 
             /* In this example, we transcode to same properties (picture size,
              * sample rate etc.). These properties can be changed for output

