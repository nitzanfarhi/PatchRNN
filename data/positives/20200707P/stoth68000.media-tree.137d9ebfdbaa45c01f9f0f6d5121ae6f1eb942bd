commit 137d9ebfdbaa45c01f9f0f6d5121ae6f1eb942bd
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Fri Feb 19 21:00:02 2010 +0100

    firewire: core: fix an information leak
    
    If a device exposes a sparsely populated configuration ROM,
    firewire-core's sysfs interface and character device file interface
    showed random data in the gaps between config ROM blocks.  Fix this by
    zero-initialization of the config ROM reader's scratch buffer.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

diff --git a/drivers/firewire/core-device.c b/drivers/firewire/core-device.c
index 150a8ba97488..f61211977d33 100644
--- a/drivers/firewire/core-device.c
+++ b/drivers/firewire/core-device.c
@@ -514,6 +514,7 @@ static int read_bus_info_block(struct fw_device *device, int generation)
 		return -ENOMEM;
 
 	stack = &rom[READ_BIB_ROM_SIZE];
+	memset(rom, 0, sizeof(*rom) * READ_BIB_ROM_SIZE);
 
 	device->max_speed = SCODE_100;
 

