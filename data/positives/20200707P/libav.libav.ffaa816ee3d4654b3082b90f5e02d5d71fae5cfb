commit ffaa816ee3d4654b3082b90f5e02d5d71fae5cfb
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Tue Oct 14 14:40:36 2003 +0000

    recommit of
        * fixing an unitilaized field AVImageInfo::interleaved.
    
          As a matter of fact we have two problems here: first
          AVImageInfo::interleaved is never initialzed in img.c.
          The second problem is that even if we want interleaved
          PNGs there's a bug in png.c that prevents us from generating
          them.
    
          The later problem is for somebody familiar with PNG to
          handle.
    
          And yes, always setting AVImageInfo::interleaved to 0 isn't
          such a good idea, but it still beats garbage values.
    orginal commit by roman shaposhnik
    
    Originally committed as revision 2380 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/img.c b/libavformat/img.c
index 0051271f6..50686e140 100644
--- a/libavformat/img.c
+++ b/libavformat/img.c
@@ -329,6 +329,7 @@ static int img_write_packet(AVFormatContext *s, int stream_index,
     info.width = width;
     info.height = height;
     info.pix_fmt = st->codec.pix_fmt;
+    info.interleaved = 0;    /* FIXME: there should be a way to set it right */
     info.pict = *picture;
     ret = av_write_image(pb, img->img_fmt, &info);
     if (!img->is_pipe) {

