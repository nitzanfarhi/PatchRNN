commit 19f48cb105b7fa18d0dcab435919a3a29b7a7c4c
Author: Francesco Lavra <francescolavra@interfree.it>
Date:   Thu Dec 31 08:47:11 2009 -0300

    V4L/DVB (13961): em28xx-dvb: fix memleak in dvb_fini()
    
    this patch fixes a memory leak which occurs when an em28xx card with DVB
    extension is unplugged or its DVB extension driver is unloaded. In
    dvb_fini(), dev->dvb must be freed before being set to NULL, as is done
    in dvb_init() in case of error.
    Note that this bug is also present in the latest stable kernel release.
    
    Signed-off-by: Francesco Lavra <francescolavra@interfree.it>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/em28xx/em28xx-dvb.c b/drivers/media/video/em28xx/em28xx-dvb.c
index cc0505eb900f..6b0a4953ab0e 100644
--- a/drivers/media/video/em28xx/em28xx-dvb.c
+++ b/drivers/media/video/em28xx/em28xx-dvb.c
@@ -606,6 +606,7 @@ static int dvb_fini(struct em28xx *dev)
 
 	if (dev->dvb) {
 		unregister_dvb(dev->dvb);
+		kfree(dev->dvb);
 		dev->dvb = NULL;
 	}
 

