commit 2bf68a3699601bd3e53b4efce7f2d780e243aa35
Author: Armin Schindler <armin@melware.de>
Date:   Tue Jul 17 04:04:23 2007 -0700

    i4l: leak in eicon/idifunc.c
    
    coverity spotted a possible leak in the idifunc.c file (bug id #1252), in
    um_new_card(), if the diva_user_mode_idi_create_adapter() fails, we dont
    free the memory allocated for card
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Acked-by: Armin Schindler <armin@melware.de>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/isdn/hardware/eicon/idifunc.c b/drivers/isdn/hardware/eicon/idifunc.c
index 4cbc68cf4dba..db87d5105422 100644
--- a/drivers/isdn/hardware/eicon/idifunc.c
+++ b/drivers/isdn/hardware/eicon/idifunc.c
@@ -106,6 +106,7 @@ static void um_new_card(DESCRIPTOR * d)
 	} else {
 		DBG_ERR(("could not create user mode idi card %d",
 			 adapter_nr));
+		diva_os_free(0, card);
 	}
 }
 

