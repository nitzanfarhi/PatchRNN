commit 09d4895488d4df5c58b739573846f514ceabc911
Author: Thomas Viehweger <Thomas.Viehweger@marconi.com>
Date:   Thu Mar 22 11:20:32 2007 -0300

    V4L/DVB (5472): Isl6421: don't reference freed memory
    
    After freeing a block there should be no reference to this block.
    
    Signed-off-by: Thomas Viehweger <Thomas.Viehweger@marconi.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/drivers/media/dvb/frontends/isl6421.c b/drivers/media/dvb/frontends/isl6421.c
index ef319369ec26..c967148a5945 100644
--- a/drivers/media/dvb/frontends/isl6421.c
+++ b/drivers/media/dvb/frontends/isl6421.c
@@ -122,6 +122,7 @@ struct dvb_frontend *isl6421_attach(struct dvb_frontend *fe, struct i2c_adapter
 	/* detect if it is present or not */
 	if (isl6421_set_voltage(fe, SEC_VOLTAGE_OFF)) {
 		kfree(isl6421);
+		fe->sec_priv = NULL;
 		return NULL;
 	}
 

