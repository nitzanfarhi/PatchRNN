commit 4749a40e5b7d8c1d2450133a7027564d7ed50399
Author: okir <okir@c6295689-39f2-0310-b995-f0e70906c6a9>
Date:   Thu Jan 9 07:31:58 2003 +0000

    - prevent segfault in opensc-explorer create command
    
    
    git-svn-id: https://www.opensc-project.org/svnp/opensc/trunk@847 c6295689-39f2-0310-b995-f0e70906c6a9

diff --git a/src/libopensc/card-gpk.c b/src/libopensc/card-gpk.c
index e05a120b..0533e46f 100644
--- a/src/libopensc/card-gpk.c
+++ b/src/libopensc/card-gpk.c
@@ -382,7 +382,8 @@ acl_to_ac(struct sc_file *file, unsigned int op, u8 *ac)
 
 	ac[0] = ac[1] = 0;
 
-	acl = sc_file_get_acl_entry(file, op);
+	if ((acl = sc_file_get_acl_entry(file, op)) == NULL)
+		return;
 
 	assert(acl->method != SC_AC_UNKNOWN);
 	switch (acl->method) {

