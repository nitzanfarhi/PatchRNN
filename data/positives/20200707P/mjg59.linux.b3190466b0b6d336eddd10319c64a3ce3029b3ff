commit b3190466b0b6d336eddd10319c64a3ce3029b3ff
Author: Bing Zhao <bzhao@marvell.com>
Date:   Tue Jul 3 15:53:13 2012 -0700

    mwifiex: fix Coverity SCAN CID 709078: Resource leak (RESOURCE_LEAK)
    
    > *. CID 709078: Resource leak (RESOURCE_LEAK)
    >       - drivers/net/wireless/mwifiex/cfg80211.c, line: 935
    > Assigning: "bss_cfg" = storage returned from "kzalloc(132UL, 208U)"
    >       - but was not free
    > drivers/net/wireless/mwifiex/cfg80211.c:935
    
    Signed-off-by: Bing Zhao <bzhao@marvell.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/mwifiex/cfg80211.c b/drivers/net/wireless/mwifiex/cfg80211.c
index ce61b6fae1c9..5c7fd185373c 100644
--- a/drivers/net/wireless/mwifiex/cfg80211.c
+++ b/drivers/net/wireless/mwifiex/cfg80211.c
@@ -958,6 +958,7 @@ static int mwifiex_cfg80211_start_ap(struct wiphy *wiphy,
 	case NL80211_HIDDEN_SSID_ZERO_CONTENTS:
 		/* firmware doesn't support this type of hidden SSID */
 	default:
+		kfree(bss_cfg);
 		return -EINVAL;
 	}
 

