commit 5343e446014b93f740d5502f9f3bfa3f66dcbc7c
Author: Devin Heitmueller <dheitmueller@kernellabs.com>
Date:   Wed Jul 15 00:35:47 2009 -0300

    V4L/DVB (12262): em28xx: Make sure the tuner is initialized if generic empia USB id was used
    
    In cases where the device has a generic Empia USB ID, the call in the
    precard setup phase did not set the tuner GPIO.  As a result, the tuner may
    not be taken out of reset before attempting initialization in the analog
    driver.
    
    This problem was not seen before with the EVGA inDtube, since that particular
    board has the analog GPIO setup to include taking the tuner out of reset.
    
    Thanks to Andreas Lunderhage for testing patches and providing a remote debug
    environment for the Pinnacle 320e.
    
    Cc: Andreas Lunderhage <lunderhage@home.se>
    Signed-off-by: Devin Heitmueller <dheitmueller@kernellabs.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/drivers/media/video/em28xx/em28xx-cards.c b/drivers/media/video/em28xx/em28xx-cards.c
index 476acb02a3d3..5aef7ddd091c 100644
--- a/drivers/media/video/em28xx/em28xx-cards.c
+++ b/drivers/media/video/em28xx/em28xx-cards.c
@@ -2286,6 +2286,7 @@ void em28xx_card_setup(struct em28xx *dev)
 		   em28xx_set_mode() in em28xx_pre_card_setup() was a no-op,
 		   so make the call now so the analog GPIOs are set properly
 		   before probing the i2c bus. */
+		em28xx_gpio_set(dev, dev->board.tuner_gpio);
 		em28xx_set_mode(dev, EM28XX_ANALOG_MODE);
 		break;
 	case EM2820_BOARD_SILVERCREST_WEBCAM:

