commit 84120828239608b412dc7b9a98354533e1e1ab5e
Author: Moe Jette <jette1@llnl.gov>
Date:   Wed Apr 17 17:31:14 2002 +0000

    Added missing unlock for pre-mature return from log_msg. - Jette

diff --git a/src/common/log.c b/src/common/log.c
index 046c279e68..13d71fd7f5 100644
--- a/src/common/log.c
+++ b/src/common/log.c
@@ -251,8 +251,10 @@ static void log_msg(log_level_t level, const char *fmt, va_list args)
 
 	if (level > SYSLOG_LEVEL  && 
 	    level > LOGFILE_LEVEL && 
-	    level > STDERR_LEVEL)
+	    level > STDERR_LEVEL) {
+		pthread_mutex_unlock(&log_lock);
 		return;
+	}
 
 	if (log->opt.prefix_level || SYSLOG_LEVEL > level) {
 		switch (level) {

