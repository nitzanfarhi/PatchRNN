commit 950fee84557416a3427dd404a13addc4be7b3e6c
Author: Andi Kleen <ak@suse.de>
Date:   Tue Sep 26 10:52:34 2006 +0200

    [PATCH] i386: Terminate backtrace fallback early if unwinder stack pointer is zero
    
    Cc: jbeulich@novell.com
    Signed-off-by: Andi Kleen <ak@suse.de>

diff --git a/arch/i386/kernel/traps.c b/arch/i386/kernel/traps.c
index 4ced4285163b..86fa7e47f301 100644
--- a/arch/i386/kernel/traps.c
+++ b/arch/i386/kernel/traps.c
@@ -197,6 +197,8 @@ void dump_trace(struct task_struct *task, struct pt_regs *regs,
 				if (UNW_SP(&info) >= PAGE_OFFSET) {
 					ops->warning(data, "Leftover inexact backtrace:\n");
 					stack = (void *)UNW_SP(&info);
+					if (!stack)
+						return;
 				} else
 					ops->warning(data, "Full inexact backtrace again:\n");
 			} else if (call_trace >= 1)

