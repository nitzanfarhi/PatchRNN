commit cb68f28854fc38b3b19cd109b432595007054882
Author: Moe Jette <jette1@llnl.gov>
Date:   Wed Jul 25 21:45:25 2007 +0000

    move slurm_crypto_fini() to prevent memory leak on shutdown

diff --git a/src/slurmd/slurmd/slurmd.c b/src/slurmd/slurmd/slurmd.c
index ace05497f8..4bd40b6ec7 100644
--- a/src/slurmd/slurmd/slurmd.c
+++ b/src/slurmd/slurmd/slurmd.c
@@ -258,6 +258,8 @@ main (int argc, char *argv[])
 
 	_slurmd_fini();
 	_destroy_conf();
+	slurm_crypto_fini();	/* must be after _destroy_conf() */
+
 	info("Slurmd shutdown completing");
 	log_fini();
        	return 0;
@@ -1034,7 +1036,6 @@ _slurmd_fini()
 	slurm_conf_destroy();
 	slurm_proctrack_fini();
 	slurm_auth_fini();
-	slurm_crypto_fini();
 	slurmd_req(NULL);	/* purge memory allocated by slurmd_req() */
 	return SLURM_SUCCESS;
 }

