commit 73f3f1382501a260a88801e3322ae6f3cf45c2fe
Author: Stephen Boyd <sboyd@codeaurora.org>
Date:   Thu Feb 25 12:18:25 2016 -0800

    clk: shmobile: Free 'clock' on error path
    
    We forgot to free this clock when we return early in this code.
    
    Cc: Geert Uytterhoeven <geert+renesas@glider.be>
    Signed-off-by: Stephen Boyd <sboyd@codeaurora.org>

diff --git a/drivers/clk/shmobile/renesas-cpg-mssr.c b/drivers/clk/shmobile/renesas-cpg-mssr.c
index 925b6007e531..58e24b326a48 100644
--- a/drivers/clk/shmobile/renesas-cpg-mssr.c
+++ b/drivers/clk/shmobile/renesas-cpg-mssr.c
@@ -348,6 +348,7 @@ static void __init cpg_mssr_register_mod_clk(const struct mssr_mod_clk *mod,
 #else
 			dev_dbg(dev, "Ignoring MSTP %s to prevent disabling\n",
 				mod->name);
+			kfree(clock);
 			return;
 #endif
 		}

