commit 512865011dda9f4cad8baab08ce1d637196adc15
Author: Zhang Zhaolong <zhangzl2013@126.com>
Date:   Wed Mar 11 16:34:38 2015 +0800

    libwinpr: check return value of realloc.
    
    Signed-off-by: Zhang Zhaolong <zhangzl2013@126.com>

diff --git a/winpr/libwinpr/utils/collections/Reference.c b/winpr/libwinpr/utils/collections/Reference.c
index 23ce2ae2f..4987eb2ca 100644
--- a/winpr/libwinpr/utils/collections/Reference.c
+++ b/winpr/libwinpr/utils/collections/Reference.c
@@ -84,6 +84,8 @@ wReference* ReferenceTable_GetFreeEntry(wReferenceTable* referenceTable)
 		new_size = referenceTable->size * 2;
 		new_ref = (wReference*) realloc(referenceTable->array,
 				sizeof(wReference) * new_size);
+		if (!new_ref)
+			return NULL;
 
 		referenceTable->size = new_size;
 		referenceTable->array = new_ref;

