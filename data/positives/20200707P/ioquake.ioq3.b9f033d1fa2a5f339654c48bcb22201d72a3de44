commit b9f033d1fa2a5f339654c48bcb22201d72a3de44
Author: Ryan C. Gordon <icculus@icculus.org>
Date:   Tue Sep 15 06:19:04 2009 +0000

    Prevent hang in S_UpdateBackgroundTrack() with some sample rates.
    
      Fixes Bugzilla #4022.

diff --git a/code/client/snd_dma.c b/code/client/snd_dma.c
index a8ce1212..cb8bfb94 100644
--- a/code/client/snd_dma.c
+++ b/code/client/snd_dma.c
@@ -1374,6 +1374,9 @@ void S_UpdateBackgroundTrack( void ) {
 		// decide how much data needs to be read from the file
 		fileSamples = bufferSamples * s_backgroundStream->info.rate / dma.speed;
 
+		if (!fileSamples)
+			return;
+
 		// our max buffer size
 		fileBytes = fileSamples * (s_backgroundStream->info.width * s_backgroundStream->info.channels);
 		if ( fileBytes > sizeof(raw) ) {

