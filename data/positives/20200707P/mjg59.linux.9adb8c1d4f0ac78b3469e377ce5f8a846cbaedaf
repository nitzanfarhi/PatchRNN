commit 9adb8c1d4f0ac78b3469e377ce5f8a846cbaedaf
Author: Stefan Weinhuber <wein@de.ibm.com>
Date:   Tue Sep 16 09:32:19 2008 -0700

    [S390] cio: fix orb initialization in cio_start_key
    
    The functions cio_tm_start_key and cio_start_key use the same private
    orb structure of a subchannel, so the orb needs to be cleared of old
    data before it is used again. A respective memset is missing from
    cio_start_key and hereby added.
    
    Signed-off-by: Stefan Weinhuber <wein@de.ibm.com>
    Acked-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

diff --git a/drivers/s390/cio/cio.c b/drivers/s390/cio/cio.c
index 5954b905e3ca..326f4cc7f92c 100644
--- a/drivers/s390/cio/cio.c
+++ b/drivers/s390/cio/cio.c
@@ -174,6 +174,7 @@ cio_start_key (struct subchannel *sch,	/* subchannel structure */
 	CIO_TRACE_EVENT(4, sch->dev.bus_id);
 
 	orb = &to_io_private(sch)->orb;
+	memset(orb, 0, sizeof(union orb));
 	/* sch is always under 2G. */
 	orb->cmd.intparm = (u32)(addr_t)sch;
 	orb->cmd.fmt = 1;

