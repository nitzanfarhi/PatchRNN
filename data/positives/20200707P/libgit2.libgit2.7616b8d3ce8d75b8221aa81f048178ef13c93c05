commit 7616b8d3ce8d75b8221aa81f048178ef13c93c05
Author: Edward Thomson <ethomson@edwardthomson.com>
Date:   Tue Nov 5 17:34:45 2013 -0600

    don't double free pkt

diff --git a/src/transports/smart_protocol.c b/src/transports/smart_protocol.c
index 651901b1b..4e9e112f4 100644
--- a/src/transports/smart_protocol.c
+++ b/src/transports/smart_protocol.c
@@ -261,7 +261,7 @@ static int wait_while_ack(gitno_buffer *buf)
 		    (pkt->status != GIT_ACK_CONTINUE ||
 		     pkt->status != GIT_ACK_COMMON)) {
 			git__free(pkt);
-			break;
+			return 0;
 		}
 	}
 

