commit a2c30069e780f2c516de02333ecf37f48ec93f64
Author: JÃ¶rn Heusipp <manx@openmpt.org>
Date:   Fri Jan 12 15:38:06 2018 +0000

    [Fix] Update Check: Fix leak.
    
    
    git-svn-id: https://source.openmpt.org/svn/openmpt/trunk/OpenMPT@9435 56274372-70c3-4bfc-bfc3-4c3a0b034d27

diff --git a/mptrack/UpdateCheck.cpp b/mptrack/UpdateCheck.cpp
index fb14091cb..90fa05d63 100644
--- a/mptrack/UpdateCheck.cpp
+++ b/mptrack/UpdateCheck.cpp
@@ -159,6 +159,7 @@ void CUpdateCheck::ThreadFunc::operator () ()
 CUpdateCheck::CUpdateCheck()
 	: internetHandle(nullptr)
 	, connectionHandle(nullptr)
+	, requestHandle(nullptr)
 {
 	return;
 }
@@ -399,6 +400,11 @@ CString CUpdateCheck::Error::FormatErrorCode(CString errorMessage, DWORD errorCo
 
 CUpdateCheck::~CUpdateCheck()
 {
+	if(requestHandle != nullptr)
+	{
+		InternetCloseHandle(requestHandle);
+		connectionHandle = nullptr;	
+	}
 	if(connectionHandle != nullptr)
 	{
 		InternetCloseHandle(connectionHandle);

