commit e74d62011e66ec205159869f3fc16d6ffd92a421
Author: Stephan Bosch <stephan@rename-it.nl>
Date:   Wed Sep 18 23:24:02 2013 +0300

    lib-http: Fixed handling of limits=NULL parameter for http_request_parser_init.
    Got messed up in patch queue.

diff --git a/src/lib-http/http-request-parser.c b/src/lib-http/http-request-parser.c
index 2d8a18e32..715114623 100644
--- a/src/lib-http/http-request-parser.c
+++ b/src/lib-http/http-request-parser.c
@@ -42,15 +42,16 @@ http_request_parser_init(struct istream *input,
 {
 	struct http_request_parser *parser;
 	struct http_header_limits hdr_limits;
-	uoff_t max_payload_size = limits->max_payload_size;
+	uoff_t max_payload_size;
 
 	parser = i_new(struct http_request_parser, 1);
-	parser->max_target_length = limits->max_target_length;
-	
-	if (limits != NULL)
+	if (limits != NULL) {
 		hdr_limits = limits->header;
-	else
+		max_payload_size = limits->max_payload_size;
+	} else {
 		memset(&hdr_limits, 0, sizeof(hdr_limits));
+		max_payload_size = 0;
+	}
 
 	/* substitute default limits */
 	if (parser->max_target_length == 0)

