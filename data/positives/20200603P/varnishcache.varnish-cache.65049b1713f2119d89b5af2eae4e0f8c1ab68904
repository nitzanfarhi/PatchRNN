commit 65049b1713f2119d89b5af2eae4e0f8c1ab68904
Author: Poul-Henning Kamp <phk@phk.freebsd.dk>
Date:   Sun Sep 17 18:31:31 2006 +0000

    Oops, off by one.
    
    
    git-svn-id: http://www.varnish-cache.org/svn/trunk/varnish-cache@1050 d4fa192b-c00b-0410-8231-f00ffab90ce4

diff --git a/bin/varnishd/cache_pool.c b/bin/varnishd/cache_pool.c
index 934bee122..421d7d8bb 100644
--- a/bin/varnishd/cache_pool.c
+++ b/bin/varnishd/cache_pool.c
@@ -242,7 +242,7 @@ WRK_QueueSession(struct sess *sp)
 	unsigned onq;
 
 	onq = nq + 1;
-	if (onq > nwq)
+	if (onq >= nwq)
 		onq = 0;
 	sp->workreq.sess = sp;
 	qp = wq[onq];

