commit d0966f026cb5df0a82be2247adfa1351abaed9be
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Tue Jan 2 22:22:12 2007 +0000

    missdetected a broken mp3
    
    Originally committed as revision 7404 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/tiertexseq.c b/libavformat/tiertexseq.c
index b1a39bf760..8f565824a6 100644
--- a/libavformat/tiertexseq.c
+++ b/libavformat/tiertexseq.c
@@ -62,7 +62,7 @@ static int seq_probe(AVProbeData *p)
 {
     int i;
 
-    if (p->buf_size < 256)
+    if (p->buf_size < 258)
         return 0;
 
     /* there's no real header in a .seq file, the only thing they have in common */
@@ -71,6 +71,9 @@ static int seq_probe(AVProbeData *p)
         if (p->buf[i] != 0)
             return 0;
 
+    if(p->buf[256]==0 && p->buf[257]==0)
+        return 0;
+
     /* only one fourth of the score since the previous check is too naive */
     return AVPROBE_SCORE_MAX / 4;
 }

