commit 7fc2395bd7e596978e4163c6be39d893017a718c
Author: Lauri Kasanen <cand@gmx.com>
Date:   Tue Dec 18 14:41:49 2012 +0200

    palm: getpeername may fail, found by coverity

diff --git a/plugins/palm/protocol.c b/plugins/palm/protocol.c
index b1432e23..64659062 100644
--- a/plugins/palm/protocol.c
+++ b/plugins/palm/protocol.c
@@ -107,7 +107,9 @@ static int get_port_by_socket(int fd)
     socklen_t len = sizeof(struct sockaddr_in);
     struct sockaddr_in m_addr;
 
-    getpeername(fd, (struct sockaddr *) &m_addr, &len);
+    int ret = getpeername(fd, (struct sockaddr *) &m_addr, &len);
+    if (ret < 0)
+        return ret;
     return (int) m_addr.sin_port;
 }
 

