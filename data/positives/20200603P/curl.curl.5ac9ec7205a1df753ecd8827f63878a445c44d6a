commit 5ac9ec7205a1df753ecd8827f63878a445c44d6a
Author: Daniel Stenberg <daniel@haxx.se>
Date:   Fri Dec 23 23:54:13 2011 +0100

    SFTP mkdir: use correct permission
    
    When sending quote command to a SFTP server and 'mkdir' was used, it
    would send fixed permissions and not use the CURLOPT_NEW_DIRECTORY_PERMS
    as it should.
    
    Reported by: Armel
    Patch by: Armel
    Bug: http://curl.haxx.se/mail/lib-2011-12/0249.html

diff --git a/lib/ssh.c b/lib/ssh.c
index 329d6df4e..23ba5f4e0 100644
--- a/lib/ssh.c
+++ b/lib/ssh.c
@@ -1400,7 +1400,7 @@ static CURLcode ssh_statemach_act(struct connectdata *conn, bool *block)
     case SSH_SFTP_QUOTE_MKDIR:
       rc = libssh2_sftp_mkdir_ex(sshc->sftp_session, sshc->quote_path1,
                                  (unsigned int)strlen(sshc->quote_path1),
-                                 0755);
+                                 data->set.new_directory_perms);
       if(rc == LIBSSH2_ERROR_EAGAIN) {
         break;
       }

