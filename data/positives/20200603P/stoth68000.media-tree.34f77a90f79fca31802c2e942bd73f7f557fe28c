commit 34f77a90f79fca31802c2e942bd73f7f557fe28c
Author: Xiaotian Feng <dfeng@redhat.com>
Date:   Wed Sep 23 15:56:18 2009 -0700

    cgroups: make unlock sequence in cgroup_get_sb consistent
    
    Make the last unlock sequence consistent with previous unlock sequeue.
    
    Acked-by: Balbir Singh <balbir@linux.vnet.ibm.com>
    Acked-by: Paul Menage <menage@google.com>
    Signed-off-by: Xiaotian Feng <dfeng@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/kernel/cgroup.c b/kernel/cgroup.c
index cd83d9933b6b..f5281aadbcab 100644
--- a/kernel/cgroup.c
+++ b/kernel/cgroup.c
@@ -1155,8 +1155,8 @@ static int cgroup_get_sb(struct file_system_type *fs_type,
 		BUG_ON(root->number_of_cgroups != 1);
 
 		cgroup_populate_dir(root_cgrp);
-		mutex_unlock(&inode->i_mutex);
 		mutex_unlock(&cgroup_mutex);
+		mutex_unlock(&inode->i_mutex);
 	}
 
 	simple_set_mnt(mnt, sb);

