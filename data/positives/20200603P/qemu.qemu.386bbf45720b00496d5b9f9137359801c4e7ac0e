commit 386bbf45720b00496d5b9f9137359801c4e7ac0e
Author: Stefan Weil <weil@mail.berlios.de>
Date:   Sat Jan 22 13:02:44 2011 +0100

    pci: Fix memory leak
    
    Signed-off-by: Stefan Weil <weil@mail.berlios.de>
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

diff --git a/hw/pci.c b/hw/pci.c
index 5e6e216487..8b76cea914 100644
--- a/hw/pci.c
+++ b/hw/pci.c
@@ -1875,6 +1875,7 @@ static int pci_add_option_rom(PCIDevice *pdev, bool is_default_rom)
     if (size < 0) {
         error_report("%s: failed to find romfile \"%s\"",
                      __FUNCTION__, pdev->romfile);
+        qemu_free(path);
         return -1;
     }
     if (size & (size - 1)) {

