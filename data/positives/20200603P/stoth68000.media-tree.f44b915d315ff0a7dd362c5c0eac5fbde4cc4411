commit f44b915d315ff0a7dd362c5c0eac5fbde4cc4411
Author: Yu Xu <yuxu@marvell.com>
Date:   Sat Dec 10 00:03:33 2011 +0800

    usb: gadget: storage: release superspeed descriptors.
    
    Release superspeed mass storage descriptors memory
    when the function is unbind.
    
    Signed-off-by: Yu Xu <yuxu@marvell.com>
    Acked-by: Michal Nazarewicz <mina86@mina86.com>
    Signed-off-by: Felipe Balbi <balbi@ti.com>

diff --git a/drivers/usb/gadget/f_mass_storage.c b/drivers/usb/gadget/f_mass_storage.c
index c39d58860fa0..1a6f415c0d02 100644
--- a/drivers/usb/gadget/f_mass_storage.c
+++ b/drivers/usb/gadget/f_mass_storage.c
@@ -2975,6 +2975,7 @@ static void fsg_unbind(struct usb_configuration *c, struct usb_function *f)
 	fsg_common_put(common);
 	usb_free_descriptors(fsg->function.descriptors);
 	usb_free_descriptors(fsg->function.hs_descriptors);
+	usb_free_descriptors(fsg->function.ss_descriptors);
 	kfree(fsg);
 }
 

