commit 2895db67b01cb875457c9c3f30a14723b6b5dfd5
Author: Jim Mattson <jmattson@google.com>
Date:   Fri Dec 1 09:57:56 2017 -0800

    KVM: VMX: fix page leak in hardware_setup()
    
    vmx_io_bitmap_b should not be allocated twice.
    
    Fixes: 23611332938d ("KVM: VMX: refactor setup of global page-sized bitmaps")
    Signed-off-by: Jim Mattson <jmattson@google.com>
    Reviewed-by: Krish Sadhukhan <krish.sadhukhan@oracle.com>
    Reviewed-by: David Hildenbrand <david@redhat.com>
    Signed-off-by: Radim Krčmář <rkrcmar@redhat.com>

diff --git a/arch/x86/kvm/vmx.c b/arch/x86/kvm/vmx.c
index 2fd9a8cec29a..8eba631c4dbd 100644
--- a/arch/x86/kvm/vmx.c
+++ b/arch/x86/kvm/vmx.c
@@ -6751,7 +6751,6 @@ static __init int hardware_setup(void)
 			goto out;
 	}
 
-	vmx_io_bitmap_b = (unsigned long *)__get_free_page(GFP_KERNEL);
 	memset(vmx_vmread_bitmap, 0xff, PAGE_SIZE);
 	memset(vmx_vmwrite_bitmap, 0xff, PAGE_SIZE);
 

