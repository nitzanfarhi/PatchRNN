commit fb81a32c68bebdfe1be0ff1c903938addd774c98
Author: Roger Dingledine <arma@torproject.org>
Date:   Mon Jan 19 06:12:32 2004 +0000

    setuid to User _before_ complaining about running as root
    
    
    svn:r1006

diff --git a/src/or/main.c b/src/or/main.c
index 374849c29..a03d85081 100644
--- a/src/or/main.c
+++ b/src/or/main.c
@@ -628,14 +628,14 @@ int tor_main(int argc, char *argv[]) {
   add_stream_log(LOG_INFO, "<stdout>", stdout);
   log_fn(LOG_WARN,"Tor v%s. This is experimental software. Do not use it if you need anonymity.",VERSION);
 
+  if (init_from_config(argc,argv) < 0)
+    return -1;
+
 #ifndef MS_WINDOWS
   if(geteuid()==0)
     log_fn(LOG_WARN,"You are running Tor as root. You don't need to, and you probably shouldn't.");
 #endif
 
-  if (init_from_config(argc,argv) < 0)
-    return -1;
-
   if (options.RunAsDaemon) {
     start_daemon();
   }

