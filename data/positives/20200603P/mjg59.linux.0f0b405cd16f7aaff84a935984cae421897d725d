commit 0f0b405cd16f7aaff84a935984cae421897d725d
Author: Denis Kirjanov <dkirjanov@hera.kernel.org>
Date:   Thu May 20 04:00:59 2010 +0000

    sh_eth: Fix memleak in sh_mdio_release
    
    Allocated memory for IRQs should be freed when releasing the mii_bus
    
    Signed-off-by: Denis Kirjanov <dkirjanov@kernel.org>
    Acked-by: Nobuhiro Iwamatsu <iwamatsu@nigauri.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/sh_eth.c b/drivers/net/sh_eth.c
index 586ed0915a29..501a55ffce57 100644
--- a/drivers/net/sh_eth.c
+++ b/drivers/net/sh_eth.c
@@ -1294,6 +1294,9 @@ static int sh_mdio_release(struct net_device *ndev)
 	/* remove mdio bus info from net_device */
 	dev_set_drvdata(&ndev->dev, NULL);
 
+	/* free interrupts memory */
+	kfree(bus->irq);
+
 	/* free bitbang info */
 	free_mdio_bitbang(bus);
 

