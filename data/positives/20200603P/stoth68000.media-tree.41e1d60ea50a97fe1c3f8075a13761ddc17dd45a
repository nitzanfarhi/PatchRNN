commit 41e1d60ea50a97fe1c3f8075a13761ddc17dd45a
Author: Vivek Gautam <vivek.gautam@codeaurora.org>
Date:   Tue Nov 8 15:37:51 2016 +0530

    scsi: ufs: qcom: Don't free resource-managed kmalloc element
    
    Host is allocated by managed kmalloc (devm_kmalloc). The
    memory allocated with this function is automatically
    freed on driver detach.
    So, no need to make an exclusive free call over it.
    
    Signed-off-by: Vivek Gautam <vivek.gautam@codeaurora.org>
    Reviewed-by: Subhash Jadavani <subhashj@codeaurora.org>
    Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>

diff --git a/drivers/scsi/ufs/ufs-qcom.c b/drivers/scsi/ufs/ufs-qcom.c
index 31df7838f790..804f4e70c771 100644
--- a/drivers/scsi/ufs/ufs-qcom.c
+++ b/drivers/scsi/ufs/ufs-qcom.c
@@ -1268,7 +1268,6 @@ static int ufs_qcom_init(struct ufs_hba *hba)
 out_unregister_bus:
 	phy_exit(host->generic_phy);
 out_host_free:
-	devm_kfree(dev, host);
 	ufshcd_set_variant(hba, NULL);
 out:
 	return err;

