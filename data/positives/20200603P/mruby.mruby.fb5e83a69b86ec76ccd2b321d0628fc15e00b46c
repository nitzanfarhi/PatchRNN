commit fb5e83a69b86ec76ccd2b321d0628fc15e00b46c
Author: Carson McDonald <carson@ioncannon.net>
Date:   Sun Feb 17 07:23:32 2013 -0500

    Fix crash when exiting mirb using ctrl-d when compiled with readline
    support.

diff --git a/tools/mirb/mirb.c b/tools/mirb/mirb.c
index 85c3249d..29685cf2 100644
--- a/tools/mirb/mirb.c
+++ b/tools/mirb/mirb.c
@@ -191,6 +191,10 @@ main(void)
     last_code_line[char_index] = '\0';
 #else
     char* line = readline(code_block_open ? "* " : "> ");
+    if(line == NULL) {
+      printf("\n");
+      break;
+    }
     strncat(last_code_line, line, sizeof(last_code_line)-1);
     add_history(line);
     free(line);

