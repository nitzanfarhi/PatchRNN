commit a25b1bbb726bed8bc83146a7e57790056277fa48
Author: Martin Briza <mbriza@redhat.com>
Date:   Tue Jul 30 12:30:05 2013 +0200

    Avoid a memory leak on non-PAM systems

diff --git a/src/daemon/Authenticator.cpp b/src/daemon/Authenticator.cpp
index 653a21e..550d8dd 100644
--- a/src/daemon/Authenticator.cpp
+++ b/src/daemon/Authenticator.cpp
@@ -317,6 +317,9 @@ namespace SDDM {
             if (index != -1)
                 env.insert(s.left(index), s.mid(index + 1));
         }
+#else
+        // we strdup'd the string before in this branch
+        free(mapped);
 #endif
         env.insert("HOME", pw->pw_dir);
         env.insert("PWD", pw->pw_dir);

