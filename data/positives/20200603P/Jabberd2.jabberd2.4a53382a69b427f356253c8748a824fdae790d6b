commit 4a53382a69b427f356253c8748a824fdae790d6b
Author: Tomasz Sterna <tomek@xiaoka.com>
Date:   Mon Nov 12 15:06:52 2007 +0000

    Fixes #138 - null nad after disconnect

diff --git a/c2s/c2s.c b/c2s/c2s.c
index 106e4f8..48f9f1a 100644
--- a/c2s/c2s.c
+++ b/c2s/c2s.c
@@ -1026,8 +1026,10 @@ int c2s_router_sx_callback(sx_t s, sx_event_t e, void *data, void *arg) {
                     free(bres);
 
                     /* and return the unbind result to the client */
-                    sx_nad_write(sess->s, sess->result);
-                    sess->result = NULL;
+                    if(sess->result != NULL) {
+                        sx_nad_write(sess->s, sess->result);
+                        sess->result = NULL;
+                    }
 
                     return 0;
                 }

