commit d510707b777f4b87b1b928e3cee38b3cfafa9c0c
Author: henning <henning@openbsd.org>
Date:   Fri Jan 31 17:23:34 2003 +0000

    plug a mbuf leak
    
    debugging session w/ dhartmei@ and lots of testing help from Jun <pilot at
    monkey.org>
    
    ok theo daniel angelos

diff --git a/sys/netinet/ip_icmp.c b/sys/netinet/ip_icmp.c
index b3e8beb3a5e..00c9e34d1c9 100644
--- a/sys/netinet/ip_icmp.c
+++ b/sys/netinet/ip_icmp.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: ip_icmp.c,v 1.53 2002/08/28 15:43:03 pefo Exp $	*/
+/*	$OpenBSD: ip_icmp.c,v 1.54 2003/01/31 17:23:34 henning Exp $	*/
 /*	$NetBSD: ip_icmp.c,v 1.19 1996/02/13 23:42:22 christos Exp $	*/
 
 /*
@@ -671,6 +671,7 @@ icmp_reflect(m)
 		if (ro.ro_rt == 0)
 		{
 		    ipstat.ips_noroute++;
+		    m_freem(m);
 		    goto done;
 		}
 

