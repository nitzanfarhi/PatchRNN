commit 58690664456b597796e58958861f365e096a1609
Author: Michael Buesch <mb@bu3sch.de>
Date:   Sun Jul 30 03:04:04 2006 -0700

    [PATCH] hwrng: fix intel probe error unwind
    
    The intel hwrng leaks an iomapped resource, if hwrng_register() failes.
    This fixes it.
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/drivers/char/hw_random/intel-rng.c b/drivers/char/hw_random/intel-rng.c
index 6594bd5645f4..ccd7e7102234 100644
--- a/drivers/char/hw_random/intel-rng.c
+++ b/drivers/char/hw_random/intel-rng.c
@@ -164,7 +164,7 @@ static int __init mod_init(void)
 	if (err) {
 		printk(KERN_ERR PFX "RNG registering failed (%d)\n",
 		       err);
-		goto out;
+		goto err_unmap;
 	}
 out:
 	return err;

