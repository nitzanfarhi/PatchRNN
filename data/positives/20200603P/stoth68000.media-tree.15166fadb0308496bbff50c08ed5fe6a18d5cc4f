commit 15166fadb0308496bbff50c08ed5fe6a18d5cc4f
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Sep 24 16:54:50 2005 -0700

    [IRDA]: Fix memory leak in irttp_init()
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/irda/irttp.c b/net/irda/irttp.c
index 6602d901f8b1..1df6487609e1 100644
--- a/net/irda/irttp.c
+++ b/net/irda/irttp.c
@@ -100,6 +100,7 @@ int __init irttp_init(void)
 	if (!irttp->tsaps) {
 		IRDA_ERROR("%s: can't allocate IrTTP hashbin!\n",
 			   __FUNCTION__);
+		kfree(irttp);
 		return -ENOMEM;
 	}
 

