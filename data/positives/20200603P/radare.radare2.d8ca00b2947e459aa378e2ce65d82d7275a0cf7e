commit d8ca00b2947e459aa378e2ce65d82d7275a0cf7e
Author: pancake <pancake@nopcode.org>
Date:   Tue Oct 7 17:53:04 2014 +0200

    Fix #804 again - regression introduced by deprecating rcorefile

diff --git a/libr/core/file.c b/libr/core/file.c
index bc98ea74b..3b1c5c611 100644
--- a/libr/core/file.c
+++ b/libr/core/file.c
@@ -27,6 +27,12 @@ R_API int r_core_file_reopen(RCore *core, const char *args, int perm) {
 		eprintf ("Cannot reopen in sandbox\n");
 		return R_FALSE;
 	}
+	if (isdebug) {
+		// if its in debugger mode we have to respawn a new process
+		// instead of reattaching
+		free (ofilepath);
+		ofilepath = r_str_newf ("dbg://%s", odesc->name);
+	}
 	if (!core->file) {
 		eprintf ("No file opened to reopen\n");
 		free (ofilepath);

