commit 1cdf8bc18f1ee43a39e543506fff8d5db3020ae1
Author: Satish Kharat <satishkh@cisco.com>
Date:   Mon Jun 26 17:46:23 2017 -0700

    scsi: fnic: Zero io_cmpl_skip on fw reset completion
    
    io_cmpl_skip keep track of number of completions to skip when stats are
    reset. If a fw_reset happens immediately after stats reset it could put
    it out of sync so need to reset io_cmpl_skip when fw reset is completed.
    
    Signed-off-by: Satish Kharat <satishkh@cisco.com>
    Signed-off-by: Sesidhar Baddela <sebaddel@cisco.com>
    Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>

diff --git a/drivers/scsi/fnic/fnic_scsi.c b/drivers/scsi/fnic/fnic_scsi.c
index d048f3b5006f..beea14c40a95 100644
--- a/drivers/scsi/fnic/fnic_scsi.c
+++ b/drivers/scsi/fnic/fnic_scsi.c
@@ -633,6 +633,7 @@ static int fnic_fcpio_fw_reset_cmpl_handler(struct fnic *fnic,
 
 	atomic64_set(&fnic->fnic_stats.fw_stats.active_fw_reqs, 0);
 	atomic64_set(&fnic->fnic_stats.io_stats.active_ios, 0);
+	atomic64_set(&fnic->io_cmpl_skip, 0);
 
 	spin_lock_irqsave(&fnic->fnic_lock, flags);
 

