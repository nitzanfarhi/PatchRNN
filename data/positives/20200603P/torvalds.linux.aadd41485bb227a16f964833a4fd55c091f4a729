commit aadd41485bb227a16f964833a4fd55c091f4a729
Author: Dan Carpenter <dan.carpenter@oracle.com>
Date:   Wed Aug 9 14:19:06 2017 +0300

    drm: Shift wrap bug in create_in_format_blob()
    
    "plane->format_count" can go up to 64.  (It's capped in
    drm_universal_plane_init().)  So we should be using ULL type instead of
    int here to prevent shift wrapping.
    
    Fixes: db1689aa61bd ("drm: Create a format/modifier blob")
    Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
    Signed-off-by: Sean Paul <seanpaul@chromium.org>
    Link: https://patchwork.freedesktop.org/patch/msgid/20170809111906.4rv3hzritctfktv3@mwanda

diff --git a/drivers/gpu/drm/drm_plane.c b/drivers/gpu/drm/drm_plane.c
index 5c14beee52ff..85ab1eec73e5 100644
--- a/drivers/gpu/drm/drm_plane.c
+++ b/drivers/gpu/drm/drm_plane.c
@@ -126,7 +126,7 @@ static int create_in_format_blob(struct drm_device *dev, struct drm_plane *plane
 							       plane->format_types[j],
 							       plane->modifiers[i])) {
 
-				mod->formats |= 1 << j;
+				mod->formats |= 1ULL << j;
 			}
 		}
 

