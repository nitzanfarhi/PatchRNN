commit 4d674e0b1c4f9a3fc935491570cc1e1b84d14bbf
Author: pyr <pyr@openbsd.org>
Date:   Sun Apr 13 00:34:08 2008 +0000

    bring back a free call which was left out when moving from handrolled lists
    to tailqs. this plugs a tiny memleak.
    ``nice catch'' and ok oga@

diff --git a/sys/dev/pci/drm/drm_drv.c b/sys/dev/pci/drm/drm_drv.c
index 0be2df47f88..a352d67ccbe 100644
--- a/sys/dev/pci/drm/drm_drv.c
+++ b/sys/dev/pci/drm/drm_drv.c
@@ -432,6 +432,7 @@ drm_lastclose(drm_device_t *dev)
 	for ( i = 0 ; i < DRM_HASH_SIZE ; i++ ) {
 		while ((pt = TAILQ_FIRST(&dev->magiclist[i])) != NULL) {
 			TAILQ_REMOVE(&dev->magiclist[i], pt, link);
+			free(pt, M_DRM);
 		}
 	}
 

