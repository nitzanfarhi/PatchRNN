commit 4782183da39ec988b8290bbc0289c9f50ba33ea4
Author: Chunyan Liu <cyliu@suse.com>
Date:   Thu Jun 5 17:20:50 2014 +0800

    QemuOpts: check NULL input for qemu_opts_del
    
    To simplify later using of qemu_opts_del, accept NULL input.
    
    Reviewed-by: Stefan Hajnoczi <stefanha@redhat.com>
    Reviewed-by: Eric Blake <eblake@redhat.com>
    Reviewed-by: Leandro Dorileo <l@dorileo.org>
    Signed-off-by: Chunyan Liu <cyliu@suse.com>
    Signed-off-by: Stefan Hajnoczi <stefanha@redhat.com>

diff --git a/util/qemu-option.c b/util/qemu-option.c
index 6acfb0eb41..40e1ff384a 100644
--- a/util/qemu-option.c
+++ b/util/qemu-option.c
@@ -1011,6 +1011,10 @@ void qemu_opts_del(QemuOpts *opts)
 {
     QemuOpt *opt;
 
+    if (opts == NULL) {
+        return;
+    }
+
     for (;;) {
         opt = QTAILQ_FIRST(&opts->head);
         if (opt == NULL)

