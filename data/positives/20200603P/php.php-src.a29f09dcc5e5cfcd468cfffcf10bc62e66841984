commit a29f09dcc5e5cfcd468cfffcf10bc62e66841984
Author: Pierre Joye <pajoye@php.net>
Date:   Fri Apr 7 13:34:53 2006 +0000

    - MFB: fix leak when an error occured in socket_read, free tmpbuf

diff --git a/ext/sockets/sockets.c b/ext/sockets/sockets.c
index 7f984e5140..1e0f0d11c3 100644
--- a/ext/sockets/sockets.c
+++ b/ext/sockets/sockets.c
@@ -869,6 +869,7 @@ PHP_FUNCTION(socket_read)
 			php_sock->error = errno;
 			SOCKETS_G(last_error) = errno;
 		} else {
+			efree(tmpbuf);
 			PHP_SOCKET_ERROR(php_sock, "unable to read from socket", errno);
 		}
 

