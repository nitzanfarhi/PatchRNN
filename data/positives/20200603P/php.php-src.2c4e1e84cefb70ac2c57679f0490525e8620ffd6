commit 2c4e1e84cefb70ac2c57679f0490525e8620ffd6
Author: Sascha Schumann <sas@php.net>
Date:   Fri May 11 19:18:24 2001 +0000

    Fix a memory leak which occured upon registering an already existing
    constant.

diff --git a/Zend/zend_constants.c b/Zend/zend_constants.c
index 0dc1617684..481ffb7943 100644
--- a/Zend/zend_constants.c
+++ b/Zend/zend_constants.c
@@ -250,6 +250,7 @@ ZEND_API int zend_register_constant(zend_constant *c ELS_DC)
 
 	zend_str_tolower(lowercase_name, c->name_len);
 	if (zend_hash_add(EG(zend_constants), lowercase_name, c->name_len, (void *) c, sizeof(zend_constant), NULL)==FAILURE) {
+		free(c->name);
 		zval_dtor(&c->value);
 		zend_error(E_NOTICE,"Constant %s already defined",lowercase_name);
 		ret = FAILURE;

