commit 2df6396160b019d992241e2db8a6d5a15f654e69
Author: Viresh Kumar <viresh.kumar@linaro.org>
Date:   Wed Jan 27 11:16:57 2016 +0530

    greybus: audio_codec: Free gccodec on codec probe failure
    
    We aren't freeing the codec, that we allocated before failing to probe
    the connection. Free it.
    
    Signed-off-by: Viresh Kumar <viresh.kumar@linaro.org>
    Reviewed-by: Johan Hovold <johan@hovoldconsulting.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@google.com>

diff --git a/drivers/staging/greybus/audio_codec.c b/drivers/staging/greybus/audio_codec.c
index 1f39c9cd1aee..a7ccaaad5281 100644
--- a/drivers/staging/greybus/audio_codec.c
+++ b/drivers/staging/greybus/audio_codec.c
@@ -713,6 +713,7 @@ static int gbaudio_codec_probe(struct gb_connection *connection)
 	kfree(topology);
 base_error:
 	gbcodec->mgmt_connection = NULL;
+	gbaudio_free_codec(dev, gbcodec);
 	return ret;
 }
 

