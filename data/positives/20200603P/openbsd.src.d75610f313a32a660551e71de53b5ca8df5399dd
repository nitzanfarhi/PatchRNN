commit d75610f313a32a660551e71de53b5ca8df5399dd
Author: mickey <mickey@openbsd.org>
Date:   Fri Nov 3 03:35:42 2006 +0000

    mdproc has to be initialised

diff --git a/sys/arch/sh/sh/vm_machdep.c b/sys/arch/sh/sh/vm_machdep.c
index fa9ee202629..77ddd8171b5 100644
--- a/sys/arch/sh/sh/vm_machdep.c
+++ b/sys/arch/sh/sh/vm_machdep.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: vm_machdep.c,v 1.1.1.1 2006/10/06 21:02:55 miod Exp $	*/
+/*	$OpenBSD: vm_machdep.c,v 1.2 2006/11/03 03:35:42 mickey Exp $	*/
 /*	$NetBSD: vm_machdep.c,v 1.53 2006/08/31 16:49:21 matt Exp $	*/
 
 /*-
@@ -133,6 +133,8 @@ cpu_fork(struct proc *p1, struct proc *p2, void *stack, size_t stacksize,
 
 	KDASSERT(p1 == curproc || p1 == &proc0);
 
+	bzero(&p2->p_md, sizeof(p2->p_md));
+
 	/* Copy flags */
 	p2->p_md.md_flags = p1->p_md.md_flags;
 

