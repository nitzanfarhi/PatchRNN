commit faec6f91f52838ead8dabb8545b1312bdd32da4b
Author: Eliad Peller <eliad@wizery.com>
Date:   Wed Jul 17 09:16:30 2013 +0300

    iwlwifi: mvm: don't clear tbl->win mistakenly
    
    rs_get_tbl_info_from_mcs() mistakenly clears
    the rate histories window, overriding its initialization
    values (i.e. filling it with 0, instead of -1).
    
    Signed-off-by: Eliad Peller <eliad@wizery.com>
    Reviewed-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
    Signed-off-by: Johannes Berg <johannes.berg@intel.com>

diff --git a/drivers/net/wireless/iwlwifi/mvm/rs.c b/drivers/net/wireless/iwlwifi/mvm/rs.c
index a69bd4c2de2a..a587b21e1fe1 100644
--- a/drivers/net/wireless/iwlwifi/mvm/rs.c
+++ b/drivers/net/wireless/iwlwifi/mvm/rs.c
@@ -492,7 +492,7 @@ static int rs_get_tbl_info_from_mcs(const u32 rate_n_flags,
 	u8 num_of_ant = get_num_of_ant_from_rate(rate_n_flags);
 	u8 mcs;
 
-	memset(tbl, 0, sizeof(struct iwl_scale_tbl_info));
+	memset(tbl, 0, offsetof(struct iwl_scale_tbl_info, win));
 	*rate_idx = iwl_hwrate_to_plcp_idx(rate_n_flags);
 
 	if (*rate_idx  == IWL_RATE_INVALID) {

