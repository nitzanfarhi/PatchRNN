commit 37d46dc21d708192b12aa13617ebe6a117b07363
Author: Michael Niedermayer <michael@niedermayer.cc>
Date:   Fri Apr 13 11:38:48 2018 +0200

    avformat/utils: Check cur_dts in update_initial_timestamps() more
    
    Fixes: runtime error: signed integer overflow: 18133149658382192 - -9223090561878065151 cannot be represented in type 'long long'
    Fixes: crbug 831552
    
    Reported-by: Matt Wolenetz <wolenetz@google.com>
    Reviewed-by: Matt Wolenetz <wolenetz@google.com>
    Signed-off-by: Michael Niedermayer <michael@niedermayer.cc>

diff --git a/libavformat/utils.c b/libavformat/utils.c
index 69f9653190..733c6d65dc 100644
--- a/libavformat/utils.c
+++ b/libavformat/utils.c
@@ -1129,6 +1129,7 @@ static void update_initial_timestamps(AVFormatContext *s, int stream_index,
     if (st->first_dts != AV_NOPTS_VALUE ||
         dts           == AV_NOPTS_VALUE ||
         st->cur_dts   == AV_NOPTS_VALUE ||
+        st->cur_dts < INT_MIN + RELATIVE_TS_BASE ||
         is_relative(dts))
         return;
 

