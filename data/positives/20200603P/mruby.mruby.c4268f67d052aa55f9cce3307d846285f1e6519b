commit c4268f67d052aa55f9cce3307d846285f1e6519b
Author: Yukihiro "Matz" Matsumoto <matz@ruby-lang.org>
Date:   Mon May 19 18:43:32 2014 +0900

    UINT16_MAX as symbol length is reserved; ref #2294

diff --git a/src/symbol.c b/src/symbol.c
index cf8f549c..148adc6f 100644
--- a/src/symbol.c
+++ b/src/symbol.c
@@ -43,7 +43,7 @@ sym_intern(mrb_state *mrb, const char *name, size_t len, mrb_bool lit)
   mrb_sym sym;
   char *p;
 
-  if (len > UINT16_MAX) {
+  if (len > (UINT16_MAX-1)) {   /* UINT16_MAX is reverved */
     mrb_raise(mrb, E_ARGUMENT_ERROR, "symbol length too long");
   }
   sname.lit = lit;

