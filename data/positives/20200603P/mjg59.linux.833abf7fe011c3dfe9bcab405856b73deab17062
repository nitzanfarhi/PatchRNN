commit 833abf7fe011c3dfe9bcab405856b73deab17062
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Oct 10 18:33:10 2006 +0900

    sh: Zero-out coherent buffer in consistent_alloc().
    
    Be sure to zero out the buffer, this was causing occasional problems
    under heavier PCI tests.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

diff --git a/arch/sh/mm/consistent.c b/arch/sh/mm/consistent.c
index c81e6b67ad30..38c82d890ffd 100644
--- a/arch/sh/mm/consistent.c
+++ b/arch/sh/mm/consistent.c
@@ -28,6 +28,7 @@ void *consistent_alloc(gfp_t gfp, size_t size, dma_addr_t *handle)
 	split_page(page, order);
 
 	ret = page_address(page);
+	memset(ret, 0, size);
 	*handle = virt_to_phys(ret);
 
 	/*

