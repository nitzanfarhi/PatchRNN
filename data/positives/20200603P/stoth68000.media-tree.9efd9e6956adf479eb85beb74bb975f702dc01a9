commit 9efd9e6956adf479eb85beb74bb975f702dc01a9
Author: Linus Walleij <linus.walleij@linaro.org>
Date:   Tue Feb 9 14:27:42 2016 +0100

    gpio: remember to finally free gpio_device
    
    When the device core reference count for the device goes to
    0 and it calls .release() we free resources and so can also
    finally free up the GPIO state container, struct gpio_device.
    
    Signed-off-by: Linus Walleij <linus.walleij@linaro.org>

diff --git a/drivers/gpio/gpiolib.c b/drivers/gpio/gpiolib.c
index 70e0fff0a8a7..36f8be3f910b 100644
--- a/drivers/gpio/gpiolib.c
+++ b/drivers/gpio/gpiolib.c
@@ -405,6 +405,7 @@ static void gpiodevice_release(struct device *dev)
 	cdev_del(&gdev->chrdev);
 	list_del(&gdev->list);
 	ida_simple_remove(&gpio_ida, gdev->id);
+	kfree(gdev);
 }
 
 /**

