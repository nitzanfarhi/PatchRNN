commit 97ce25fbd0766a83780e036ff2709c0089cf213e
Author: Yukihiro "Matz" Matsumoto <matz@ruby-lang.org>
Date:   Sat Sep 21 17:15:58 2013 +0900

    index to mrb_digitmap[] should always be positive

diff --git a/src/string.c b/src/string.c
index fa581f02..90852943 100644
--- a/src/string.c
+++ b/src/string.c
@@ -1500,7 +1500,7 @@ mrb_ptr_to_str(mrb_state *mrb, void *p)
   struct RString *p_str;
   char *p1;
   char *p2;
-  intptr_t n = (intptr_t)p;
+  uintptr_t n = (uintptr_t)p;
 
   p_str = str_new(mrb, NULL, 2 + sizeof(uintptr_t) * CHAR_BIT / 4);
   p1 = p_str->ptr;

