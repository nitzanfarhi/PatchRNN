commit 11679e1b90f6e52a3643efb45d06ea5adf65098a
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Wed Dec 11 00:27:09 2013 +0100

    avcodec/pthread_frame: Fix memleak of AVCodecContext on error
    
    Fixes CID1135767
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/pthread_frame.c b/libavcodec/pthread_frame.c
index 51a163384b..f7a40ca7ec 100644
--- a/libavcodec/pthread_frame.c
+++ b/libavcodec/pthread_frame.c
@@ -650,6 +650,7 @@ int ff_frame_thread_init(AVCodecContext *avctx)
         p->frame = av_frame_alloc();
         if (!p->frame) {
             err = AVERROR(ENOMEM);
+            av_freep(&copy);
             goto error;
         }
 

