commit 3eadc68ebd174f5bad51fe6e0bbcf6d6651c784c
Author: Jim Meyering <meyering@redhat.com>
Date:   Thu Oct 4 13:09:51 2012 +0200

    os-posix: avoid buffer overrun
    
    os_set_proc_name: Use pstrcpy, in place of strncpy and the
    ineffectual preceding assignment: name[sizeof(name) - 1] = 0;
    
    Signed-off-by: Jim Meyering <meyering@redhat.com>
    Signed-off-by: Anthony Liguori <aliguori@us.ibm.com>

diff --git a/os-posix.c b/os-posix.c
index eabccb8fe0..f855abb09a 100644
--- a/os-posix.c
+++ b/os-posix.c
@@ -148,8 +148,7 @@ void os_set_proc_name(const char *s)
     char name[16];
     if (!s)
         return;
-    name[sizeof(name) - 1] = 0;
-    strncpy(name, s, sizeof(name));
+    pstrcpy(name, sizeof(name), s);
     /* Could rewrite argv[0] too, but that's a bit more complicated.
        This simple way is enough for `top'. */
     if (prctl(PR_SET_NAME, name)) {

