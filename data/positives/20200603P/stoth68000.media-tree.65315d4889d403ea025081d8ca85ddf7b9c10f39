commit 65315d4889d403ea025081d8ca85ddf7b9c10f39
Author: Cong Ding <dinggnu@gmail.com>
Date:   Mon Jan 14 17:13:35 2013 +0000

    x86/boot: Fix minor fd leakage in tools/relocs.c
    
    The opened file should be closed.
    
    Signed-off-by: Cong Ding <dinggnu@gmail.com>
    Cc: Kusanagi Kouichi <slash@ac.auone-net.jp>
    Cc: Jarkko Sakkinen <jarkko.sakkinen@intel.com>
    Cc: Jiri Kosina <jkosina@suse.cz>
    Cc: Matt Fleming <matt.fleming@intel.com>
    Link: http://lkml.kernel.org/r/1358183628-27784-1-git-send-email-dinggnu@gmail.com
    Signed-off-by: Ingo Molnar <mingo@kernel.org>

diff --git a/arch/x86/tools/relocs.c b/arch/x86/tools/relocs.c
index 5a1847d61930..79d67bd507fa 100644
--- a/arch/x86/tools/relocs.c
+++ b/arch/x86/tools/relocs.c
@@ -814,12 +814,14 @@ int main(int argc, char **argv)
 	read_relocs(fp);
 	if (show_absolute_syms) {
 		print_absolute_symbols();
-		return 0;
+		goto out;
 	}
 	if (show_absolute_relocs) {
 		print_absolute_relocs();
-		return 0;
+		goto out;
 	}
 	emit_relocs(as_text, use_real_mode);
+out:
+	fclose(fp);
 	return 0;
 }

