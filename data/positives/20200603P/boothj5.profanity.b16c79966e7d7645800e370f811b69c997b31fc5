commit b16c79966e7d7645800e370f811b69c997b31fc5
Author: James Booth <boothj5@gmail.com>
Date:   Mon Jan 21 02:29:55 2013 +0000

    Handle NULL node

diff --git a/src/jabber.c b/src/jabber.c
index a8440a30..098def2b 100644
--- a/src/jabber.c
+++ b/src/jabber.c
@@ -1118,7 +1118,7 @@ _disco_request_handler(xmpp_conn_t * const conn, xmpp_stanza_t * const stanza,
     char *node_str = xmpp_stanza_get_attribute(incoming_query, STANZA_ATTR_NODE);
     char *from  = xmpp_stanza_get_attribute(stanza, STANZA_ATTR_FROM);
 
-    if (from != NULL) {
+    if (from != NULL && node_str != NULL) {
         xmpp_stanza_t *response = xmpp_stanza_new(ctx);
         xmpp_stanza_set_name(response, STANZA_NAME_IQ);
         xmpp_stanza_set_id(response, xmpp_stanza_get_id(stanza));

