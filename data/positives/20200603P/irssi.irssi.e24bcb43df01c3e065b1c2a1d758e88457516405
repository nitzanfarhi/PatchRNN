commit e24bcb43df01c3e065b1c2a1d758e88457516405
Author: Wouter Coekaerts <coekie@irssi.org>
Date:   Fri Aug 5 02:24:29 2005 +0000

    fix minor textbuffer leak, Bug 288 by Toby
    
    git-svn-id: http://svn.irssi.org/repos/irssi/trunk@3897 dbcabf3a-b0e7-0310-adc4-f8d773084564

diff --git a/src/fe-text/textbuffer-view.c b/src/fe-text/textbuffer-view.c
index c0853d8d..b8c12c07 100644
--- a/src/fe-text/textbuffer-view.c
+++ b/src/fe-text/textbuffer-view.c
@@ -1056,6 +1056,8 @@ static void view_bookmarks_check(TEXT_BUFFER_VIEW_REC *view, LINE_REC *line)
 			if (new_line != NULL) {
 				g_hash_table_insert(view->bookmarks,
 						    tmp->data, new_line);
+			} else {
+				g_free(tmp->data);
 			}
 		}
 		g_slist_free(rec.remove_list);

