commit 597f95e2bfbe9b83ed8b0761ebf4e7d55fd4df17
Author: Joel Schopp <jschopp@austin.ibm.com>
Date:   Fri Aug 12 14:34:58 2005 -0500

    [PATCH] ppc64: lparconfig.c memory leak
    
    This patch fixes a rare memory leak found by Coverity.
    
    Signed-off-by: Joel Schopp <jschopp@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

diff --git a/arch/ppc64/kernel/lparcfg.c b/arch/ppc64/kernel/lparcfg.c
index 9d034ff062b1..edad361a8db0 100644
--- a/arch/ppc64/kernel/lparcfg.c
+++ b/arch/ppc64/kernel/lparcfg.c
@@ -273,6 +273,7 @@ static void parse_system_parameter_string(struct seq_file *m)
 		if (!workbuffer) {
 			printk(KERN_ERR "%s %s kmalloc failure at line %d \n",
 			       __FILE__, __FUNCTION__, __LINE__);
+			kfree(local_buffer);			
 			return;
 		}
 #ifdef LPARCFG_DEBUG

