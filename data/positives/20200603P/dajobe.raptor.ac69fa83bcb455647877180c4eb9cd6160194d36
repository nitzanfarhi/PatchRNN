commit ac69fa83bcb455647877180c4eb9cd6160194d36
Author: Dave Beckett <dave@dajobe.org>
Date:   Sat Feb 23 15:27:35 2013 -0800

    (raptor_namespaces_find_namespace): Be resilient to NULL or empty stack.

diff --git a/src/raptor_namespace.c b/src/raptor_namespace.c
index b784841c..d68c460a 100644
--- a/src/raptor_namespace.c
+++ b/src/raptor_namespace.c
@@ -419,8 +419,12 @@ raptor_namespaces_find_namespace(raptor_namespace_stack *nstack,
 {
   raptor_namespace* ns;
   unsigned int hash = raptor_hash_ns_string(prefix, prefix_length);
-  const int bucket = hash % (nstack->table_size);
+  int bucket;
+
+  if(!nstack || !nstack->table_size)
+    return NULL;
 
+  bucket = hash % (nstack->table_size);
   for(ns = nstack->table[bucket]; ns ; ns = ns->next) {
     if(!prefix) {
       if(!ns->prefix)

