commit 8d6841d7641a418958d286e848f03858cbb391ee
Author: Danny Auble <da@schedmd.com>
Date:   Wed Jan 11 16:04:28 2017 -0700

    Fix minor memory leak.

diff --git a/src/sacctmgr/resource_functions.c b/src/sacctmgr/resource_functions.c
index 88acdb81d4..9c99dcc199 100644
--- a/src/sacctmgr/resource_functions.c
+++ b/src/sacctmgr/resource_functions.c
@@ -690,12 +690,12 @@ extern int sacctmgr_add_res(int argc, char **argv)
 			if (!added)
 				slurmdb_destroy_res_rec(res);
 
-			if (res->percent_used > 100)
-				break;
-
 			if (found_itr)
 				list_iterator_destroy(found_itr);
 
+			if (res->percent_used > 100)
+				break;
+
 			list_iterator_reset(clus_itr);
 		}
 	}

