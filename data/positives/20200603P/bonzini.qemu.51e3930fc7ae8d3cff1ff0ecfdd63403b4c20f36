commit 51e3930fc7ae8d3cff1ff0ecfdd63403b4c20f36
Author: Christophe Lyon <christophe.lyon@st.com>
Date:   Tue Feb 15 13:44:44 2011 +0000

    target-arm: fix unsigned 64 bit right shifts.
    
    Fix range of shift amounts which always give 0 as result.
    
    Signed-off-by: Christophe Lyon <christophe.lyon@st.com>
    Reviewed-by: Peter Maydell <peter.maydell@linaro.org>
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

diff --git a/target-arm/neon_helper.c b/target-arm/neon_helper.c
index 52ef994d2b..c97aa7dbd4 100644
--- a/target-arm/neon_helper.c
+++ b/target-arm/neon_helper.c
@@ -639,7 +639,7 @@ uint32_t HELPER(neon_rshl_u32)(uint32_t val, uint32_t shiftop)
 uint64_t HELPER(neon_rshl_u64)(uint64_t val, uint64_t shiftop)
 {
     int8_t shift = (uint8_t)shiftop;
-    if (shift >= 64 || shift < 64) {
+    if (shift >= 64 || shift < -64) {
         val = 0;
     } else if (shift == -64) {
         /* Rounding a 1-bit result just preserves that bit.  */

