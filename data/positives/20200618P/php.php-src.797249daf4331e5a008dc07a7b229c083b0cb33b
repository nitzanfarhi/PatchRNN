commit 797249daf4331e5a008dc07a7b229c083b0cb33b
Author: Moriyoshi Koizumi <moriyoshi@php.net>
Date:   Sun Sep 6 14:43:09 2009 +0000

    - Fix leaks.

diff --git a/Zend/zend.h b/Zend/zend.h
index f6fd95de83..23e7c37658 100644
--- a/Zend/zend.h
+++ b/Zend/zend.h
@@ -196,8 +196,8 @@ char *alloca ();
 #else
 # define ALLOCA_FLAG(name)
 # define SET_ALLOCA_FLAG(name)
-# define do_alloca(p, use_heap)		emalloc(p)
-# define free_alloca(p, use_heap)	efree(p)
+# define do_alloca(p, use_heap)		emalloc(p), use_heap = 1
+# define free_alloca(p, use_heap)	efree(p), use_heap = 1
 #endif
 
 #if ZEND_DEBUG

