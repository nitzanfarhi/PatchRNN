commit 0ffdd581497286e8af529b0b39770c01eab15b30
Author: Roel Kluin <12o3l@tiscali.nl>
Date:   Tue Oct 23 20:52:48 2007 -0700

    [9P]: Fix missing unlock before return in p9_mux_poll_start
    
    Signed-off-by: Roel Kluin <12o3l@tiscali.nl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/9p/mux.c b/net/9p/mux.c
index f14014793bed..c9f0805048e4 100644
--- a/net/9p/mux.c
+++ b/net/9p/mux.c
@@ -222,8 +222,10 @@ static int p9_mux_poll_start(struct p9_conn *m)
 	}
 
 	if (i >= ARRAY_SIZE(p9_mux_poll_tasks)) {
-		if (vptlast == NULL)
+		if (vptlast == NULL) {
+			mutex_unlock(&p9_mux_task_lock);
 			return -ENOMEM;
+		}
 
 		P9_DPRINTK(P9_DEBUG_MUX, "put in proc %d\n", i);
 		list_add(&m->mux_list, &vptlast->mux_list);

