commit 47c5ee34d8d913a1ab1ae87544475c136ea25b26
Author: Sudip Mukherjee <sudipm.mukherjee@gmail.com>
Date:   Mon Nov 16 19:16:40 2015 +0530

    clk: versatile: fix memory leak
    
    If of_clk_parent_fill() fails then we printed an error message and
    returned. But we missed freeing sp810.
    
    Signed-off-by: Sudip Mukherjee <sudip@vectorindia.org>
    Signed-off-by: Stephen Boyd <sboyd@codeaurora.org>

diff --git a/drivers/clk/versatile/clk-sp810.c b/drivers/clk/versatile/clk-sp810.c
index a1cdef6b0f90..6a36c8bcb5de 100644
--- a/drivers/clk/versatile/clk-sp810.c
+++ b/drivers/clk/versatile/clk-sp810.c
@@ -102,6 +102,7 @@ static void __init clk_sp810_of_setup(struct device_node *node)
 
 	if (of_clk_parent_fill(node, parent_names, num) != num) {
 		pr_warn("Failed to obtain parent clocks for SP810!\n");
+		kfree(sp810);
 		return;
 	}
 

