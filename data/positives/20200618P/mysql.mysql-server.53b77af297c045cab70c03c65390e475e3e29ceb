commit 53b77af297c045cab70c03c65390e475e3e29ceb
Author: David Zhao <david.zhao@oracle.com>
Date:   Sat Jun 14 11:32:08 2014 +0800

    A memory leak fix.

diff --git a/sql/spatial.cc b/sql/spatial.cc
index 3d84231a52c..7863a3be297 100644
--- a/sql/spatial.cc
+++ b/sql/spatial.cc
@@ -3933,6 +3933,12 @@ void parse_wkb_data(Geometry *geom, const char *p, size_t num_geoms)
         ent.set_nbytes(nbytes);
         ent.set_owner(geom);
         geom->shallow_push(&ent);
+        /*
+          The inner rings object isn't adopted by others in shallow_push,
+          so we must delete it here before donating.
+         */
+        if (ent.inner_rings())
+          delete ent.inner_rings();
         // The object 'ent' doesn't have any data of its own.
         ent.donate_data();
         bo= plgn_step.get_current_byte_order();

