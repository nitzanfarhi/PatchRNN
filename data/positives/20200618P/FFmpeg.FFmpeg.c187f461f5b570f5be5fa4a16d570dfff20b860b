commit c187f461f5b570f5be5fa4a16d570dfff20b860b
Author: Baptiste Coudurier <baptiste.coudurier@gmail.com>
Date:   Fri Jun 27 21:43:15 2008 +0000

    unset Track sets, relying in AVStream->priv_data and will be freed in av_close_input_file
    
    Originally committed as revision 14016 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/mxf.c b/libavformat/mxf.c
index e2f4997fad..921b49570a 100644
--- a/libavformat/mxf.c
+++ b/libavformat/mxf.c
@@ -1015,6 +1015,9 @@ static int mxf_read_close(AVFormatContext *s)
         case MaterialPackage:
             av_freep(&((MXFPackage *)mxf->metadata_sets[i])->tracks_refs);
             break;
+        case Track:
+            mxf->metadata_sets[i] = NULL; /* will be freed later */
+            break;
         default:
             break;
         }

