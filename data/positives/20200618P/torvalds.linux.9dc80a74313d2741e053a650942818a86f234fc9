commit 9dc80a74313d2741e053a650942818a86f234fc9
Author: Geliang Tang <geliangtang@163.com>
Date:   Wed Sep 30 03:48:50 2015 -0700

    amd-xgbe: fix potential memory leak in xgbe-debugfs
    
    Added kfree() to avoid the memory leak when debugfs_create_dir() fails.
    
    Signed-off-by: Geliang Tang <geliangtang@163.com>
    Acked-by: Tom Lendacky <thomas.lendacky@amd.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/ethernet/amd/xgbe/xgbe-debugfs.c b/drivers/net/ethernet/amd/xgbe/xgbe-debugfs.c
index 2c063b60db4b..66137ffea3f8 100644
--- a/drivers/net/ethernet/amd/xgbe/xgbe-debugfs.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-debugfs.c
@@ -330,6 +330,7 @@ void xgbe_debugfs_init(struct xgbe_prv_data *pdata)
 	pdata->xgbe_debugfs = debugfs_create_dir(buf, NULL);
 	if (!pdata->xgbe_debugfs) {
 		netdev_err(pdata->netdev, "debugfs_create_dir failed\n");
+		kfree(buf);
 		return;
 	}
 

