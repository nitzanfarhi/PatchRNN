commit eaf9393bb79a9c7c8e708669f9581ca466122430
Author: Jarkko Nikula <jarkko.nikula@nokia.com>
Date:   Tue May 12 11:20:02 2009 -0700

    ARM: OMAP2: Fix tusb6010 init error and compilation warning
    
    Fix "tusb6010 init error 5, -19" and compilation warning from function
    tusb6010_platform_retime "warning: 'sysclk_ps' is used uninitialized in this
    function".
    
    I suppose commit c094ba34b8f780885d029ce3c2715a194b780e5d was meant to test
    for zero fclk_ps instead of sysclk_ps.
    
    Signed-off-by: Jarkko Nikula <jarkko.nikula@nokia.com>
    Cc: Roel Kluin <roel.kluin@gmail.com>
    Tested-by: Kalle Valo <kalle.valo@iki.fi>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

diff --git a/arch/arm/mach-omap2/usb-tusb6010.c b/arch/arm/mach-omap2/usb-tusb6010.c
index 8df55f40f4c0..8622c24cd270 100644
--- a/arch/arm/mach-omap2/usb-tusb6010.c
+++ b/arch/arm/mach-omap2/usb-tusb6010.c
@@ -187,7 +187,7 @@ int tusb6010_platform_retime(unsigned is_refclk)
 	unsigned	sysclk_ps;
 	int		status;
 
-	if (!refclk_psec || sysclk_ps == 0)
+	if (!refclk_psec || fclk_ps == 0)
 		return -ENODEV;
 
 	sysclk_ps = is_refclk ? refclk_psec : TUSB6010_OSCCLK_60;

