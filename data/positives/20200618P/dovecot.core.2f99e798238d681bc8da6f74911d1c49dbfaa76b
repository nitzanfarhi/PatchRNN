commit 2f99e798238d681bc8da6f74911d1c49dbfaa76b
Author: Timo Sirainen <tss@iki.fi>
Date:   Thu Oct 7 22:38:05 2004 +0300

    Missing error checking in epoll_create(). Patch by Andrey Panin
    
    --HG--
    branch : HEAD

diff --git a/src/lib/ioloop-epoll.c b/src/lib/ioloop-epoll.c
index 5ae3a32ea..ed03ae42a 100644
--- a/src/lib/ioloop-epoll.c
+++ b/src/lib/ioloop-epoll.c
@@ -57,6 +57,8 @@ void io_loop_handler_init(struct ioloop *ioloop)
 	data->fd_index = p_new(ioloop->pool, struct io_list *, data->idx_size);
 
 	data->epfd = epoll_create(INITIAL_EPOLL_EVENTS);
+	if (data->epfd < 0)
+		i_panic("epoll_create(): %m");
 }
 
 void io_loop_handler_deinit(struct ioloop *ioloop)

