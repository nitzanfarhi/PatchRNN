commit b18ee3721c22f4ba973bd5e5747a2958ada00d66
Author: Greg Farnum <gregf@hq.newdream.net>
Date:   Thu Aug 19 12:01:11 2010 -0700

    backtrace: fix segfault in tcmalloc.
    The print function is only called when we're about to crash anyway,
    and the datamember 'foo' is allocated by ptmalloc, not tcmalloc. Freeing
    it via tcmalloc causes its own crash which pollutes our debugging and
    incorrectly sticks tcmalloc into the stack. So, just don't free.

diff --git a/src/common/BackTrace.cc b/src/common/BackTrace.cc
index e8a7542d03..e6d1f74ac7 100644
--- a/src/common/BackTrace.cc
+++ b/src/common/BackTrace.cc
@@ -43,7 +43,6 @@ void BackTrace::print(std::ostream& out)
 	function[sz-1] = 0;
       }
       out << " " << (i-skip+1) << ": (" << function << end << std::endl;
-      free(foo);
       //fprintf(out, "    %s:%s\n", stack.strings[i], function);
     } else {
       // didn't find the mangled name, just print the whole line

