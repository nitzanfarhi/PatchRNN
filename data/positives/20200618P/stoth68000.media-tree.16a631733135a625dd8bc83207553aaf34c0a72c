commit 16a631733135a625dd8bc83207553aaf34c0a72c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Nov 27 00:37:05 2005 +0100

    [PATCH] drivers/message/i2o/pci.c: fix a NULL pointer dereference
    
    The Coverity checker spotted this obvious NULL pointer dereference.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/drivers/message/i2o/pci.c b/drivers/message/i2o/pci.c
index 66c03e882570..81ef306cb124 100644
--- a/drivers/message/i2o/pci.c
+++ b/drivers/message/i2o/pci.c
@@ -421,8 +421,8 @@ static int __devinit i2o_pci_probe(struct pci_dev *pdev,
 	i2o_pci_free(c);
 
       free_controller:
-	i2o_iop_free(c);
 	put_device(c->device.parent);
+	i2o_iop_free(c);
 
       disable:
 	pci_disable_device(pdev);

