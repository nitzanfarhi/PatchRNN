commit 24d08ff94ad8b0f51534e46f87cf5a2f2f85d22a
Author: setharnold <seth.arnold@gmail.com>
Date:   Wed Feb 14 17:46:38 2018 -0800

    fix unchecked integer multiplication overflow
    
    Hello, this fixes an unchecked integer multiplication overflow. Thanks.

diff --git a/src/lib/openjp2/image.c b/src/lib/openjp2/image.c
index 13bcb8e4..fe373905 100644
--- a/src/lib/openjp2/image.c
+++ b/src/lib/openjp2/image.c
@@ -48,8 +48,8 @@ opj_image_t* OPJ_CALLCONV opj_image_create(OPJ_UINT32 numcmpts,
         image->color_space = clrspc;
         image->numcomps = numcmpts;
         /* allocate memory for the per-component information */
-        image->comps = (opj_image_comp_t*)opj_calloc(1,
-                       image->numcomps * sizeof(opj_image_comp_t));
+        image->comps = (opj_image_comp_t*)opj_calloc(image->numcomps,
+                       sizeof(opj_image_comp_t));
         if (!image->comps) {
             /* TODO replace with event manager, breaks API */
             /* fprintf(stderr,"Unable to allocate memory for image.\n"); */

