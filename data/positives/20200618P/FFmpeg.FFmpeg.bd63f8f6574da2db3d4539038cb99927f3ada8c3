commit bd63f8f6574da2db3d4539038cb99927f3ada8c3
Author: Michael Niedermayer <michaelni@gmx.at>
Date:   Sat May 11 21:03:54 2013 +0200

    ffv1enc: Fix memleak
    
    Signed-off-by: Michael Niedermayer <michaelni@gmx.at>

diff --git a/libavcodec/ffv1enc.c b/libavcodec/ffv1enc.c
index ffc8230105..edddcb2d9f 100644
--- a/libavcodec/ffv1enc.c
+++ b/libavcodec/ffv1enc.c
@@ -1015,6 +1015,7 @@ static int encode_frame(AVCodecContext *avctx, AVPacket *pkt,
     ff_init_range_encoder(c, pkt->data, pkt->size);
     ff_build_rac_states(c, 0.05 * (1LL << 32), 256 - 8);
 
+    av_frame_unref(p);
     av_frame_ref(p, pict);
     p->pict_type = AV_PICTURE_TYPE_I;
 

