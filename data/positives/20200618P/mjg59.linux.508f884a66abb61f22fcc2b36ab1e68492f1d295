commit 508f884a66abb61f22fcc2b36ab1e68492f1d295
Author: Masahiro Yamada <yamada.masahiro@socionext.com>
Date:   Mon Dec 28 19:23:08 2015 +0900

    clk: make sure parent is not NULL in clk_fetch_parent_index()
    
    If parent is given with NULL, clk_fetch_parent_index() could return
    a positive index value.
    
    Currently, parent is checked by the callers of this function, but
    it would be safer to do it in this function.
    
    Signed-off-by: Masahiro Yamada <yamada.masahiro@socionext.com>
    Reviewed-by: Vladimir Zapolskiy <vz@mleia.com>
    Signed-off-by: Stephen Boyd <sboyd@codeaurora.org>

diff --git a/drivers/clk/clk.c b/drivers/clk/clk.c
index 03820467fbba..da7c9a523f02 100644
--- a/drivers/clk/clk.c
+++ b/drivers/clk/clk.c
@@ -1066,6 +1066,9 @@ static int clk_fetch_parent_index(struct clk_core *core,
 {
 	int i;
 
+	if (!parent)
+		return -EINVAL;
+
 	/*
 	 * find index of new parent clock using cached parent ptrs,
 	 * or if not yet cached, use string name comparison and cache

