commit a775406ec439bc585a17f8edffd47641390d6e5a
Author: Magnus Hagander <magnus@hagander.net>
Date:   Sun Oct 30 14:10:39 2016 +0100

    Fix memory leak in tar file padding
    
    Spotted by Coverity, patch by Michael Paquier

diff --git a/src/bin/pg_basebackup/walmethods.c b/src/bin/pg_basebackup/walmethods.c
index 1ecc23c256..40c8a5c697 100644
--- a/src/bin/pg_basebackup/walmethods.c
+++ b/src/bin/pg_basebackup/walmethods.c
@@ -442,9 +442,14 @@ tar_write_padding_data(TarMethodFile * f, size_t bytes)
 		ssize_t		r = tar_write(f, zerobuf, bytestowrite);
 
 		if (r < 0)
+		{
+			pg_free(zerobuf);
 			return false;
+		}
 		bytesleft -= r;
 	}
+
+	pg_free(zerobuf);
 	return true;
 }
 

