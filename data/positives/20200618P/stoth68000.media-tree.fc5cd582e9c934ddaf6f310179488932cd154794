commit fc5cd582e9c934ddaf6f310179488932cd154794
Author: Chris Mason <mason@suse.com>
Date:   Wed Feb 1 03:06:48 2006 -0800

    [PATCH] reiserfs: zero b_private when allocating buffer heads
    
    The b_private field in buffer heads needs to be zero filled when the
    buffers are allocated.  Thanks to Nathan Scott for finding this.  It was
    causing problems on systems with both XFS and reiserfs.
    
    Signed-off-by: Chris Mason <mason@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/fs/buffer.c b/fs/buffer.c
index 8bcbac87a28c..5e4a90ee103f 100644
--- a/fs/buffer.c
+++ b/fs/buffer.c
@@ -1022,6 +1022,7 @@ struct buffer_head *alloc_page_buffers(struct page *page, unsigned long size,
 
 		bh->b_state = 0;
 		atomic_set(&bh->b_count, 0);
+		bh->b_private = NULL;
 		bh->b_size = size;
 
 		/* Link the buffer to its page */

