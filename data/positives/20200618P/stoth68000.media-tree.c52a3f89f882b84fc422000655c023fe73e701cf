commit c52a3f89f882b84fc422000655c023fe73e701cf
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Jun 18 22:51:26 2005 -0700

    [NETLINK]: Fix RTA_NEST_CANCEL().
    
    Only skb_trim() if 'start' is non-NULL.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/linux/rtnetlink.h b/include/linux/rtnetlink.h
index 5a5cda160267..6fff8c4c99c7 100644
--- a/include/linux/rtnetlink.h
+++ b/include/linux/rtnetlink.h
@@ -924,7 +924,8 @@ extern void __rta_fill(struct sk_buff *skb, int attrtype, int attrlen, const voi
 	(skb)->len; })
 
 #define RTA_NEST_CANCEL(skb, start) \
-({	skb_trim(skb, (unsigned char *) (start) - (skb)->data); \
+({	if (start) \
+		skb_trim(skb, (unsigned char *) (start) - (skb)->data); \
 	-1; })
 
 #define RTA_GET_U32(rta) \

