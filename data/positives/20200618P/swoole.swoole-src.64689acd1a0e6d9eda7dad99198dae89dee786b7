commit 64689acd1a0e6d9eda7dad99198dae89dee786b7
Author: Artem Naluzhnyy <Artem.Naluzhnyy@gmail.com>
Date:   Tue Jan 31 13:19:04 2017 +0200

    Fix: memory leak
    
    Reference: Coverity CID #1397905

diff --git a/src/core/hashmap.c b/src/core/hashmap.c
index 89101286..5daa5366 100644
--- a/src/core/hashmap.c
+++ b/src/core/hashmap.c
@@ -115,6 +115,7 @@ swHashMap* swHashMap_new(uint32_t bucket_num, swHashMap_dtor dtor)
     if (!(root->hh.tbl))
     {
         swWarn("malloc for table failed.");
+        sw_free(hmap);
         return NULL;
     }
 
@@ -127,6 +128,7 @@ swHashMap* swHashMap_new(uint32_t bucket_num, swHashMap_dtor dtor)
     if (!root->hh.tbl->buckets)
     {
         swWarn("malloc for buckets failed.");
+        sw_free(hmap);
         return NULL;
     }
     memset(root->hh.tbl->buckets, 0, SW_HASHMAP_INIT_BUCKET_N * sizeof(struct UT_hash_bucket));

