commit bd69fe8448024258d046e2a15d4cf5c498188144
Author: Kevin Wolf <kwolf@redhat.com>
Date:   Fri Jun 11 10:19:41 2010 +0200

    qemu-option: Fix uninitialized value in append_option_parameter
    
    When dest is NULL, i.e. a new copy of the list is created, we don't get a
    properly terminated list after the realloc. Initialize it as an empty list.
    
    Signed-off-by: Kevin Wolf <kwolf@redhat.com>
    Signed-off-by: Anthony Liguori <aliguori@us.ibm.com>

diff --git a/qemu-option.c b/qemu-option.c
index acd74f9124..f88486580c 100644
--- a/qemu-option.c
+++ b/qemu-option.c
@@ -378,6 +378,7 @@ QEMUOptionParameter *append_option_parameters(QEMUOptionParameter *dest,
     num_options += count_option_parameters(list);
 
     dest = qemu_realloc(dest, (num_options + 1) * sizeof(QEMUOptionParameter));
+    dest[num_dest_options].name = NULL;
 
     while (list && list->name) {
         if (get_option_parameter(dest, list->name) == NULL) {

