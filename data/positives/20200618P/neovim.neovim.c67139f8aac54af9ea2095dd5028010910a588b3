commit c67139f8aac54af9ea2095dd5028010910a588b3
Author: nthanben <39383885+nthanben@users.noreply.github.com>
Date:   Thu May 24 14:30:21 2018 -0700

    vim-patch:8.0.0503: endless loop in updating folds with 32 bit ints (#8433)
    
    Problem:    Endless loop in updating folds with 32 bit ints.
    Solution:   Subtract from LHS instead of add to the RHS. (Matthew Malcomson)
    vim/vim@9d20ce6

diff --git a/src/nvim/fold.c b/src/nvim/fold.c
index ad9cd4d56..7a95f4ab0 100644
--- a/src/nvim/fold.c
+++ b/src/nvim/fold.c
@@ -2445,7 +2445,7 @@ static linenr_T foldUpdateIEMSRecurse(garray_T *gap, int level,
   if (lvl < level) {
     /* End of fold found, update the length when it got shorter. */
     if (fp->fd_len != flp->lnum - fp->fd_top) {
-      if (fp->fd_top + fp->fd_len > bot + 1) {
+      if (fp->fd_top + fp->fd_len - 1 > bot) {
         /* fold continued below bot */
         if (getlevel == foldlevelMarker
             || getlevel == foldlevelExpr

