commit bdca742ac8bf379d18c9f47baec9e35e94103d50
Author: Dominik Bartkiewicz <bart@schedmd.com>
Date:   Mon Jun 13 12:29:35 2016 +0200

    fix 'CID 45058: Resource leak (RESOURCE_LEAK)'

diff --git a/src/common/hostlist.c b/src/common/hostlist.c
index dd57f3599e..f9cb0a4a6e 100644
--- a/src/common/hostlist.c
+++ b/src/common/hostlist.c
@@ -2216,10 +2216,13 @@ char *hostlist_shift_range(hostlist_t hl)
 {
 	int i;
 	char *buf;
-	hostlist_t hltmp = hostlist_new();
-	if (!hltmp || !hl)
+	hostlist_t hltmp ;
+
+	if (!hl)
 		return NULL;
 
+	hltmp = hostlist_new();
+
 	LOCK_HOSTLIST(hl);
 
 	if (hl->nranges == 0) {

