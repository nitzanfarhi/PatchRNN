commit 1adcb71092f6461c4002ccf29d316f6da3e1f39b
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed Feb 25 14:19:56 2009 +0000

    [CIFS] add extra null attr check
    
    Although attr == NULL can not happen, this makes cifs_set_file_info safer
    in the future since it may not be obvious that the caller can not set
    attr to NULL.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

diff --git a/fs/cifs/inode.c b/fs/cifs/inode.c
index 4690a360c855..a8797cc60805 100644
--- a/fs/cifs/inode.c
+++ b/fs/cifs/inode.c
@@ -763,6 +763,9 @@ cifs_set_file_info(struct inode *inode, struct iattr *attrs, int xid,
 	struct cifsTconInfo *pTcon = cifs_sb->tcon;
 	FILE_BASIC_INFO	info_buf;
 
+	if (attrs == NULL)
+		return -EINVAL;
+
 	if (attrs->ia_valid & ATTR_ATIME) {
 		set_time = true;
 		info_buf.LastAccessTime =

