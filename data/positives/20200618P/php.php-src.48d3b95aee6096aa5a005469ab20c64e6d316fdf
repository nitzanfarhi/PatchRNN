commit 48d3b95aee6096aa5a005469ab20c64e6d316fdf
Author: Dmitry Stogov <dmitry@zend.com>
Date:   Wed Apr 9 11:56:48 2014 +0400

    Fixed NULL pointer dereferencing

diff --git a/ext/mbstring/php_mbregex.c b/ext/mbstring/php_mbregex.c
index e9307df5d7..9a82f10104 100644
--- a/ext/mbstring/php_mbregex.c
+++ b/ext/mbstring/php_mbregex.c
@@ -973,7 +973,9 @@ static void _php_mb_regex_ereg_replace_exec(INTERNAL_FUNCTION_PARAMETERS, OnigOp
 						!ZVAL_IS_UNDEF(&retval)) {
 					convert_to_string_ex(&retval);
 					smart_str_appendl(&out_buf, Z_STRVAL(retval), Z_STRLEN(retval));
-					eval_buf.s->len = 0;
+					if (eval_buf.s) {
+						eval_buf.s->len = 0;
+					}
 					zval_ptr_dtor(&retval);
 				} else {
 					efree(description);

