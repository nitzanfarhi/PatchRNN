commit 585782e0847f322b9167642e9beae04c8cbff958
Author: tomas@whalegate.ndb.mysql.com <>
Date:   Wed Mar 21 09:23:49 2007 +0100

    Bug #26825 MySQL Server Crashes in high load
      - initialize to NULL, to avoid call of free on uninitialized variable

diff --git a/sql/ha_ndbcluster.cc b/sql/ha_ndbcluster.cc
index b091ad10fd3..ab7c3e2edc8 100644
--- a/sql/ha_ndbcluster.cc
+++ b/sql/ha_ndbcluster.cc
@@ -6063,7 +6063,7 @@ int ndbcluster_discover(handlerton *hton, THD* thd, const char *db,
   int error= 0;
   NdbError ndb_error;
   uint len;
-  const void* data;
+  const void* data= NULL;
   Ndb* ndb;
   char key[FN_REFLEN];
   DBUG_ENTER("ndbcluster_discover");
@@ -6131,6 +6131,7 @@ int ndbcluster_discover(handlerton *hton, THD* thd, const char *db,
 
   DBUG_RETURN(0);
 err:
+  my_free((char*)data, MYF(MY_ALLOW_ZERO_PTR));
   if (share)
     free_share(&share);
   if (ndb_error.code)

