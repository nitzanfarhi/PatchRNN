commit 69017a5f3c5822ded82b1f02e2371306150fdecf
Author: Anthony Tong <atong@trustedcs.com>
Date:   Mon Feb 27 12:12:17 2012 -0500

    rdpsnd: follow rdpdr and free the stream from svc_plugin

diff --git a/channels/rdpsnd/rdpsnd_main.c b/channels/rdpsnd/rdpsnd_main.c
index 48b545531..2d9fe27de 100644
--- a/channels/rdpsnd/rdpsnd_main.c
+++ b/channels/rdpsnd/rdpsnd_main.c
@@ -395,6 +395,7 @@ static void rdpsnd_process_receive(rdpSvcPlugin* plugin, STREAM* data_in)
 	if (rdpsnd->expectingWave)
 	{
 		rdpsnd_process_message_wave(rdpsnd, data_in);
+		stream_free(data_in);
 		return;
 	}
 
@@ -425,6 +426,8 @@ static void rdpsnd_process_receive(rdpSvcPlugin* plugin, STREAM* data_in)
 			DEBUG_WARN("unknown msgType %d", msgType);
 			break;
 	}
+
+	stream_free(data_in);
 }
 
 static void rdpsnd_register_device_plugin(rdpsndPlugin* rdpsnd, rdpsndDevicePlugin* device)

