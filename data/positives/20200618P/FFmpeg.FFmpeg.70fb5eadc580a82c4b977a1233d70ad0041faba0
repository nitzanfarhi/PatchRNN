commit 70fb5eadc580a82c4b977a1233d70ad0041faba0
Author: Simon Thelen <ffmpeg-dev@c-14.de>
Date:   Mon Nov 2 16:36:16 2015 +0100

    ffmpeg: Don't try and write sdp info if none of the outputs had an rtp format.
    
    Fixes a segfault when trying to write nonexistent rtp information.
    
    Signed-off-by: Simon Thelen <ffmpeg-dev@c-14.de>
    Signed-off-by: Michael Niedermayer <michael@niedermayer.cc>

diff --git a/ffmpeg.c b/ffmpeg.c
index d3b8c4d801..00d5476b7c 100644
--- a/ffmpeg.c
+++ b/ffmpeg.c
@@ -2447,6 +2447,9 @@ static void print_sdp(void)
         }
     }
 
+    if (!j)
+        goto fail;
+
     av_sdp_create(avc, j, sdp, sizeof(sdp));
 
     if (!sdp_filename) {
@@ -2462,6 +2465,7 @@ static void print_sdp(void)
         }
     }
 
+fail:
     av_freep(&avc);
 }
 

