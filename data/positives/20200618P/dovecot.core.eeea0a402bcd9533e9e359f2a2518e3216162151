commit eeea0a402bcd9533e9e359f2a2518e3216162151
Author: Timo Sirainen <tss@iki.fi>
Date:   Fri Jan 27 01:00:11 2006 +0200

    Fixed memory leaks
    
    --HG--
    branch : HEAD

diff --git a/src/lib-sql/driver-mysql.c b/src/lib-sql/driver-mysql.c
index c9ddc59fd..fbbd43239 100644
--- a/src/lib-sql/driver-mysql.c
+++ b/src/lib-sql/driver-mysql.c
@@ -358,6 +358,7 @@ static void driver_mysql_query(struct sql_db *db, const char *query,
 	result = sql_query_s(db, query);
 	result->callback = TRUE;
 	callback(result, context);
+	result->callback = FALSE;
 	sql_result_free(result);
 }
 
diff --git a/src/lib-sql/driver-sqlite.c b/src/lib-sql/driver-sqlite.c
index 414a262f0..e2ae38498 100644
--- a/src/lib-sql/driver-sqlite.c
+++ b/src/lib-sql/driver-sqlite.c
@@ -109,6 +109,7 @@ static void driver_sqlite_query(struct sql_db *db, const char *query,
 	result = sql_query_s(db, query);
 	result->callback = TRUE;
 	callback(result, context);
+	result->callback = FALSE;
 	sql_result_free(result);
 }
 

