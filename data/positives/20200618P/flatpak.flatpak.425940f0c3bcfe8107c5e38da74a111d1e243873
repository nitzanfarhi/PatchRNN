commit 425940f0c3bcfe8107c5e38da74a111d1e243873
Author: Matthew Leeds <matthew.leeds@endlessm.com>
Date:   Wed Aug 15 12:11:55 2018 -0700

    create-usb: Fix a leak of the list of extensions
    
    This only fixes the leak when we don't hit an error condition. To fix it
    in that case we need an autoptr for deep lists.
    
    Closes: #1966
    Approved by: alexlarsson

diff --git a/app/flatpak-builtins-create-usb.c b/app/flatpak-builtins-create-usb.c
index 7ded35a1..2412390c 100644
--- a/app/flatpak-builtins-create-usb.c
+++ b/app/flatpak-builtins-create-usb.c
@@ -155,6 +155,8 @@ add_related (GHashTable   *all_refs,
       g_hash_table_insert (all_refs, g_steal_pointer (&ext_collection_ref), c_s);
     }
 
+  g_list_free_full (extensions, (GDestroyNotify) flatpak_extension_free);
+
   return TRUE;
 }
 

