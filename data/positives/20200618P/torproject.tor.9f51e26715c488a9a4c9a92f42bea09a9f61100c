commit 9f51e26715c488a9a4c9a92f42bea09a9f61100c
Author: Roger Dingledine <arma@torproject.org>
Date:   Tue Nov 30 16:52:19 2010 -0500

    fix memory leak introduced in 26e89742
    
    found via valgrind

diff --git a/src/or/dirserv.c b/src/or/dirserv.c
index 4f793dc74..a394bf62e 100644
--- a/src/or/dirserv.c
+++ b/src/or/dirserv.c
@@ -873,6 +873,7 @@ directory_remove_invalid(void)
     directory_set_dirty();
 
   routerlist_assert_ok(rl);
+  smartlist_free(nodes);
 }
 
 /** Mark the directory as <b>dirty</b> -- when we're next asked for a

