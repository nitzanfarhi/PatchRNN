commit f125a134011b9ff3842a5a99d3592b02e82cec41
Author: Tamas Szekeres <szekerest@gmail.com>
Date:   Mon Feb 20 22:32:10 2017 +0100

    Legend icon for label layers should not rotate (#5391)

diff --git a/maplegend.c b/maplegend.c
index b02f12ce..4c2d3773 100644
--- a/maplegend.c
+++ b/maplegend.c
@@ -387,6 +387,7 @@ int msDrawLegendIcon(mapObj *map, layerObj *lp, classObj *theclass,
     initTextSymbol(&ts);
     msPopulateTextSymbolForLabelAndString(&ts,theclass->labels[0],msStrdup("Az"),lp->scalefactor*image_draw->resolutionfactor,image_draw->resolutionfactor, duplicate_always);
     ts.label->size = height - 1;
+    ts.rotation = 0;
     ret = msComputeTextPath(map,&ts);
     if(UNLIKELY(ret == MS_FAILURE)) goto legend_icon_cleanup;
     textstartpt = get_metrics(&marker,MS_CC,ts.textpath,0,0,0,0,NULL);

