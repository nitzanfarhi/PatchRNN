commit cc96f31ac71ed7802af8ae759fec2a034d35df54
Author: Antony Dovgal <tony2001@php.net>
Date:   Mon Oct 3 13:02:14 2005 +0000

    fix PECL bug #5571 (oci_new_connect() not closed by oci_close())

diff --git a/ext/oci8/oci8_collection.c b/ext/oci8/oci8_collection.c
index 9080ddd203..c17712ae3a 100644
--- a/ext/oci8/oci8_collection.c
+++ b/ext/oci8/oci8_collection.c
@@ -601,7 +601,9 @@ void php_oci_collection_close(php_oci_collection *collection TSRMLS_DC)
 			php_oci_error(connection->err, connection->errcode TSRMLS_CC);
 		}
 	}
-
+	
+	zend_list_delete(collection->connection->rsrc_id);
+	
 	efree(collection);
 	return;
 } /* }}} */
diff --git a/ext/oci8/oci8_lob.c b/ext/oci8/oci8_lob.c
index 865a4ef494..e1e343e15b 100644
--- a/ext/oci8/oci8_lob.c
+++ b/ext/oci8/oci8_lob.c
@@ -470,6 +470,8 @@ void php_oci_lob_free (php_oci_descriptor *descriptor TSRMLS_DC)
 	}
 
 	PHP_OCI_CALL(OCIDescriptorFree, (descriptor->descriptor, descriptor->type));
+
+	zend_list_delete(descriptor->connection->rsrc_id);
 	efree(descriptor);
 } /* }}} */
 
diff --git a/ext/oci8/oci8_statement.c b/ext/oci8/oci8_statement.c
index a2aae2f6ef..6d9eb1240a 100644
--- a/ext/oci8/oci8_statement.c
+++ b/ext/oci8/oci8_statement.c
@@ -613,7 +613,8 @@ void php_oci_statement_free(php_oci_statement *statement TSRMLS_DC)
 		zend_hash_destroy(statement->defines);
 		efree(statement->defines);
 	}
-
+	
+	zend_list_delete(statement->connection->rsrc_id);
 	efree(statement);
 } /* }}} */
 

