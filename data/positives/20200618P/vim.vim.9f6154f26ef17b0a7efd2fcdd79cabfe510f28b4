commit 9f6154f26ef17b0a7efd2fcdd79cabfe510f28b4
Author: Bram Moolenaar <Bram@vim.org>
Date:   Sat Mar 19 14:22:11 2016 +0100

    patch 7.4.1597
    Problem:    Memory leak when out of memory. (Coverity)
    Solution:   Free the name.

diff --git a/src/eval.c b/src/eval.c
index 5fc4bd4ff..a2288f9f2 100644
--- a/src/eval.c
+++ b/src/eval.c
@@ -11904,7 +11904,9 @@ f_function(typval_T *argvars, typval_T *rettv)
 	    partial_T	*pt = (partial_T *)alloc_clear(sizeof(partial_T));
 
 	    /* result is a VAR_PARTIAL */
-	    if (pt != NULL)
+	    if (pt == NULL)
+		vim_free(name);
+	    else
 	    {
 		if (arg_idx > 0 || (arg_pt != NULL && arg_pt->pt_argc > 0))
 		{
diff --git a/src/version.c b/src/version.c
index 081d14c46..4d0c25046 100644
--- a/src/version.c
+++ b/src/version.c
@@ -748,6 +748,8 @@ static char *(features[]) =
 
 static int included_patches[] =
 {   /* Add new patch number below this line */
+/**/
+    1597,
 /**/
     1596,
 /**/

