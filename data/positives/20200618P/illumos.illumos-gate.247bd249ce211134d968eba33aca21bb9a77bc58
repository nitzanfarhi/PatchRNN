commit 247bd249ce211134d968eba33aca21bb9a77bc58
Author: cth <none@none>
Date:   Mon Aug 27 14:02:43 2007 -0700

    6594740 vhci_failover_modopen leaks "ddi-forceload" property

diff --git a/usr/src/uts/common/io/scsi/adapters/scsi_vhci/scsi_vhci.c b/usr/src/uts/common/io/scsi/adapters/scsi_vhci/scsi_vhci.c
index aaac97b911..6d6812aedf 100644
--- a/usr/src/uts/common/io/scsi/adapters/scsi_vhci/scsi_vhci.c
+++ b/usr/src/uts/common/io/scsi/adapters/scsi_vhci/scsi_vhci.c
@@ -438,6 +438,7 @@ vhci_failover_modopen(struct scsi_vhci *vhci)
 	if (scsi_nfailover == 0) {
 		cmn_err(CE_WARN, "scsi_vhci: "
 		    "scsi_vhci.conf has empty 'ddi-forceload'");
+		ddi_prop_free(module);
 		return;
 	}
 
@@ -513,6 +514,8 @@ vhci_failover_modopen(struct scsi_vhci *vhci)
 		if (sf->sf_sfo && sf->sf_sfo->sfo_init)
 			(*sf->sf_sfo->sfo_init)();
 	}
+
+	ddi_prop_free(module);
 }
 
 /*

