commit 8b686a9c5710aaa8989dc4d6384ccf930c7f81cc
Author: Bogdan-Andrei Iancu <bogdan@voice-system.ro>
Date:   Fri Jun 22 10:46:00 2007 +0000

    - fixed mem leak in private mem. subst_user_f() does not release the mem chunk
      with the new user after calling subst_str(). Important is that action
      SET_USER_T makes a copy of the chunk!
    
    
    git-svn-id: https://openser.svn.sourceforge.net/svnroot/openser/trunk@2371 689a6050-402a-0410-94f2-e92a70836424

diff --git a/modules_k/textops/textops.c b/modules_k/textops/textops.c
index d54903a34..3be06bb08 100644
--- a/modules_k/textops/textops.c
+++ b/modules_k/textops/textops.c
@@ -639,6 +639,7 @@ static int subst_user_f(struct sip_msg* msg, char*  subst, char* ignored)
 	act.elem[0].type = STRING_ST;
 	act.elem[0].u.string = result->s;
 	rval = do_action(&act, msg);
+	pkg_free(result->s);
 	pkg_free(result);
 	return rval;
 }

