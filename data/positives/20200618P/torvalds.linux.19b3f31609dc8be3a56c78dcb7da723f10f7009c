commit 19b3f31609dc8be3a56c78dcb7da723f10f7009c
Author: Stanley Miao <stanley.miao@windriver.com>
Date:   Fri Dec 19 22:08:22 2008 +0800

    ALSA: Fix a Oops bug in omap soc driver.
    
    There will be a Oops or frequent underrun messages when playing music with
    omap soc driver, this is because a data region is incorretly sized, other data
    region will be overwriten when writing to this data region.
    
    Signed-off-by: Stanley Miao <stanley.miao@windriver.com>
    Acked-by: Jarkko Nikula <jarkko.nikula@nokia.com>
    Cc: stable@kernel.org
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

diff --git a/sound/soc/omap/omap-pcm.c b/sound/soc/omap/omap-pcm.c
index e9084fdd2082..acd68efb2b75 100644
--- a/sound/soc/omap/omap-pcm.c
+++ b/sound/soc/omap/omap-pcm.c
@@ -233,7 +233,7 @@ static int omap_pcm_open(struct snd_pcm_substream *substream)
 	if (ret < 0)
 		goto out;
 
-	prtd = kzalloc(sizeof(prtd), GFP_KERNEL);
+	prtd = kzalloc(sizeof(*prtd), GFP_KERNEL);
 	if (prtd == NULL) {
 		ret = -ENOMEM;
 		goto out;

