commit d48690383febbf17d958e909ff8f0d15f4497325
Author: Frans Klaver <fransklaver@gmail.com>
Date:   Wed Sep 17 23:47:27 2014 +0200

    eeepc-laptop: store_cpufv: return error if set_acpi fails
    
    The result of set_acpi is left unchecked, but it may return errors. If
    one occurs, send the error to the caller. There's no reason to lie about
    it, if set_acpi fails.
    
    Signed-off-by: Frans Klaver <fransklaver@gmail.com>
    Signed-off-by: Darren Hart <dvhart@linux.intel.com>

diff --git a/drivers/platform/x86/eeepc-laptop.c b/drivers/platform/x86/eeepc-laptop.c
index 875a43fcaa86..3f6c762fb560 100644
--- a/drivers/platform/x86/eeepc-laptop.c
+++ b/drivers/platform/x86/eeepc-laptop.c
@@ -388,7 +388,9 @@ static ssize_t cpufv_store(struct device *dev,
 		return rv;
 	if (value < 0 || value >= c.num)
 		return -EINVAL;
-	set_acpi(eeepc, CM_ASL_CPUFV, value);
+	rv = set_acpi(eeepc, CM_ASL_CPUFV, value);
+	if (rv)
+		return rv;
 	return count;
 }
 

