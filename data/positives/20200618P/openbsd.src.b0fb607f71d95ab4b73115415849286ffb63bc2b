commit b0fb607f71d95ab4b73115415849286ffb63bc2b
Author: thib <thib@openbsd.org>
Date:   Tue Jun 29 20:59:04 2010 +0000

    skip empty ranges in uvm_pmr_assertvalid;
    ok oga@

diff --git a/sys/uvm/uvm_pmemrange.c b/sys/uvm/uvm_pmemrange.c
index d4c6bd87789..08dd562ea6c 100644
--- a/sys/uvm/uvm_pmemrange.c
+++ b/sys/uvm/uvm_pmemrange.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: uvm_pmemrange.c,v 1.15 2010/06/27 03:03:49 thib Exp $	*/
+/*	$OpenBSD: uvm_pmemrange.c,v 1.16 2010/06/29 20:59:04 thib Exp $	*/
 
 /*
  * Copyright (c) 2009, 2010 Ariane van der Steldt <ariane@stack.nl>
@@ -1189,6 +1189,10 @@ uvm_pmr_assertvalid(struct uvm_pmemrange *pmr)
 	struct vm_page *prev, *next, *i, *xref;
 	int lcv, mti;
 
+	/* Empty range */
+	if (pmr->nsegs == 0)
+		return;
+
 	/* Validate address tree. */
 	RB_FOREACH(i, uvm_pmr_addr, &pmr->addr) {
 		/* Validate the range. */

