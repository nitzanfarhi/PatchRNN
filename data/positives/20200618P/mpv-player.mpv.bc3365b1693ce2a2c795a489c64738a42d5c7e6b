commit bc3365b1693ce2a2c795a489c64738a42d5c7e6b
Author: Raúl Peñacoba <raul.mikaop.zelda@gmail.com>
Date:   Wed May 10 22:21:16 2017 +0200

    video/out/wayland/buffer.c: Add missing free()

diff --git a/video/out/wayland/buffer.c b/video/out/wayland/buffer.c
index aae590eba2..dce3ca4333 100644
--- a/video/out/wayland/buffer.c
+++ b/video/out/wayland/buffer.c
@@ -40,13 +40,16 @@ shm_buffer_t* shm_buffer_create(uint32_t width,
     shm_buffer_t *buffer = calloc(1, sizeof(shm_buffer_t));
     int fd = memfile_create(size);
 
-    if (fd < 0)
+    if (fd < 0) {
+        free(buffer);
         return NULL;
+    }
 
     buffer->data = mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
 
     if (buffer->data == MAP_FAILED) {
         close(fd);
+        free(buffer);
         return NULL;
     }
 

