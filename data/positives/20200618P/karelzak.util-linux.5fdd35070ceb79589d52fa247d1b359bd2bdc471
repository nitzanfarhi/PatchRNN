commit 5fdd35070ceb79589d52fa247d1b359bd2bdc471
Author: Sami Kerola <kerolasa@iki.fi>
Date:   Fri Feb 21 10:17:11 2014 +0000

    more: fix double free crash
    
    Commit b9579f1f44b46c9f12f1e01b01c02d82ae1cf728 moved fclose() to
    checkf(), but missed removing file closure in magic().  Ironically the
    cause of regression is in previous commit message.
    
    Signed-off-by: Sami Kerola <kerolasa@iki.fi>

diff --git a/text-utils/more.c b/text-utils/more.c
index b06abbb63..d05e9467c 100644
--- a/text-utils/more.c
+++ b/text-utils/more.c
@@ -639,7 +639,6 @@ static int magic(FILE *f, char *fs)
 		case 0x457f:	/* simple ELF detection */
 			printf(_("\n******** %s: Not a text file ********\n\n"),
 			       fs);
-			fclose(f);
 			return 1;
 		}
 	}

