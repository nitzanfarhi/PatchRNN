commit ab3afe2f4d3732ee908ef1c78752dbf492643de2
Author: antirez <antirez@gmail.com>
Date:   Fri Apr 18 13:01:04 2014 +0200

    ZREMRANGEBYLEX memory leak removed calling zslFreeLexRange().

diff --git a/src/t_zset.c b/src/t_zset.c
index 40dc00c2..4e946b4f 100644
--- a/src/t_zset.c
+++ b/src/t_zset.c
@@ -1406,7 +1406,7 @@ void zremrangeGenericCommand(redisClient *c, int rangetype) {
 
     /* Step 2: Lookup & range sanity checks if needed. */
     if ((zobj = lookupKeyWriteOrReply(c,key,shared.czero)) == NULL ||
-        checkType(c,zobj,REDIS_ZSET)) return;
+        checkType(c,zobj,REDIS_ZSET)) goto cleanup;
 
     if (rangetype == ZRANGE_RANK) {
         /* Sanitize indexes. */
@@ -1419,7 +1419,7 @@ void zremrangeGenericCommand(redisClient *c, int rangetype) {
          * The range is empty when start > end or start >= length. */
         if (start > end || start >= llen) {
             addReply(c,shared.czero);
-            return;
+            goto cleanup;
         }
         if (end >= llen) end = llen-1;
     }
@@ -1473,6 +1473,9 @@ void zremrangeGenericCommand(redisClient *c, int rangetype) {
     }
     server.dirty += deleted;
     addReplyLongLong(c,deleted);
+
+cleanup:
+    if (rangetype == ZRANGE_LEX) zslFreeLexRange(&lexrange);
 }
 
 void zremrangebyrankCommand(redisClient *c) {

