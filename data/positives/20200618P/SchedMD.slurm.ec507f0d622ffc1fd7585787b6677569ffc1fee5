commit ec507f0d622ffc1fd7585787b6677569ffc1fee5
Author: Moe Jette <jette1@llnl.gov>
Date:   Fri Aug 11 16:18:47 2006 +0000

    Tweak logic to prevent zero divide with anomalous conditions.

diff --git a/src/srun/srun_job.c b/src/srun/srun_job.c
index 2514256690..d1dc0c30ee 100644
--- a/src/srun/srun_job.c
+++ b/src/srun/srun_job.c
@@ -234,7 +234,11 @@ job_step_create_allocation(uint32_t job_id)
 	hostlist_uniq(hl);
 	ai->nnodes = hostlist_count(hl);
 	hostlist_destroy(hl);
-	
+	if (ai->nnodes == 0) {
+		error("No nodes in allocation, can't run job");
+		goto error;
+	}
+
 	//ai->nnodes         = opt.min_nodes;
 	/* info("node list is now %s %s %d procs",  */
 /* 	     ai->nodelist, opt.nodelist, */

