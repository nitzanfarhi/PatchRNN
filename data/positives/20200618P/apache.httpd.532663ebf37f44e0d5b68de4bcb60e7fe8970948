commit 532663ebf37f44e0d5b68de4bcb60e7fe8970948
Author: Joe Orton <jorton@apache.org>
Date:   Tue Aug 2 14:15:35 2005 +0000

    * modules/ldap/util_ldap_cache.c (util_ldap_cache_init): Only remove
    the shm segment by name if a name is configured.
    
    
    git-svn-id: https://svn.apache.org/repos/asf/httpd/httpd/trunk@227012 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/modules/ldap/util_ldap_cache.c b/modules/ldap/util_ldap_cache.c
index 313f380570..904d1721d1 100644
--- a/modules/ldap/util_ldap_cache.c
+++ b/modules/ldap/util_ldap_cache.c
@@ -396,8 +396,10 @@ apr_status_t util_ldap_cache_init(apr_pool_t *pool, util_ldap_state_t *st)
     apr_status_t result;
     apr_size_t size;
 
-    /* Remove any existing shm segment with this name. */
-    apr_shm_remove(st->cache_file, st->pool);
+    if (st->cache_file) {
+        /* Remove any existing shm segment with this name. */
+        apr_shm_remove(st->cache_file, st->pool);
+    }
 
     size = APR_ALIGN_DEFAULT(st->cache_bytes);
 

