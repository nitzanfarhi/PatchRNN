commit 7a6b75e8ac2e77b74910aab07cfee03b4644f57e
Author: Antony Dovgal <tony2001@php.net>
Date:   Thu Dec 21 01:07:52 2006 +0000

    don't leak on error

diff --git a/main/streams/xp_socket.c b/main/streams/xp_socket.c
index 15fd3d252a..ad7cce2a24 100644
--- a/main/streams/xp_socket.c
+++ b/main/streams/xp_socket.c
@@ -642,6 +642,7 @@ static inline int php_tcp_sockop_connect(php_stream *stream, php_netstream_data_
 			if (xparam->want_errortext) {
 				spprintf(&xparam->outputs.error_text, 0, "local_addr context option is not a string.");
 			}
+			efree(host);
 			return -1;
 		}
 		bindto = parse_ip_address_ex(Z_STRVAL_PP(tmpzval), Z_STRLEN_PP(tmpzval), &bindport, xparam->want_errortext, &xparam->outputs.error_text TSRMLS_CC);

