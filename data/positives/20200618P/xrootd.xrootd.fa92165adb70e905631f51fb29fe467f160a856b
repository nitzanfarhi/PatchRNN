commit fa92165adb70e905631f51fb29fe467f160a856b
Author: Michal Simon <michal.simon@cern.ch>
Date:   Tue Jul 26 11:17:01 2016 +0200

    [XrdCl] Fix segfault in case a user cannot be mapped to a home directory.

diff --git a/src/XrdCl/XrdClDefaultEnv.cc b/src/XrdCl/XrdClDefaultEnv.cc
index 1927d479..15af4369 100644
--- a/src/XrdCl/XrdClDefaultEnv.cc
+++ b/src/XrdCl/XrdClDefaultEnv.cc
@@ -308,14 +308,19 @@ namespace XrdCl
 
     XrdSysPwd pwdHandler;
     passwd *pwd = pwdHandler.Get( getuid() );
-    std::string userConfigFile = pwd->pw_dir;
-    userConfigFile += "/.xrootd/client.conf";
+    if( pwd )
+    {
+      std::string userConfigFile = pwd->pw_dir;
+      userConfigFile += "/.xrootd/client.conf";
 
-    st = Utils::ProcessConfig( userConfig, userConfigFile );
+      st = Utils::ProcessConfig( userConfig, userConfigFile );
 
-    if( !st.IsOK() )
-      log->Debug( UtilityMsg, "Unable to process user config file: %s",
-                  st.ToString().c_str() );
+      if( !st.IsOK() )
+        log->Debug( UtilityMsg, "Unable to process user config file: %s",
+                    st.ToString().c_str() );
+    }
+    else
+      log->Debug( UtilityMsg, "Unable to find user home directory." );
 
     std::map<std::string, std::string>::iterator it;
 

