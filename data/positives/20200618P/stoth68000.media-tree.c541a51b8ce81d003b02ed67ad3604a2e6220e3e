commit c541a51b8ce81d003b02ed67ad3604a2e6220e3e
Author: Jaegeuk Kim <jaegeuk@kernel.org>
Date:   Sat Mar 25 00:03:02 2017 -0700

    f2fs: fix wrong max cost initialization
    
    This patch fixes missing increased max cost caused by a patch that we increased
    cose of data segments in greedy algorithm.
    
    Cc: <stable@vger.kernel.org> # v4.10+
    Fixes: b9cd20619 "f2fs: node segment is prior to data segment selected victim"
    Signed-off-by: Jaegeuk Kim <jaegeuk@kernel.org>

diff --git a/fs/f2fs/gc.c b/fs/f2fs/gc.c
index 939be88a8833..704bea678d37 100644
--- a/fs/f2fs/gc.c
+++ b/fs/f2fs/gc.c
@@ -182,7 +182,7 @@ static unsigned int get_max_cost(struct f2fs_sb_info *sbi,
 	if (p->alloc_mode == SSR)
 		return sbi->blocks_per_seg;
 	if (p->gc_mode == GC_GREEDY)
-		return sbi->blocks_per_seg * p->ofs_unit;
+		return 2 * sbi->blocks_per_seg * p->ofs_unit;
 	else if (p->gc_mode == GC_CB)
 		return UINT_MAX;
 	else /* No other gc_mode */

