commit f77b86d7d3acf9dfcb5ee834628d12207584b2cb
Author: Johannes Berg <johannes.berg@intel.com>
Date:   Mon Jun 24 15:43:38 2013 +0200

    regulatory: add missing rtnl locking
    
    restore_regulatory_settings() requires the RTNL to be held,
    add the missing locking in reg_timeout_work().
    
    Signed-off-by: Johannes Berg <johannes.berg@intel.com>

diff --git a/net/wireless/reg.c b/net/wireless/reg.c
index 5a24c986f34b..5a950f36bae4 100644
--- a/net/wireless/reg.c
+++ b/net/wireless/reg.c
@@ -2279,7 +2279,9 @@ void wiphy_regulatory_deregister(struct wiphy *wiphy)
 static void reg_timeout_work(struct work_struct *work)
 {
 	REG_DBG_PRINT("Timeout while waiting for CRDA to reply, restoring regulatory settings\n");
+	rtnl_lock();
 	restore_regulatory_settings(true);
+	rtnl_unlock();
 }
 
 int __init regulatory_init(void)

