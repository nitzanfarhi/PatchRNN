commit 2cc0656aa306d75e4e61e87c55fb84f0ea6ef7dc
Author: Danny Auble <da@llnl.gov>
Date:   Mon Aug 31 21:21:56 2009 +0000

    pack for qos

diff --git a/src/slurmctld/job_mgr.c b/src/slurmctld/job_mgr.c
index 27534270bf..03be613cbb 100644
--- a/src/slurmctld/job_mgr.c
+++ b/src/slurmctld/job_mgr.c
@@ -4156,7 +4156,11 @@ void pack_job(struct job_record *dump_job_ptr, uint16_t show_flags, Buf buffer)
 	packstr(dump_job_ptr->account, buffer);
 	packstr(dump_job_ptr->network, buffer);
 	packstr(dump_job_ptr->comment, buffer);
-	packstr(dump_job_ptr->qos, buffer);
+	
+	slurm_mutex_lock(&assoc_mgr_qos_lock);
+	packstr(acct_qos_str(assoc_mgr_qos_list, dump_job_ptr->qos));
+	slurm_mutex_unlock(&assoc_mgr_qos_lock);
+
 	packstr(dump_job_ptr->licenses, buffer);
 	packstr(dump_job_ptr->state_desc, buffer);
 	packstr(dump_job_ptr->resv_name, buffer);

