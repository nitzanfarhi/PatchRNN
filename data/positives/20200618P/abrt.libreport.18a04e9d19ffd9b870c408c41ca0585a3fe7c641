commit 18a04e9d19ffd9b870c408c41ca0585a3fe7c641
Author: Miroslav Lichvar <mlichvar@redhat.com>
Date:   Thu Nov 3 13:24:06 2011 +0100

    allow get/set on uninitialized user settings

diff --git a/src/lib/user_settings.c b/src/lib/user_settings.c
index 24cd30d9..e20fa0f5 100644
--- a/src/lib/user_settings.c
+++ b/src/lib/user_settings.c
@@ -110,6 +110,9 @@ bool load_user_settings(const char *application_name)
 
 void set_user_setting(const char *name, const char *value)
 {
+    if (!user_settings)
+        return;
+
     if (value)
         g_hash_table_replace(user_settings, xstrdup(name), xstrdup(value));
     else
@@ -118,5 +121,8 @@ void set_user_setting(const char *name, const char *value)
 
 const char *get_user_setting(const char *name)
 {
+    if (!user_settings)
+        return NULL;
+
     return g_hash_table_lookup(user_settings, name);
 }

