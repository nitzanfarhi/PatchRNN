commit d4c58e50cf42f94a7a7cf91e561a85df61749213
Author: Serge Martin <edb@sigluy.net>
Date:   Fri Nov 3 11:42:26 2006 +0000

    fix potential memory leak

diff --git a/src/upload_log.cpp b/src/upload_log.cpp
index 5ec6e12370..0718249e9e 100644
--- a/src/upload_log.cpp
+++ b/src/upload_log.cpp
@@ -129,6 +129,9 @@ upload_log::~upload_log()
 	if (game_finished(game_))
 		config_.add_child("game", *game_);
 
+	if (game_)
+		delete game_;
+
 	if (enabled_ && !config_.empty() && !game_config::debug) {
 		config_["version"] = VERSION;
 		config_["format_version"] = "1";
@@ -175,6 +178,9 @@ void upload_log::start(game_state &state, const team &team,
 	if (game_finished(game_))
 		config_.add_child("game", *game_);
 
+
+	if (game_)
+		delete game_;
 	game_ = new config();
 	(*game_)["time"] = lexical_cast<std::string>(SDL_GetTicks() / 1000);
 	(*game_)["campaign"] = state.campaign_define;

