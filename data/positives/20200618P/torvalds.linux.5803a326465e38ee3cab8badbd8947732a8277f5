commit 5803a326465e38ee3cab8badbd8947732a8277f5
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Feb 21 11:59:45 2012 +0100

    ALSA: hda/realtek - Fix possible Oops with NULL input_mux
    
    When BIOS is damn crazy and gives no pin-config at all, the driver might
    lead to a NULL dereference.  Let's add a NULL check for such a case.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

diff --git a/sound/pci/hda/patch_realtek.c b/sound/pci/hda/patch_realtek.c
index eba50dff6130..997cc8127a08 100644
--- a/sound/pci/hda/patch_realtek.c
+++ b/sound/pci/hda/patch_realtek.c
@@ -302,6 +302,9 @@ static int alc_mux_select(struct hda_codec *codec, unsigned int adc_idx,
 	int i, type, num_conns;
 	hda_nid_t nid;
 
+	if (!spec->input_mux)
+		return 0;
+
 	mux_idx = adc_idx >= spec->num_mux_defs ? 0 : adc_idx;
 	imux = &spec->input_mux[mux_idx];
 	if (!imux->num_items && mux_idx > 0)

