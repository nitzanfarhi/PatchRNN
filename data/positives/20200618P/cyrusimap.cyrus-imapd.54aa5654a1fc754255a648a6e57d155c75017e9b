commit 54aa5654a1fc754255a648a6e57d155c75017e9b
Author: Ken Murchison <murch@andrew.cmu.edu>
Date:   Wed Apr 10 00:47:59 2002 +0000

    fixed bug #1241

diff --git a/imap/index.c b/imap/index.c
index 164d25c14..d62a10ead 100644
--- a/imap/index.c
+++ b/imap/index.c
@@ -41,7 +41,7 @@
  *
  */
 /*
- * $Id: index.c,v 1.175 2002/04/02 15:49:48 rjs3 Exp $
+ * $Id: index.c,v 1.176 2002/04/10 00:47:59 ken3 Exp $
  */
 #include <config.h>
 
@@ -3579,6 +3579,7 @@ static char *find_msgid(char *str, char **rem)
 	/* quoted string */
 	if (*src == '\"') {
 	    src++;
+	    if (!strchr(src, '\"')) continue;
 	    while (*src) {
 		if (*src == '\"') break;
 		if (*src == '\\') {
@@ -3611,7 +3612,7 @@ static char *find_msgid(char *str, char **rem)
 	return msgid;
     }
 
-    free(msgid);
+    if (msgid) free(msgid);
     return NULL;
 }
 

