commit 187ee58c62c1d0d238d3dc4835869d33e1869906
Author: Josef Bacik <jbacik@fb.com>
Date:   Thu Aug 18 15:30:06 2016 -0400

    Btrfs: fix em leak in find_first_block_group
    
    We need to call free_extent_map() on the em we look up.
    
    Signed-off-by: Josef Bacik <jbacik@fb.com>
    Reviewed-by: Omar Sandoval <osandov@fb.com>
    Signed-off-by: David Sterba <dsterba@suse.com>
    Signed-off-by: Chris Mason <clm@fb.com>

diff --git a/fs/btrfs/extent-tree.c b/fs/btrfs/extent-tree.c
index d5d3cfb1f66f..60d4ae7ce974 100644
--- a/fs/btrfs/extent-tree.c
+++ b/fs/btrfs/extent-tree.c
@@ -9887,6 +9887,7 @@ static int find_first_block_group(struct btrfs_root *root,
 			} else {
 				ret = 0;
 			}
+			free_extent_map(em);
 			goto out;
 		}
 		path->slots[0]++;

