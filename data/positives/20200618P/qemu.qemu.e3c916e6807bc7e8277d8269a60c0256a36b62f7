commit e3c916e6807bc7e8277d8269a60c0256a36b62f7
Author: Jean-Christophe DUBOIS <jcd@tribudubois.net>
Date:   Sun Nov 15 19:18:18 2009 +0100

    Fix qemu_free use in scsi-generic.c
    
    scsi-generic.c is using free() instead of qemu_free().
    Fix it.
    
    Signed-off-by: Jean-Christophe DUBOIS <jcd@tribudubois.net>
    Signed-off-by: Anthony Liguori <aliguori@us.ibm.com>

diff --git a/hw/scsi-generic.c b/hw/scsi-generic.c
index 92ef7716b7..cf56ea0f2c 100644
--- a/hw/scsi-generic.c
+++ b/hw/scsi-generic.c
@@ -561,7 +561,7 @@ static int32_t scsi_send_command(SCSIDevice *d, uint32_t tag,
 
     if (len == 0) {
         if (r->buf != NULL)
-            free(r->buf);
+            qemu_free(r->buf);
         r->buflen = 0;
         r->buf = NULL;
         ret = execute_command(s->dinfo->bdrv, r, SG_DXFER_NONE, scsi_command_complete);
@@ -574,7 +574,7 @@ static int32_t scsi_send_command(SCSIDevice *d, uint32_t tag,
 
     if (r->buflen != len) {
         if (r->buf != NULL)
-            free(r->buf);
+            qemu_free(r->buf);
         r->buf = qemu_malloc(len);
         r->buflen = len;
     }

