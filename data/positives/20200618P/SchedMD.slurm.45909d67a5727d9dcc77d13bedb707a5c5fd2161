commit 45909d67a5727d9dcc77d13bedb707a5c5fd2161
Author: Danny Auble <da@schedmd.com>
Date:   Tue Nov 8 15:02:55 2011 -0800

    BLUEGENE - fix for dealing with reservations

diff --git a/src/plugins/select/bluegene/bg_job_place.c b/src/plugins/select/bluegene/bg_job_place.c
index 8950c69e7d..a009bad943 100644
--- a/src/plugins/select/bluegene/bg_job_place.c
+++ b/src/plugins/select/bluegene/bg_job_place.c
@@ -1722,7 +1722,8 @@ extern int submit_job(struct job_record *job_ptr, bitstr_t *slurm_block_bitmap,
 					   SELECT_JOBDATA_BLOCK_PTR,
 					   NULL);
 		} else {
-			if (job_ptr->part_ptr->max_share <= 1) {
+			if (job_ptr->part_ptr
+			    && job_ptr->part_ptr->max_share <= 1) {
 				if (bg_record->ionode_str)
 					error("Small block used in a "
 					      "non-shared partition");

