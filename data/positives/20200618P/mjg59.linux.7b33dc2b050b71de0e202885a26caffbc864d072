commit 7b33dc2b050b71de0e202885a26caffbc864d072
Author: Dan Carpenter <dan.carpenter@oracle.com>
Date:   Thu Jun 14 21:36:09 2012 +0300

    RDMA/ocrdma: Fix off by one in ocrdma_query_gid()
    
    The dev->sgid_tbl[] array is allocated in ocrdma_alloc_resources().
    It has OCRDMA_MAX_SGID elements so the test here is off by one.
    
    Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
    Signed-off-by: Roland Dreier <roland@purestorage.com>

diff --git a/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c b/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c
index d55d459b7fc8..2e2e7aecc990 100644
--- a/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c
+++ b/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c
@@ -53,7 +53,7 @@ int ocrdma_query_gid(struct ib_device *ibdev, u8 port,
 
 	dev = get_ocrdma_dev(ibdev);
 	memset(sgid, 0, sizeof(*sgid));
-	if (index > OCRDMA_MAX_SGID)
+	if (index >= OCRDMA_MAX_SGID)
 		return -EINVAL;
 
 	memcpy(sgid, &dev->sgid_tbl[index], sizeof(*sgid));

