commit 9ad285d6db6e04c1c51c79152d2214fffefc92ab
Author: Samuel Ortiz <sameo@linux.intel.com>
Date:   Fri Mar 19 12:46:28 2010 +0100

    mfd: Check t7l66 platform_data pointer
    
    We should check for pdata being not NULL before dereferencing it.
    
    Reported-by: Dan Carpenter <error27@gmail.com>
    Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>

diff --git a/drivers/mfd/t7l66xb.c b/drivers/mfd/t7l66xb.c
index da6383a934ac..5041d33adf0b 100644
--- a/drivers/mfd/t7l66xb.c
+++ b/drivers/mfd/t7l66xb.c
@@ -318,6 +318,9 @@ static int t7l66xb_probe(struct platform_device *dev)
 	struct resource *iomem, *rscr;
 	int ret;
 
+	if (pdata == NULL)
+		return -EINVAL;
+
 	iomem = platform_get_resource(dev, IORESOURCE_MEM, 0);
 	if (!iomem)
 		return -EINVAL;

