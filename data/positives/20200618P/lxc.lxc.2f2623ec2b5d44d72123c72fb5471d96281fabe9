commit 2f2623ec2b5d44d72123c72fb5471d96281fabe9
Author: Serge Hallyn <serge.hallyn@ubuntu.com>
Date:   Fri Apr 4 21:26:16 2014 -0500

    lxc_spawn: initialize netpipe
    
    When rebooting an unprivileged container, netpipe starts out
    as not -1.  If count_veths somehow changed this could lead
    to trying to send data over nonexistent pipe.  (Ok can't
    *really* happen, as it currently stands, but it's an open
    end)
    
    Signed-off-by: Serge Hallyn <serge.hallyn@ubuntu.com>

diff --git a/src/lxc/start.c b/src/lxc/start.c
index ec104964..21db8044 100644
--- a/src/lxc/start.c
+++ b/src/lxc/start.c
@@ -786,6 +786,8 @@ static int lxc_spawn(struct lxc_handler *handler)
 	int preserve_mask = 0, i;
 	int netpipepair[2], nveths;
 
+	netpipe = -1;
+
 	for (i = 0; i < LXC_NS_MAX; i++)
 		if (handler->conf->inherit_ns_fd[i] != -1)
 			preserve_mask |= ns_info[i].clone_flag;

