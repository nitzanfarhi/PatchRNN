commit c0c8cc7b4359b2f6e9c08a4bf56f0be377e3995b
Author: Andriy Gapon <avg@FreeBSD.org>
Date:   Fri Apr 7 13:52:26 2017 -0700

    OpenZFS 8027 - tighten up dsl_pool_dirty_delta
    
    Authored by: Andriy Gapon <avg@FreeBSD.org>
    Approved by: Dan McDonald <danmcd@omniti.com>
    Reviewed by: Matt Ahrens <mahrens@delphix.com>
    Reviewed by: Serapheim Dimitropoulos <serapheim@delphix.com>
    Reviewed by: Paul Dagnelie <pcd@delphix.com>
    Reviewed-by: Brian Behlendorf <behlendorf1@llnl.gov>
    Reviewed-by: George Melikov <mail@gmelikov.ru>
    Ported-by: Giuseppe Di Natale <dinatale2@llnl.gov>
    
    OpenZFS-issue: https://www.illumos.org/issues/8027
    OpenZFS-commit: https://github.com/openzfs/openzfs/commit/642668d
    Closes #5988

diff --git a/module/zfs/dsl_pool.c b/module/zfs/dsl_pool.c
index 1bc73ebc7..eee03f3ca 100644
--- a/module/zfs/dsl_pool.c
+++ b/module/zfs/dsl_pool.c
@@ -469,7 +469,7 @@ dsl_pool_dirty_delta(dsl_pool_t *dp, int64_t delta)
 	 * Note: we signal even when increasing dp_dirty_total.
 	 * This ensures forward progress -- each thread wakes the next waiter.
 	 */
-	if (dp->dp_dirty_total <= zfs_dirty_data_max)
+	if (dp->dp_dirty_total < zfs_dirty_data_max)
 		cv_signal(&dp->dp_spaceavail_cv);
 }
 

