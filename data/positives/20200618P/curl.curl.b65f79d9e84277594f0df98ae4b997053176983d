commit b65f79d9e84277594f0df98ae4b997053176983d
Author: Jay Satiro <raysatiro@yahoo.com>
Date:   Wed Nov 16 02:16:10 2016 -0500

    http2: Fix address sanitizer memcpy warning
    
    - In Curl_http2_switched don't call memcpy when src is NULL.
    
    Curl_http2_switched can be called like:
    
    Curl_http2_switched(conn, NULL, 0);
    
    .. and prior to this change memcpy was then called like:
    
    memcpy(dest, NULL, 0)
    
    .. causing address sanitizer to warn:
    
    http2.c:2057:3: runtime error: null pointer passed as argument 2, which
    is declared to never be null

diff --git a/lib/http2.c b/lib/http2.c
index 1484e1515..6720984b0 100644
--- a/lib/http2.c
+++ b/lib/http2.c
@@ -2054,7 +2054,8 @@ CURLcode Curl_http2_switched(struct connectdata *conn,
                     " after upgrade: len=%zu\n",
         nread);
 
-  memcpy(httpc->inbuf, mem, nread);
+  if(nread)
+    memcpy(httpc->inbuf, mem, nread);
   httpc->inbuflen = nread;
 
   nproc = nghttp2_session_mem_recv(httpc->h2, (const uint8_t *)httpc->inbuf,

