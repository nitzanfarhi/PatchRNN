commit 96178f26d711c71a46e0ec98bb8b5ec4ca84bda1
Author: dlg <dlg@openbsd.org>
Date:   Tue Jan 26 01:51:33 2016 +0000

    dont leak mbufs on encap failure.
    
    diff from richard proctor on bugs@

diff --git a/sys/dev/pci/if_vr.c b/sys/dev/pci/if_vr.c
index 0cb32d806ac..ea1a6c41b01 100644
--- a/sys/dev/pci/if_vr.c
+++ b/sys/dev/pci/if_vr.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: if_vr.c,v 1.148 2015/11/25 03:09:59 dlg Exp $	*/
+/*	$OpenBSD: if_vr.c,v 1.149 2016/01/26 01:51:33 dlg Exp $	*/
 
 /*
  * Copyright (c) 1997, 1998
@@ -1330,6 +1330,7 @@ vr_start(struct ifnet *ifp)
 		/* Pack the data into the descriptor. */
 		head_tx = cur_tx;
 		if (vr_encap(sc, &cur_tx, m)) {
+			m_freem(m);
 			ifp->if_oerrors++;
 			continue;
 		}

