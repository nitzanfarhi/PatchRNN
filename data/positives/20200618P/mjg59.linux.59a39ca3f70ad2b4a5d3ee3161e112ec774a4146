commit 59a39ca3f70ad2b4a5d3ee3161e112ec774a4146
Author: Dan Carpenter <dan.carpenter@oracle.com>
Date:   Mon Feb 16 13:01:36 2015 +0300

    RDMA/ocrdma: Fix off by one in ocrdma_query_gid()
    
    The ->sgid_tbl[] array has OCRDMA_MAX_SGID number of elements so this
    test is off by one.  ->sgid_tbl is allocated in ocrdma_alloc_resources().
    
    Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
    Acked-by: Selvin Xavier <selvin.xavier@emulex.com>
    Signed-off-by: Roland Dreier <roland@purestorage.com>

diff --git a/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c b/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c
index 397a3678ecfb..877175563634 100644
--- a/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c
+++ b/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c
@@ -53,7 +53,7 @@ int ocrdma_query_gid(struct ib_device *ibdev, u8 port,
 
 	dev = get_ocrdma_dev(ibdev);
 	memset(sgid, 0, sizeof(*sgid));
-	if (index > OCRDMA_MAX_SGID)
+	if (index >= OCRDMA_MAX_SGID)
 		return -EINVAL;
 
 	memcpy(sgid, &dev->sgid_tbl[index], sizeof(*sgid));

