commit 4ef26746158b26c89057e6be81bc88ce553ebcdb
Author: Karel Zak <kzak@redhat.com>
Date:   Mon Jun 20 13:58:41 2011 +0200

    lib: [procutils.c] improve robustness
    
    Signed-off-by: Karel Zak <kzak@redhat.com>

diff --git a/lib/procutils.c b/lib/procutils.c
index 2c9e83722..2ab322522 100644
--- a/lib/procutils.c
+++ b/lib/procutils.c
@@ -72,6 +72,9 @@ int proc_next_tid(struct proc_tasks *tasks, pid_t *tid)
 	struct dirent *d;
 	char *end;
 
+	if (!tasks || !tid)
+		return -1;
+
 	*tid = 0;
 	errno = 0;
 

