commit 8bc1d21776bb012e41ed062c6d842cfe7c82998a
Author: Julia Lawall <julia@diku.dk>
Date:   Thu Dec 17 13:57:33 2009 +0000

    USB: wusb: check CHID is all zeros before stopping the host
    
    An incorrect sizeof() resulted in only 4 (or 8) octets of the CHID being
    checked instead of all 16 octets.  A randomly generated CHID had a
    probability of being unable to start a WUSB host of less than 1 in
    2 billion.
    
    Signed-off-by: Julia Lawall <julia@diku.dk>
    Signed-off-by: David Vrabel <david.vrabel@csr.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/usb/wusbcore/mmc.c b/drivers/usb/wusbcore/mmc.c
index 3b52161e6e9c..2d827397e30b 100644
--- a/drivers/usb/wusbcore/mmc.c
+++ b/drivers/usb/wusbcore/mmc.c
@@ -263,7 +263,7 @@ int wusbhc_chid_set(struct wusbhc *wusbhc, const struct wusb_ckhdid *chid)
 {
 	int result = 0;
 
-	if (memcmp(chid, &wusb_ckhdid_zero, sizeof(chid)) == 0)
+	if (memcmp(chid, &wusb_ckhdid_zero, sizeof(*chid)) == 0)
 		chid = NULL;
 
 	mutex_lock(&wusbhc->mutex);

