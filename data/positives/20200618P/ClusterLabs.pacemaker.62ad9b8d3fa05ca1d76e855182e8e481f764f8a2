commit 62ad9b8d3fa05ca1d76e855182e8e481f764f8a2
Author: Andrew Beekhof <andrew@beekhof.net>
Date:   Tue Sep 30 10:52:21 2014 +1000

    Fix: systemd: Ensure we don't call dbus_message_unref() with NULL

diff --git a/lib/services/systemd.c b/lib/services/systemd.c
index df1b8f13a..c96743056 100644
--- a/lib/services/systemd.c
+++ b/lib/services/systemd.c
@@ -206,8 +206,9 @@ systemd_unit_by_name(const gchar * arg_name, svc_action_t *op)
         if(unit) {
             munit = strdup(unit);
         }
-
-        dbus_message_unref(reply);
+        if(reply) {
+            dbus_message_unref(reply);
+        }
         return munit;
     }
 
@@ -249,6 +250,10 @@ systemd_unit_listall(void)
         crm_err("Call to %s failed: %s", method, error.name);
         return NULL;
 
+    } else if (reply == NULL) {
+        crm_err("Call to %s failed: Message has no reply", method);
+        return NULL;
+
     } else if (!dbus_message_iter_init(reply, &args)) {
         crm_err("Call to %s failed: Message has no arguments", method);
         dbus_message_unref(reply);

