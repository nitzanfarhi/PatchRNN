commit 5d11d7dd8e6c78bfc6ff270e0889969202f372f8
Author: Bron Gondwana <brong@fastmail.fm>
Date:   Tue Nov 1 09:34:00 2016 +1100

    strip batchsize on full sync

diff --git a/imap/sync_support.c b/imap/sync_support.c
index f13d68b22..46c9fd1b1 100644
--- a/imap/sync_support.c
+++ b/imap/sync_support.c
@@ -5188,6 +5188,7 @@ int sync_update_mailbox(struct sync_folder *local,
     flags |= SYNC_FLAG_ISREPEAT;
 
     if (r == IMAP_AGAIN) {
+        local->batchsize = 0; /* don't batch the re-update, means sync to 2.4 will still work after fullsync */
         r = mailbox_full_update(local, reserve_list, sync_be, flags);
         if (!r) r = update_mailbox_once(local, remote, topart,
                                         reserve_list, sync_be, flags);

