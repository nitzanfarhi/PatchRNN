commit 54f88401828475935abe897b54c44171ea937b48
Author: naddy <naddy@openbsd.org>
Date:   Wed Jul 11 10:44:59 2012 +0000

    fix an off-by-one error where the return value would point to the
    character after the '\0'; ok guenther@

diff --git a/lib/libc/string/stpncpy.c b/lib/libc/string/stpncpy.c
index b772486d59c..c7c2a57c4cd 100644
--- a/lib/libc/string/stpncpy.c
+++ b/lib/libc/string/stpncpy.c
@@ -1,4 +1,4 @@
-/*	$OpenBSD: stpncpy.c,v 1.1 2012/01/17 02:48:01 guenther Exp $	*/
+/*	$OpenBSD: stpncpy.c,v 1.2 2012/07/11 10:44:59 naddy Exp $	*/
 
 /*-
  * Copyright (c) 1990 The Regents of the University of California.
@@ -44,7 +44,7 @@ stpncpy(char *dst, const char *src, size_t n)
 		dst = &dst[n];
 		do {
 			if ((*d++ = *s++) == 0) {
-				dst = d;
+				dst = d - 1;
 				/* NUL pad the remaining n-1 bytes */
 				while (--n != 0)
 					*d++ = 0;

