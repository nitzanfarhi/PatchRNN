commit f4528122d66d1bc7dd07a64d1af7b65fe53f7b0b
Author: Jason Dillaman <dillaman@redhat.com>
Date:   Mon Nov 20 11:03:17 2017 -0500

    rbd: disk usage on empty pool no longer returns an error message
    
    Fixes: http://tracker.ceph.com/issues/22200
    Signed-off-by: Jason Dillaman <dillaman@redhat.com>

diff --git a/src/tools/rbd/action/DiskUsage.cc b/src/tools/rbd/action/DiskUsage.cc
index 9934e81dd2..5da9fec3f1 100644
--- a/src/tools/rbd/action/DiskUsage.cc
+++ b/src/tools/rbd/action/DiskUsage.cc
@@ -208,7 +208,7 @@ static int do_disk_usage(librbd::RBD &rbd, librados::IoCtx &io_ctx,
       ++count;
     }
   }
-  if (!found) {
+  if (imgname != nullptr && !found) {
     std::cerr << "specified image " << imgname << " is not found." << std::endl;
     return -ENOENT;
   }

