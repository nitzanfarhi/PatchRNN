commit 01e866bf07fbb10e96bff46ea1e5e0410d6e40b9
Author: Vlad Buslov <vladbu@mellanox.com>
Date:   Mon Jul 9 14:33:26 2018 +0300

    net: sched: act_ife: fix memory leak in ife init
    
    Free params if tcf_idr_check_alloc() returned error.
    
    Fixes: 0190c1d452a9 ("net: sched: atomically check-allocate action")
    Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
    Signed-off-by: Vlad Buslov <vladbu@mellanox.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/net/sched/act_ife.c b/net/sched/act_ife.c
index a3eef00cd711..3d6e265758c0 100644
--- a/net/sched/act_ife.c
+++ b/net/sched/act_ife.c
@@ -485,8 +485,10 @@ static int tcf_ife_init(struct net *net, struct nlattr *nla,
 		return -ENOMEM;
 
 	err = tcf_idr_check_alloc(tn, &parm->index, a, bind);
-	if (err < 0)
+	if (err < 0) {
+		kfree(p);
 		return err;
+	}
 	exists = err;
 	if (exists && bind) {
 		kfree(p);

