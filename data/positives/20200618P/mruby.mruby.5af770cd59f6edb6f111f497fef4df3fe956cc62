commit 5af770cd59f6edb6f111f497fef4df3fe956cc62
Author: Yukihiro "Matz" Matsumoto <matz@ruby-lang.org>
Date:   Mon Aug 10 11:41:01 2015 +0900

    prevent out-of-bounds ensure clause access; fix #2910

diff --git a/src/vm.c b/src/vm.c
index 025b487b..00636a87 100644
--- a/src/vm.c
+++ b/src/vm.c
@@ -266,6 +266,7 @@ ecall(mrb_state *mrb, int i)
   mrb_value *self = mrb->c->stack;
   struct RObject *exc;
 
+  if (i<0) return;
   p = mrb->c->ensure[i];
   if (!p) return;
   if (mrb->c->ci->eidx > i)

