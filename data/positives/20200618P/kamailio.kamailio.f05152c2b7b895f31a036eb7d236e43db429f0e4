commit f05152c2b7b895f31a036eb7d236e43db429f0e4
Author: Jan Janak <jan@iptel.org>
Date:   Wed Sep 14 08:04:36 2005 +0000

    - return when running out of memory

diff --git a/modules_s/avp_db/avp_db.c b/modules_s/avp_db/avp_db.c
index b68f78657..786b9ad90 100644
--- a/modules_s/avp_db/avp_db.c
+++ b/modules_s/avp_db/avp_db.c
@@ -274,6 +274,7 @@ static int query_db(str* prefix, str* uuid, str* username, str* domain)
 			LOG(L_ERR, "query_db: add_avp failed\n");
 			pkg_free(name_str.s);
 			dbf.free_result(db_handle, res);
+			return -1;
 		}
 	
 		DBG("query_db: AVP '%.*s'='%.*s' has been added\n", name_str.len, 

