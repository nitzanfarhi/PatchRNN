commit ee684c5ed18df4cc703e00c783f7ea89fbb500fe
Author: dirk <dirk@git.imagemagick.org>
Date:   Sun May 18 06:47:17 2014 +0000

    Added NULL checks.

diff --git a/coders/dds.c b/coders/dds.c
index 18e547cc2..dd6034e82 100644
--- a/coders/dds.c
+++ b/coders/dds.c
@@ -1704,8 +1704,9 @@ static Image *ReadDDSImage(const ImageInfo *image_info,ExceptionInfo *exception)
     alpha_trait;
   
   size_t
-    n, num_images;
-  
+    n,
+    num_images;
+
   /*
     Open image file.
   */
@@ -1822,10 +1823,7 @@ static Image *ReadDDSImage(const ImageInfo *image_info,ExceptionInfo *exception)
         /* Start a new image */
         AcquireNextImage(image_info,image,exception);
         if (GetNextImageInList(image) == (Image *) NULL)
-          {
-            image = DestroyImageList(image);
-            return((Image *) NULL);
-          }
+          return(DestroyImageList(image));
         image=SyncNextImageInList(image);
       }
     
@@ -2770,6 +2768,8 @@ static void WriteFourCC(Image *image, const size_t compression,
         rows = image->rows - y;
 
       p=GetVirtualPixels(image,x,y,columns,rows,exception);
+      if (p == (const Quantum *) NULL)
+        break;
 
       for (i=0; i<16; i++)
       {
@@ -3007,6 +3007,8 @@ static void WriteUncompressed(Image *image, ExceptionInfo *exception)
   for (y=0; y < (ssize_t) image->rows; y++)
   {
     p=GetVirtualPixels(image,0,y,image->columns,1,exception);
+    if (p == (const Quantum *) NULL)
+      break;
 
     for (x=0; x < (ssize_t) image->columns; x++)
     {

