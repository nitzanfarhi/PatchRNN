commit 5892c32f8a2d5a37d4c2ff1df62f6e8a2664abdb
Author: Chris Leech <christopher.leech@intel.com>
Date:   Tue Aug 25 13:59:14 2009 -0700

    [SCSI] fcoe: fix missing error check in call to fcoe_if_init
    
    fcoe_if_init() can fail, but it's return value wasn't checked
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: Robert Love <robert.w.love@intel.com>
    Signed-off-by: James Bottomley <James.Bottomley@suse.de>

diff --git a/drivers/scsi/fcoe/fcoe.c b/drivers/scsi/fcoe/fcoe.c
index a39d370bccf8..d205ac08d07c 100644
--- a/drivers/scsi/fcoe/fcoe.c
+++ b/drivers/scsi/fcoe/fcoe.c
@@ -1900,7 +1900,9 @@ static int __init fcoe_init(void)
 	/* Setup link change notification */
 	fcoe_dev_setup();
 
-	fcoe_if_init();
+	rc = fcoe_if_init();
+	if (rc)
+		goto out_free;
 
 	return 0;
 

