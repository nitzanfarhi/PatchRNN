commit c02603e71337ab4e4d7aa43abbb6d3b6482f1fc2
Author: Alexander V. Lukyanov <lav@yars.free.net>
Date:   Tue Aug 13 10:12:36 2013 +0400

    * SFtp.cc: add a workaround for RouterOS v6 - symlink as the root dir.

diff --git a/src/SFtp.cc b/src/SFtp.cc
index 088b2fe6..e66caf1a 100644
--- a/src/SFtp.cc
+++ b/src/SFtp.cc
@@ -815,8 +815,10 @@ void SFtp::HandleExpect(Expect *e)
       if(reply->TypeIs(SSH_FXP_ATTRS))
       {
 	 const FileAttrs *a=((Reply_ATTRS*)reply)->GetAttrs();
-	 if(a->type!=SSH_FILEXFER_TYPE_DIRECTORY)
+	 if(a->type!=SSH_FILEXFER_TYPE_DIRECTORY
+	 && a->type!=SSH_FILEXFER_TYPE_SYMLINK)	// workaround for RouterOS v6
 	 {
+	    LogError(1,"got file type %d",a->type);
 	    cache->SetDirectory(this,cwd,false);
 	    SetError(NO_FILE,strerror(ENOTDIR));
 	    break;

