commit 225f78b7ef589e52bbbb19c97d36de5b27982702
Author: Carl Eugen Hoyos <cehoyos@ag.or.at>
Date:   Sat Jun 29 17:50:07 2013 +0200

    Avoid a null pointer dereference on clean-up after oom in ac3 encoder.

diff --git a/libavcodec/ac3enc.c b/libavcodec/ac3enc.c
index a0b810e0d7..37c496cd15 100644
--- a/libavcodec/ac3enc.c
+++ b/libavcodec/ac3enc.c
@@ -2017,6 +2017,7 @@ av_cold int ff_ac3_encode_close(AVCodecContext *avctx)
     AC3EncodeContext *s = avctx->priv_data;
 
     av_freep(&s->windowed_samples);
+    if (s->planar_samples)
     for (ch = 0; ch < s->channels; ch++)
         av_freep(&s->planar_samples[ch]);
     av_freep(&s->planar_samples);

