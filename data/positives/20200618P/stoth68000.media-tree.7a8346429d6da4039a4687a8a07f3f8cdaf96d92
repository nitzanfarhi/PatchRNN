commit 7a8346429d6da4039a4687a8a07f3f8cdaf96d92
Author: Daeseok Youn <daeseok.youn@gmail.com>
Date:   Tue Apr 14 15:43:02 2015 -0700

    ocfs2: avoid a pointless delay in o2cb_cluster_check()
    
    Fix an off-by-one when attempting to avoid an msleep() on the final loop
    iteration.
    
    Signed-off-by: Daeseok Youn <daeseok.youn@gmail.com>
    Cc: Mark Fasheh <mfasheh@suse.com>
    Cc: Joel Becker <jlbec@evilplan.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/fs/ocfs2/stack_o2cb.c b/fs/ocfs2/stack_o2cb.c
index 1724d43d3da1..220cae7bbdbc 100644
--- a/fs/ocfs2/stack_o2cb.c
+++ b/fs/ocfs2/stack_o2cb.c
@@ -295,7 +295,7 @@ static int o2cb_cluster_check(void)
 		set_bit(node_num, netmap);
 		if (!memcmp(hbmap, netmap, sizeof(hbmap)))
 			return 0;
-		if (i < O2CB_MAP_STABILIZE_COUNT)
+		if (i < O2CB_MAP_STABILIZE_COUNT - 1)
 			msleep(1000);
 	}
 

