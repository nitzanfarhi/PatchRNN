commit 82505611493fc473359ceba2f32509557c790bae
Author: Reimar DÃ¶ffinger <Reimar.Doeffinger@gmx.de>
Date:   Wed Jul 28 16:27:16 2010 +0000

    Check for udp_set_remote_url error.
    Fixes issue 1784 (hang with nonsense URL/no network available).
    
    Originally committed as revision 24575 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavformat/udp.c b/libavformat/udp.c
index 6bd5c9c395..3636d8c8ff 100644
--- a/libavformat/udp.c
+++ b/libavformat/udp.c
@@ -355,7 +355,8 @@ static int udp_open(URLContext *h, const char *uri, int flags)
         if (flags & URL_WRONLY)
             goto fail;
     } else {
-        udp_set_remote_url(h, uri);
+        if (udp_set_remote_url(h, uri) < 0)
+            goto fail;
     }
 
     if (s->is_multicast && !(h->flags & URL_WRONLY))

