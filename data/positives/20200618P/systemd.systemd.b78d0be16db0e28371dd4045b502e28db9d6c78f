commit b78d0be16db0e28371dd4045b502e28db9d6c78f
Author: Lennart Poettering <lennart@poettering.net>
Date:   Wed Jan 27 04:55:42 2010 +0100

    don't choke if there are no sockets for a service

diff --git a/service.c b/service.c
index fce42045a..cef94175f 100644
--- a/service.c
+++ b/service.c
@@ -285,6 +285,9 @@ static int service_collect_fds(Service *s, int **fds, unsigned *n_fds) {
                 p = manager_get_unit(UNIT(s)->meta.manager, k);
                 free(k);
 
+                if (!p)
+                        continue;
+
                 if ((r = socket_collect_fds(SOCKET(p), &cfds, &cn_fds)) < 0)
                         goto fail;
 

