commit 83a3fd3cf0bfdadfdfc633f6437f9121e28252b9
Author: Lu Guanqun <guanqun.lu@intel.com>
Date:   Wed Apr 6 10:20:32 2011 +0800

    ASoC: sst_platform: free the resources on fail path
    
    Signed-off-by: Lu Guanqun <guanqun.lu@intel.com>
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/sound/soc/mid-x86/sst_platform.c b/sound/soc/mid-x86/sst_platform.c
index bd9d928dc767..848ad3ce732e 100644
--- a/sound/soc/mid-x86/sst_platform.c
+++ b/sound/soc/mid-x86/sst_platform.c
@@ -252,6 +252,8 @@ static int sst_platform_open(struct snd_pcm_substream *substream)
 	ret_val = register_sst_card(stream->sstdrv_ops);
 	if (ret_val) {
 		pr_err("sst: sst card registration failed\n");
+		kfree(stream->sstdrv_ops);
+		kfree(stream);
 		return ret_val;
 	}
 	runtime->private_data = stream;

