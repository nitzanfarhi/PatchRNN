commit 4fd7055bdfb9a750f9ea316832d84fc218ea8015
Author: Love Hörnquist Åstrand <lha@kth.se>
Date:   Sun Apr 2 01:24:52 2006 +0000

    (get_cell_and_realm): plug a memory leak, found by IBM checker.
    
    
    git-svn-id: svn://svn.h5l.se/heimdal/trunk/heimdal@16942 ec53bebd-3082-4978-b11e-865c3cabbd6b

diff --git a/lib/krb5/keytab_keyfile.c b/lib/krb5/keytab_keyfile.c
index 7267e8295..8e119e8da 100644
--- a/lib/krb5/keytab_keyfile.c
+++ b/lib/krb5/keytab_keyfile.c
@@ -94,6 +94,7 @@ get_cell_and_realm (krb5_context context,
     f = fopen (AFS_SERVERMAGICKRBCONF, "r");
     if (f != NULL) {
 	if (fgets (buf, sizeof(buf), f) == NULL) {
+	    free (d->cell);
 	    fclose (f);
 	    krb5_set_error_string (context, "no realm in %s",
 				   AFS_SERVERMAGICKRBCONF);

