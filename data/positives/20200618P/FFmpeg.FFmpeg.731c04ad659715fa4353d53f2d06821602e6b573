commit 731c04ad659715fa4353d53f2d06821602e6b573
Author: Stefano Sabatini <stefano.sabatini-lala@poste.it>
Date:   Tue Jan 19 21:52:00 2010 +0000

    Make selfTest() perform tests where both the input and output formats
    are supported, avoid pointless loops.
    
    Originally committed as revision 30377 to svn://svn.mplayerhq.hu/mplayer/trunk/libswscale

diff --git a/libswscale/swscale-example.c b/libswscale/swscale-example.c
index 7c43a39467..c8faf80f55 100644
--- a/libswscale/swscale-example.c
+++ b/libswscale/swscale-example.c
@@ -198,10 +198,16 @@ static void selfTest(uint8_t *ref[4], int refStride[4], int w, int h)
     enum PixelFormat srcFormat, dstFormat;
 
     for (srcFormat = 0; srcFormat < PIX_FMT_NB; srcFormat++) {
+        if (!sws_isSupportedInput(srcFormat))
+            continue;
+
         for (dstFormat = 0; dstFormat < PIX_FMT_NB; dstFormat++) {
             int i, j, k;
             int res = 0;
 
+            if (!sws_isSupportedOutput(dstFormat))
+                continue;
+
             printf("%s -> %s\n",
                    sws_format_name(srcFormat),
                    sws_format_name(dstFormat));

