commit fb139dfeef9558a12ffdbf9e26951fd1a9304f3b
Author: Alexander Stein <alexander.stein@systec-electronic.com>
Date:   Wed Jun 15 15:08:55 2011 -0700

    drivers/tty/serial/pch_uart.c: don't oops if dmi_get_system_info returns NULL
    
    If dmi_get_system_info() returns NULL, pch_uart_init_port() will
    dereferencea a zero pointer.
    
    This oops was observed on an Atom based board which has no BIOS, but
    a bootloder which doesn't provide DMI data.
    
    Signed-off-by: Alexander Stein <alexander.stein@systec-electronic.com>
    Cc: Greg KH <gregkh@suse.de>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/drivers/tty/serial/pch_uart.c b/drivers/tty/serial/pch_uart.c
index f2cb7503fcb2..465210930890 100644
--- a/drivers/tty/serial/pch_uart.c
+++ b/drivers/tty/serial/pch_uart.c
@@ -1397,6 +1397,7 @@ static struct eg20t_port *pch_uart_init_port(struct pci_dev *pdev,
 	int fifosize, base_baud;
 	int port_type;
 	struct pch_uart_driver_data *board;
+	const char *board_name;
 
 	board = &drv_dat[id->driver_data];
 	port_type = board->port_type;
@@ -1412,7 +1413,8 @@ static struct eg20t_port *pch_uart_init_port(struct pci_dev *pdev,
 	base_baud = 1843200; /* 1.8432MHz */
 
 	/* quirk for CM-iTC board */
-	if (strstr(dmi_get_system_info(DMI_BOARD_NAME), "CM-iTC"))
+	board_name = dmi_get_system_info(DMI_BOARD_NAME);
+	if (board_name && strstr(board_name, "CM-iTC"))
 		base_baud = 192000000; /* 192.0MHz */
 
 	switch (port_type) {

