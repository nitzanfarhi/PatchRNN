commit 065896e904eac598bafd5e607b944da34c4aaf09
Author: Michael Hennerich <michael.hennerich@analog.com>
Date:   Thu Feb 24 16:34:50 2011 +0100

    IIO: Documentation: generic_buffer example: Avoid NULL pointer dereference
    
    In case optarg n is not given return/exit
    
    Signed-off-by: Michael Hennerich <michael.hennerich@analog.com>
    Acked-by: Jonathan Cameron <jic23@cam.ac.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/drivers/staging/iio/Documentation/generic_buffer.c b/drivers/staging/iio/Documentation/generic_buffer.c
index 771b23627797..3cc18ab4ebfd 100644
--- a/drivers/staging/iio/Documentation/generic_buffer.c
+++ b/drivers/staging/iio/Documentation/generic_buffer.c
@@ -168,6 +168,9 @@ int main(int argc, char **argv)
 		}
 	}
 
+	if (device_name == NULL)
+		return -1;
+
 	/* Find the device requested */
 	dev_num = find_type_by_name(device_name, "device");
 	if (dev_num < 0) {

