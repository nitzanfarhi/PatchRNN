commit 8bea8c42393a80a03f5f4aa40f3030d8b4182f55
Author: Jimmy Yang <jimmy.yang@oracle.com>
Date:   Thu Feb 17 01:40:18 2011 -0800

    Fix Bug #60042 Crash in ha_innobase::open
    
    rb://597 approved by Sunny Bains

diff --git a/storage/innobase/handler/ha_innodb.cc b/storage/innobase/handler/ha_innodb.cc
index 516a6ba960c..4e9321271f4 100644
--- a/storage/innobase/handler/ha_innodb.cc
+++ b/storage/innobase/handler/ha_innodb.cc
@@ -4054,9 +4054,14 @@ retry:
 			that user can adopt necessary measures for the
 			mismatch while still being accessible to the table
 			date. */
-			ref_length = table->key_info[0].key_length;
+			if (!table->key_info) {
+				ut_ad(!table->s->keys);
+				ref_length = 0;
+			} else {
+				ref_length = table->key_info[0].key_length;
+			}
 
-			/* Find correspoinding cluster index
+			/* Find corresponding cluster index
 			key length in MySQL's key_info[] array */
 			for (ulint i = 0; i < table->s->keys; i++) {
 				dict_index_t*	index;

