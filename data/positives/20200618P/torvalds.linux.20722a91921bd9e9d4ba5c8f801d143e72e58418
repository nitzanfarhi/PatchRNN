commit 20722a91921bd9e9d4ba5c8f801d143e72e58418
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Mar 14 13:19:08 2006 +1100

    [XFS] Fix a mutex_destroy diagnostic about a locked-mutex-on-destroy from
    quota code.
    
    SGI-PV: 949149
    SGI-Modid: xfs-linux-melb:xfs-kern:25123a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

diff --git a/fs/xfs/quota/xfs_qm.c b/fs/xfs/quota/xfs_qm.c
index 7c0e39dc6189..fd4abb8a32c5 100644
--- a/fs/xfs/quota/xfs_qm.c
+++ b/fs/xfs/quota/xfs_qm.c
@@ -2788,9 +2788,7 @@ xfs_qm_freelist_destroy(xfs_frlist_t *ql)
 		xfs_qm_dqdestroy(dqp);
 		dqp = nextdqp;
 	}
-	/*
-	 * Don't bother about unlocking.
-	 */
+	mutex_unlock(&ql->qh_lock);
 	mutex_destroy(&ql->qh_lock);
 
 	ASSERT(ql->qh_nelems == 0);

