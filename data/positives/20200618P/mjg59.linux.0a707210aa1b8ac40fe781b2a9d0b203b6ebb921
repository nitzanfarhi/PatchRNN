commit 0a707210aa1b8ac40fe781b2a9d0b203b6ebb921
Author: Johannes Weiner <hannes@saeurebad.de>
Date:   Tue Jul 8 10:29:42 2008 +0200

    lguest: fix switcher_page leak on unload
    
    map_switcher allocates the array, unmap_switcher has to free it
    accordingly.
    
    Signed-off-by: Johannes Weiner <hannes@saeurebad.de>
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>

diff --git a/drivers/lguest/core.c b/drivers/lguest/core.c
index 5eea4356d703..90663e01a56e 100644
--- a/drivers/lguest/core.c
+++ b/drivers/lguest/core.c
@@ -135,6 +135,7 @@ static void unmap_switcher(void)
 	/* Now we just need to free the pages we copied the switcher into */
 	for (i = 0; i < TOTAL_SWITCHER_PAGES; i++)
 		__free_pages(switcher_page[i], 0);
+	kfree(switcher_page);
 }
 
 /*H:032

