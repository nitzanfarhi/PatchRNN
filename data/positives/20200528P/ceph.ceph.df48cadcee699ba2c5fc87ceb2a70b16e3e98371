commit df48cadcee699ba2c5fc87ceb2a70b16e3e98371
Author: Greg Farnum <gregf@hq.newdream.net>
Date:   Mon Sep 21 14:13:19 2009 -0700

    uclient: Don't *always* set_dentry_wanted() on MClientRequests.

diff --git a/src/client/Client.cc b/src/client/Client.cc
index 8ecd4800ba..f2d2245c3e 100644
--- a/src/client/Client.cc
+++ b/src/client/Client.cc
@@ -1050,7 +1050,8 @@ void Client::send_request(MetaRequest *request, int mds)
   dout(10) << "send_request rebuilding request " << request->get_tid()
 	   << " for mds" << mds << dendl;
   r = make_request_from_Meta(request);
-  r->set_dentry_wanted();
+  if (request->dentry)
+    r->set_dentry_wanted();
   if (request->got_unsafe)
     r->set_replayed_op();
 

