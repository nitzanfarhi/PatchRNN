commit 525782f33ff4be92bb27967c021fc244c92bdebc
Author: Zdenek Kabelac <kabi@informatics.muni.cz>
Date:   Tue Oct 23 19:02:55 2001 +0000

    * prevent crash in decoder
    
    Originally committed as revision 179 to svn://svn.ffmpeg.org/ffmpeg/trunk

diff --git a/libavcodec/msmpeg4.c b/libavcodec/msmpeg4.c
index aa4202998..01e3d5438 100644
--- a/libavcodec/msmpeg4.c
+++ b/libavcodec/msmpeg4.c
@@ -664,7 +664,7 @@ int msmpeg4_decode_mb(MpegEncContext *s,
 
     /* special slice handling */
     if (s->mb_x == 0) {
-        if ((s->mb_y % s->slice_height) == 0) {
+        if (s->slice_height && (s->mb_y % s->slice_height) == 0) {
             int wrap;
             /* reset DC pred (set previous line to 1024) */
             wrap = 2 * s->mb_width + 2;

