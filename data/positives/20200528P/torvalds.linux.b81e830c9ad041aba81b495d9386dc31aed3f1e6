commit b81e830c9ad041aba81b495d9386dc31aed3f1e6
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Wed Feb 7 10:12:04 2018 +0100

    platform/mellanox: mlxreg-hotplug: Fix uninitialized variable
    
    With gcc-4.1.2:
    
        drivers/platform/mellanox/mlxreg-hotplug.c: In function ‘mlxreg_hotplug_health_work_helper’:
        drivers/platform/mellanox/mlxreg-hotplug.c:347: warning: ‘ret’ is used uninitialized in this function
    
    Indeed, if mlxreg_core_item.count is zero, ret is used uninitialized.
    
    While this is unlikely to happen (it is set to ARRAY_SIZE(...) in x86
    board files), this is done in another source file, so fix this by
    preinitializing ret to zero.
    
    Fixes: c6acad68eb2dbffd ("platform/mellanox: mlxreg-hotplug: Modify to use a regmap interface")
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Acked-by: Vadim Pasternak <vadimp@mellanox.com>
    Signed-off-by: Darren Hart (VMware) <dvhart@infradead.org>

diff --git a/drivers/platform/mellanox/mlxreg-hotplug.c b/drivers/platform/mellanox/mlxreg-hotplug.c
index 0dfa1ca0d05b..313cf8ad77bf 100644
--- a/drivers/platform/mellanox/mlxreg-hotplug.c
+++ b/drivers/platform/mellanox/mlxreg-hotplug.c
@@ -300,7 +300,7 @@ mlxreg_hotplug_health_work_helper(struct mlxreg_hotplug_priv_data *priv,
 {
 	struct mlxreg_core_data *data = item->data;
 	u32 regval;
-	int i, ret;
+	int i, ret = 0;
 
 	for (i = 0; i < item->count; i++, data++) {
 		/* Mask event. */

