commit 66cc5b8e50af87b0bbd0f179d76d2826f4549c13
Author: Kyle Manna <kyle@kylemanna.com>
Date:   Thu Aug 11 22:33:12 2011 -0500

    mfd: Copy the device pointer to the twl4030-madc structure
    
    Worst case this fixes the following error:
    [   72.086212] (NULL device *): conversion timeout!
    
    Best case it prevents a crash
    
    Signed-off-by: Kyle Manna <kyle@kylemanna.com>
    Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>

diff --git a/drivers/mfd/twl4030-madc.c b/drivers/mfd/twl4030-madc.c
index b5d598c3aa71..cb44b53dee35 100644
--- a/drivers/mfd/twl4030-madc.c
+++ b/drivers/mfd/twl4030-madc.c
@@ -706,6 +706,8 @@ static int __devinit twl4030_madc_probe(struct platform_device *pdev)
 	if (!madc)
 		return -ENOMEM;
 
+	madc->dev = &pdev->dev;
+
 	/*
 	 * Phoenix provides 2 interrupt lines. The first one is connected to
 	 * the OMAP. The other one can be connected to the other processor such

