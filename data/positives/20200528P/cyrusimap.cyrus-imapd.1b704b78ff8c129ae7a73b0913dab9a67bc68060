commit 1b704b78ff8c129ae7a73b0913dab9a67bc68060
Author: Robert Stepanek <rsto@paranoia.at>
Date:   Fri Oct 14 13:39:34 2016 +1100

    util.h: make buf_new return a pointer to buf

diff --git a/lib/util.h b/lib/util.h
index 31a770ef5..20fca59a5 100644
--- a/lib/util.h
+++ b/lib/util.h
@@ -245,7 +245,7 @@ struct buf {
 };
 #define BUF_INITIALIZER { NULL, 0, 0, 0 }
 
-#define buf_new() xzmalloc(sizeof(struct buf))
+#define buf_new() ((struct buf *) xzmalloc(sizeof(struct buf)))
 #define buf_destroy(b) do { buf_free((b)); free((b)); } while (0)
 #define buf_ensure(b, n) do { if ((b)->alloc < (b)->len + (n)) _buf_ensure((b), (n)); } while (0)
 #define buf_putc(b, c) do { buf_ensure((b), 1); (b)->s[(b)->len++] = (c); } while (0)

