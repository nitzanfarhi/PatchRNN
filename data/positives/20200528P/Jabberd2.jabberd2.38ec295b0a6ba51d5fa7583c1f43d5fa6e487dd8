commit 38ec295b0a6ba51d5fa7583c1f43d5fa6e487dd8
Author: Tomasz Sterna <tomek@xiaoka.com>
Date:   Sun Jan 18 20:07:21 2009 +0000

    Forgot to free strdup memory - fixed

diff --git a/s2s/util.c b/s2s/util.c
index 8a4c63f..9629b19 100644
--- a/s2s/util.c
+++ b/s2s/util.c
@@ -40,13 +40,18 @@ char *s2s_route_key(pool_t p, char *local, char *remote) {
 /** match route key - used for searching route hash */
 int s2s_route_key_match(char *local, char *remote, char *rkey) {
     char *klocal, *kremote;
+    int ret;
 
     klocal = strdup(rkey);
     kremote = strchr(klocal, '/');
     if(kremote != NULL) *kremote++ = '\0';
 
-    return (local == NULL || (klocal != NULL && !strcmp(local, klocal)))
+    ret  = (local == NULL || (klocal != NULL && !strcmp(local, klocal)))
     	&& (remote == NULL || (kremote != NULL && !strcmp(remote, kremote)));
+
+    free(klocal);
+
+    return ret;
 }
 
 /** generate a dialback key */

