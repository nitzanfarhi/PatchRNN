From 21eae25a8db5fdcd112dbcfcd9e5c37e32d32e2f Mon Sep 17 00:00:00 2001
From: dirk <dirk@git.imagemagick.org>
Date: Mon, 29 Dec 2014 22:23:41 +0000
Subject: [PATCH] Moved EOF check.

---
 coders/dds.c | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

diff --git a/coders/dds.c b/coders/dds.c
index c5016b2d0e..2145736427 100644
--- a/coders/dds.c
+++ b/coders/dds.c
@@ -2369,16 +2369,16 @@ static MagickBooleanType SkipDXTMipmaps(Image *image,DDSInfo *dds_info,
   /*
     Only skip mipmaps for textures and cube maps
   */
+  if (EOFBlob(image) != MagickFalse)
+    {
+      ThrowFileException(exception,CorruptImageError,"UnexpectedEndOfFile",
+        image->filename);
+      return(MagickFalse);
+    }
   if (dds_info->ddscaps1 & DDSCAPS_MIPMAP
       && (dds_info->ddscaps1 & DDSCAPS_TEXTURE
           || dds_info->ddscaps2 & DDSCAPS2_CUBEMAP))
     {
-      if (EOFBlob(image) != MagickFalse)
-        {
-          ThrowFileException(exception,CorruptImageError,"UnexpectedEndOfFile",
-            image->filename);
-          return(MagickFalse);
-        }
       w = DIV2(dds_info->width);
       h = DIV2(dds_info->height);
 
@@ -2416,16 +2416,16 @@ static MagickBooleanType SkipRGBMipmaps(Image *image,DDSInfo *dds_info,
   /*
     Only skip mipmaps for textures and cube maps
   */
+  if (EOFBlob(image) != MagickFalse)
+    {
+      ThrowFileException(exception,CorruptImageError,"UnexpectedEndOfFile",
+        image->filename);
+      return(MagickFalse);
+    }
   if (dds_info->ddscaps1 & DDSCAPS_MIPMAP
       && (dds_info->ddscaps1 & DDSCAPS_TEXTURE
           || dds_info->ddscaps2 & DDSCAPS2_CUBEMAP))
     {
-      if (EOFBlob(image) != MagickFalse)
-        {
-          ThrowFileException(exception,CorruptImageError,"UnexpectedEndOfFile",
-            image->filename);
-          return(MagickFalse);
-        }
       w = DIV2(dds_info->width);
       h = DIV2(dds_info->height);
 
