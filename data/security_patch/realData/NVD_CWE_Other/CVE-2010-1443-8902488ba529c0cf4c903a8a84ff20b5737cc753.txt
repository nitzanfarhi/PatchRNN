From 8902488ba529c0cf4c903a8a84ff20b5737cc753 Mon Sep 17 00:00:00 2001
From: =?utf8?q?R=C3=A9mi=20Denis-Courmont?= <remi@remlab.net>
Date: Tue, 2 Mar 2010 21:30:08 +0200
Subject: [PATCH] XSPF: fix NULL dereference on empty <location>

---
 modules/demux/playlist/xspf.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/modules/demux/playlist/xspf.c b/modules/demux/playlist/xspf.c
index c24e0dab61..278ad103ef 100644
--- a/modules/demux/playlist/xspf.c
+++ b/modules/demux/playlist/xspf.c
@@ -538,6 +538,9 @@ static bool parse_track_node COMPLEX_INTERFACE
                 /* special case: location */
                 if( !strcmp( p_handler->name, "location" ) )
                 {
+                    if( psz_value == NULL )
+                        input_item_SetURI( p_new_input, "vlc://nop" );
+                    else
                     /* FIXME: This is broken. Scheme-relative (//...) locations
                      * and anchors (#...) are not resolved correctly. Also,
                      * host-relative (/...) and directory-relative locations
-- 
2.11.0

