From 81023659c7de5ac2637b4a879195efef50846102 Mon Sep 17 00:00:00 2001
From: =?utf8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Mon, 20 May 2019 11:43:26 +0200
Subject: [PATCH] mkv: Fix potential double free

---
 modules/demux/mkv/util.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/modules/demux/mkv/util.cpp b/modules/demux/mkv/util.cpp
index b25e850dc0..afed921e6d 100644
--- a/modules/demux/mkv/util.cpp
+++ b/modules/demux/mkv/util.cpp
@@ -88,6 +88,7 @@ int32_t zlib_decompress_extra( demux_t * p_demux, mkv_track_t & tk )
         msg_Err( p_demux, "Couldn't allocate buffer to inflate data, ignore track %u",
                  tk.i_number );
         inflateEnd( &d_stream );
+        tk.p_extra_data = NULL;
         return 1;
     }
 
-- 
2.11.0

