From 1df49142bab1b7bccd11392aa9e819e297d21a6e Mon Sep 17 00:00:00 2001
From: Michael Niedermayer <michaelni@gmx.at>
Date: Fri, 20 Apr 2012 17:42:18 +0200
Subject: [PATCH] avsdec: Set dimensions instead of relying on the demuxer.

This fixes out of array writes.

Found-by: Mateusz "j00ru" Jurczyk and Gynvael Coldwind
Signed-off-by: Michael Niedermayer <michaelni@gmx.at>
---
 libavcodec/avs.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/libavcodec/avs.c b/libavcodec/avs.c
index 17d4e10fa4..801e1bcd78 100644
--- a/libavcodec/avs.c
+++ b/libavcodec/avs.c
@@ -162,6 +162,7 @@ static av_cold int avs_decode_init(AVCodecContext * avctx)
     AvsContext *const avs = avctx->priv_data;
     avctx->pix_fmt = PIX_FMT_PAL8;
     avcodec_get_frame_defaults(&avs->picture);
+    avcodec_set_dimensions(avctx, 318, 198);
     return 0;
 }
 
-- 
2.11.0

