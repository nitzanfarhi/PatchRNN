From 1c77f7a869bdea2a34799d774460d1f9983d45f0 Mon Sep 17 00:00:00 2001
From: Ditang Chen <ditang.c@gmail.com>
Date: Mon, 13 Jul 2015 10:36:16 -0400
Subject: [PATCH] rendezvous_request: check the makefd_xprt return value

xprt may return NULL, so check the return value is necessary.

Reviewed-by: Chuck Lever <chuck.lever@oracle.com>
Signed-off-by: Ditang Chen <ditang.c@gmail.com>
Signed-off-by: Steve Dickson <steved@redhat.com>
---
 src/svc_vc.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/svc_vc.c b/src/svc_vc.c
index 6848c09..3cddcbc 100644
--- a/src/svc_vc.c
+++ b/src/svc_vc.c
@@ -337,6 +337,8 @@ again:
 	 */
 
 	newxprt = makefd_xprt(sock, r->sendsize, r->recvsize);
+	if (!newxprt)
+		return (FALSE);
 
 	if (!__rpc_set_netbuf(&newxprt->xp_rtaddr, &addr, len))
 		return (FALSE);
-- 
1.8.3.1

