From 81c8ef785b079980ad5b46be4fe7c7bf156dbf65 Mon Sep 17 00:00:00 2001
From: Behdad Esfahbod <behdad@behdad.org>
Date: Tue, 10 May 2011 15:47:24 -0400
Subject: Fix crash!

---
 src/harfbuzz-gpos.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/harfbuzz-gpos.c b/src/harfbuzz-gpos.c
index a216005..7bd3b3b 100644
--- a/src/harfbuzz-gpos.c
+++ b/src/harfbuzz-gpos.c
@@ -3012,6 +3012,9 @@ static HB_Error  Lookup_MarkMarkPos( GPOS_Instance*    gpi,
     j--;
   }
 
+  if ( i > buffer->in_pos )
+    return HB_Err_Not_Covered;
+
   error = _HB_OPEN_Coverage_Index( &mmp->Mark2Coverage, IN_GLYPH( j ),
 			  &mark2_index );
   if ( error )
-- 
cgit v1.1

